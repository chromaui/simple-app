import{e as t,I as i,f as n,g as e,h as r,j as s,k as o,l as a,b as u,m as c,C as h,i as f,n as l,D as d,s as v,t as p,o as m,p as b,q as T,r as y,u as g,v as S,w,x as A,y as P,z as M,A as E,d as I,B as k,E as D,F as C,G,H as O,J as B,K as x,L as R,M as N,N as H,O as j,P as _,Q as U,R as L,S as V,T as F,U as W,V as X,W as $,X as z,Y as K,Z as q,_ as Y,$ as Q,a0 as J,a1 as Z,a2 as tt,a3 as it,a4 as nt,a5 as et,a6 as rt,a7 as st,a8 as ot,a9 as at,aa as ut,ab as ct,ac as ht,ad as ft,ae as lt,af as dt,ag as vt,ah as pt,ai as mt,aj as bt,ak as Tt,al as yt,am as gt,an as St,ao as wt,ap as At,aq as Pt}from"./p-384bfcf6.js";import"./p-0f3d65ca.js";import{c as Mt,a as Et,b as It,g as kt}from"./p-8cff990b.js";const Dt=["mp4","avi","mov","m4v","3gp","3gpp"],Ct=["mp3","wav","m4a"],Gt=["png","jpg","jpeg","gif","bmp","svg"],Ot=["doc","docx","ppt","pptx","xls","xlsx","pdf","csv","txt"];function Bt(t){if(t){let i=t._filename;if(i&&i.includes(".")||(i=t._downloadURL||t.name||t),i&&i.split){if(i.startsWith("http")){let t=i.split(".");return t&&t.length>0?t[t.length-1].toLowerCase().trim():""}return i.split(".").pop().toLowerCase()}}return""}function xt(t){let i=Bt(t);return Gt.indexOf(i)>=0}function Rt(t){let i=Bt(t);return Dt.indexOf(i)>=0}function Nt(t){let i=Bt(t);return Ct.indexOf(i)>=0}function Ht(t){let i=Bt(t);return Ot.indexOf(i)>=0}function jt(t){return"pdf"===Bt(t)}function _t(t){return xt(t)?"image":Ht(t)?"document":Rt(t)?"video":Nt(t)?"audio":"unknown"}for(var Ut,Lt=(Ut=function(t,i){return(Ut=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var n in i)i.hasOwnProperty(n)&&(t[n]=i[n])})(t,i)},function(t,i){function n(){this.constructor=t}Ut(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}),Vt=new(function(i){function n(){return null!==i&&i.apply(this,arguments)||this}return Lt(n,i),n.prototype.getSupportInfo=function(){return t(this,"getSupportInfo",{},arguments)},n.prototype.canViewDocument=function(i,n,e,r,s,o,a){return t(this,"canViewDocument",{sync:!0},arguments)},n.prototype.viewDocument=function(i,n,e,r,s,o,a){return t(this,"viewDocument",{sync:!0},arguments)},n.pluginName="Document Viewer",n.plugin="cordova-plugin-document-viewer",n.pluginRef="SitewaertsDocumentViewer",n.repo="https://github.com/sitewaerts/cordova-plugin-document-viewer",n.platforms=["Android","iOS","Windows"],n}(i)),Ft=function(){var t=function(i,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var n in i)i.hasOwnProperty(n)&&(t[n]=i[n])})(i,n)};return function(i,n){function e(){this.constructor=i}t(i,n),i.prototype=null===n?Object.create(n):(e.prototype=n.prototype,new e)}}(),Wt=new(function(t){function i(){var i=null!==t&&t.apply(this,arguments)||this;return i.cordovaFileError={1:"NOT_FOUND_ERR",2:"SECURITY_ERR",3:"ABORT_ERR",4:"NOT_READABLE_ERR",5:"ENCODING_ERR",6:"NO_MODIFICATION_ALLOWED_ERR",7:"INVALID_STATE_ERR",8:"SYNTAX_ERR",9:"INVALID_MODIFICATION_ERR",10:"QUOTA_EXCEEDED_ERR",11:"TYPE_MISMATCH_ERR",12:"PATH_EXISTS_ERR",13:"WRONG_ENTRY_TYPE",14:"DIR_READ_ERR"},i}return Ft(i,t),i.prototype.getFreeDiskSpace=function(){var t=this;return function(){if(!0===n(t))return e(function(t,i){cordova.exec(t,i,"File","getFreeDiskSpace",[])})}()},i.prototype.checkDir=function(t,i){var e=this;return function(){if(!0===n(e)){if(/^\//.test(i)){var r=new FileError(5);return r.message="directory cannot start with /",Promise.reject(r)}return e.resolveDirectoryUrl(t+i).then(function(){return!0})}}()},i.prototype.createDir=function(t,i,e){var r=this;return function(){if(!0===n(r)){if(/^\//.test(i)){var s=new FileError(5);return s.message="directory cannot start with /",Promise.reject(s)}var o={create:!0};return e||(o.exclusive=!0),r.resolveDirectoryUrl(t).then(function(t){return r.getDirectory(t,i,o)})}}()},i.prototype.removeDir=function(t,i){var e=this;return function(){if(!0===n(e)){if(/^\//.test(i)){var r=new FileError(5);return r.message="directory cannot start with /",Promise.reject(r)}return e.resolveDirectoryUrl(t).then(function(t){return e.getDirectory(t,i,{create:!1})}).then(function(t){return e.remove(t)})}}()},i.prototype.moveDir=function(t,i,e,r){var s=this;return function(){if(!0===n(s)){if(/^\//.test(r=r||i)){var o=new FileError(5);return o.message="directory cannot start with /",Promise.reject(o)}return s.resolveDirectoryUrl(t).then(function(t){return s.getDirectory(t,i,{create:!1})}).then(function(t){return s.resolveDirectoryUrl(e).then(function(i){return s.move(t,i,r)})})}}()},i.prototype.copyDir=function(t,i,e,r){var s=this;return function(){if(!0===n(s)){if(/^\//.test(r)){var o=new FileError(5);return o.message="directory cannot start with /",Promise.reject(o)}return s.resolveDirectoryUrl(t).then(function(t){return s.getDirectory(t,i,{create:!1})}).then(function(t){return s.resolveDirectoryUrl(e).then(function(i){return s.copy(t,i,r)})})}}()},i.prototype.listDir=function(t,i){var e=this;return function(){if(!0===n(e)){if(/^\//.test(i)){var r=new FileError(5);return r.message="directory cannot start with /",Promise.reject(r)}return e.resolveDirectoryUrl(t).then(function(t){return e.getDirectory(t,i,{create:!1,exclusive:!1})}).then(function(t){var i=t.createReader();return e.readEntries(i)})}}()},i.prototype.removeRecursively=function(t,i){var e=this;return function(){if(!0===n(e)){if(/^\//.test(i)){var r=new FileError(5);return r.message="directory cannot start with /",Promise.reject(r)}return e.resolveDirectoryUrl(t).then(function(t){return e.getDirectory(t,i,{create:!1})}).then(function(t){return e.rimraf(t)})}}()},i.prototype.checkFile=function(t,i){var e=this;return function(){if(!0===n(e)){if(/^\//.test(i)){var r=new FileError(5);return r.message="file cannot start with /",Promise.reject(r)}return e.resolveLocalFilesystemUrl(t+i).then(function(t){if(t.isFile)return!0;var i=new FileError(13);return i.message="input is not a file",Promise.reject(i)})}}()},i.prototype.createFile=function(t,i,e){var r=this;return function(){if(!0===n(r)){if(/^\//.test(i)){var s=new FileError(5);return s.message="file-name cannot start with /",Promise.reject(s)}var o={create:!0};return e||(o.exclusive=!0),r.resolveDirectoryUrl(t).then(function(t){return r.getFile(t,i,o)})}}()},i.prototype.removeFile=function(t,i){var e=this;return function(){if(!0===n(e)){if(/^\//.test(i)){var r=new FileError(5);return r.message="file-name cannot start with /",Promise.reject(r)}return e.resolveDirectoryUrl(t).then(function(t){return e.getFile(t,i,{create:!1})}).then(function(t){return e.remove(t)})}}()},i.prototype.writeFile=function(t,i,e,r){var s=this;return void 0===r&&(r={}),function(){if(!0===n(s)){if(/^\//.test(i)){var o=new FileError(5);return o.message="file-name cannot start with /",Promise.reject(o)}var a={create:!r.append,exclusive:!r.replace};return s.resolveDirectoryUrl(t).then(function(t){return s.getFile(t,i,a)}).then(function(t){return s.writeFileEntry(t,e,r)})}}()},i.prototype.writeFileEntry=function(t,i,n){var e=this;return this.createWriter(t).then(function(t){return n.append&&t.seek(t.length),n.truncate&&t.truncate(n.truncate),e.write(t,i)}).then(function(){return t})},i.prototype.writeExistingFile=function(t,i,e){var r=this;return function(){if(!0===n(r))return r.writeFile(t,i,e,{replace:!0})}()},i.prototype.readAsText=function(t,i){var e=this;return function(){if(!0===n(e))return e.readFile(t,i,"Text")}()},i.prototype.readAsDataURL=function(t,i){var e=this;return function(){if(!0===n(e))return e.readFile(t,i,"DataURL")}()},i.prototype.readAsBinaryString=function(t,i){var e=this;return function(){if(!0===n(e))return e.readFile(t,i,"BinaryString")}()},i.prototype.readAsArrayBuffer=function(t,i){var e=this;return function(){if(!0===n(e))return e.readFile(t,i,"ArrayBuffer")}()},i.prototype.moveFile=function(t,i,e,r){var s=this;return function(){if(!0===n(s)){if(/^\//.test(r=r||i)){var o=new FileError(5);return o.message="file name cannot start with /",Promise.reject(o)}return s.resolveDirectoryUrl(t).then(function(t){return s.getFile(t,i,{create:!1})}).then(function(t){return s.resolveDirectoryUrl(e).then(function(i){return s.move(t,i,r)})})}}()},i.prototype.copyFile=function(t,i,e,r){var s=this;return function(){if(!0===n(s)){if(/^\//.test(r=r||i)){var o=new FileError(5);return o.message="file name cannot start with /",Promise.reject(o)}return s.resolveDirectoryUrl(t).then(function(t){return s.getFile(t,i,{create:!1})}).then(function(t){return s.resolveDirectoryUrl(e).then(function(i){return s.copy(t,i,r)})})}}()},i.prototype.fillErrorMessage=function(t){try{t.message=this.cordovaFileError[t.code]}catch(t){}},i.prototype.resolveLocalFilesystemUrl=function(t){var i=this;return function(){if(!0===n(i))return e(function(n,e){try{window.resolveLocalFileSystemURL(t,function(t){n(t)},function(t){i.fillErrorMessage(t),e(t)})}catch(t){i.fillErrorMessage(t),e(t)}})}()},i.prototype.resolveDirectoryUrl=function(t){var i=this;return function(){if(!0===n(i))return i.resolveLocalFilesystemUrl(t).then(function(t){if(t.isDirectory)return t;var i=new FileError(13);return i.message="input is not a directory",Promise.reject(i)})}()},i.prototype.getDirectory=function(t,i,e){var r=this;return function(){if(!0===n(r))return new Promise(function(n,s){try{t.getDirectory(i,e,function(t){n(t)},function(t){r.fillErrorMessage(t),s(t)})}catch(t){r.fillErrorMessage(t),s(t)}})}()},i.prototype.getFile=function(t,i,e){var r=this;return function(){if(!0===n(r))return new Promise(function(n,s){try{t.getFile(i,e,n,function(t){r.fillErrorMessage(t),s(t)})}catch(t){r.fillErrorMessage(t),s(t)}})}()},i.prototype.readFile=function(t,i,n){var r=this;if(/^\//.test(i)){var s=new FileError(5);return s.message="file-name cannot start with /",Promise.reject(s)}return this.resolveDirectoryUrl(t).then(function(t){return r.getFile(t,i,{create:!1})}).then(function(t){var i=new FileReader;return e(function(e,r){i.onloadend=function(){void 0!==i.result||null!==i.result?e(i.result):r(void 0!==i.error||null!==i.error?i.error:{code:null,message:"READER_ONLOADEND_ERR"})},t.file(function(t){i["readAs"+n].call(i,t)},function(t){r(t)})})})},i.prototype.remove=function(t){var i=this;return new Promise(function(n,e){t.remove(function(){n({success:!0,fileRemoved:t})},function(t){i.fillErrorMessage(t),e(t)})})},i.prototype.move=function(t,i,n){var e=this;return new Promise(function(r,s){t.moveTo(i,n,function(t){r(t)},function(t){e.fillErrorMessage(t),s(t)})})},i.prototype.copy=function(t,i,n){var e=this;return new Promise(function(r,s){t.copyTo(i,n,function(t){r(t)},function(t){e.fillErrorMessage(t),s(t)})})},i.prototype.readEntries=function(t){var i=this;return new Promise(function(n,e){t.readEntries(function(t){n(t)},function(t){i.fillErrorMessage(t),e(t)})})},i.prototype.rimraf=function(t){var i=this;return new Promise(function(n,e){t.removeRecursively(function(){n({success:!0,fileRemoved:t})},function(t){i.fillErrorMessage(t),e(t)})})},i.prototype.createWriter=function(t){var i=this;return new Promise(function(n,e){t.createWriter(function(t){n(t)},function(t){i.fillErrorMessage(t),e(t)})})},i.prototype.write=function(t,i){return i instanceof Blob?this.writeFileInChunks(t,i):new Promise(function(n,e){t.onwriteend=function(i){t.error?e(t.error):n(i)},t.write(i)})},i.prototype.writeFileInChunks=function(t,i){var n=1048576,r=0;function s(){var e=Math.min(n,i.size-r),s=i.slice(r,r+e);r+=e,t.write(s)}return e(function(n,e){t.onerror=e,t.onwrite=function(){r<i.size?s():n()},s()})},Object.defineProperty(i.prototype,"applicationDirectory",{get:function(){return r(this,"applicationDirectory")},set:function(t){s(this,"applicationDirectory",t)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"applicationStorageDirectory",{get:function(){return r(this,"applicationStorageDirectory")},set:function(t){s(this,"applicationStorageDirectory",t)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"dataDirectory",{get:function(){return r(this,"dataDirectory")},set:function(t){s(this,"dataDirectory",t)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"cacheDirectory",{get:function(){return r(this,"cacheDirectory")},set:function(t){s(this,"cacheDirectory",t)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"externalApplicationStorageDirectory",{get:function(){return r(this,"externalApplicationStorageDirectory")},set:function(t){s(this,"externalApplicationStorageDirectory",t)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"externalDataDirectory",{get:function(){return r(this,"externalDataDirectory")},set:function(t){s(this,"externalDataDirectory",t)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"externalCacheDirectory",{get:function(){return r(this,"externalCacheDirectory")},set:function(t){s(this,"externalCacheDirectory",t)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"externalRootDirectory",{get:function(){return r(this,"externalRootDirectory")},set:function(t){s(this,"externalRootDirectory",t)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"tempDirectory",{get:function(){return r(this,"tempDirectory")},set:function(t){s(this,"tempDirectory",t)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"syncedDataDirectory",{get:function(){return r(this,"syncedDataDirectory")},set:function(t){s(this,"syncedDataDirectory",t)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"documentsDirectory",{get:function(){return r(this,"documentsDirectory")},set:function(t){s(this,"documentsDirectory",t)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"sharedDirectory",{get:function(){return r(this,"sharedDirectory")},set:function(t){s(this,"sharedDirectory",t)},enumerable:!0,configurable:!0}),i.pluginName="File",i.plugin="cordova-plugin-file",i.pluginRef="cordova.file",i.repo="https://github.com/apache/cordova-plugin-file",i.platforms=["Android","Browser","iOS","macOS","Windows"],i}(i)),Xt=function(){var t=function(i,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var n in i)i.hasOwnProperty(n)&&(t[n]=i[n])})(i,n)};return function(i,n){function e(){this.constructor=i}t(i,n),i.prototype=null===n?Object.create(n):(e.prototype=n.prototype,new e)}}(),$t=new(function(i){function n(){return null!==i&&i.apply(this,arguments)||this}return Xt(n,i),n.prototype.open=function(i,n){return t(this,"open",{callbackStyle:"object",successName:"success",errorName:"error"},arguments)},n.prototype.uninstall=function(i){return t(this,"uninstall",{callbackStyle:"object",successName:"success",errorName:"error"},arguments)},n.prototype.appIsInstalled=function(i){return t(this,"appIsInstalled",{callbackStyle:"object",successName:"success",errorName:"error"},arguments)},n.prototype.showOpenWithDialog=function(i,n){return t(this,"showOpenWithDialog",{callbackStyle:"object",successName:"success",errorName:"error"},arguments)},n.pluginName="FileOpener",n.plugin="cordova-plugin-file-opener2",n.pluginRef="cordova.plugins.fileOpener2",n.repo="https://github.com/pwlin/cordova-plugin-file-opener2",n.platforms=["Android","iOS","Windows","Windows Phone 8"],n}(i)),zt=function(){var t=function(i,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var n in i)i.hasOwnProperty(n)&&(t[n]=i[n])})(i,n)};return function(i,n){function e(){this.constructor=i}t(i,n),i.prototype=null===n?Object.create(n):(e.prototype=n.prototype,new e)}}(),Kt=function(t){function i(){var i=null!==t&&t.apply(this,arguments)||this;return i.FileTransferErrorCode={FILE_NOT_FOUND_ERR:1,INVALID_URL_ERR:2,CONNECTION_ERR:3,ABORT_ERR:4,NOT_MODIFIED_ERR:5},i}return zt(i,t),i.prototype.create=function(){return new Yt},i.pluginName="FileTransfer",i.plugin="cordova-plugin-file-transfer",i.pluginRef="FileTransfer",i.repo="https://github.com/apache/cordova-plugin-file-transfer",i.platforms=["Amazon Fire OS","Android","Browser","iOS","Ubuntu","Windows","Windows Phone"],i}(i),qt=new Kt,Yt=function(){function t(){!0===n(Kt.getPluginRef(),null,Kt.getPluginName())&&(this._objectInstance=new(Kt.getPlugin()))}return t.prototype.upload=function(t,i,n,e){return o(this,"upload",{successIndex:2,errorIndex:3},arguments)},t.prototype.download=function(t,i,n,e){return o(this,"download",{successIndex:2,errorIndex:3},arguments)},t.prototype.onProgress=function(t){!0===a(this)&&(this._objectInstance.onprogress=t)},t.prototype.abort=function(){return o(this,"abort",{sync:!0},arguments)},t.plugin="cordova-plugin-file-transfer",t.pluginName="FileTransfer",t}(),Qt=function(){var t=function(i,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var n in i)i.hasOwnProperty(n)&&(t[n]=i[n])})(i,n)};return function(i,n){function e(){this.constructor=i}t(i,n),i.prototype=null===n?Object.create(n):(e.prototype=n.prototype,new e)}}(),Jt=new(function(i){function n(){return null!==i&&i.apply(this,arguments)||this}return Qt(n,i),n.prototype.getLibrary=function(i){return t(this,"getLibrary",{observable:!0},arguments)},n.prototype.requestAuthorization=function(i){return t(this,"requestAuthorization",{callbackOrder:"reverse"},arguments)},n.prototype.getAlbums=function(){return t(this,"getAlbums",{callbackOrder:"reverse"},arguments)},n.prototype.getThumbnailURL=function(i,n){return t(this,"getThumbnailURL",{successIndex:1,errorIndex:2},arguments)},n.prototype.getPhotoURL=function(i,n){return t(this,"getPhotoURL",{successIndex:1,errorIndex:2},arguments)},n.prototype.getThumbnail=function(i,n){return t(this,"getThumbnail",{successIndex:1,errorIndex:2},arguments)},n.prototype.getPhoto=function(i,n){return t(this,"getPhoto",{successIndex:1,errorIndex:2},arguments)},n.prototype.saveImage=function(i,n,e){return t(this,"saveImage",{successIndex:2,errorIndex:3},arguments)},n.prototype.saveVideo=function(i,n){return t(this,"saveVideo",{successIndex:2,errorIndex:3},arguments)},n.pluginName="PhotoLibrary",n.plugin="cordova-plugin-photo-library",n.pluginRef="cordova.plugins.photoLibrary",n.repo="https://github.com/terikon/cordova-plugin-photo-library",n.install='ionic cordova plugin add cordova-plugin-photo-library --variable PHOTO_LIBRARY_USAGE_DESCRIPTION="To choose photos"',n.installVariables=["PHOTO_LIBRARY_USAGE_DESCRIPTION"],n.platforms=["Android","Browser","iOS"],n}(i)),Zt=Mt(function(t){!function(){function i(t,i,n){var e=new XMLHttpRequest;e.open("GET",t),e.responseType="blob",e.onload=function(){s(e.response,i,n)},e.onerror=function(){console.error("could not download file")},e.send()}function n(t){var i=new XMLHttpRequest;i.open("HEAD",t,!1);try{i.send()}catch(t){}return 200<=i.status&&299>=i.status}function e(t){try{t.dispatchEvent(new MouseEvent("click"))}catch(n){var i=document.createEvent("MouseEvents");i.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),t.dispatchEvent(i)}}var r="object"==typeof window&&window.window===window?window:"object"==typeof self&&self.self===self?self:"object"==typeof Et&&Et.global===Et?Et:void 0,s=r.saveAs||("object"!=typeof window||window!==r?function(){}:"download"in HTMLAnchorElement.prototype?function(t,s,o){var a=r.URL||r.webkitURL,u=document.createElement("a");u.download=s=s||t.name||"download",u.rel="noopener","string"==typeof t?(u.href=t,u.origin===location.origin?e(u):n(u.href)?i(t,s,o):e(u,u.target="_blank")):(u.href=a.createObjectURL(t),setTimeout(function(){a.revokeObjectURL(u.href)},4e4),setTimeout(function(){e(u)},0))}:"msSaveOrOpenBlob"in navigator?function(t,r,s){if(r=r||t.name||"download","string"!=typeof t)navigator.msSaveOrOpenBlob(function(t,i){return void 0===i?i={autoBom:!1}:"object"!=typeof i&&(console.warn("Deprecated: Expected third argument to be a object"),i={autoBom:!i}),i.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(t.type)?new Blob(["\ufeff",t],{type:t.type}):t}(t,s),r);else if(n(t))i(t,r,s);else{var o=document.createElement("a");o.href=t,o.target="_blank",setTimeout(function(){e(o)})}}:function(t,n,e,s){if((s=s||open("","_blank"))&&(s.document.title=s.document.body.innerText="downloading..."),"string"==typeof t)return i(t,n,e);var o="application/octet-stream"===t.type,a=/constructor/i.test(r.HTMLElement)||r.safari,u=/CriOS\/[\d]+/.test(navigator.userAgent);if((u||o&&a)&&"object"==typeof FileReader){var c=new FileReader;c.onloadend=function(){var t=c.result;t=u?t:t.replace(/^data:[^;]*;/,"data:attachment/file;"),s?s.location.href=t:location=t,s=null},c.readAsDataURL(t)}else{var h=r.URL||r.webkitURL,f=h.createObjectURL(t);s?s.location=f:location.href=f,s=null,setTimeout(function(){h.revokeObjectURL(f)},4e4)}});r.saveAs=s.saveAs=s,t.exports=s}()}),ti=Mt(function(t){var i="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof window.msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto);if(i){var n=new Uint8Array(16);t.exports=function(){return i(n),n}}else{var e=new Array(16);t.exports=function(){for(var t,i=0;i<16;i++)0==(3&i)&&(t=4294967296*Math.random()),e[i]=t>>>((3&i)<<3)&255;return e}}}),ii=[],ni=0;ni<256;++ni)ii[ni]=(ni+256).toString(16).substr(1);var ei=function(t,i,n){var e=i&&n||0;"string"==typeof t&&(i="binary"===t?new Array(16):null,t=null);var r=(t=t||{}).random||(t.rng||ti)();if(r[6]=15&r[6]|64,r[8]=63&r[8]|128,i)for(var s=0;s<16;++s)i[e+s]=r[s];return i||function(t,i){var n=i||0;return[ii[t[n++]],ii[t[n++]],ii[t[n++]],ii[t[n++]],"-",ii[t[n++]],ii[t[n++]],"-",ii[t[n++]],ii[t[n++]],"-",ii[t[n++]],ii[t[n++]],"-",ii[t[n++]],ii[t[n++]],ii[t[n++]],ii[t[n++]],ii[t[n++]],ii[t[n++]]].join("")}(r)};const ri=new class{constructor(){this.KEY_STR="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="}encode64(t){let i,n,e,r,s,o,a,u="",c=0;do{r=(i=t[c++])>>2,s=(3&i)<<4|(n=t[c++])>>4,o=(15&n)<<2|(e=t[c++])>>6,a=63&e,isNaN(n)?o=a=64:isNaN(e)&&(a=64),u=u+this.KEY_STR.charAt(r)+this.KEY_STR.charAt(s)+this.KEY_STR.charAt(o)+this.KEY_STR.charAt(a),i=n=e="",r=s=o=a=""}while(c<t.length);return u}restore(t,i){if(!t.match("data:image/jpeg;base64,"))return i;let n=this.decode64(t.replace("data:image/jpeg;base64,","")),e=this.slice2Segments(n),r=this.exifManipulation(i,e);return"data:image/jpeg;base64,"+this.encode64(r)}exifManipulation(t,i){let n=this.getExifArray(i),e=this.insertExif(t,n);return new Uint8Array(e)}getExifArray(t){let i;for(let n=0;n<t.length;n++)if(255===(i=t[n])[0]&&225===i[1])return i;return[]}insertExif(t,i){let n=t.replace("data:image/jpeg;base64,",""),e=this.decode64(n),r=e.indexOf(255,3),s=e.slice(0,r),o=e.slice(r),a=s;return(a=a.concat(i)).concat(o)}slice2Segments(t){let i=0,n=[];for(;255!==t[i]||218!==t[i+1];){if(255===t[i]&&216===t[i+1])i+=2;else{let e=i+(256*t[i+2]+t[i+3])+2,r=t.slice(i,e);n.push(r),i=e}if(i>t.length)break}return n}decode64(t){let i,n,e,r,s,o,a,u=0,c=[];t=t.replace(/[^A-Za-z0-9\+\/\=]/g,"");do{r=this.KEY_STR.indexOf(t.charAt(u++)),n=(15&(s=this.KEY_STR.indexOf(t.charAt(u++))))<<4|(o=this.KEY_STR.indexOf(t.charAt(u++)))>>2,e=(3&o)<<6|(a=this.KEY_STR.indexOf(t.charAt(u++))),c.push(i=r<<2|s>>4),64!==o&&c.push(n),64!==a&&c.push(e),i=n=e="",r=s=o=a=""}while(u<t.length);return c}};function si(){return ei()}function oi(t){return t&&t.indexOf&&0===t.indexOf("data:")&&"data:,"!==t}function ai(t){return u()?t&&t.indexOf&&(0===t.indexOf("file:")||0===t.indexOf("/var/mobile")):t&&t.indexOf&&0===t.indexOf("file:")}function ui(t){return ci(t)||xt(t)||Rt(t)||Nt(t)}function ci(t){return t&&(t.endsWith&&t.endsWith(".gif")||t.indexOf("giphy.com")>0)}function hi(t){return c(t)||oi(t)||ai(t)}function fi(t,i="blob",n){return new Promise((e,r)=>{let s=new FileReader;s.onload=t=>{e(t.target.result)},s.onerror=t=>r(t),"blob"===i?s.readAsDataURL(t):"binary"===i?s.readAsBinaryString(t):s.readAsText(t,n)})}function li(t,i){let n=t.split(".");return n[n.length-1]=i,n.reduce((t,i)=>t+"."+i)}function di(t){return t?t.substr(0,t.lastIndexOf("."))+".png":""}function vi(){return 1e8}function pi(t){return Bt(t),t.size<1e8}function mi(t){return Rt(t)?"video":Nt(t)?"audio":"photo"}function bi(t){switch(Bt(t)){case"pdf":return"application/pdf";case"xls":return"application/vnd.ms-excel";case"xlsx":return"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet";case"csv":return"text/csv";case"ppt":return"application/vnd.ms-powerpoint";case"pptx":return"application/vnd.openxmlformats-officedocument.presentationml.presentation";case"doc":return"application/msword";case"docx":return"application/vnd.openxmlformats-officedocument.wordprocessingml.document";case"png":return"image/png";case"jpeg":case"jpg":return"image/jpeg";case"gif":return"image/gif";case"bmp":return"image/bmp";case"mp4":case"m4v":return"video/mp4";case"3gp":case"3gpp":return"video/3gpp";case"mov":return"video/mp4";case"mpg":return"video/mpg";case"avi":return"video/avi";case"mp3":return"audio/mpeg";case"wav":return"audio/wav";default:return"application/octet-stream"}}function Ti(t){return!xt(t)&&!Rt(t)}function yi(t){switch(Bt(t)){case"pdf":return"yo-file-pdf danger";case"xls":case"xlsx":case"csv":return"yo-file-excel success";case"ppt":case"pptx":return"yo-file-powerpoint warning";case"doc":case"docx":return"yo-file-word accent";default:return xt(t)?"yo-image royal":Rt(t)?"yo-svg-play":Nt(t)?"yo-play":"yo-attach-file"}}function gi(t){return Rt(t)&&(t=t.substr(0,t.lastIndexOf("."))+".png"),t}function Si(t){let i=t;return t.indexOf("<ionic-chat-image")>=0&&(i=t.replace('<ionic-chat-image src="',"").replace("</ionic-chat-image>","").replace('" >',"")),mi(i)}function wi(t,i=null,n=512){i||(i=Di(t)),t=t.replace("data:"+i+";base64,","").replace(/\s/g,"");const e=atob(t),r=[];for(let t=0;t<e.length;t+=n){const i=e.slice(t,t+n),s=new Array(i.length);for(let t=0;t<i.length;t++)s[t]=i.charCodeAt(t);const o=new Uint8Array(s);r.push(o)}return new Blob(r,{type:i})}function Ai(t){return t&&(t.lastModifiedDate=new Date,t.name=si()+".jpg"),t}function Pi(t,i){let n=wi(t);return n.lastModifiedDate=new Date,n.name=i.name,n}function Mi(t){let i=Math.random().toString(36).substr(2)+Ci(t),n=wi(t);return Oi("images").then(t=>_i(t.nativeURL,i,n,{replace:!0}),()=>{})}function Ei(t,i,n){return new Promise(e=>{let r=new Image;r.onload=()=>{let s=document.createElement("canvas"),o=s.getContext("2d"),a=1;(r.width>i||r.height>n)&&(a=Math.min(i/r.width,n/r.height),r.width*=a,r.height*=a),s.width=r.width,s.height=r.height,o.drawImage(r,0,0,r.width,r.height);let u=s.toDataURL("image/jpeg",.7);u=ri.restore(t,u),s=null,e(u)},r.src=t})}function Ii(t){return`${(new Date).getTime()}.${Bt(t)}`}function ki(t,i,n,e=!1){return new Promise((r,s)=>{i=i||0===i?i:90;let o=document.createElement("canvas");o.setAttribute("id","hidden-canvas"),o.style.display="none",document.body.appendChild(o);let a=o.getContext("2d"),u=new Image;u.src=e?new h(t).getUrl():(-1===t.indexOf(",")?"data:image/png;base64,":"")+t,u.onload=()=>{let t=u.width,e=u.height,s=i*Math.PI/180,c=Math.cos(s),h=Math.sin(s);h<0&&(h=-h),c<0&&(c=-c),o.width=e*h+t*c,o.height=e*c+t*h,a.translate(o.width/2,o.height/2),a.rotate(i*Math.PI/180),a.drawImage(u,-u.width/2,-u.height/2),r(n?o.toDataURL():o.toDataURL().split(",")[1]),document.body.removeChild(o)},u.onerror=()=>{s("Unable to rotate data\n"+u.src)}})}function Di(t){return t.split(";")[0].replace("data:","")}function Ci(t){let i=Di(t);switch(i){case"image/png":return".png";case"image/jpeg":case"image/jpg":return".jpg";default:return"."+i.split("/")[1]}}function Gi(t,i,n){return i&&n?fi(t).then(t=>Ei(t,i,n)).then(i=>Pi(i,t)):Promise.resolve(t)}function Oi(t="Downloads",i=!0){if(f()){let n=u()?window.cordova.file.documentsDirectory:window.cordova.file.externalRootDirectory;return"Downloads"!==t&&Wt.dataDirectory&&(n=Wt.dataDirectory),Wt.resolveDirectoryUrl(n).then(i=>Wt.getDirectory(i,t,{create:!0})).then(t=>i?t:t&&t.nativeURL?t.nativeURL:n)}return new Promise(i=>{window.requestFileSystem(window.LocalFileSystem.PERSISTENT,0,n=>{n.root.getDirectory(t,{create:!0},t=>{i(t)})})})}function Bi(t){return t?Ri(t).then(t=>Promise.resolve(t.nativeURL)):Promise.resolve(t)}function xi(t){let i=t;return t&&t.startsWith("_file_")&&(i=`${window.WEBVIEW_SERVER_URL}/${i}`),fetch(i).then(t=>t&&t.blob?t.blob():null)}function Ri(t){return f()?(0===t.indexOf("/var/mobile")&&(t="file://"+t),Wt.resolveLocalFilesystemUrl(t).then(t=>t).catch(i=>{let n=i&&i.message?i.message:"File Error";return u()&&"NOT_FOUND_ERR"===n?Oi("images").then(i=>{let e=t.split("/"),r=i.nativeURL.split("/");return t=t.replace(e[8],r[8]),Wt.resolveLocalFilesystemUrl(t).then(t=>t,()=>Promise.reject(n))},()=>Promise.reject(n)):Promise.reject(n)})):new Promise((i,n)=>{window.resolveLocalFileSystemURL(t,t=>i(t),t=>n(t))})}function Ni(t,i){return Wt.readAsArrayBuffer(t,i).then(t=>{let i;try{i=new DataView(t)}catch(t){return Promise.reject(t)}if(65496!==i.getUint16(0,!1))return i;let n=i.byteLength,e=2;for(;e<n;){let t=i.getUint16(e,!1);if(e+=2,65505===t){if(1165519206!==i.getUint32(e+=2,!1))return i;let t=18761===i.getUint16(e+=6,!1);e+=i.getUint32(e+4,t);let n=i.getUint16(e,t);e+=2;for(let r=0;r<n;r++)if(274===i.getUint16(e+12*r,t))return 0!==i.getUint16(e+12*r+8,t)&&i.setUint16(e+12*r+8,0),i}else{if(65280!=(65280&t))break;e+=i.getUint16(e,!1)}}return i})}function Hi(t,i=!1,n=""){return f()?Wt.resolveLocalFilesystemUrl(t).then(e=>{let r=t.split("/");r.pop();let s,o=r.join("/");try{s=si()+(n||"")+"."+Bt(t)}catch(i){s=Math.random().toString(36).substr(2)+(n||"")+"."+Bt(t)}return!0!==i&&f()&&l()?function(t,i){let n=new Promise((t,i)=>{let n=setTimeout(()=>{clearTimeout(n),i("Timed out in 5000ms.")},5e3)});return Promise.race([i,n])}(0,Ni(o,e.name)).then(i=>Oi("images").then(t=>{let n=new Blob([i],{type:"octet/stream"});return _i(t.nativeURL,s,n,{replace:!0})},()=>t),()=>ji(o,e,s,t)):ji(o,e,s,t)}):Promise.resolve(t)}function ji(t,i,n,e){return Oi("images").then(e=>Wt.copyFile(t,i.name,e.nativeURL,n).then(t=>t.nativeURL),()=>e)}function _i(t,i,n,e){return Wt.writeFile(t,i,n,e).then(t=>t.nativeURL,()=>{})}function Ui(t,i){return Wt.checkFile(t,i).then(()=>!0,()=>!1)}function Li(t){if(f()&&"iOS"===d.platform){if(t&&t.indexOf("file://")>=0){let i=t,n=i.indexOf("/Application/"),e=i.indexOf("/Library/");return n>0&&e>0?Oi("images").then(r=>{let s=r.nativeURL,o=s.indexOf("/Application/"),a=s.indexOf("/Library/"),u=s.substring(o+13,a);return t=i.substring(0,n)+"/Application/"+u+i.substring(e)},()=>t):Promise.resolve(t)}return Promise.resolve(t)}return Promise.resolve(t)}function Vi(t){return t&&t.cloudinary?t.cloudinary.eager&&t.cloudinary.eager.length>0?t.cloudinary.eager[0].secure_url||t.cloudinary.eager[0].url:t.cloudinary.secure_url||t.cloudinary.url:null}function Fi(){return u()?window.cordova.file.documentsDirectory:window.cordova.file.externalDataDirectory}function Wi(t){let i=tn(t);return i.toLowerCase().replace(/[^a-zA-Z0-9.]+/g,"_")}function Xi(t,i){let n=Fi();return i=Wi(i),Wt.writeFile(n,i,t,{append:!1,replace:!0})}function $i(t){if(t&&t._downloadURL){if(f()){let i=Fi()+t._id+".pdf";return en(t._downloadURL,i).then(t=>{let i=t.nativeURL;return v({message:p("DOWNLOADSUCCESS"),duration:2e3,showCloseButton:!0,closable:!0}),i})}Zt(t._downloadURL,t._filename||"download.pdf")}}function zi(t,i){if(!i){let n=t.split("/");i=n[n.length-1]}return f()?Ki(t,i):qi(t,i)}function Ki(t,i){const n=qt.create();let e=u()&&jt(t),r=()=>{if(xt(t))return Jt.saveImage(t,"YOOBIC");if(Rt(t))return t=t.substr(0,t.lastIndexOf("."))+".mp4",n.download(t,Fi()+i).then(t=>Jt.saveVideo(t.toURL(),"YOOBIC"));if(Ht(t)||Nt(t)){let e=Bt(t),r=i;return i&&i.includes(".")||(r=`${(new Date).getTime()}.${e}`),new Promise(i=>Oi("Downloads",!1).then(e=>{n.download(t,r=e+r).then(n=>{u()&&n&&n.nativeURL&&sn(n.nativeURL,bi(t)),i(n)})}))}},s=Promise.resolve();return(xt(t)||Rt(t))&&(s=Jt.requestAuthorization({read:!0,write:!0})),s.then(()=>e?r():r().then(()=>(v({message:p("DOWNLOADSUCCESS"),duration:2e3,showCloseButton:!0,closable:!0}),Promise.resolve(!0))).catch(()=>(v({message:p("DOWNLOADFAILED"),duration:2e3,showCloseButton:!0,closable:!0}),Promise.resolve(!0))))}function qi(t,i){return new Promise(n=>{let e=new XMLHttpRequest;e.open("GET",t,!0),e.responseType="blob",e.onreadystatechange=()=>{4===e.readyState&&(v({message:p("DOWNLOADSUCCESS"),duration:2e3,icon:"yo-icon success",closable:!0}),n(!0))},e.onload=()=>(function t(i,n,e){var r,s,o=window,a="application/octet-stream",u=e||a,c=i,h=!n&&!e&&c,f=document.createElement("a"),l=function(t){return String(t)},d=o.Blob||o.MozBlob||o.WebKitBlob||l,v=n||"download";if(d=d.call?d.bind(o):Blob,"true"===String(this)&&(u=(c=[c,u])[0],c=c[1]),h&&h.length<2048&&(v=h.split("/").pop().split("?")[0],f.href=h,-1!==f.href.indexOf(h))){var p=new XMLHttpRequest;return p.open("GET",h,!0),p.responseType="blob",p.onload=function(i){t(i.target.response,v,a)},setTimeout(function(){p.send()},0),p}if(/^data\:[\w+\-]+\/[\w+\-]+[,;]/.test(c)){if(!(c.length>2096103.424&&d!==l))return navigator.msSaveBlob?navigator.msSaveBlob(m(c),v):b(c);u=(c=m(c)).type||a}function m(t){for(var i=t.split(/[:;,]/),n=i[1],e=("base64"==i[2]?atob:decodeURIComponent)(i.pop()),r=e.length,s=0,o=new Uint8Array(r);s<r;++s)o[s]=e.charCodeAt(s);return new d([o],{type:n})}function b(t,i){if("download"in f)return f.href=t,f.setAttribute("download",v),f.className="download-js-link",f.innerHTML="downloading...",f.style.display="none",document.body.appendChild(f),setTimeout(function(){f.click(),document.body.removeChild(f),!0===i&&setTimeout(function(){o.URL.revokeObjectURL(f.href)},250)},66),!0;if(/(Version)\/(\d+)\.(\d+)(?:\.(\d+))?.*Safari\//.test(navigator.userAgent))return t=t.replace(/^data:([\w\/\-\+]+)/,a),window.open(t)||confirm("Displaying New Document\n\nUse Save As... to download, then click back to return to this page.")&&(location.href=t),!0;var n=document.createElement("iframe");document.body.appendChild(n),i||(t="data:"+t.replace(/^data:([\w\/\-\+]+)/,a)),n.src=t,setTimeout(function(){document.body.removeChild(n)},333)}if(r=c instanceof d?c:new d([c],{type:u}),navigator.msSaveBlob)return navigator.msSaveBlob(r,v);if(o.URL)b(o.URL.createObjectURL(r),!0);else{if("string"==typeof r||r.constructor===l)try{return b("data:"+u+";base64,"+o.btoa(r))}catch(t){return b("data:"+u+","+encodeURIComponent(r))}(s=new FileReader).onload=function(){b(this.result)},s.readAsDataURL(r)}return!0})(e.response,i),e.send(null)})}function Yi(t){return!(m(t._downloadURL)||!xt(t)&&!Rt(t)&&f()&&u()&&!jt(t))}function Qi(t){return!!(t&&t._downloadURL&&t._filename)}function Ji(t,i,n){if(t){let e=n||[];e.push({text:p("DOWNLOAD"),cssClass:b()?"dark-hover":"bg-dark light",isVisible:()=>Yi(t),handler:()=>{if(t&&t._downloadURL){let i=t._filename?t._filename:(new Date).getTime().toString();zi(t._downloadURL,i)}}}),e.push({text:p("EMAIL"),cssClass:b()?"royal-hover":"bg-royal light",isVisible:()=>Qi(t),handler:()=>{i.emit(t)}}),T(e)}}function Zi(t,i){let n=y(t);if(i&&i.edit&&i.edit.indexOf("cloudinary")>0){let t=i.edit.lastIndexOf("/"),e=i.edit.lastIndexOf("."),r=i.edit.substr(t+1,e-t-1),s=n.indexOf("upload/")+7;n=n.slice(0,s)+"l_"+r+",w_1.0,h_1.0,fl_relative,c_fill"+n.slice(s-1)}else i&&i.edit&&i.edit.indexOf("storage.googleapis.com")>0&&(n=i.edit);return n}function tn(t){return t&&t.normalize&&(t=t.normalize("NFD")),t&&t.replace&&(t=t.replace(/[\u0300-\u036f]/g,"")),t||"EMPTY"}function nn(t,i=null){return new Promise(n=>{Vt.viewDocument(t,"application/pdf",{title:i||"PDF",autoClose:{onPause:!0}},()=>{},()=>{n(null)},(t,i)=>{confirm(p("ANDROIDPDFCONFIRM"))&&i()},()=>{})})}function en(t,i){return qt.create().download(t,i)}function rn(t,i,n){return Xi(t,i).then(t=>{sn(t.nativeURL,n)},t=>{this.log.error(t)}).catch(t=>{this.log.error(t)})}function sn(t,i){return $t.open(t,i).then(()=>{},t=>{this.log.error(t)})}var on;function an(t,i){if(!t)return null;if(!t.timeConstraintMode)return null;let n;if(t.archived||!i)return null;if("timeperiod"===t.timeConstraintMode){if(!g(t.availableAfter)||!g(t.availableFor))return null;n=S(i),n=w(w(n,"days",t.availableAfter),"days",t.availableFor)}else{if("calendar"!==t.timeConstraintMode)return null;if(!t.availableTo)return null;n=S(t.availableTo)}return n}function un(t,i){if(!t||!t.timeConstraintMode)return null;let n;if(t.archived||!i)return null;if("timeperiod"===t.timeConstraintMode){if(!g(t.availableAfter))return null;n=S(i),n=w(n,"days",t.availableAfter)}else{if("calendar"!==t.timeConstraintMode)return null;if(!t.availableFrom)return null;n=S(t.availableFrom)}return n}function cn(t,i){let n=new Date,e=un(t,i);return!!e&&A(e,n)}function hn(t){switch(t){case"video":return"yo-play";case"quizz":return"yo-action-plan";case"battlequiz":case"timedquizz":return"yo-stop-watch";case"document":default:return"yo-diploma"}}function fn(t){return t.finishedLessonsCount&&t.plan.lessonsCount>0?t.finishedLessonsCount/t.plan.lessonsCount*100:0}function ln(t){return P(t.description&&t.description.minValue)?"finished"===t.status:"finished"===t.status&&!0===t.validated}function dn(t){return t&&"document"!==t&&"video"!==t}function vn(t){return"timedquizz"===t||"battlequiz"===t}function pn(t){return"document"===t||"video"===t}function mn(t){return"battlequiz"===t}!function(t){t.CUSTOMER_HERO="customerhero",t.INSTORE_EXPERT="instoreexpert",t.ONBOARDING="onboarding",t.OUTSTANDING_LEARNER="outstandinglearner",t.PRODUCT_EXPERT="productexpert",t.CROSS_SELLING_GENIUS="crosssellinggenius"}(on||(on={}));var bn,Tn,yn,gn,Sn,wn,An=function(){var t=function(i,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var n in i)i.hasOwnProperty(n)&&(t[n]=i[n])})(i,n)};return function(i,n){function e(){this.constructor=i}t(i,n),i.prototype=null===n?Object.create(n):(e.prototype=n.prototype,new e)}}();!function(t){t[t.DATA_URL=0]="DATA_URL",t[t.FILE_URL=1]="FILE_URL",t[t.NATIVE_URI=2]="NATIVE_URI"}(bn||(bn={})),function(t){t[t.JPEG=0]="JPEG",t[t.PNG=1]="PNG"}(Tn||(Tn={})),function(t){t[t.PICTURE=0]="PICTURE",t[t.VIDEO=1]="VIDEO",t[t.ALLMEDIA=2]="ALLMEDIA"}(yn||(yn={})),function(t){t[t.PHOTOLIBRARY=0]="PHOTOLIBRARY",t[t.CAMERA=1]="CAMERA",t[t.SAVEDPHOTOALBUM=2]="SAVEDPHOTOALBUM"}(gn||(gn={})),function(t){t[t.ARROW_UP=1]="ARROW_UP",t[t.ARROW_DOWN=2]="ARROW_DOWN",t[t.ARROW_LEFT=3]="ARROW_LEFT",t[t.ARROW_RIGHT=4]="ARROW_RIGHT",t[t.ARROW_ANY=5]="ARROW_ANY"}(Sn||(Sn={})),function(t){t[t.BACK=0]="BACK",t[t.FRONT=1]="FRONT"}(wn||(wn={}));var Pn,Mn=new(function(i){function n(){var t=null!==i&&i.apply(this,arguments)||this;return t.DestinationType={DATA_URL:0,FILE_URI:1,NATIVE_URI:2},t.EncodingType={JPEG:0,PNG:1},t.MediaType={PICTURE:0,VIDEO:1,ALLMEDIA:2},t.PictureSourceType={PHOTOLIBRARY:0,CAMERA:1,SAVEDPHOTOALBUM:2},t.PopoverArrowDirection={ARROW_UP:1,ARROW_DOWN:2,ARROW_LEFT:4,ARROW_RIGHT:8,ARROW_ANY:15},t.Direction={BACK:0,FRONT:1},t}return An(n,i),n.prototype.getPicture=function(i){return t(this,"getPicture",{callbackOrder:"reverse"},arguments)},n.prototype.cleanup=function(){return t(this,"cleanup",{platforms:["iOS"]},arguments)},n.pluginName="Camera",n.plugin="cordova-plugin-camera",n.pluginRef="navigator.camera",n.repo="https://github.com/apache/cordova-plugin-camera",n.platforms=["Android","Browser","iOS","Windows"],n}(i)),En=function(){var t=function(i,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var n in i)i.hasOwnProperty(n)&&(t[n]=i[n])})(i,n)};return function(i,n){function e(){this.constructor=i}t(i,n),i.prototype=null===n?Object.create(n):(e.prototype=n.prototype,new e)}}(),In=new(function(i){function n(){return null!==i&&i.apply(this,arguments)||this}return En(n,i),n.prototype.captureAudio=function(i){return t(this,"captureAudio",{callbackOrder:"reverse"},arguments)},n.prototype.captureImage=function(i){return t(this,"captureImage",{callbackOrder:"reverse"},arguments)},n.prototype.captureVideo=function(i){return t(this,"captureVideo",{callbackOrder:"reverse"},arguments)},n.prototype.onPendingCaptureResult=function(){return t(this,"onPendingCaptureResult",{eventObservable:!0,event:"pendingcaptureresult"},arguments)},n.prototype.onPendingCaptureError=function(){return t(this,"onPendingCaptureError",{eventObservable:!0,event:"pendingcaptureerror"},arguments)},Object.defineProperty(n.prototype,"supportedImageModes",{get:function(){return r(this,"supportedImageModes")},set:function(t){s(this,"supportedImageModes",t)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"supportedAudioModes",{get:function(){return r(this,"supportedAudioModes")},set:function(t){s(this,"supportedAudioModes",t)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"supportedVideoModes",{get:function(){return r(this,"supportedVideoModes")},set:function(t){s(this,"supportedVideoModes",t)},enumerable:!0,configurable:!0}),n.pluginName="MediaCapture",n.plugin="cordova-plugin-media-capture",n.pluginRef="navigator.device.capture",n.repo="https://github.com/apache/cordova-plugin-media-capture",n.platforms=["Android","Browser","iOS","Windows"],n}(i));function kn(t,i){return M().user&&M().user.photoMaxWidth>0?M().user.photoMaxWidth:E()&&f()&&("MC40N0"===d.model||"ET1"===d.model||"SM-T580"===d.model||"blackberry10"===d.platform||"SM-A310F"===d.model||"SM-A510F"===d.model||"SM-J320FN"===d.model)?1280:t?2048:i||2048}function Dn(t,i=Pn.IMAGE,n=I()){if(window&&window.MediaPicker)return new Promise(e=>{window.MediaPicker.getMedias({selectMode:i,maxSelectCount:t},t=>{if(n){let i=t.map(t=>Cn(t));Promise.all(i).then(t=>{e(t)})}else e(t.map(t=>t.uri))},()=>{e([])})})}function Cn(t){return new Promise(i=>{window.MediaPicker.compressImage(Object.assign({},t,{quality:99}),t=>i(t.uri),()=>i(t.uri))})}function Gn(t,i,n,e=!1,r=0,s=!1,o=1){if(e)return In.captureImage({limit:o});{let e=!1,o={};return o.destinationType=bn.FILE_URL,o.correctOrientation=!u(),o.encodingType=Tn.JPEG,o.saveToPhotoAlbum=!(M().user&&M().user.deletePhotos||i===gn.PHOTOLIBRARY),o.quality=t,o.sourceType=i,o.mediaType=n,o.allowEdit=e,o.targetWidth=kn(s,r),o.targetHeight=kn(s,r),Mn.getPicture(o)}}function On({allowVideo:t=!0}){return new Promise(i=>{Dn(1,t?Pn.ALLMEDIA:Pn.IMAGE).then(t=>{i(t&&t[0]?t[0]:"")})})}function Bn(t){return t?new Promise(i=>{navigator&&navigator.device&&navigator.device.capture&&navigator.device.capture.captureVideo(t=>{i(t)},t=>{i(t)},t)}):In.captureVideo({})}function xn(){if(Mn.cleanup&&u())return Mn.cleanup()}async function Rn(){if(navigator&&navigator.mediaDevices)return(await navigator.mediaDevices.enumerateDevices()).filter(t=>"videoinput"===t.kind).map((t,i)=>({_id:t.deviceId,deviceId:t.deviceId,label:t.label||"webcam "+i,kind:t.kind}))}function Nn(t,i){t&&i&&!i.classList.contains("form-choice")&&t.classList.toggle("tapped")}function Hn(t,i){t&&i&&!i.classList.contains("form-choice")&&t.classList.remove("tapped")}function jn(t,i){t&&i&&!i.classList.contains("form-choice")&&(t.classList.contains("tapped")?t.classList.remove("tapped"):t.classList.add("tapped"))}function _n(t){if(t===window)return{height:t.innerHeight,width:t.innerWidth};if(t&&t.clientWidth&&t.clientHeight)return{height:t.clientHeight,width:t.clientWidth};if(t){let i=t.getBoundingClientRect();if(i)return{height:i.height,width:i.width}}return{height:0,width:0}}!function(t){t.ALLMEDIA="101",t.IMAGE="100",t.VIDEO="102"}(Pn||(Pn={}));class Un{transform(t,i={}){return null}}class Ln extends Un{transform(t,i="€"){let n;if(!t&&0!==t)return"";n=2;let e=p("CURRENCY"),r=k(M().currencies,t=>t.symbol===e),s=1;r.length>0&&(s=r[0].rate);let o=D(t*s,2);return"£"===e?e+" "+o:o+" "+e}}class Vn extends Un{transform(t,i=""){if(t){let n=/^\d\d:\d\d/.test(t.toString());return"fromNow"===i?C(n?G(t,"HH:mm"):t):G(n?G(t,"HH:mm"):t,i)}return""}}class Fn extends Un{transform(t,i){return t.toString()}}class Wn extends Un{transform(t,i){if(!t&&!g(t))return"";let n=p("DISTANCEUNIT");return"mi"===n?(t/=1.609)>1?t.toFixed(0)+" "+n:t.toFixed(1)+" "+n:t>1?t.toFixed(0)+" k"+n:t.toFixed(1)+" "+n}}class Xn extends Un{transform(t){if(!isFinite(t))return"";let i=Math.floor(Math.log(t)/Math.log(1024));return(t/Math.pow(1024,Math.floor(i))).toFixed(1)+" "+["bytes","kB","MB","GB","TB","PB"][i]}}class $n extends Un{transform(t,i){return Math.abs(t)<=999?t.toString():Math.abs(t)<=999999?Math.round(t/1e3)+" K":(Math.abs(t),Math.round(t/1e6)+" M")}}class zn extends Un{transform(t,i){let n=i.map(t=>t.replace("-","")),e=i.map(t=>0===t.indexOf("-")?"desc":"asc");return O(t,n,e)}}class Kn extends Un{transform(t){if(t&&t.replace){let i=B();t=t.replace(/http:/g,i),x()&&t.indexOf("file:")>=0&&(t=R(t))}return t}}class qn extends Un{transform(t){return Math.round(t)}}class Yn extends Un{transform(t){return t?C(t):t}}class Qn{transform(t,i="seconds"){return this.secondParser(t,i)}secondParser(t,i="seconds"){let n=t%60,e=(t-n)/60,r=e%60,s=(e-r)/60,o=this.padder(n),a=this.padder(r),u=this.padder(s);switch(i){case"seconds":return u+":"+a+":"+o;case"minutes":return u+":"+a;case"hours":return u}}padder(t){let i=t.toString();return 1===i.length&&(i="0"+i),i}}class Jn{transform(t){if(t){let i="";return void 0!==t&&(t.firstName&&t.lastName?(i+=t.firstName.toString().substring(0,1),i+=t.lastName.toString().substring(0,1)):t.username&&(i=t.username.toString().substring(0,2))),i}return""}}const Zn={currency:new Ln,dateFormat:new Vn,decimal:new Fn,fileSize:new Xn,number:new $n,orderBy:new zn,round:new qn,timeAgo:new Yn,timer:new Qn,userInitial:new Jn,https:new Kn,distance:new Wn,percent:new class extends Un{transform(t,i){return(Math.round(100*t)/100).toString()+" %"}}};function te(t){if(t){let i=t.username;return t.firstName&&t.lastName?i=N(t.firstName.toString().toLowerCase())+" "+N(t.lastName.toString().toLowerCase()):t.email&&(i=t.email),i}return""}function ie(t){return{_id:t}}const ne={error:"error",admin:"admin",archived:"archived",areamanager:"areamanager",barcode:"barcode","barcode-alt":"barcode-alt",blog:"blog",briefcase:"briefcase",calendar:"calendar",campaign:"campaign",category:"category",channel:"channel",chat:"chat",check:"check",contact:"contact",customformfield:"customformfield",dashboard:"dashboard",database:"database",emailblocked:"emailblocked",empty:"empty",feed:"feed",fielduser:"fielduser",file:"file",filter:"filter",folder:"folder",folder_blue:"folder_blue",geocoding:"geocoding",group:"group",hq:"hq",image:"image",inbox:"inbox",inventory:"inventory",location:"location",map:"map",memo:"memo",mission:"mission",nodata:"nodata",note:"note",notemplate:"notemplate",notification:"notification",page:"page",paperplane:"paperplane",payments:"payments",pharmaone:"pharmaone",photo:"photo",poll:"poll",publish:"publish",reject:"reject",request:"request",requestraised:"requestraised",score:"score",security:"security",service:"service",speedometer:"speedometer",chart:"chart",splineroyal:"splineroyal",storemanager:"storemanager",subscription:"subscription",team:"team",template:"template",todo:"todo",translations:"translations",user:"user",usertrial:"usertrial",videocall:"videocall",welcomeuser:"welcomeuser",missions:"mission",aisles:"aisles",feeds:"feed",users:"user",files:"file",products:"empty",locations:"location",groups:"group",memos:"memo",tenants:"team",emails:"user",productbatch:"productbatch",missiondescriptions:"campaign",history:"history",visit:"visit",photosplaceholder:"photosplaceholder",notificationsplaceholder:"notificationsplaceholder",chatplaceholder:"chatplaceholder",notesplaceholder:"notesplaceholder",contactsplaceholder:"contactsplaceholder",scoring:"scoring",lessons:"to-do",courses:"courses",userranks:"leaderboard",questions:"questions",answers:"questions",wikis:"questions",analytics:"analytics"},ee={lessons:"EMPTY_TITLE_LESSONS",courses:"EMPTY_TITLE_COURSES",userranks:"EMPTY_TITLE_USERRANKS",questions:"EMPTY_TITLE_QUESTIONS",answers:"EMPTY_TITLE_ANSWERS",wikis:"EMPTY_TITLE_COMMENTS",analytics:"EMPTY_TITLE_ANALYTICS"},re={lessons:"EMPTY_TEXT_LESSONS",courses:"EMPTY_TEXT_COURSES",userranks:"EMPTY_TEXT_USERRANKS",questions:"EMPTY_TEXT_QUESTIONS",answers:"EMPTY_TEXT_ANSWERS",wikis:"EMPTY_TEXT_COMMENTS",analytics:"EMPTY_TEXT_ANALYTICS"};function se(t){return oe(t).mediaSrc}function oe(t){let i=[],n="";return t&&(t.photosSrc&&t.photosSrc.length>0?(i=t.photosSrc,n="photo"):t.imageData?(i=i.concat(t.imageData),n="photo"):t.videoData?(i=i.concat(t.videoData),n="video"):t.image&&t.image._downloadURL?(i=i.concat(t.image._downloadURL),n="photo"):t.videoSrc?(i=i.concat(t.videoSrc),n="video"):t.audioSrc&&(i=i.concat(t.audioSrc),n="audio")),{type:n,mediaSrc:i}}function ae(t){return!!t&&(t.document||t.question||t.plan)}function ue(t){return t&&t.pollTitle?t.pollTitle:t&&t.poll&&t.poll.title?t.poll.title:""}function ce(t){let i=oe(t).type;return!ae(t)&&"audio"!==i&&""!==i||"video"===i||"photo"===i}function he(t){if(!t)return null;let i,n=t,e=t._id&&t._id.startsWith&&t._id.startsWith("offline_"),r=oe(n),s=r.mediaSrc;n&&n.user&&n.user.role&&(i=n.user.role);let o={heading:n.user&&n.user._id?te(n.user):"",subheadings:[`${i?`${p(i)} • `:""}${Zn.timeAgo.transform(n._ect||new Date)} ${n.isWiki&&n.version?n.version:""}`],description:H(n.title),tags:n.tags,mediaSrc:s,document:n.document,mediaIcons:j([ae(t)?{cssClass:"yo-attachment",position:{bottom:!0,left:!0}}:null]),mediaBadges:j([e?{text:p("PENDINGOFFLINE"),cssClass:"tag small round stable-light",position:{top:!0,left:!0}}:null]),user:n.user,type:"card-feed"};return t.enableTranslation&&t.userLanguage!==_()&&(o.translationCallback=()=>U({type:"translate-text",params:{text:t.description,userLanguage:t.userLanguage}})),o.description=ve(o.description),o.isOnline=t.isOnline,o.mediaType=r.type,o}function fe(t){if(!t)return null;let i=t._id&&t._id.startsWith&&t._id.startsWith("offline_"),n=t,e=oe(n),r=e.mediaSrc,s=!n.validated&&(L().canCreateFeedNoValidation||t.userRef===M().userId),o={heading:n.user&&n.user._id?te(n.user):n.missiondescription?n.missiondescription.title:"",subheadings:[Zn.timeAgo.transform(n._ect||new Date)],tags:n.tags,mediaSrc:r,firstComment:n.validated?t.firstComment:null,mentions:t.mentions,icon:!n.missiondescription||!n.missiondescription.icon||n.user&&n.user._id?null:n.missiondescription.icon._downloadURL,user:n.user,question:n.question,plan:n.plan,feedRef:n._id,firstCommentHandler:()=>{U({type:"feed-comment",params:{feed:t}})},mediaIcons:j([ae(t)?{cssClass:"yo-attachment",position:{bottom:!0,left:!0}}:null]),document:n.document,type:"card-feed",mediaBadges:j([i?{text:p("PENDINGOFFLINE"),cssClass:"tag small round stable-light",position:{top:!0,left:!0}}:null,s?{text:p("PENDINGVALIDATION"),cssClass:"tag small round danger",position:{top:!0,left:!0}}:null]),groups:le(n.group),chartDefinition:n.pollChartDefinition,chartConfig:n.pollChartConfig,chartTotal:n.pollTotal,chartBarTotal:n.pollBarTotal};return s&&(o.showBottomActionsOnly=!0,n.pollIsLong&&n.poll&&n.poll&&n.poll.title?(o.pollTitle=n.poll.title,o.pollIsLong=n.pollIsLong):n.pollChartDefinition||(o.pollTitle=n.pollTitle,o.pollAnswers=[n.pollQuestion1,n.pollQuestion2,n.pollQuestion3,n.pollQuestion4,n.pollQuestion5])),o.description=s&&o.pollTitle&&!o.description?n.descriptionTranslated||H(n.description||""):n.descriptionTranslated||H(n.description||n.pollTitle||""),t.enableTranslation&&t.userLanguage!==_()&&(o.translationCallback=()=>U({type:"translate-text",params:{text:t.description,userLanguage:t.userLanguage}})),o.description=ve(o.description),o.isOnline=t.isOnline,o.mediaType=e.type,o}function le(t){let i=M(),n=[].concat(t);if(i.allGroups){let t=[];return n.forEach(n=>{let e=i.allGroups.find(t=>t._id===n);e&&e.title&&t.push(p(e.title))}),t}return n}function de(t){return!(!t||!t.users)&&t.users.map(t=>t._id).includes(M().userId)}function ve(t){if(t&&t.split){let i="";return t.split(" ").forEach(t=>{i+=`${pe(t)} `}),i||t}return t}function pe(t){return t&&t.match&&t.match(/[^<]*(<a href="([^"]+)">([^<]+)<\/a>)/g)?t:t.replace(/(https?:\/\/[^\s]+)/g,t=>`<a original class="${V()}" href="${t}">${t}</a>`)}var me=Mt(function(t){t.exports=function t(i,n,e){function r(o,a){if(!n[o]){if(!i[o]){var u="function"==typeof It&&It;if(!a&&u)return u(o,!0);if(s)return s(o,!0);throw new Error("Cannot find module '"+o+"'")}var c=n[o]={exports:{}};i[o][0].call(c.exports,function(t){return r(i[o][1][t]||t)},c,c.exports,t,i,n,e)}return n[o].exports}for(var s="function"==typeof It&&It,o=0;o<e.length;o++)r(e[o]);return r}({1:[function(){},{}],2:[function(t,i,n){(function(t){function i(t,i){for(var n=0,e=t.length-1;e>=0;e--){var r=t[e];"."===r?t.splice(e,1):".."===r?(t.splice(e,1),n++):n&&(t.splice(e,1),n--)}if(i)for(;n--;n)t.unshift("..");return t}var e=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/,r=function(t){return e.exec(t).slice(1)};function s(t,i){if(t.filter)return t.filter(i);for(var n=[],e=0;e<t.length;e++)i(t[e],e,t)&&n.push(t[e]);return n}n.resolve=function(){for(var n="",e=!1,r=arguments.length-1;r>=-1&&!e;r--){var o=r>=0?arguments[r]:t.cwd();if("string"!=typeof o)throw new TypeError("Arguments to path.resolve must be strings");o&&(n=o+"/"+n,e="/"===o.charAt(0))}return(e?"/":"")+(n=i(s(n.split("/"),function(t){return!!t}),!e).join("/"))||"."},n.normalize=function(t){var e=n.isAbsolute(t),r="/"===o(t,-1);return(t=i(s(t.split("/"),function(t){return!!t}),!e).join("/"))||e||(t="."),t&&r&&(t+="/"),(e?"/":"")+t},n.isAbsolute=function(t){return"/"===t.charAt(0)},n.join=function(){var t=Array.prototype.slice.call(arguments,0);return n.normalize(s(t,function(t){if("string"!=typeof t)throw new TypeError("Arguments to path.join must be strings");return t}).join("/"))},n.relative=function(t,i){function e(t){for(var i=0;i<t.length&&""===t[i];i++);for(var n=t.length-1;n>=0&&""===t[n];n--);return i>n?[]:t.slice(i,n-i+1)}t=n.resolve(t).substr(1),i=n.resolve(i).substr(1);for(var r=e(t.split("/")),s=e(i.split("/")),o=Math.min(r.length,s.length),a=o,u=0;u<o;u++)if(r[u]!==s[u]){a=u;break}var c=[];for(u=a;u<r.length;u++)c.push("..");return(c=c.concat(s.slice(a))).join("/")},n.sep="/",n.delimiter=":",n.dirname=function(t){var i=r(t),n=i[0],e=i[1];return n||e?(e&&(e=e.substr(0,e.length-1)),n+e):"."},n.basename=function(t,i){var n=r(t)[2];return i&&n.substr(-1*i.length)===i&&(n=n.substr(0,n.length-i.length)),n},n.extname=function(t){return r(t)[3]};var o="b"==="ab".substr(-1)?function(t,i,n){return t.substr(i,n)}:function(t,i,n){return i<0&&(i=t.length+i),t.substr(i,n)}}).call(this,t("FWaASH"))},{FWaASH:3}],3:[function(t,i){var n=i.exports={};function e(){}n.nextTick=function(){var t="undefined"!=typeof window&&window.setImmediate,i="undefined"!=typeof window&&window.postMessage&&window.addEventListener;if(t)return function(t){return window.setImmediate(t)};if(i){var n=[];return window.addEventListener("message",function(t){var i=t.source;i!==window&&null!==i||"process-tick"!==t.data||(t.stopPropagation(),n.length>0&&n.shift()())},!0),function(t){n.push(t),window.postMessage("process-tick","*")}}return function(t){setTimeout(t,0)}}(),n.title="browser",n.browser=!0,n.env={},n.argv=[],n.on=e,n.addListener=e,n.once=e,n.off=e,n.removeListener=e,n.removeAllListeners=e,n.emit=e,n.binding=function(){throw new Error("process.binding is not supported")},n.cwd=function(){return"/"},n.chdir=function(){throw new Error("process.chdir is not supported")}},{}],4:[function(t,i){i.exports=function(i,n){var e=t("./parser"),r={abs:Math.abs,ceil:Math.ceil,floor:Math.floor,log:Math.log,max:Math.max,min:Math.min,random:Math.random,round:Math.round,sqrt:Math.sqrt};if(n)for(var s in n)n.hasOwnProperty(s)&&(r[s]=n[s]);var o=e.parse(i),a=[];a.push("return "),o.forEach(function t(i){Array.isArray(i)?i.forEach(t):a.push(i)}),a.push(";");var u=new Function("functions","data",a.join(""));return function(t){return u(r,t)}}},{"./parser":5}],5:[function(t,i,n){(function(e){var r=function(){var t={trace:function(){},yy:{},symbols_:{error:2,expressions:3,e:4,EOF:5,"+":6,"-":7,"*":8,"/":9,"%":10,"^":11,and:12,or:13,not:14,"==":15,"!=":16,"<":17,"<=":18,">":19,">=":20,"?":21,":":22,"(":23,")":24,NUMBER:25,STRING:26,SYMBOL:27,argsList:28,in:29,inSet:30,",":31,$accept:0,$end:1},terminals_:{2:"error",5:"EOF",6:"+",7:"-",8:"*",9:"/",10:"%",11:"^",12:"and",13:"or",14:"not",15:"==",16:"!=",17:"<",18:"<=",19:">",20:">=",21:"?",22:":",23:"(",24:")",25:"NUMBER",26:"STRING",27:"SYMBOL",29:"in",31:","},productions_:[0,[3,2],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,2],[4,3],[4,3],[4,2],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,5],[4,3],[4,1],[4,1],[4,1],[4,4],[4,5],[4,6],[28,1],[28,3],[30,1],[30,3]],performAction:function(t,i,n,e,r,s){var o=s.length-1;switch(r){case 1:return s[o-1];case 2:this.$=["(",s[o-2],"+",s[o],")"];break;case 3:this.$=["(",s[o-2],"-",s[o],")"];break;case 4:this.$=["(",s[o-2],"*",s[o],")"];break;case 5:this.$=["(",s[o-2],"/",s[o],")"];break;case 6:this.$=["(",s[o-2],"%",s[o],")"];break;case 7:this.$=["(","Math.pow(",s[o-2],",",s[o],")",")"];break;case 8:this.$=["(","-",s[o],")"];break;case 9:this.$=["(","Number(",s[o-2],"&&",s[o],")",")"];break;case 10:this.$=["(","Number(",s[o-2],"||",s[o],")",")"];break;case 11:this.$=["(","Number(!",s[o],")",")"];break;case 12:this.$=["(","Number(",s[o-2],"==",s[o],")",")"];break;case 13:this.$=["(","Number(",s[o-2],"!=",s[o],")",")"];break;case 14:this.$=["(","Number(",s[o-2],"<",s[o],")",")"];break;case 15:this.$=["(","Number(",s[o-2],"<=",s[o],")",")"];break;case 16:this.$=["(","Number(",s[o-2],"> ",s[o],")",")"];break;case 17:this.$=["(","Number(",s[o-2],">=",s[o],")",")"];break;case 18:this.$=["(",s[o-4],"?",s[o-2],":",s[o],")"];break;case 19:this.$=["(",s[o-1],")"];break;case 20:this.$=["(",s[o],")"];break;case 21:this.$=["(",'"',s[o],'"',")"];break;case 22:this.$=["(",'data["',s[o],'"]',")"];break;case 23:this.$=["(","functions.",s[o-3],"(",s[o-1],")",")"];break;case 24:this.$=["(",s[o-4]," in (function(o) { ",s[o-1],"return o; })({})",")"];break;case 25:this.$=["(","!(",s[o-5]," in (function(o) { ",s[o-1],"return o; })({}))",")"];break;case 26:this.$=[s[o]];break;case 27:this.$=[s[o-2],",",s[o]];break;case 28:this.$=["o[",s[o],"] = true; "];break;case 29:this.$=[s[o-2],"o[",s[o],"] = true; "]}},table:[{3:1,4:2,7:[1,3],14:[1,4],23:[1,5],25:[1,6],26:[1,7],27:[1,8]},{1:[3]},{5:[1,9],6:[1,10],7:[1,11],8:[1,12],9:[1,13],10:[1,14],11:[1,15],12:[1,16],13:[1,17],14:[1,26],15:[1,18],16:[1,19],17:[1,20],18:[1,21],19:[1,22],20:[1,23],21:[1,24],29:[1,25]},{4:27,7:[1,3],14:[1,4],23:[1,5],25:[1,6],26:[1,7],27:[1,8]},{4:28,7:[1,3],14:[1,4],23:[1,5],25:[1,6],26:[1,7],27:[1,8]},{4:29,7:[1,3],14:[1,4],23:[1,5],25:[1,6],26:[1,7],27:[1,8]},{5:[2,20],6:[2,20],7:[2,20],8:[2,20],9:[2,20],10:[2,20],11:[2,20],12:[2,20],13:[2,20],14:[2,20],15:[2,20],16:[2,20],17:[2,20],18:[2,20],19:[2,20],20:[2,20],21:[2,20],22:[2,20],24:[2,20],29:[2,20],31:[2,20]},{5:[2,21],6:[2,21],7:[2,21],8:[2,21],9:[2,21],10:[2,21],11:[2,21],12:[2,21],13:[2,21],14:[2,21],15:[2,21],16:[2,21],17:[2,21],18:[2,21],19:[2,21],20:[2,21],21:[2,21],22:[2,21],24:[2,21],29:[2,21],31:[2,21]},{5:[2,22],6:[2,22],7:[2,22],8:[2,22],9:[2,22],10:[2,22],11:[2,22],12:[2,22],13:[2,22],14:[2,22],15:[2,22],16:[2,22],17:[2,22],18:[2,22],19:[2,22],20:[2,22],21:[2,22],22:[2,22],23:[1,30],24:[2,22],29:[2,22],31:[2,22]},{1:[2,1]},{4:31,7:[1,3],14:[1,4],23:[1,5],25:[1,6],26:[1,7],27:[1,8]},{4:32,7:[1,3],14:[1,4],23:[1,5],25:[1,6],26:[1,7],27:[1,8]},{4:33,7:[1,3],14:[1,4],23:[1,5],25:[1,6],26:[1,7],27:[1,8]},{4:34,7:[1,3],14:[1,4],23:[1,5],25:[1,6],26:[1,7],27:[1,8]},{4:35,7:[1,3],14:[1,4],23:[1,5],25:[1,6],26:[1,7],27:[1,8]},{4:36,7:[1,3],14:[1,4],23:[1,5],25:[1,6],26:[1,7],27:[1,8]},{4:37,7:[1,3],14:[1,4],23:[1,5],25:[1,6],26:[1,7],27:[1,8]},{4:38,7:[1,3],14:[1,4],23:[1,5],25:[1,6],26:[1,7],27:[1,8]},{4:39,7:[1,3],14:[1,4],23:[1,5],25:[1,6],26:[1,7],27:[1,8]},{4:40,7:[1,3],14:[1,4],23:[1,5],25:[1,6],26:[1,7],27:[1,8]},{4:41,7:[1,3],14:[1,4],23:[1,5],25:[1,6],26:[1,7],27:[1,8]},{4:42,7:[1,3],14:[1,4],23:[1,5],25:[1,6],26:[1,7],27:[1,8]},{4:43,7:[1,3],14:[1,4],23:[1,5],25:[1,6],26:[1,7],27:[1,8]},{4:44,7:[1,3],14:[1,4],23:[1,5],25:[1,6],26:[1,7],27:[1,8]},{4:45,7:[1,3],14:[1,4],23:[1,5],25:[1,6],26:[1,7],27:[1,8]},{23:[1,46]},{29:[1,47]},{5:[2,8],6:[2,8],7:[2,8],8:[2,8],9:[2,8],10:[2,8],11:[2,8],12:[2,8],13:[2,8],14:[2,8],15:[2,8],16:[2,8],17:[2,8],18:[2,8],19:[2,8],20:[2,8],21:[2,8],22:[2,8],24:[2,8],29:[2,8],31:[2,8]},{5:[2,11],6:[2,11],7:[2,11],8:[2,11],9:[2,11],10:[2,11],11:[2,11],12:[2,11],13:[2,11],14:[2,11],15:[2,11],16:[2,11],17:[2,11],18:[2,11],19:[2,11],20:[2,11],21:[2,11],22:[2,11],24:[2,11],29:[2,11],31:[2,11]},{6:[1,10],7:[1,11],8:[1,12],9:[1,13],10:[1,14],11:[1,15],12:[1,16],13:[1,17],14:[1,26],15:[1,18],16:[1,19],17:[1,20],18:[1,21],19:[1,22],20:[1,23],21:[1,24],24:[1,48],29:[1,25]},{4:50,7:[1,3],14:[1,4],23:[1,5],25:[1,6],26:[1,7],27:[1,8],28:49},{5:[2,2],6:[2,2],7:[2,2],8:[1,12],9:[1,13],10:[1,14],11:[1,15],12:[2,2],13:[2,2],14:[1,26],15:[2,2],16:[2,2],17:[2,2],18:[2,2],19:[2,2],20:[2,2],21:[2,2],22:[2,2],24:[2,2],29:[2,2],31:[2,2]},{5:[2,3],6:[2,3],7:[2,3],8:[1,12],9:[1,13],10:[1,14],11:[1,15],12:[2,3],13:[2,3],14:[1,26],15:[2,3],16:[2,3],17:[2,3],18:[2,3],19:[2,3],20:[2,3],21:[2,3],22:[2,3],24:[2,3],29:[2,3],31:[2,3]},{5:[2,4],6:[2,4],7:[2,4],8:[2,4],9:[2,4],10:[2,4],11:[1,15],12:[2,4],13:[2,4],14:[1,26],15:[2,4],16:[2,4],17:[2,4],18:[2,4],19:[2,4],20:[2,4],21:[2,4],22:[2,4],24:[2,4],29:[2,4],31:[2,4]},{5:[2,5],6:[2,5],7:[2,5],8:[2,5],9:[2,5],10:[2,5],11:[1,15],12:[2,5],13:[2,5],14:[1,26],15:[2,5],16:[2,5],17:[2,5],18:[2,5],19:[2,5],20:[2,5],21:[2,5],22:[2,5],24:[2,5],29:[2,5],31:[2,5]},{5:[2,6],6:[2,6],7:[2,6],8:[2,6],9:[2,6],10:[2,6],11:[1,15],12:[2,6],13:[2,6],14:[1,26],15:[2,6],16:[2,6],17:[2,6],18:[2,6],19:[2,6],20:[2,6],21:[2,6],22:[2,6],24:[2,6],29:[2,6],31:[2,6]},{5:[2,7],6:[2,7],7:[2,7],8:[2,7],9:[2,7],10:[2,7],11:[2,7],12:[2,7],13:[2,7],14:[1,26],15:[2,7],16:[2,7],17:[2,7],18:[2,7],19:[2,7],20:[2,7],21:[2,7],22:[2,7],24:[2,7],29:[2,7],31:[2,7]},{5:[2,9],6:[1,10],7:[1,11],8:[1,12],9:[1,13],10:[1,14],11:[1,15],12:[2,9],13:[2,9],14:[1,26],15:[1,18],16:[1,19],17:[1,20],18:[1,21],19:[1,22],20:[1,23],21:[2,9],22:[2,9],24:[2,9],29:[1,25],31:[2,9]},{5:[2,10],6:[1,10],7:[1,11],8:[1,12],9:[1,13],10:[1,14],11:[1,15],12:[1,16],13:[2,10],14:[1,26],15:[1,18],16:[1,19],17:[1,20],18:[1,21],19:[1,22],20:[1,23],21:[2,10],22:[2,10],24:[2,10],29:[1,25],31:[2,10]},{5:[2,12],6:[1,10],7:[1,11],8:[1,12],9:[1,13],10:[1,14],11:[1,15],12:[2,12],13:[2,12],14:[1,26],15:[2,12],16:[2,12],17:[1,20],18:[1,21],19:[1,22],20:[1,23],21:[2,12],22:[2,12],24:[2,12],29:[2,12],31:[2,12]},{5:[2,13],6:[1,10],7:[1,11],8:[1,12],9:[1,13],10:[1,14],11:[1,15],12:[2,13],13:[2,13],14:[1,26],15:[2,13],16:[2,13],17:[1,20],18:[1,21],19:[1,22],20:[1,23],21:[2,13],22:[2,13],24:[2,13],29:[2,13],31:[2,13]},{5:[2,14],6:[1,10],7:[1,11],8:[1,12],9:[1,13],10:[1,14],11:[1,15],12:[2,14],13:[2,14],14:[1,26],15:[2,14],16:[2,14],17:[2,14],18:[2,14],19:[2,14],20:[2,14],21:[2,14],22:[2,14],24:[2,14],29:[2,14],31:[2,14]},{5:[2,15],6:[1,10],7:[1,11],8:[1,12],9:[1,13],10:[1,14],11:[1,15],12:[2,15],13:[2,15],14:[1,26],15:[2,15],16:[2,15],17:[2,15],18:[2,15],19:[2,15],20:[2,15],21:[2,15],22:[2,15],24:[2,15],29:[2,15],31:[2,15]},{5:[2,16],6:[1,10],7:[1,11],8:[1,12],9:[1,13],10:[1,14],11:[1,15],12:[2,16],13:[2,16],14:[1,26],15:[2,16],16:[2,16],17:[2,16],18:[2,16],19:[2,16],20:[2,16],21:[2,16],22:[2,16],24:[2,16],29:[2,16],31:[2,16]},{5:[2,17],6:[1,10],7:[1,11],8:[1,12],9:[1,13],10:[1,14],11:[1,15],12:[2,17],13:[2,17],14:[1,26],15:[2,17],16:[2,17],17:[2,17],18:[2,17],19:[2,17],20:[2,17],21:[2,17],22:[2,17],24:[2,17],29:[2,17],31:[2,17]},{6:[1,10],7:[1,11],8:[1,12],9:[1,13],10:[1,14],11:[1,15],12:[1,16],13:[1,17],14:[1,26],15:[1,18],16:[1,19],17:[1,20],18:[1,21],19:[1,22],20:[1,23],21:[1,24],22:[1,51],29:[1,25]},{4:53,7:[1,3],14:[1,4],23:[1,5],25:[1,6],26:[1,7],27:[1,8],30:52},{23:[1,54]},{5:[2,19],6:[2,19],7:[2,19],8:[2,19],9:[2,19],10:[2,19],11:[2,19],12:[2,19],13:[2,19],14:[2,19],15:[2,19],16:[2,19],17:[2,19],18:[2,19],19:[2,19],20:[2,19],21:[2,19],22:[2,19],24:[2,19],29:[2,19],31:[2,19]},{24:[1,55],31:[1,56]},{6:[1,10],7:[1,11],8:[1,12],9:[1,13],10:[1,14],11:[1,15],12:[1,16],13:[1,17],14:[1,26],15:[1,18],16:[1,19],17:[1,20],18:[1,21],19:[1,22],20:[1,23],21:[1,24],24:[2,26],29:[1,25],31:[2,26]},{4:57,7:[1,3],14:[1,4],23:[1,5],25:[1,6],26:[1,7],27:[1,8]},{24:[1,58],31:[1,59]},{6:[1,10],7:[1,11],8:[1,12],9:[1,13],10:[1,14],11:[1,15],12:[1,16],13:[1,17],14:[1,26],15:[1,18],16:[1,19],17:[1,20],18:[1,21],19:[1,22],20:[1,23],21:[1,24],24:[2,28],29:[1,25],31:[2,28]},{4:53,7:[1,3],14:[1,4],23:[1,5],25:[1,6],26:[1,7],27:[1,8],30:60},{5:[2,23],6:[2,23],7:[2,23],8:[2,23],9:[2,23],10:[2,23],11:[2,23],12:[2,23],13:[2,23],14:[2,23],15:[2,23],16:[2,23],17:[2,23],18:[2,23],19:[2,23],20:[2,23],21:[2,23],22:[2,23],24:[2,23],29:[2,23],31:[2,23]},{4:61,7:[1,3],14:[1,4],23:[1,5],25:[1,6],26:[1,7],27:[1,8]},{5:[2,18],6:[1,10],7:[1,11],8:[1,12],9:[1,13],10:[1,14],11:[1,15],12:[1,16],13:[1,17],14:[1,26],15:[1,18],16:[1,19],17:[1,20],18:[1,21],19:[1,22],20:[1,23],21:[2,18],22:[2,18],24:[2,18],29:[1,25],31:[2,18]},{5:[2,24],6:[2,24],7:[2,24],8:[2,24],9:[2,24],10:[2,24],11:[2,24],12:[2,24],13:[2,24],14:[2,24],15:[2,24],16:[2,24],17:[2,24],18:[2,24],19:[2,24],20:[2,24],21:[2,24],22:[2,24],24:[2,24],29:[2,24],31:[2,24]},{4:62,7:[1,3],14:[1,4],23:[1,5],25:[1,6],26:[1,7],27:[1,8]},{24:[1,63],31:[1,59]},{6:[1,10],7:[1,11],8:[1,12],9:[1,13],10:[1,14],11:[1,15],12:[1,16],13:[1,17],14:[1,26],15:[1,18],16:[1,19],17:[1,20],18:[1,21],19:[1,22],20:[1,23],21:[1,24],24:[2,27],29:[1,25],31:[2,27]},{6:[1,10],7:[1,11],8:[1,12],9:[1,13],10:[1,14],11:[1,15],12:[1,16],13:[1,17],14:[1,26],15:[1,18],16:[1,19],17:[1,20],18:[1,21],19:[1,22],20:[1,23],21:[1,24],24:[2,29],29:[1,25],31:[2,29]},{5:[2,25],6:[2,25],7:[2,25],8:[2,25],9:[2,25],10:[2,25],11:[2,25],12:[2,25],13:[2,25],14:[2,25],15:[2,25],16:[2,25],17:[2,25],18:[2,25],19:[2,25],20:[2,25],21:[2,25],22:[2,25],24:[2,25],29:[2,25],31:[2,25]}],defaultActions:{9:[2,1]},parseError:function(t,i){if(!i.recoverable)throw new Error(t);this.trace(t)},parse:function(t){var i=this,n=[0],e=[null],r=[],s=this.table,o="",a=0,u=0,c=2,h=1,f=r.slice.call(arguments,1);this.lexer.setInput(t),this.lexer.yy=this.yy,this.yy.lexer=this.lexer,this.yy.parser=this,void 0===this.lexer.yylloc&&(this.lexer.yylloc={});var l=this.lexer.yylloc;r.push(l);var d=this.lexer.options&&this.lexer.options.ranges;function v(){var t;return"number"!=typeof(t=i.lexer.lex()||h)&&(t=i.symbols_[t]||t),t}this.parseError="function"==typeof this.yy.parseError?this.yy.parseError:Object.getPrototypeOf(this).parseError;for(var p,m,b,T,y,g,S,w,A={};;){if(this.defaultActions[b=n[n.length-1]]?T=this.defaultActions[b]:(null==p&&(p=v()),T=s[b]&&s[b][p]),void 0===T||!T.length||!T[0]){var P="";for(g in w=[],s[b])this.terminals_[g]&&g>c&&w.push("'"+this.terminals_[g]+"'");P=this.lexer.showPosition?"Parse error on line "+(a+1)+":\n"+this.lexer.showPosition()+"\nExpecting "+w.join(", ")+", got '"+(this.terminals_[p]||p)+"'":"Parse error on line "+(a+1)+": Unexpected "+(p==h?"end of input":"'"+(this.terminals_[p]||p)+"'"),this.parseError(P,{text:this.lexer.match,token:this.terminals_[p]||p,line:this.lexer.yylineno,loc:l,expected:w})}if(T[0]instanceof Array&&T.length>1)throw new Error("Parse Error: multiple actions possible at state: "+b+", token: "+p);switch(T[0]){case 1:n.push(p),e.push(this.lexer.yytext),r.push(this.lexer.yylloc),n.push(T[1]),p=null,m?(p=m,m=null):(u=this.lexer.yyleng,o=this.lexer.yytext,a=this.lexer.yylineno,l=this.lexer.yylloc);break;case 2:if(A.$=e[e.length-(S=this.productions_[T[1]][1])],A._$={first_line:r[r.length-(S||1)].first_line,last_line:r[r.length-1].last_line,first_column:r[r.length-(S||1)].first_column,last_column:r[r.length-1].last_column},d&&(A._$.range=[r[r.length-(S||1)].range[0],r[r.length-1].range[1]]),void 0!==(y=this.performAction.apply(A,[o,u,a,this.yy,T[1],e,r].concat(f))))return y;S&&(n=n.slice(0,-1*S*2),e=e.slice(0,-1*S),r=r.slice(0,-1*S)),n.push(this.productions_[T[1]][0]),e.push(A.$),r.push(A._$),n.push(s[n[n.length-2]][n[n.length-1]]);break;case 3:return!0}}return!0}};function i(){this.yy={}}return t.lexer={EOF:1,parseError:function(t,i){if(!this.yy.parser)throw new Error(t);this.yy.parser.parseError(t,i)},setInput:function(t){return this._input=t,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var t=this._input[0];return this.yytext+=t,this.yyleng++,this.offset++,this.match+=t,this.matched+=t,t.match(/(?:\r\n?|\n).*/g)?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),t},unput:function(t){var i=t.length,n=t.split(/(?:\r\n?|\n)/g);this._input=t+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-i-1),this.offset-=i;var e=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),n.length-1&&(this.yylineno-=n.length-1);var r=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:n?(n.length===e.length?this.yylloc.first_column:0)+e[e.length-n.length].length-n[0].length:this.yylloc.first_column-i},this.options.ranges&&(this.yylloc.range=[r[0],r[0]+this.yyleng-i]),this.yyleng=this.yytext.length,this},more:function(){return this._more=!0,this},reject:function(){return this.options.backtrack_lexer?(this._backtrack=!0,this):this.parseError("Lexical error on line "+(this.yylineno+1)+". You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},less:function(t){this.unput(this.match.slice(t))},pastInput:function(){var t=this.matched.substr(0,this.matched.length-this.match.length);return(t.length>20?"...":"")+t.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var t=this.match;return t.length<20&&(t+=this._input.substr(0,20-t.length)),(t.substr(0,20)+(t.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var t=this.pastInput(),i=new Array(t.length+1).join("-");return t+this.upcomingInput()+"\n"+i+"^"},test_match:function(t,i){var n,e,r;if(this.options.backtrack_lexer&&(r={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(r.yylloc.range=this.yylloc.range.slice(0))),(e=t[0].match(/(?:\r\n?|\n).*/g))&&(this.yylineno+=e.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:e?e[e.length-1].length-e[e.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+t[0].length},this.yytext+=t[0],this.match+=t[0],this.matches=t,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(t[0].length),this.matched+=t[0],n=this.performAction.call(this,this.yy,this,i,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),n)return n;if(this._backtrack){for(var s in r)this[s]=r[s];return!1}return!1},next:function(){if(this.done)return this.EOF;var t,i,n,e;this._input||(this.done=!0),this._more||(this.yytext="",this.match="");for(var r=this._currentRules(),s=0;s<r.length;s++)if((n=this._input.match(this.rules[r[s]]))&&(!i||n[0].length>i[0].length)){if(i=n,e=s,this.options.backtrack_lexer){if(!1!==(t=this.test_match(n,r[s])))return t;if(this._backtrack){i=!1;continue}return!1}if(!this.options.flex)break}return i?!1!==(t=this.test_match(i,r[e]))&&t:""===this._input?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){return this.next()||this.lex()},begin:function(t){this.conditionStack.push(t)},popState:function(){return this.conditionStack.length-1>0?this.conditionStack.pop():this.conditionStack[0]},_currentRules:function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},topState:function(t){return(t=this.conditionStack.length-1-Math.abs(t||0))>=0?this.conditionStack[t]:"INITIAL"},pushState:function(t){this.begin(t)},stateStackSize:function(){return this.conditionStack.length},options:{},performAction:function(t,i,n){switch(n){case 0:return"*";case 1:return"/";case 2:return"-";case 3:return"+";case 4:return"^";case 5:return"%";case 6:return"(";case 7:return")";case 8:return",";case 9:return"==";case 10:return"!=";case 11:return">=";case 12:return"<=";case 13:return"<";case 14:return">";case 15:return"?";case 16:return":";case 17:return"and";case 18:return"or";case 19:return"not";case 20:return"in";case 21:break;case 22:return"NUMBER";case 23:return"SYMBOL";case 24:return i.yytext=i.yytext.substr(1,i.yyleng-2),"STRING";case 25:return"EOF"}},rules:[/^(?:\*)/,/^(?:\/)/,/^(?:-)/,/^(?:\+)/,/^(?:\^)/,/^(?:\%)/,/^(?:\()/,/^(?:\))/,/^(?:\,)/,/^(?:==)/,/^(?:\!=)/,/^(?:>=)/,/^(?:<=)/,/^(?:<)/,/^(?:>)/,/^(?:\?)/,/^(?:\:)/,/^(?:and[^\w])/,/^(?:or[^\w])/,/^(?:not[^\w])/,/^(?:in[^\w])/,/^(?:\s+)/,/^(?:[0-9]+(?:\.[0-9]+)?\b)/,/^(?:[a-zA-Z][\.a-zA-Z0-9_]*)/,/^(?:"(?:[^"])*")/,/^(?:$)/],conditions:{INITIAL:{rules:[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25],inclusive:!0}}},i.prototype=t,t.Parser=i,new i}();void 0!==t&&void 0!==n&&(n.parser=r,n.Parser=r.Parser,n.parse=function(){return r.parse.apply(r,arguments)},n.main=function(i){i[1]||(console.log("Usage: "+i[0]+" FILE"),e.exit(1));var r=t("fs").readFileSync(t("path").normalize(i[1]),"utf8");return n.parser.parse(r)},void 0!==i&&t.main===i&&n.main(e.argv.slice(1)))}).call(this,t("FWaASH"))},{FWaASH:3,fs:1,path:2}]},{},[4])(4)}),be=Mt(function(t){t.exports=function(){var t=Object.prototype.toString;function i(t,i){return null!=t&&Object.prototype.hasOwnProperty.call(t,i)}function n(t){if(!t)return!0;if(r(t)&&0===t.length)return!0;if("string"!=typeof t){for(var n in t)if(i(t,n))return!1;return!0}return!1}function e(i){return t.call(i)}var r=Array.isArray||function(i){return"[object Array]"===t.call(i)};function s(t){var i=parseInt(t);return i.toString()===t?i:t}function o(t){t=t||{};var o=function(t){return Object.keys(o).reduce(function(i,n){return"create"===n?i:("function"==typeof o[n]&&(i[n]=o[n].bind(o,t)),i)},{})};function a(n,e){return t.includeInheritedProps||"number"==typeof e&&Array.isArray(n)||i(n,e)}function u(t,i){if(a(t,i))return t[i]}function c(t,i,n,e){if("number"==typeof i&&(i=[i]),!i||0===i.length)return t;if("string"==typeof i)return c(t,i.split(".").map(s),n,e);var r=i[0],o=u(t,r);return 1===i.length?(void 0!==o&&e||(t[r]=n),o):(void 0===o&&(t[r]="number"==typeof i[1]?[]:{}),c(t[r],i.slice(1),n,e))}return o.has=function(n,e){if("number"==typeof e?e=[e]:"string"==typeof e&&(e=e.split(".")),!e||0===e.length)return!!n;for(var o=0;o<e.length;o++){var a=s(e[o]);if(!("number"==typeof a&&r(n)&&a<n.length||(t.includeInheritedProps?a in Object(n):i(n,a))))return!1;n=n[a]}return!0},o.ensureExists=function(t,i,n){return c(t,i,n,!0)},o.set=function(t,i,n,e){return c(t,i,n,e)},o.insert=function(t,i,n,e){var s=o.get(t,i);e=~~e,r(s)||o.set(t,i,s=[]),s.splice(e,0,n)},o.empty=function(t,i){var s,u;if(!n(i)&&null!=t&&(s=o.get(t,i))){if("string"==typeof s)return o.set(t,i,"");if("boolean"==typeof s||"[object Boolean]"===e(s))return o.set(t,i,!1);if("number"==typeof s)return o.set(t,i,0);if(r(s))s.length=0;else{if("object"!=typeof s||"[object Object]"!==e(s))return o.set(t,i,null);for(u in s)a(s,u)&&delete s[u]}}},o.push=function(t,i){var n=o.get(t,i);r(n)||o.set(t,i,n=[]),n.push.apply(n,Array.prototype.slice.call(arguments,2))},o.coalesce=function(t,i,n){for(var e,r=0,s=i.length;r<s;r++)if(void 0!==(e=o.get(t,i[r])))return e;return n},o.get=function(t,i,n){if("number"==typeof i&&(i=[i]),!i||0===i.length)return t;if(null==t)return n;if("string"==typeof i)return o.get(t,i.split("."),n);var e=s(i[0]),r=u(t,e);return void 0===r?n:1===i.length?r:o.get(t[e],i.slice(1),n)},o.del=function(t,i){if("number"==typeof i&&(i=[i]),null==t)return t;if(n(i))return t;if("string"==typeof i)return o.del(t,i.split("."));var e=s(i[0]);return a(t,e)?1!==i.length?o.del(t[e],i.slice(1)):(r(t)?t.splice(e,1):delete t[e],t):t},o}var a=o();return a.create=o,a.withInheritedProps=o({includeInheritedProps:!0}),a}()});const Te=me,ye=be;function ge(t,i=!1,n,e="",r=M()){let s=!1!==t.visible;return!1!==t.visible||t.condition?t.hideMobile?s=!1:!i&&!0!==t.readonly||t.condition?(i||!0===t.readonly)&&t.condition?s=(s=Pe(t,n,e))&&(F(t.condition)?ke(t.condition,n):Me(W(t.condition,[]),n,e,r)):t.condition&&F(t.condition)?s=ke(t.condition,n):t.condition&&(X(t.condition)&&t.condition.length>0||$(t.condition))&&(s=Me(W(t.condition,[]),n,e,r)):s=Pe(t,n,e):s=!1,0===s&&(s=!1),s}function Se(t,i,n,e="",r=M()){let s=!1;return!1===n?s=!1:!0===t.required?s=!0:!1===t.required?s=!1:!z(t.required)&&F(t.required)?s=ke(t.required,i):!z(t.required)&&(X(t.required)&&t.required.length>0||$(t.required))&&(s=Me(W(t.required,[]),i,e,r)),s}function we(t,i,n="",e=M()){let r=!1;return!0===t.readonly?r=!0:!1===t.readonly?r=!1:!z(t.readonly)&&F(t.readonly)?r=ke(t.readonly,i):!z(t.readonly)&&(X(t.readonly)&&t.readonly.length>0||$(t.readonly))&&(r=Me(W(t.readonly,[]),i,n,e)),r}function Ae(t){return t.type===K.information||t.type===K.image||t.type===K.document||t.type===K.videoplayer||t.type===K.wiki||t.type===K.plan}function Pe(t,i,n=""){if(Ae(t))return!0;let e=qe(t,i,n),r=!1;return q(e.data)&&""!==e.data&&(r=!0,$(e.data)&&!Y(e.data)&&!c(e.data)&&Q(e.data)&&(r=!1),t.type!==K.todo||e.data&&e.data.values&&!(e.data.values.length<=0)||(r=!1)),q(t.fieldValue)&&(r=!0),r}function Me(t,i,n="",e={}){let r=!0;t=[].concat(t);for(let s of t)if(F(s))r=r&&ke(s,i);else if("field"===s.type){let t;if(s.field.type===K.selectmulti||s.field.type===K.selectbuttonsmulti)t='contains(getAttributeValue("'+s.field.name+n+'"), "'+s.values+'", "'+s.operator+'")';else if(s.field.type===K.select||s.field.type===K.selectbuttons||s.field.type===K.autocomplete)t='contains(getAttributeValue("'+s.field.name+n+'"), "'+s.values+'", "'+s.operator+'")';else{let i=s.value;if(i||!1===i||0===i||(i=s.values),">="===s.operator||"<="===s.operator||"greaterthan"===s.operator||"lessthan"===s.operator){let e="";s.field.type!==K.date&&s.field.type!==K.datetime&&s.field.type!==K.time||(e='"'),t='getAttributeValue("'+s.field.name+n+'")'+("greaterthan"===s.operator?">=":"lessthan"===s.operator?"<=":s.operator)+e+i+e}else t='toStringAndUppercase(getAttributeValue("'+s.field.name+n+'"))'+("equals"===s.operator||"==="===s.operator?"==":"notequals"===s.operator||"!=="===s.operator?"!=":"==")+'toStringAndUppercase("'+i+'")'}let e=ke(t,i);r=r&&e}else if("tags"===s.type){if(e&&e.selectedLocation){let t="in"!==s.operator&&s.operator?0===J(e.selectedLocation.tags,s.tags).length:J(e.selectedLocation.tags,s.tags).length>0;r=r&&t}}else if("groups"===s.type||"roles"===s.type){let t="groups"===s.type?e.groups:e.roles,i="in"===s.operator?J(t,s.group).length>0:0===J(t,s.group).length;r=r&&i}else if("missionDescriptionAttribute"===s.type){if(e&&e.selectedMissionDescription){let t=Z(e.selectedMissionDescription[s.key],s.value);r=r&&t}}else if("authentication"===s.type&&"yoobictenantadmin"===s.value){let t=tt();t&&t.isYoobicTenantAdmin&&(r="not"===s.operator?t.isAdmin()&&!t.isYoobicTenantAdmin():t.isAdmin()&&t.isYoobicTenantAdmin())}else if("tenant"===s.type&&e&&e.tenant){let t=e.tenant;r="not"===s.operator?t.name!==s.value:"in"===s.operator?s.value.indexOf(t.name)>=0:t.name===s.value}return r}function Ee(t=[],i,n=""){let e=[];return t&&t.forEach(t=>{t&&t.items&&(e=e.concat(t.items))}),e&&e.length>0&&e.forEach(t=>{if(t.type===K.formula){let r=t.formula;if(r){let s=[];for(let t in e){let i=e[t];r.indexOf(i.title)>=0&&s.push({original:i.title,replacement:i.name+n})}(s=it(s,t=>-t.original.length)).forEach(t=>{r=r.replace(new RegExp(t.original,"g"),'getAttributeValue("'+t.replacement+'")')});let o=ke(r,i,!0);Ie(t,o=g(o)&&!isNaN(o)&&isFinite(o)?Math.round(100*o)/100:null,i,n)}}}),!1}function Ie(t,i,n,e){let r=qe(t,n,e);nt(n,r.name,i)}function ke(t,i,n=!1){let e={getAttributeValue:Ge(i),contains:De,isNullOrEmpty:Ce,toStringAndUppercase:Oe,endsWith:xe,indexOf:Be(i),length:Re(i)};if("string"!=typeof t)return!0;let r=i;t.indexOf(".")>0&&(r=function(){let t={};return function t(i,n,e){return n=n||[],st(i=i||{},(i,r)=>{let s=y(n),o={};if(s.push(r),F(i)||g(i)||ot(i)){let t=s.join(".");o[t]=e[t]=i}else t(i,s,e),o=i;return o})}(i,[],t),t}());try{let i=Te(t,e)(r||{});return n?i:!!i}catch(t){window.console.log(t)}return!0}function De(t,i,n){(!t||X(t)&&0===t.length)&&(t=[]),X(t)||(t=[t]);let e=i.split(","),r=0;for(let i of e)rt(t,i)>=0&&r++;switch(n){case"in":case"contains":return r>=1;case"notin":case"notcontains":return 0===r;case"containsall":return r===e.length;case"equals":case"===":return e.length===t.length&&r===e.length;case"notequals":case"!==":return e.length===t.length&&0===r}}function Ce(t){return!(!z(t)&&0!==t.length)}function Ge(t){return i=>ye.get(t,i)}function Oe(t){return null!=t&&void 0!==t&&t.toString?t.toString().toUpperCase():t}function Be(t){return(i,n)=>{let e=ye.get(t,i);return e&&e.indexOf?e.indexOf(n):-1}}function xe(t,i){return!(!t||!t.endsWith)&&t.endsWith(i)}function Re(t){return i=>{let n=ye.get(t,i);if(X(n)){let t=n;if(t&&t.indexOf)return t.length}else{if(F(n)&&!et(n)&&!P(n))return n.length;if($(n)&&!Q(n))return 1}return 0}}function Ne(t){return t.type===K.number||t.type===K.numberpicker||t.type===K.range||t.type===K.starrating}function He(t){return t.type===K.checkbox||t.type===K.toggle}function je(t){return t.type===K.photo||t.type===K.signature||t.type===K.autocomplete&&"files"===t.collectionName}function _e(t){return t.type===K.multiphotos}function Ue(t){return je(t)||_e(t)}function Le(t){return t.type===K.video}function Ve(t){return t.type===K.date||t.type===K.datetime}function Fe(t){return t.type===K.number||t.type===K.starrating||t.type===K.date||t.type===K.datetime||t.type===K.time}function We(t){switch(t.type){case K.selectmulti:case K.selectbuttonsmulti:case K.ranking:return!0;case K.autocomplete:return!0===t.multiple}return!1}function Xe(t){switch(t.type){case K.select:case K.selectmulti:case K.selectbuttons:case K.selectbuttonsmulti:return!0}return!1}function $e(t,i,n){let e=n.type!==K.ranking&&n.type!==K.missingword&&n.type!==K.categorizewords&&n.type!==K.connect&&n.type!==K.swipecards&&n.type!==K.imagetagging;if(Ne(n)&&(i=[].concat(i).map(t=>t-0)),He(n)&&(i=[].concat(i).map(t=>!(et(t)||P(t)||"true"!==t&&!0!==t&&t.toUpperCase()!==this.translate.get("true").toUpperCase()))),i&&i.sort&&e)return Z(i.sort(),[].concat(t).sort());if(n.type===K.connect&&i&&t){let n=[],e=[];return t.forEach(t=>{n.push(t.sort())}),i.forEach(t=>{e.push(t.sort())}),t=n.sort(),i=e.sort(),Z([].concat(i),[].concat(t))}return n.type===K.swipecards&&i&&t?t.findIndex((t,n)=>!i[n]||!Z([].concat(t.sort()),[].concat(i[n].sort())))<0:n.type===K.categorizewords&&i&&t?!t.map((t,n)=>t.sort().toString()===i[n].sort().toString()).some(t=>!1===t):!!i&&Z([].concat(i),[].concat(t))}function ze(t,i){return t.name+(i||"")}function Ke(t,i,n){let e=ze(t,n),r=ye.get(i,e);return".value"===n&&m(r)&&q(t.fieldValue)&&(r=t.fieldValue),r}function qe(t,i,n){return{name:ze(t,n),data:Ke(t,i,n)}}function Ye(t){let i;return t.description||(t.title?i=p(t.title):((i=t.name||"")&&i.toString&&(i=i.toString()),i&&F(i)&&(i=p(i.toUpperCase())))),i}function Qe(t){let i=[].concat(at).filter(i=>i.type===t);return i&&i.length>0?i[0].icon:""}function Je(t){return t&&t.startsWith("%")&&t.endsWith("%")&&t.length>1}function Ze(t,i,n){let e=t.toLowerCase().replace(/[^a-zA-Z0-9]+/g,"").substr(0,9).toUpperCase();return n&&n.slideIndex&&(e+="_S"+n.slideIndex.toString()),n&&n.fieldIndex&&(e+="_F"+n.fieldIndex.toString()),(e+="_"+i.toLowerCase().replace(/[^a-zA-Z0-9]+/g,"").substr(0,9).toUpperCase())+"_"+Math.random().toString(36).substr(2,9).toUpperCase()}function tr(t,i,n){return"string"==typeof i[t]?i[t]:i[t]&&i[t].condition&&F(i[t].condition)&&i[t][Me(i[t].condition,n)]||"TITLE"}function ir(t,i,n,e,r="K"){let s=Math.PI*t/180,o=Math.PI*n/180,a=Math.PI*(i-e)/180,u=Math.sin(s)*Math.sin(o)+Math.cos(s)*Math.cos(o)*Math.cos(a);return u=60*(u=180*(u=Math.acos(u))/Math.PI)*1.1515,"K"===r&&(u*=1.609344),"N"===r&&(u*=.8684),u}function nr(){return new Promise(t=>{if(navigator&&navigator.geolocation&&navigator.geolocation.getCurrentPosition)return navigator.geolocation.getCurrentPosition(()=>t(!0),i=>{i&&1===i.code&&t(!1),t(!0)});t(!0)})}function er(t){return t.aclRole&&t.aclRole.title?[{text:H(t.aclRole.title),cssClass:"tag small round stable"}]:[]}function rr(t){let i={text:p("ONGOING"),cssClass:"tag small round info"};t.archived&&(i.text=p("ARCHIVED"),i.cssClass="small round black");let n=[i];return t.type&&n.unshift({text:p(t.type.toUpperCase()),cssClass:"tag small round stable"}),t.storesQuery&&t.storesQuery.total&&n.push({text:p(t.storesQuery.total.toLocaleString()),iconLeft:"yo-store",cssClass:"tag small round dark"}),n}function sr(t,i){let n,e={text:p("mission"===t.type?"PENDINGVALIDATION":"visit"===t.type?"SCHEDULED":"PENDING"),cssClass:"tag small round stable",progressClass:"warning"},r={text:p("PENDINGOFFLINE"),cssClass:"tag small round energized",progressClass:null},s={text:p("visit"===t.type?"APPROVED":"VALIDATED"),cssClass:"tag small round success",progressClass:void 0},o={text:p("visit"===t.type?"DECLINED":"REJECTED"),cssClass:"tag small round danger",progressClass:void 0};"visit"===t.type?n=t.validated?s:!1===t.validated?o:e:"pending"===t.status?n=r:"booked"===t.status?n=t.needsRebooking?{text:p("REVIEW"),cssClass:"tag small round royal",progressClass:"royal"}:t.isAssigned&&t.creatorRef===M().userId?{text:p("ASSIGNED"),cssClass:"tag small round warning",progressClass:"info"}:{text:p("BOOKED"),cssClass:"tag small round info",progressClass:"info"}:"finished"===t.status?n=!0===t.validated?s:!1===t.validated?o:e:"draft"===t.status?n={text:p("DRAFT"),cssClass:"tag small round black",progressClass:void 0}:"service"===t.type&&t.creatorRef===M().userId?n=t._id&&t._id.startsWith("offline_")?r:e:"todo"===t.type&&t.progress&&t.progress.value>0?n={text:p("BOOKED"),cssClass:"tag small round info",progressClass:"info"}:t.republishCount>0&&!t.autoRenew&&!t.autoRenewOnBooking?n={text:p("REPUBLISHED"),cssClass:"tag small round royal",progressClass:void 0}:ut(new Date,t._ect)<=1&&(n={text:p("NEW"),cssClass:"tag small round accent",progressClass:"success"});let a=[];return n&&a.push(n),t.vip&&a.unshift({iconLeft:"yo-star",text:i?"VIP":"",cssClass:"tag small round energized "+(i?"":"icon-only")}),t.priority>0&&a.unshift({text:"P"+t.priority,cssClass:"tag small round stable"}),a}function or(t){let i={text:p("PENDING"),cssClass:"tag small round stable",progressClass:"warning"};return!0===t.validated?{text:p("VALIDATED"),cssClass:"tag small round success",progressClass:void 0}:!1===t.validated?{text:p("REJECTED"),cssClass:"tag small round danger",progressClass:void 0}:i}function ar(t,i="small"){let n,e=M(),r=!!(e&&e.user&&e.user.location)&&e.user.location.disableMarkdownDragging,s=ur(t),o=t.displayDate||t.date?Zn.dateFormat.transform(t.displayDate||t.date,"L")+" - ":"";return t.aisle?t.archived?n={text:p("TREATED"),cssClass:i+" round stable tag",progressClass:void 0}:t.isOutOfStock?(s=ur(t,"treatedDate"),o=t.outOfStockInitialDate||t.treatedDate?" "+Zn.dateFormat.transform(t.outOfStockInitialDate||t.treatedDate,"L"):"",n=-s>=t.aisle.stockDelay?{text:p("OUTOFSTOCKSINCE")+o,cssClass:i+" round black tag",progressClass:void 0}:{text:p("OUTOFSTOCK"),cssClass:i+" round black tag",progressClass:void 0}):t.isNew?n={text:p("NEW"),cssClass:i+" round accent tag",progressClass:void 0}:g(s)&&s<=t.aisle.withdrawalDelay?n={text:o+p("PRODUCTBATCHWITHDRAWAL"),cssClass:i+" round danger tag",progressClass:void 0}:g(s)&&r&&(s>t.aisle.withdrawalDelay&&(!t.aisle.markdownDelay||s<t.aisle.markdownDelay)||!t.aisle.markdownDelay||s>t.aisle.markdownDelay)?n={text:o+p("PRODUCTBATCHVALID"),cssClass:i+" round success tag",progressClass:void 0}:g(s)&&t.aisle.markdownDelay>0&&s<=t.aisle.markdownDelay&&(n={text:o+p("PRODUCTBATCHMARKDOWN"),cssClass:i+" round warning tag",progressClass:void 0}):n={text:p("ERROR"),cssClass:i+" round danger tag",progressClass:void 0},n}function ur(t,i="date"){return ct(t,i)?ht(ft(lt(ct(t,i),"day"),lt(new Date,"day"))):null}function cr(t){return t&&"finished"===t.status?t.validated?{class:"yo-check success",style:"success",text:"APPROVED"}:{class:"yo-rejected danger",style:"danger",text:"REJECTED"}:null}function hr(t){return t<20?"danger":t<80?"warning":"success"}function fr(t,i,n){let e=M().token,r=M().apiUrl;return t&&t._geoloc&&t._geoloc.length>1?r+"GoogleMaps/streetview?access_token="+e+"&size="+2*i+"x"+2*n+"&location="+t._geoloc[1]+","+t._geoloc[0]+"&locationRef="+t._id:null}function lr(t,i="LIKE"){return(t=t||0)+" "+p(t>1?`${i}S`:i)}var dr=function(){var t=function(i,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var n in i)i.hasOwnProperty(n)&&(t[n]=i[n])})(i,n)};return function(i,n){function e(){this.constructor=i}t(i,n),i.prototype=null===n?Object.create(n):(e.prototype=n.prototype,new e)}}(),vr=new(function(i){function n(){var t=null!==i&&i.apply(this,arguments)||this;return t.APP={USER_SELECT:"user_select",APPLE_MAPS:"apple_maps",GOOGLE_MAPS:"google_maps",WAZE:"waze",CITYMAPPER:"citymapper",NAVIGON:"navigon",TRANSIT_APP:"transit_app",YANDEX:"yandex",UBER:"uber",TOMTOM:"tomtom",BING_MAPS:"bing_maps",SYGIC:"sygic",HERE_MAPS:"here_maps",MOOVIT:"moovit"},t.TRANSPORT_MODE={DRIVING:"driving",WALKING:"walking",BICYCLING:"bicycling",TRANSIT:"transit"},t}return dr(n,i),n.prototype.navigate=function(i,n){return t(this,"navigate",{successIndex:2,errorIndex:3},arguments)},n.prototype.isAppAvailable=function(i){return t(this,"isAppAvailable",{},arguments)},n.prototype.availableApps=function(){return t(this,"availableApps",{},arguments)},n.prototype.getAppDisplayName=function(i){return t(this,"getAppDisplayName",{sync:!0},arguments)},n.prototype.getAppsForPlatform=function(i){return t(this,"getAppsForPlatform",{sync:!0},arguments)},n.prototype.supportsTransportMode=function(i,n){return t(this,"supportsTransportMode",{sync:!0},arguments)},n.prototype.getTransportModes=function(i,n){return t(this,"getTransportModes",{sync:!0},arguments)},n.prototype.supportsDestName=function(i,n){return t(this,"supportsDestName",{sync:!0},arguments)},n.prototype.supportsStart=function(i,n){return t(this,"supportsStart",{sync:!0},arguments)},n.prototype.supportsStartName=function(i,n){return t(this,"supportsStartName",{sync:!0},arguments)},n.prototype.supportsLaunchMode=function(i,n){return t(this,"supportsLaunchMode",{sync:!0},arguments)},n.prototype.userSelect=function(i,n){return t(this,"userSelect",{sync:!0},arguments)},n.pluginName="LaunchNavigator",n.plugin="uk.co.workingedge.phonegap.plugin.launchnavigator",n.pluginRef="launchnavigator",n.repo="https://github.com/dpa99c/phonegap-launch-navigator",n.platforms=["Android","iOS","Windows","Windows Phone 8"],n}(i));function pr(t,i){let n=function(t){return st(t,(t,i)=>({title:i.toUpperCase(),value:i,count:t,visible:!0}))}(dt(t,i));return it(n,"count")}function mr(t){return t.map(t=>t.value)}function br(t){return"markers"===t}function Tr(t){return"markers_selected"===t}function yr(){return{available:"accent",booked:"warning",validated:"success",rejected:"danger",tobevalidated:"info",archived:"dark"}}function gr(t,i){let n=t.markers[0],e=i.markers[0];return n._id===e._id||n.selected===e.selected}function Sr(){let t=window.mapboxgl;return!!t&&t.supported()}async function wr(t,i,n,e){let r,s=!1,o=!1,a=!1;f()&&(s=await vr.isAppAvailable(vr.APP.GOOGLE_MAPS),o=await vr.isAppAvailable(vr.APP.APPLE_MAPS),a=await vr.isAppAvailable(vr.APP.CITYMAPPER));let c=[{text:p("USEAPPLEMAPS"),isVisible:()=>f()&&u()&&o,handler:()=>{Ar(t,i),r("applemaps")}},{text:p("USEGOOGLEMAPS"),isVisible:()=>!f()||s,handler:()=>{Mr(t,i),r("googlemaps")}},{text:p("USECITYMAPPER"),isVisible:()=>!f()||a,handler:()=>{Pr(t,i,n,e),r("citymapper")}},{text:p("COPYADDRESS"),handler:()=>{vt(e),r("copyaddress")}}];return T(c),new Promise(t=>r=t)}function Ar(t,i){f()&&u()&&Er(vr.APP.APPLE_MAPS,t,i)}function Pr(t,i,n,e){if(f())Er(vr.APP.CITYMAPPER,t,i);else{let r=`endcoord=${t}%2C${i}`,s="endname="+n.replace(" ","%20"),o="endaddress="+e.replace(" ","%20");window.open("https://citymapper.com/directions?"+r+"&"+s+"&"+o)}}function Mr(t,i){f()?Er(vr.APP.GOOGLE_MAPS,t,i):window.open(`https://www.google.com/maps?saddr=My+Location&daddr=${t},${i}`)}function Er(t,i,n){vr.isAppAvailable(t).then(e=>{e||(t=vr.APP.USER_SELECT),vr.navigate([i,n],{app:t})})}const Ir=new(Mt(function(t){!function(){if(t.exports)return function(i){t.exports=i()};if("undefined"!=typeof window)return function(t){window.MobileDetect=t()};throw new Error("unknown environment")}()(function(){var t,i={mobileDetectRules:{phones:{iPhone:"\\biPhone\\b|\\biPod\\b",BlackBerry:"BlackBerry|\\bBB10\\b|rim[0-9]+",HTC:"HTC|HTC.*(Sensation|Evo|Vision|Explorer|6800|8100|8900|A7272|S510e|C110e|Legend|Desire|T8282)|APX515CKT|Qtek9090|APA9292KT|HD_mini|Sensation.*Z710e|PG86100|Z715e|Desire.*(A8181|HD)|ADR6200|ADR6400L|ADR6425|001HT|Inspire 4G|Android.*\\bEVO\\b|T-Mobile G1|Z520m|Android [0-9.]+; Pixel",Nexus:"Nexus One|Nexus S|Galaxy.*Nexus|Android.*Nexus.*Mobile|Nexus 4|Nexus 5|Nexus 6",Dell:"Dell[;]? (Streak|Aero|Venue|Venue Pro|Flash|Smoke|Mini 3iX)|XCD28|XCD35|\\b001DL\\b|\\b101DL\\b|\\bGS01\\b",Motorola:"Motorola|DROIDX|DROID BIONIC|\\bDroid\\b.*Build|Android.*Xoom|HRI39|MOT-|A1260|A1680|A555|A853|A855|A953|A955|A956|Motorola.*ELECTRIFY|Motorola.*i1|i867|i940|MB200|MB300|MB501|MB502|MB508|MB511|MB520|MB525|MB526|MB611|MB612|MB632|MB810|MB855|MB860|MB861|MB865|MB870|ME501|ME502|ME511|ME525|ME600|ME632|ME722|ME811|ME860|ME863|ME865|MT620|MT710|MT716|MT720|MT810|MT870|MT917|Motorola.*TITANIUM|WX435|WX445|XT300|XT301|XT311|XT316|XT317|XT319|XT320|XT390|XT502|XT530|XT531|XT532|XT535|XT603|XT610|XT611|XT615|XT681|XT701|XT702|XT711|XT720|XT800|XT806|XT860|XT862|XT875|XT882|XT883|XT894|XT901|XT907|XT909|XT910|XT912|XT928|XT926|XT915|XT919|XT925|XT1021|\\bMoto E\\b|XT1068|XT1092|XT1052",Samsung:"\\bSamsung\\b|SM-G950F|SM-G955F|SM-G9250|GT-19300|SGH-I337|BGT-S5230|GT-B2100|GT-B2700|GT-B2710|GT-B3210|GT-B3310|GT-B3410|GT-B3730|GT-B3740|GT-B5510|GT-B5512|GT-B5722|GT-B6520|GT-B7300|GT-B7320|GT-B7330|GT-B7350|GT-B7510|GT-B7722|GT-B7800|GT-C3010|GT-C3011|GT-C3060|GT-C3200|GT-C3212|GT-C3212I|GT-C3262|GT-C3222|GT-C3300|GT-C3300K|GT-C3303|GT-C3303K|GT-C3310|GT-C3322|GT-C3330|GT-C3350|GT-C3500|GT-C3510|GT-C3530|GT-C3630|GT-C3780|GT-C5010|GT-C5212|GT-C6620|GT-C6625|GT-C6712|GT-E1050|GT-E1070|GT-E1075|GT-E1080|GT-E1081|GT-E1085|GT-E1087|GT-E1100|GT-E1107|GT-E1110|GT-E1120|GT-E1125|GT-E1130|GT-E1160|GT-E1170|GT-E1175|GT-E1180|GT-E1182|GT-E1200|GT-E1210|GT-E1225|GT-E1230|GT-E1390|GT-E2100|GT-E2120|GT-E2121|GT-E2152|GT-E2220|GT-E2222|GT-E2230|GT-E2232|GT-E2250|GT-E2370|GT-E2550|GT-E2652|GT-E3210|GT-E3213|GT-I5500|GT-I5503|GT-I5700|GT-I5800|GT-I5801|GT-I6410|GT-I6420|GT-I7110|GT-I7410|GT-I7500|GT-I8000|GT-I8150|GT-I8160|GT-I8190|GT-I8320|GT-I8330|GT-I8350|GT-I8530|GT-I8700|GT-I8703|GT-I8910|GT-I9000|GT-I9001|GT-I9003|GT-I9010|GT-I9020|GT-I9023|GT-I9070|GT-I9082|GT-I9100|GT-I9103|GT-I9220|GT-I9250|GT-I9300|GT-I9305|GT-I9500|GT-I9505|GT-M3510|GT-M5650|GT-M7500|GT-M7600|GT-M7603|GT-M8800|GT-M8910|GT-N7000|GT-S3110|GT-S3310|GT-S3350|GT-S3353|GT-S3370|GT-S3650|GT-S3653|GT-S3770|GT-S3850|GT-S5210|GT-S5220|GT-S5229|GT-S5230|GT-S5233|GT-S5250|GT-S5253|GT-S5260|GT-S5263|GT-S5270|GT-S5300|GT-S5330|GT-S5350|GT-S5360|GT-S5363|GT-S5369|GT-S5380|GT-S5380D|GT-S5560|GT-S5570|GT-S5600|GT-S5603|GT-S5610|GT-S5620|GT-S5660|GT-S5670|GT-S5690|GT-S5750|GT-S5780|GT-S5830|GT-S5839|GT-S6102|GT-S6500|GT-S7070|GT-S7200|GT-S7220|GT-S7230|GT-S7233|GT-S7250|GT-S7500|GT-S7530|GT-S7550|GT-S7562|GT-S7710|GT-S8000|GT-S8003|GT-S8500|GT-S8530|GT-S8600|SCH-A310|SCH-A530|SCH-A570|SCH-A610|SCH-A630|SCH-A650|SCH-A790|SCH-A795|SCH-A850|SCH-A870|SCH-A890|SCH-A930|SCH-A950|SCH-A970|SCH-A990|SCH-I100|SCH-I110|SCH-I400|SCH-I405|SCH-I500|SCH-I510|SCH-I515|SCH-I600|SCH-I730|SCH-I760|SCH-I770|SCH-I830|SCH-I910|SCH-I920|SCH-I959|SCH-LC11|SCH-N150|SCH-N300|SCH-R100|SCH-R300|SCH-R351|SCH-R400|SCH-R410|SCH-T300|SCH-U310|SCH-U320|SCH-U350|SCH-U360|SCH-U365|SCH-U370|SCH-U380|SCH-U410|SCH-U430|SCH-U450|SCH-U460|SCH-U470|SCH-U490|SCH-U540|SCH-U550|SCH-U620|SCH-U640|SCH-U650|SCH-U660|SCH-U700|SCH-U740|SCH-U750|SCH-U810|SCH-U820|SCH-U900|SCH-U940|SCH-U960|SCS-26UC|SGH-A107|SGH-A117|SGH-A127|SGH-A137|SGH-A157|SGH-A167|SGH-A177|SGH-A187|SGH-A197|SGH-A227|SGH-A237|SGH-A257|SGH-A437|SGH-A517|SGH-A597|SGH-A637|SGH-A657|SGH-A667|SGH-A687|SGH-A697|SGH-A707|SGH-A717|SGH-A727|SGH-A737|SGH-A747|SGH-A767|SGH-A777|SGH-A797|SGH-A817|SGH-A827|SGH-A837|SGH-A847|SGH-A867|SGH-A877|SGH-A887|SGH-A897|SGH-A927|SGH-B100|SGH-B130|SGH-B200|SGH-B220|SGH-C100|SGH-C110|SGH-C120|SGH-C130|SGH-C140|SGH-C160|SGH-C170|SGH-C180|SGH-C200|SGH-C207|SGH-C210|SGH-C225|SGH-C230|SGH-C417|SGH-C450|SGH-D307|SGH-D347|SGH-D357|SGH-D407|SGH-D415|SGH-D780|SGH-D807|SGH-D980|SGH-E105|SGH-E200|SGH-E315|SGH-E316|SGH-E317|SGH-E335|SGH-E590|SGH-E635|SGH-E715|SGH-E890|SGH-F300|SGH-F480|SGH-I200|SGH-I300|SGH-I320|SGH-I550|SGH-I577|SGH-I600|SGH-I607|SGH-I617|SGH-I627|SGH-I637|SGH-I677|SGH-I700|SGH-I717|SGH-I727|SGH-i747M|SGH-I777|SGH-I780|SGH-I827|SGH-I847|SGH-I857|SGH-I896|SGH-I897|SGH-I900|SGH-I907|SGH-I917|SGH-I927|SGH-I937|SGH-I997|SGH-J150|SGH-J200|SGH-L170|SGH-L700|SGH-M110|SGH-M150|SGH-M200|SGH-N105|SGH-N500|SGH-N600|SGH-N620|SGH-N625|SGH-N700|SGH-N710|SGH-P107|SGH-P207|SGH-P300|SGH-P310|SGH-P520|SGH-P735|SGH-P777|SGH-Q105|SGH-R210|SGH-R220|SGH-R225|SGH-S105|SGH-S307|SGH-T109|SGH-T119|SGH-T139|SGH-T209|SGH-T219|SGH-T229|SGH-T239|SGH-T249|SGH-T259|SGH-T309|SGH-T319|SGH-T329|SGH-T339|SGH-T349|SGH-T359|SGH-T369|SGH-T379|SGH-T409|SGH-T429|SGH-T439|SGH-T459|SGH-T469|SGH-T479|SGH-T499|SGH-T509|SGH-T519|SGH-T539|SGH-T559|SGH-T589|SGH-T609|SGH-T619|SGH-T629|SGH-T639|SGH-T659|SGH-T669|SGH-T679|SGH-T709|SGH-T719|SGH-T729|SGH-T739|SGH-T746|SGH-T749|SGH-T759|SGH-T769|SGH-T809|SGH-T819|SGH-T839|SGH-T919|SGH-T929|SGH-T939|SGH-T959|SGH-T989|SGH-U100|SGH-U200|SGH-U800|SGH-V205|SGH-V206|SGH-X100|SGH-X105|SGH-X120|SGH-X140|SGH-X426|SGH-X427|SGH-X475|SGH-X495|SGH-X497|SGH-X507|SGH-X600|SGH-X610|SGH-X620|SGH-X630|SGH-X700|SGH-X820|SGH-X890|SGH-Z130|SGH-Z150|SGH-Z170|SGH-ZX10|SGH-ZX20|SHW-M110|SPH-A120|SPH-A400|SPH-A420|SPH-A460|SPH-A500|SPH-A560|SPH-A600|SPH-A620|SPH-A660|SPH-A700|SPH-A740|SPH-A760|SPH-A790|SPH-A800|SPH-A820|SPH-A840|SPH-A880|SPH-A900|SPH-A940|SPH-A960|SPH-D600|SPH-D700|SPH-D710|SPH-D720|SPH-I300|SPH-I325|SPH-I330|SPH-I350|SPH-I500|SPH-I600|SPH-I700|SPH-L700|SPH-M100|SPH-M220|SPH-M240|SPH-M300|SPH-M305|SPH-M320|SPH-M330|SPH-M350|SPH-M360|SPH-M370|SPH-M380|SPH-M510|SPH-M540|SPH-M550|SPH-M560|SPH-M570|SPH-M580|SPH-M610|SPH-M620|SPH-M630|SPH-M800|SPH-M810|SPH-M850|SPH-M900|SPH-M910|SPH-M920|SPH-M930|SPH-N100|SPH-N200|SPH-N240|SPH-N300|SPH-N400|SPH-Z400|SWC-E100|SCH-i909|GT-N7100|GT-N7105|SCH-I535|SM-N900A|SGH-I317|SGH-T999L|GT-S5360B|GT-I8262|GT-S6802|GT-S6312|GT-S6310|GT-S5312|GT-S5310|GT-I9105|GT-I8510|GT-S6790N|SM-G7105|SM-N9005|GT-S5301|GT-I9295|GT-I9195|SM-C101|GT-S7392|GT-S7560|GT-B7610|GT-I5510|GT-S7582|GT-S7530E|GT-I8750|SM-G9006V|SM-G9008V|SM-G9009D|SM-G900A|SM-G900D|SM-G900F|SM-G900H|SM-G900I|SM-G900J|SM-G900K|SM-G900L|SM-G900M|SM-G900P|SM-G900R4|SM-G900S|SM-G900T|SM-G900V|SM-G900W8|SHV-E160K|SCH-P709|SCH-P729|SM-T2558|GT-I9205|SM-G9350|SM-J120F|SM-G920F|SM-G920V|SM-G930F|SM-N910C|SM-A310F|GT-I9190|SM-J500FN|SM-G903F|SM-J330F",LG:"\\bLG\\b;|LG[- ]?(C800|C900|E400|E610|E900|E-900|F160|F180K|F180L|F180S|730|855|L160|LS740|LS840|LS970|LU6200|MS690|MS695|MS770|MS840|MS870|MS910|P500|P700|P705|VM696|AS680|AS695|AX840|C729|E970|GS505|272|C395|E739BK|E960|L55C|L75C|LS696|LS860|P769BK|P350|P500|P509|P870|UN272|US730|VS840|VS950|LN272|LN510|LS670|LS855|LW690|MN270|MN510|P509|P769|P930|UN200|UN270|UN510|UN610|US670|US740|US760|UX265|UX840|VN271|VN530|VS660|VS700|VS740|VS750|VS910|VS920|VS930|VX9200|VX11000|AX840A|LW770|P506|P925|P999|E612|D955|D802|MS323|M257)",Sony:"SonyST|SonyLT|SonyEricsson|SonyEricssonLT15iv|LT18i|E10i|LT28h|LT26w|SonyEricssonMT27i|C5303|C6902|C6903|C6906|C6943|D2533",Asus:"Asus.*Galaxy|PadFone.*Mobile",NokiaLumia:"Lumia [0-9]{3,4}",Micromax:"Micromax.*\\b(A210|A92|A88|A72|A111|A110Q|A115|A116|A110|A90S|A26|A51|A35|A54|A25|A27|A89|A68|A65|A57|A90)\\b",Palm:"PalmSource|Palm",Vertu:"Vertu|Vertu.*Ltd|Vertu.*Ascent|Vertu.*Ayxta|Vertu.*Constellation(F|Quest)?|Vertu.*Monika|Vertu.*Signature",Pantech:"PANTECH|IM-A850S|IM-A840S|IM-A830L|IM-A830K|IM-A830S|IM-A820L|IM-A810K|IM-A810S|IM-A800S|IM-T100K|IM-A725L|IM-A780L|IM-A775C|IM-A770K|IM-A760S|IM-A750K|IM-A740S|IM-A730S|IM-A720L|IM-A710K|IM-A690L|IM-A690S|IM-A650S|IM-A630K|IM-A600S|VEGA PTL21|PT003|P8010|ADR910L|P6030|P6020|P9070|P4100|P9060|P5000|CDM8992|TXT8045|ADR8995|IS11PT|P2030|P6010|P8000|PT002|IS06|CDM8999|P9050|PT001|TXT8040|P2020|P9020|P2000|P7040|P7000|C790",Fly:"IQ230|IQ444|IQ450|IQ440|IQ442|IQ441|IQ245|IQ256|IQ236|IQ255|IQ235|IQ245|IQ275|IQ240|IQ285|IQ280|IQ270|IQ260|IQ250",Wiko:"KITE 4G|HIGHWAY|GETAWAY|STAIRWAY|DARKSIDE|DARKFULL|DARKNIGHT|DARKMOON|SLIDE|WAX 4G|RAINBOW|BLOOM|SUNSET|GOA(?!nna)|LENNY|BARRY|IGGY|OZZY|CINK FIVE|CINK PEAX|CINK PEAX 2|CINK SLIM|CINK SLIM 2|CINK +|CINK KING|CINK PEAX|CINK SLIM|SUBLIM",iMobile:"i-mobile (IQ|i-STYLE|idea|ZAA|Hitz)",SimValley:"\\b(SP-80|XT-930|SX-340|XT-930|SX-310|SP-360|SP60|SPT-800|SP-120|SPT-800|SP-140|SPX-5|SPX-8|SP-100|SPX-8|SPX-12)\\b",Wolfgang:"AT-B24D|AT-AS50HD|AT-AS40W|AT-AS55HD|AT-AS45q2|AT-B26D|AT-AS50Q",Alcatel:"Alcatel",Nintendo:"Nintendo (3DS|Switch)",Amoi:"Amoi",INQ:"INQ",GenericPhone:"Tapatalk|PDA;|SAGEM|\\bmmp\\b|pocket|\\bpsp\\b|symbian|Smartphone|smartfon|treo|up.browser|up.link|vodafone|\\bwap\\b|nokia|Series40|Series60|S60|SonyEricsson|N900|MAUI.*WAP.*Browser"},tablets:{iPad:"iPad|iPad.*Mobile",NexusTablet:"Android.*Nexus[\\s]+(7|9|10)",GoogleTablet:"Android.*Pixel C",SamsungTablet:"SAMSUNG.*Tablet|Galaxy.*Tab|SC-01C|GT-P1000|GT-P1003|GT-P1010|GT-P3105|GT-P6210|GT-P6800|GT-P6810|GT-P7100|GT-P7300|GT-P7310|GT-P7500|GT-P7510|SCH-I800|SCH-I815|SCH-I905|SGH-I957|SGH-I987|SGH-T849|SGH-T859|SGH-T869|SPH-P100|GT-P3100|GT-P3108|GT-P3110|GT-P5100|GT-P5110|GT-P6200|GT-P7320|GT-P7511|GT-N8000|GT-P8510|SGH-I497|SPH-P500|SGH-T779|SCH-I705|SCH-I915|GT-N8013|GT-P3113|GT-P5113|GT-P8110|GT-N8010|GT-N8005|GT-N8020|GT-P1013|GT-P6201|GT-P7501|GT-N5100|GT-N5105|GT-N5110|SHV-E140K|SHV-E140L|SHV-E140S|SHV-E150S|SHV-E230K|SHV-E230L|SHV-E230S|SHW-M180K|SHW-M180L|SHW-M180S|SHW-M180W|SHW-M300W|SHW-M305W|SHW-M380K|SHW-M380S|SHW-M380W|SHW-M430W|SHW-M480K|SHW-M480S|SHW-M480W|SHW-M485W|SHW-M486W|SHW-M500W|GT-I9228|SCH-P739|SCH-I925|GT-I9200|GT-P5200|GT-P5210|GT-P5210X|SM-T311|SM-T310|SM-T310X|SM-T210|SM-T210R|SM-T211|SM-P600|SM-P601|SM-P605|SM-P900|SM-P901|SM-T217|SM-T217A|SM-T217S|SM-P6000|SM-T3100|SGH-I467|XE500|SM-T110|GT-P5220|GT-I9200X|GT-N5110X|GT-N5120|SM-P905|SM-T111|SM-T2105|SM-T315|SM-T320|SM-T320X|SM-T321|SM-T520|SM-T525|SM-T530NU|SM-T230NU|SM-T330NU|SM-T900|XE500T1C|SM-P605V|SM-P905V|SM-T337V|SM-T537V|SM-T707V|SM-T807V|SM-P600X|SM-P900X|SM-T210X|SM-T230|SM-T230X|SM-T325|GT-P7503|SM-T531|SM-T330|SM-T530|SM-T705|SM-T705C|SM-T535|SM-T331|SM-T800|SM-T700|SM-T537|SM-T807|SM-P907A|SM-T337A|SM-T537A|SM-T707A|SM-T807A|SM-T237|SM-T807P|SM-P607T|SM-T217T|SM-T337T|SM-T807T|SM-T116NQ|SM-T116BU|SM-P550|SM-T350|SM-T550|SM-T9000|SM-P9000|SM-T705Y|SM-T805|GT-P3113|SM-T710|SM-T810|SM-T815|SM-T360|SM-T533|SM-T113|SM-T335|SM-T715|SM-T560|SM-T670|SM-T677|SM-T377|SM-T567|SM-T357T|SM-T555|SM-T561|SM-T713|SM-T719|SM-T813|SM-T819|SM-T580|SM-T355Y?|SM-T280|SM-T817A|SM-T820|SM-W700|SM-P580|SM-T587|SM-P350|SM-P555M|SM-P355M|SM-T113NU|SM-T815Y|SM-T585|SM-T285|SM-T825|SM-W708|SM-T835",Kindle:"Kindle|Silk.*Accelerated|Android.*\\b(KFOT|KFTT|KFJWI|KFJWA|KFOTE|KFSOWI|KFTHWI|KFTHWA|KFAPWI|KFAPWA|WFJWAE|KFSAWA|KFSAWI|KFASWI|KFARWI|KFFOWI|KFGIWI|KFMEWI)\\b|Android.*Silk/[0-9.]+ like Chrome/[0-9.]+ (?!Mobile)",SurfaceTablet:"Windows NT [0-9.]+; ARM;.*(Tablet|ARMBJS)",HPTablet:"HP Slate (7|8|10)|HP ElitePad 900|hp-tablet|EliteBook.*Touch|HP 8|Slate 21|HP SlateBook 10",AsusTablet:"^.*PadFone((?!Mobile).)*$|Transformer|TF101|TF101G|TF300T|TF300TG|TF300TL|TF700T|TF700KL|TF701T|TF810C|ME171|ME301T|ME302C|ME371MG|ME370T|ME372MG|ME172V|ME173X|ME400C|Slider SL101|\\bK00F\\b|\\bK00C\\b|\\bK00E\\b|\\bK00L\\b|TX201LA|ME176C|ME102A|\\bM80TA\\b|ME372CL|ME560CG|ME372CG|ME302KL| K010 | K011 | K017 | K01E |ME572C|ME103K|ME170C|ME171C|\\bME70C\\b|ME581C|ME581CL|ME8510C|ME181C|P01Y|PO1MA|P01Z|\\bP027\\b|\\bP024\\b|\\bP00C\\b",BlackBerryTablet:"PlayBook|RIM Tablet",HTCtablet:"HTC_Flyer_P512|HTC Flyer|HTC Jetstream|HTC-P715a|HTC EVO View 4G|PG41200|PG09410",MotorolaTablet:"xoom|sholest|MZ615|MZ605|MZ505|MZ601|MZ602|MZ603|MZ604|MZ606|MZ607|MZ608|MZ609|MZ615|MZ616|MZ617",NookTablet:"Android.*Nook|NookColor|nook browser|BNRV200|BNRV200A|BNTV250|BNTV250A|BNTV400|BNTV600|LogicPD Zoom2",AcerTablet:"Android.*; \\b(A100|A101|A110|A200|A210|A211|A500|A501|A510|A511|A700|A701|W500|W500P|W501|W501P|W510|W511|W700|G100|G100W|B1-A71|B1-710|B1-711|A1-810|A1-811|A1-830)\\b|W3-810|\\bA3-A10\\b|\\bA3-A11\\b|\\bA3-A20\\b|\\bA3-A30",ToshibaTablet:"Android.*(AT100|AT105|AT200|AT205|AT270|AT275|AT300|AT305|AT1S5|AT500|AT570|AT700|AT830)|TOSHIBA.*FOLIO",LGTablet:"\\bL-06C|LG-V909|LG-V900|LG-V700|LG-V510|LG-V500|LG-V410|LG-V400|LG-VK810\\b",FujitsuTablet:"Android.*\\b(F-01D|F-02F|F-05E|F-10D|M532|Q572)\\b",PrestigioTablet:"PMP3170B|PMP3270B|PMP3470B|PMP7170B|PMP3370B|PMP3570C|PMP5870C|PMP3670B|PMP5570C|PMP5770D|PMP3970B|PMP3870C|PMP5580C|PMP5880D|PMP5780D|PMP5588C|PMP7280C|PMP7280C3G|PMP7280|PMP7880D|PMP5597D|PMP5597|PMP7100D|PER3464|PER3274|PER3574|PER3884|PER5274|PER5474|PMP5097CPRO|PMP5097|PMP7380D|PMP5297C|PMP5297C_QUAD|PMP812E|PMP812E3G|PMP812F|PMP810E|PMP880TD|PMT3017|PMT3037|PMT3047|PMT3057|PMT7008|PMT5887|PMT5001|PMT5002",LenovoTablet:"Lenovo TAB|Idea(Tab|Pad)( A1|A10| K1|)|ThinkPad([ ]+)?Tablet|YT3-850M|YT3-X90L|YT3-X90F|YT3-X90X|Lenovo.*(S2109|S2110|S5000|S6000|K3011|A3000|A3500|A1000|A2107|A2109|A1107|A5500|A7600|B6000|B8000|B8080)(-|)(FL|F|HV|H|)|TB-X103F|TB-X304F|TB-X304L|TB-8703F|Tab2A7-10F|TB2-X30L",DellTablet:"Venue 11|Venue 8|Venue 7|Dell Streak 10|Dell Streak 7",YarvikTablet:"Android.*\\b(TAB210|TAB211|TAB224|TAB250|TAB260|TAB264|TAB310|TAB360|TAB364|TAB410|TAB411|TAB420|TAB424|TAB450|TAB460|TAB461|TAB464|TAB465|TAB467|TAB468|TAB07-100|TAB07-101|TAB07-150|TAB07-151|TAB07-152|TAB07-200|TAB07-201-3G|TAB07-210|TAB07-211|TAB07-212|TAB07-214|TAB07-220|TAB07-400|TAB07-485|TAB08-150|TAB08-200|TAB08-201-3G|TAB08-201-30|TAB09-100|TAB09-211|TAB09-410|TAB10-150|TAB10-201|TAB10-211|TAB10-400|TAB10-410|TAB13-201|TAB274EUK|TAB275EUK|TAB374EUK|TAB462EUK|TAB474EUK|TAB9-200)\\b",MedionTablet:"Android.*\\bOYO\\b|LIFE.*(P9212|P9514|P9516|S9512)|LIFETAB",ArnovaTablet:"97G4|AN10G2|AN7bG3|AN7fG3|AN8G3|AN8cG3|AN7G3|AN9G3|AN7dG3|AN7dG3ST|AN7dG3ChildPad|AN10bG3|AN10bG3DT|AN9G2",IntensoTablet:"INM8002KP|INM1010FP|INM805ND|Intenso Tab|TAB1004",IRUTablet:"M702pro",MegafonTablet:"MegaFon V9|\\bZTE V9\\b|Android.*\\bMT7A\\b",EbodaTablet:"E-Boda (Supreme|Impresspeed|Izzycomm|Essential)",AllViewTablet:"Allview.*(Viva|Alldro|City|Speed|All TV|Frenzy|Quasar|Shine|TX1|AX1|AX2)",ArchosTablet:"\\b(101G9|80G9|A101IT)\\b|Qilive 97R|Archos5|\\bARCHOS (70|79|80|90|97|101|FAMILYPAD|)(b|c|)(G10| Cobalt| TITANIUM(HD|)| Xenon| Neon|XSK| 2| XS 2| PLATINUM| CARBON|GAMEPAD)\\b",AinolTablet:"NOVO7|NOVO8|NOVO10|Novo7Aurora|Novo7Basic|NOVO7PALADIN|novo9-Spark",NokiaLumiaTablet:"Lumia 2520",SonyTablet:"Sony.*Tablet|Xperia Tablet|Sony Tablet S|SO-03E|SGPT12|SGPT13|SGPT114|SGPT121|SGPT122|SGPT123|SGPT111|SGPT112|SGPT113|SGPT131|SGPT132|SGPT133|SGPT211|SGPT212|SGPT213|SGP311|SGP312|SGP321|EBRD1101|EBRD1102|EBRD1201|SGP351|SGP341|SGP511|SGP512|SGP521|SGP541|SGP551|SGP621|SGP641|SGP612|SOT31|SGP771|SGP611|SGP612|SGP712",PhilipsTablet:"\\b(PI2010|PI3000|PI3100|PI3105|PI3110|PI3205|PI3210|PI3900|PI4010|PI7000|PI7100)\\b",CubeTablet:"Android.*(K8GT|U9GT|U10GT|U16GT|U17GT|U18GT|U19GT|U20GT|U23GT|U30GT)|CUBE U8GT",CobyTablet:"MID1042|MID1045|MID1125|MID1126|MID7012|MID7014|MID7015|MID7034|MID7035|MID7036|MID7042|MID7048|MID7127|MID8042|MID8048|MID8127|MID9042|MID9740|MID9742|MID7022|MID7010",MIDTablet:"M9701|M9000|M9100|M806|M1052|M806|T703|MID701|MID713|MID710|MID727|MID760|MID830|MID728|MID933|MID125|MID810|MID732|MID120|MID930|MID800|MID731|MID900|MID100|MID820|MID735|MID980|MID130|MID833|MID737|MID960|MID135|MID860|MID736|MID140|MID930|MID835|MID733|MID4X10",MSITablet:"MSI \\b(Primo 73K|Primo 73L|Primo 81L|Primo 77|Primo 93|Primo 75|Primo 76|Primo 73|Primo 81|Primo 91|Primo 90|Enjoy 71|Enjoy 7|Enjoy 10)\\b",SMiTTablet:"Android.*(\\bMID\\b|MID-560|MTV-T1200|MTV-PND531|MTV-P1101|MTV-PND530)",RockChipTablet:"Android.*(RK2818|RK2808A|RK2918|RK3066)|RK2738|RK2808A",FlyTablet:"IQ310|Fly Vision",bqTablet:"Android.*(bq)?.*(Elcano|Curie|Edison|Maxwell|Kepler|Pascal|Tesla|Hypatia|Platon|Newton|Livingstone|Cervantes|Avant|Aquaris ([E|M]10|M8))|Maxwell.*Lite|Maxwell.*Plus",HuaweiTablet:"MediaPad|MediaPad 7 Youth|IDEOS S7|S7-201c|S7-202u|S7-101|S7-103|S7-104|S7-105|S7-106|S7-201|S7-Slim|M2-A01L|BAH-L09|BAH-W09",NecTablet:"\\bN-06D|\\bN-08D",PantechTablet:"Pantech.*P4100",BronchoTablet:"Broncho.*(N701|N708|N802|a710)",VersusTablet:"TOUCHPAD.*[78910]|\\bTOUCHTAB\\b",ZyncTablet:"z1000|Z99 2G|z99|z930|z999|z990|z909|Z919|z900",PositivoTablet:"TB07STA|TB10STA|TB07FTA|TB10FTA",NabiTablet:"Android.*\\bNabi",KoboTablet:"Kobo Touch|\\bK080\\b|\\bVox\\b Build|\\bArc\\b Build",DanewTablet:"DSlide.*\\b(700|701R|702|703R|704|802|970|971|972|973|974|1010|1012)\\b",TexetTablet:"NaviPad|TB-772A|TM-7045|TM-7055|TM-9750|TM-7016|TM-7024|TM-7026|TM-7041|TM-7043|TM-7047|TM-8041|TM-9741|TM-9747|TM-9748|TM-9751|TM-7022|TM-7021|TM-7020|TM-7011|TM-7010|TM-7023|TM-7025|TM-7037W|TM-7038W|TM-7027W|TM-9720|TM-9725|TM-9737W|TM-1020|TM-9738W|TM-9740|TM-9743W|TB-807A|TB-771A|TB-727A|TB-725A|TB-719A|TB-823A|TB-805A|TB-723A|TB-715A|TB-707A|TB-705A|TB-709A|TB-711A|TB-890HD|TB-880HD|TB-790HD|TB-780HD|TB-770HD|TB-721HD|TB-710HD|TB-434HD|TB-860HD|TB-840HD|TB-760HD|TB-750HD|TB-740HD|TB-730HD|TB-722HD|TB-720HD|TB-700HD|TB-500HD|TB-470HD|TB-431HD|TB-430HD|TB-506|TB-504|TB-446|TB-436|TB-416|TB-146SE|TB-126SE",PlaystationTablet:"Playstation.*(Portable|Vita)",TrekstorTablet:"ST10416-1|VT10416-1|ST70408-1|ST702xx-1|ST702xx-2|ST80208|ST97216|ST70104-2|VT10416-2|ST10216-2A|SurfTab",PyleAudioTablet:"\\b(PTBL10CEU|PTBL10C|PTBL72BC|PTBL72BCEU|PTBL7CEU|PTBL7C|PTBL92BC|PTBL92BCEU|PTBL9CEU|PTBL9CUK|PTBL9C)\\b",AdvanTablet:"Android.* \\b(E3A|T3X|T5C|T5B|T3E|T3C|T3B|T1J|T1F|T2A|T1H|T1i|E1C|T1-E|T5-A|T4|E1-B|T2Ci|T1-B|T1-D|O1-A|E1-A|T1-A|T3A|T4i)\\b ",DanyTechTablet:"Genius Tab G3|Genius Tab S2|Genius Tab Q3|Genius Tab G4|Genius Tab Q4|Genius Tab G-II|Genius TAB GII|Genius TAB GIII|Genius Tab S1",GalapadTablet:"Android.*\\bG1\\b(?!\\))",MicromaxTablet:"Funbook|Micromax.*\\b(P250|P560|P360|P362|P600|P300|P350|P500|P275)\\b",KarbonnTablet:"Android.*\\b(A39|A37|A34|ST8|ST10|ST7|Smart Tab3|Smart Tab2)\\b",AllFineTablet:"Fine7 Genius|Fine7 Shine|Fine7 Air|Fine8 Style|Fine9 More|Fine10 Joy|Fine11 Wide",PROSCANTablet:"\\b(PEM63|PLT1023G|PLT1041|PLT1044|PLT1044G|PLT1091|PLT4311|PLT4311PL|PLT4315|PLT7030|PLT7033|PLT7033D|PLT7035|PLT7035D|PLT7044K|PLT7045K|PLT7045KB|PLT7071KG|PLT7072|PLT7223G|PLT7225G|PLT7777G|PLT7810K|PLT7849G|PLT7851G|PLT7852G|PLT8015|PLT8031|PLT8034|PLT8036|PLT8080K|PLT8082|PLT8088|PLT8223G|PLT8234G|PLT8235G|PLT8816K|PLT9011|PLT9045K|PLT9233G|PLT9735|PLT9760G|PLT9770G)\\b",YONESTablet:"BQ1078|BC1003|BC1077|RK9702|BC9730|BC9001|IT9001|BC7008|BC7010|BC708|BC728|BC7012|BC7030|BC7027|BC7026",ChangJiaTablet:"TPC7102|TPC7103|TPC7105|TPC7106|TPC7107|TPC7201|TPC7203|TPC7205|TPC7210|TPC7708|TPC7709|TPC7712|TPC7110|TPC8101|TPC8103|TPC8105|TPC8106|TPC8203|TPC8205|TPC8503|TPC9106|TPC9701|TPC97101|TPC97103|TPC97105|TPC97106|TPC97111|TPC97113|TPC97203|TPC97603|TPC97809|TPC97205|TPC10101|TPC10103|TPC10106|TPC10111|TPC10203|TPC10205|TPC10503",GUTablet:"TX-A1301|TX-M9002|Q702|kf026",PointOfViewTablet:"TAB-P506|TAB-navi-7-3G-M|TAB-P517|TAB-P-527|TAB-P701|TAB-P703|TAB-P721|TAB-P731N|TAB-P741|TAB-P825|TAB-P905|TAB-P925|TAB-PR945|TAB-PL1015|TAB-P1025|TAB-PI1045|TAB-P1325|TAB-PROTAB[0-9]+|TAB-PROTAB25|TAB-PROTAB26|TAB-PROTAB27|TAB-PROTAB26XL|TAB-PROTAB2-IPS9|TAB-PROTAB30-IPS9|TAB-PROTAB25XXL|TAB-PROTAB26-IPS10|TAB-PROTAB30-IPS10",OvermaxTablet:"OV-(SteelCore|NewBase|Basecore|Baseone|Exellen|Quattor|EduTab|Solution|ACTION|BasicTab|TeddyTab|MagicTab|Stream|TB-08|TB-09)|Qualcore 1027",HCLTablet:"HCL.*Tablet|Connect-3G-2.0|Connect-2G-2.0|ME Tablet U1|ME Tablet U2|ME Tablet G1|ME Tablet X1|ME Tablet Y2|ME Tablet Sync",DPSTablet:"DPS Dream 9|DPS Dual 7",VistureTablet:"V97 HD|i75 3G|Visture V4( HD)?|Visture V5( HD)?|Visture V10",CrestaTablet:"CTP(-)?810|CTP(-)?818|CTP(-)?828|CTP(-)?838|CTP(-)?888|CTP(-)?978|CTP(-)?980|CTP(-)?987|CTP(-)?988|CTP(-)?989",MediatekTablet:"\\bMT8125|MT8389|MT8135|MT8377\\b",ConcordeTablet:"Concorde([ ]+)?Tab|ConCorde ReadMan",GoCleverTablet:"GOCLEVER TAB|A7GOCLEVER|M1042|M7841|M742|R1042BK|R1041|TAB A975|TAB A7842|TAB A741|TAB A741L|TAB M723G|TAB M721|TAB A1021|TAB I921|TAB R721|TAB I720|TAB T76|TAB R70|TAB R76.2|TAB R106|TAB R83.2|TAB M813G|TAB I721|GCTA722|TAB I70|TAB I71|TAB S73|TAB R73|TAB R74|TAB R93|TAB R75|TAB R76.1|TAB A73|TAB A93|TAB A93.2|TAB T72|TAB R83|TAB R974|TAB R973|TAB A101|TAB A103|TAB A104|TAB A104.2|R105BK|M713G|A972BK|TAB A971|TAB R974.2|TAB R104|TAB R83.3|TAB A1042",ModecomTablet:"FreeTAB 9000|FreeTAB 7.4|FreeTAB 7004|FreeTAB 7800|FreeTAB 2096|FreeTAB 7.5|FreeTAB 1014|FreeTAB 1001 |FreeTAB 8001|FreeTAB 9706|FreeTAB 9702|FreeTAB 7003|FreeTAB 7002|FreeTAB 1002|FreeTAB 7801|FreeTAB 1331|FreeTAB 1004|FreeTAB 8002|FreeTAB 8014|FreeTAB 9704|FreeTAB 1003",VoninoTablet:"\\b(Argus[ _]?S|Diamond[ _]?79HD|Emerald[ _]?78E|Luna[ _]?70C|Onyx[ _]?S|Onyx[ _]?Z|Orin[ _]?HD|Orin[ _]?S|Otis[ _]?S|SpeedStar[ _]?S|Magnet[ _]?M9|Primus[ _]?94[ _]?3G|Primus[ _]?94HD|Primus[ _]?QS|Android.*\\bQ8\\b|Sirius[ _]?EVO[ _]?QS|Sirius[ _]?QS|Spirit[ _]?S)\\b",ECSTablet:"V07OT2|TM105A|S10OT1|TR10CS1",StorexTablet:"eZee[_']?(Tab|Go)[0-9]+|TabLC7|Looney Tunes Tab",VodafoneTablet:"SmartTab([ ]+)?[0-9]+|SmartTabII10|SmartTabII7|VF-1497",EssentielBTablet:"Smart[ ']?TAB[ ]+?[0-9]+|Family[ ']?TAB2",RossMoorTablet:"RM-790|RM-997|RMD-878G|RMD-974R|RMT-705A|RMT-701|RME-601|RMT-501|RMT-711",iMobileTablet:"i-mobile i-note",TolinoTablet:"tolino tab [0-9.]+|tolino shine",AudioSonicTablet:"\\bC-22Q|T7-QC|T-17B|T-17P\\b",AMPETablet:"Android.* A78 ",SkkTablet:"Android.* (SKYPAD|PHOENIX|CYCLOPS)",TecnoTablet:"TECNO P9|TECNO DP8D",JXDTablet:"Android.* \\b(F3000|A3300|JXD5000|JXD3000|JXD2000|JXD300B|JXD300|S5800|S7800|S602b|S5110b|S7300|S5300|S602|S603|S5100|S5110|S601|S7100a|P3000F|P3000s|P101|P200s|P1000m|P200m|P9100|P1000s|S6600b|S908|P1000|P300|S18|S6600|S9100)\\b",iJoyTablet:"Tablet (Spirit 7|Essentia|Galatea|Fusion|Onix 7|Landa|Titan|Scooby|Deox|Stella|Themis|Argon|Unique 7|Sygnus|Hexen|Finity 7|Cream|Cream X2|Jade|Neon 7|Neron 7|Kandy|Scape|Saphyr 7|Rebel|Biox|Rebel|Rebel 8GB|Myst|Draco 7|Myst|Tab7-004|Myst|Tadeo Jones|Tablet Boing|Arrow|Draco Dual Cam|Aurix|Mint|Amity|Revolution|Finity 9|Neon 9|T9w|Amity 4GB Dual Cam|Stone 4GB|Stone 8GB|Andromeda|Silken|X2|Andromeda II|Halley|Flame|Saphyr 9,7|Touch 8|Planet|Triton|Unique 10|Hexen 10|Memphis 4GB|Memphis 8GB|Onix 10)",FX2Tablet:"FX2 PAD7|FX2 PAD10",XoroTablet:"KidsPAD 701|PAD[ ]?712|PAD[ ]?714|PAD[ ]?716|PAD[ ]?717|PAD[ ]?718|PAD[ ]?720|PAD[ ]?721|PAD[ ]?722|PAD[ ]?790|PAD[ ]?792|PAD[ ]?900|PAD[ ]?9715D|PAD[ ]?9716DR|PAD[ ]?9718DR|PAD[ ]?9719QR|PAD[ ]?9720QR|TelePAD1030|Telepad1032|TelePAD730|TelePAD731|TelePAD732|TelePAD735Q|TelePAD830|TelePAD9730|TelePAD795|MegaPAD 1331|MegaPAD 1851|MegaPAD 2151",ViewsonicTablet:"ViewPad 10pi|ViewPad 10e|ViewPad 10s|ViewPad E72|ViewPad7|ViewPad E100|ViewPad 7e|ViewSonic VB733|VB100a",VerizonTablet:"QTAQZ3|QTAIR7|QTAQTZ3|QTASUN1|QTASUN2|QTAXIA1",OdysTablet:"LOOX|XENO10|ODYS[ -](Space|EVO|Xpress|NOON)|\\bXELIO\\b|Xelio10Pro|XELIO7PHONETAB|XELIO10EXTREME|XELIOPT2|NEO_QUAD10",CaptivaTablet:"CAPTIVA PAD",IconbitTablet:"NetTAB|NT-3702|NT-3702S|NT-3702S|NT-3603P|NT-3603P|NT-0704S|NT-0704S|NT-3805C|NT-3805C|NT-0806C|NT-0806C|NT-0909T|NT-0909T|NT-0907S|NT-0907S|NT-0902S|NT-0902S",TeclastTablet:"T98 4G|\\bP80\\b|\\bX90HD\\b|X98 Air|X98 Air 3G|\\bX89\\b|P80 3G|\\bX80h\\b|P98 Air|\\bX89HD\\b|P98 3G|\\bP90HD\\b|P89 3G|X98 3G|\\bP70h\\b|P79HD 3G|G18d 3G|\\bP79HD\\b|\\bP89s\\b|\\bA88\\b|\\bP10HD\\b|\\bP19HD\\b|G18 3G|\\bP78HD\\b|\\bA78\\b|\\bP75\\b|G17s 3G|G17h 3G|\\bP85t\\b|\\bP90\\b|\\bP11\\b|\\bP98t\\b|\\bP98HD\\b|\\bG18d\\b|\\bP85s\\b|\\bP11HD\\b|\\bP88s\\b|\\bA80HD\\b|\\bA80se\\b|\\bA10h\\b|\\bP89\\b|\\bP78s\\b|\\bG18\\b|\\bP85\\b|\\bA70h\\b|\\bA70\\b|\\bG17\\b|\\bP18\\b|\\bA80s\\b|\\bA11s\\b|\\bP88HD\\b|\\bA80h\\b|\\bP76s\\b|\\bP76h\\b|\\bP98\\b|\\bA10HD\\b|\\bP78\\b|\\bP88\\b|\\bA11\\b|\\bA10t\\b|\\bP76a\\b|\\bP76t\\b|\\bP76e\\b|\\bP85HD\\b|\\bP85a\\b|\\bP86\\b|\\bP75HD\\b|\\bP76v\\b|\\bA12\\b|\\bP75a\\b|\\bA15\\b|\\bP76Ti\\b|\\bP81HD\\b|\\bA10\\b|\\bT760VE\\b|\\bT720HD\\b|\\bP76\\b|\\bP73\\b|\\bP71\\b|\\bP72\\b|\\bT720SE\\b|\\bC520Ti\\b|\\bT760\\b|\\bT720VE\\b|T720-3GE|T720-WiFi",OndaTablet:"\\b(V975i|Vi30|VX530|V701|Vi60|V701s|Vi50|V801s|V719|Vx610w|VX610W|V819i|Vi10|VX580W|Vi10|V711s|V813|V811|V820w|V820|Vi20|V711|VI30W|V712|V891w|V972|V819w|V820w|Vi60|V820w|V711|V813s|V801|V819|V975s|V801|V819|V819|V818|V811|V712|V975m|V101w|V961w|V812|V818|V971|V971s|V919|V989|V116w|V102w|V973|Vi40)\\b[\\s]+|V10 \\b4G\\b",JaytechTablet:"TPC-PA762",BlaupunktTablet:"Endeavour 800NG|Endeavour 1010",DigmaTablet:"\\b(iDx10|iDx9|iDx8|iDx7|iDxD7|iDxD8|iDsQ8|iDsQ7|iDsQ8|iDsD10|iDnD7|3TS804H|iDsQ11|iDj7|iDs10)\\b",EvolioTablet:"ARIA_Mini_wifi|Aria[ _]Mini|Evolio X10|Evolio X7|Evolio X8|\\bEvotab\\b|\\bNeura\\b",LavaTablet:"QPAD E704|\\bIvoryS\\b|E-TAB IVORY|\\bE-TAB\\b",AocTablet:"MW0811|MW0812|MW0922|MTK8382|MW1031|MW0831|MW0821|MW0931|MW0712",MpmanTablet:"MP11 OCTA|MP10 OCTA|MPQC1114|MPQC1004|MPQC994|MPQC974|MPQC973|MPQC804|MPQC784|MPQC780|\\bMPG7\\b|MPDCG75|MPDCG71|MPDC1006|MP101DC|MPDC9000|MPDC905|MPDC706HD|MPDC706|MPDC705|MPDC110|MPDC100|MPDC99|MPDC97|MPDC88|MPDC8|MPDC77|MP709|MID701|MID711|MID170|MPDC703|MPQC1010",CelkonTablet:"CT695|CT888|CT[\\s]?910|CT7 Tab|CT9 Tab|CT3 Tab|CT2 Tab|CT1 Tab|C820|C720|\\bCT-1\\b",WolderTablet:"miTab \\b(DIAMOND|SPACE|BROOKLYN|NEO|FLY|MANHATTAN|FUNK|EVOLUTION|SKY|GOCAR|IRON|GENIUS|POP|MINT|EPSILON|BROADWAY|JUMP|HOP|LEGEND|NEW AGE|LINE|ADVANCE|FEEL|FOLLOW|LIKE|LINK|LIVE|THINK|FREEDOM|CHICAGO|CLEVELAND|BALTIMORE-GH|IOWA|BOSTON|SEATTLE|PHOENIX|DALLAS|IN 101|MasterChef)\\b",MediacomTablet:"M-MPI10C3G|M-SP10EG|M-SP10EGP|M-SP10HXAH|M-SP7HXAH|M-SP10HXBH|M-SP8HXAH|M-SP8MXA",MiTablet:"\\bMI PAD\\b|\\bHM NOTE 1W\\b",NibiruTablet:"Nibiru M1|Nibiru Jupiter One",NexoTablet:"NEXO NOVA|NEXO 10|NEXO AVIO|NEXO FREE|NEXO GO|NEXO EVO|NEXO 3G|NEXO SMART|NEXO KIDDO|NEXO MOBI",LeaderTablet:"TBLT10Q|TBLT10I|TBL-10WDKB|TBL-10WDKBO2013|TBL-W230V2|TBL-W450|TBL-W500|SV572|TBLT7I|TBA-AC7-8G|TBLT79|TBL-8W16|TBL-10W32|TBL-10WKB|TBL-W100",UbislateTablet:"UbiSlate[\\s]?7C",PocketBookTablet:"Pocketbook",KocasoTablet:"\\b(TB-1207)\\b",HisenseTablet:"\\b(F5281|E2371)\\b",Hudl:"Hudl HT7S3|Hudl 2",TelstraTablet:"T-Hub2",GenericTablet:"Android.*\\b97D\\b|Tablet(?!.*PC)|BNTV250A|MID-WCDMA|LogicPD Zoom2|\\bA7EB\\b|CatNova8|A1_07|CT704|CT1002|\\bM721\\b|rk30sdk|\\bEVOTAB\\b|M758A|ET904|ALUMIUM10|Smartfren Tab|Endeavour 1010|Tablet-PC-4|Tagi Tab|\\bM6pro\\b|CT1020W|arc 10HD|\\bTP750\\b|\\bQTAQZ3\\b|WVT101|TM1088|KT107"},oss:{AndroidOS:"Android",BlackBerryOS:"blackberry|\\bBB10\\b|rim tablet os",PalmOS:"PalmOS|avantgo|blazer|elaine|hiptop|palm|plucker|xiino",SymbianOS:"Symbian|SymbOS|Series60|Series40|SYB-[0-9]+|\\bS60\\b",WindowsMobileOS:"Windows CE.*(PPC|Smartphone|Mobile|[0-9]{3}x[0-9]{3})|Window Mobile|Windows Phone [0-9.]+|WCE;",WindowsPhoneOS:"Windows Phone 10.0|Windows Phone 8.1|Windows Phone 8.0|Windows Phone OS|XBLWP7|ZuneWP7|Windows NT 6.[23]; ARM;",iOS:"\\biPhone.*Mobile|\\biPod|\\biPad|AppleCoreMedia",MeeGoOS:"MeeGo",MaemoOS:"Maemo",JavaOS:"J2ME/|\\bMIDP\\b|\\bCLDC\\b",webOS:"webOS|hpwOS",badaOS:"\\bBada\\b",BREWOS:"BREW"},uas:{Chrome:"\\bCrMo\\b|CriOS|Android.*Chrome/[.0-9]* (Mobile)?",Dolfin:"\\bDolfin\\b",Opera:"Opera.*Mini|Opera.*Mobi|Android.*Opera|Mobile.*OPR/[0-9.]+$|Coast/[0-9.]+",Skyfire:"Skyfire",Edge:"Mobile Safari/[.0-9]* Edge",IE:"IEMobile|MSIEMobile",Firefox:"fennec|firefox.*maemo|(Mobile|Tablet).*Firefox|Firefox.*Mobile|FxiOS",Bolt:"bolt",TeaShark:"teashark",Blazer:"Blazer",Safari:"Version.*Mobile.*Safari|Safari.*Mobile|MobileSafari",WeChat:"\\bMicroMessenger\\b",UCBrowser:"UC.*Browser|UCWEB",baiduboxapp:"baiduboxapp",baidubrowser:"baidubrowser",DiigoBrowser:"DiigoBrowser",Puffin:"Puffin",Mercury:"\\bMercury\\b",ObigoBrowser:"Obigo",NetFront:"NF-Browser",GenericBrowser:"NokiaBrowser|OviBrowser|OneBrowser|TwonkyBeamBrowser|SEMC.*Browser|FlyFlow|Minimo|NetFront|Novarra-Vision|MQQBrowser|MicroMessenger",PaleMoon:"Android.*PaleMoon|Mobile.*PaleMoon"},props:{Mobile:"Mobile/[VER]",Build:"Build/[VER]",Version:"Version/[VER]",VendorID:"VendorID/[VER]",iPad:"iPad.*CPU[a-z ]+[VER]",iPhone:"iPhone.*CPU[a-z ]+[VER]",iPod:"iPod.*CPU[a-z ]+[VER]",Kindle:"Kindle/[VER]",Chrome:["Chrome/[VER]","CriOS/[VER]","CrMo/[VER]"],Coast:["Coast/[VER]"],Dolfin:"Dolfin/[VER]",Firefox:["Firefox/[VER]","FxiOS/[VER]"],Fennec:"Fennec/[VER]",Edge:"Edge/[VER]",IE:["IEMobile/[VER];","IEMobile [VER]","MSIE [VER];","Trident/[0-9.]+;.*rv:[VER]"],NetFront:"NetFront/[VER]",NokiaBrowser:"NokiaBrowser/[VER]",Opera:[" OPR/[VER]","Opera Mini/[VER]","Version/[VER]"],"Opera Mini":"Opera Mini/[VER]","Opera Mobi":"Version/[VER]",UCBrowser:["UCWEB[VER]","UC.*Browser/[VER]"],MQQBrowser:"MQQBrowser/[VER]",MicroMessenger:"MicroMessenger/[VER]",baiduboxapp:"baiduboxapp/[VER]",baidubrowser:"baidubrowser/[VER]",SamsungBrowser:"SamsungBrowser/[VER]",Iron:"Iron/[VER]",Safari:["Version/[VER]","Safari/[VER]"],Skyfire:"Skyfire/[VER]",Tizen:"Tizen/[VER]",Webkit:"webkit[ /][VER]",PaleMoon:"PaleMoon/[VER]",Gecko:"Gecko/[VER]",Trident:"Trident/[VER]",Presto:"Presto/[VER]",Goanna:"Goanna/[VER]",iOS:" \\bi?OS\\b [VER][ ;]{1}",Android:"Android [VER]",BlackBerry:["BlackBerry[\\w]+/[VER]","BlackBerry.*Version/[VER]","Version/[VER]"],BREW:"BREW [VER]",Java:"Java/[VER]","Windows Phone OS":["Windows Phone OS [VER]","Windows Phone [VER]"],"Windows Phone":"Windows Phone [VER]","Windows CE":"Windows CE/[VER]","Windows NT":"Windows NT [VER]",Symbian:["SymbianOS/[VER]","Symbian/[VER]"],webOS:["webOS/[VER]","hpwOS/[VER];"]},utils:{Bot:"Googlebot|facebookexternalhit|AdsBot-Google|Google Keyword Suggestion|Facebot|YandexBot|YandexMobileBot|bingbot|ia_archiver|AhrefsBot|Ezooms|GSLFbot|WBSearchBot|Twitterbot|TweetmemeBot|Twikle|PaperLiBot|Wotbox|UnwindFetchor|Exabot|MJ12bot|YandexImages|TurnitinBot|Pingdom",MobileBot:"Googlebot-Mobile|AdsBot-Google-Mobile|YahooSeeker/M1A1-R2D2",DesktopMode:"WPDesktop",TV:"SonyDTV|HbbTV",WebKit:"(webkit)[ /]([\\w.]+)",Console:"\\b(Nintendo|Nintendo WiiU|Nintendo 3DS|Nintendo Switch|PLAYSTATION|Xbox)\\b",Watch:"SM-V700"}},detectMobileBrowsers:{fullPattern:/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i,shortPattern:/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i,tabletPattern:/android|ipad|playbook|silk/i}},n=Object.prototype.hasOwnProperty;function e(t,i){return null!=t&&null!=i&&t.toLowerCase()===i.toLowerCase()}function r(t,i){var n,e,r=t.length;if(!r||!i)return!1;for(n=i.toLowerCase(),e=0;e<r;++e)if(n===t[e].toLowerCase())return!0;return!1}function s(t){for(var i in t)n.call(t,i)&&(t[i]=new RegExp(t[i],"i"))}function o(t,i){this.ua=function(t){return(t||"").substr(0,500)}(t),this._cache={},this.maxPhoneWidth=i||600}return i.FALLBACK_PHONE="UnknownPhone",i.FALLBACK_TABLET="UnknownTablet",i.FALLBACK_MOBILE="UnknownMobile",t="isArray"in Array?Array.isArray:function(t){return"[object Array]"===Object.prototype.toString.call(t)},function(){var e,r,o,a,u,c,h=i.mobileDetectRules;for(e in h.props)if(n.call(h.props,e)){for(t(r=h.props[e])||(r=[r]),u=r.length,a=0;a<u;++a)(c=(o=r[a]).indexOf("[VER]"))>=0&&(o=o.substring(0,c)+"([\\w._\\+]+)"+o.substring(c+5)),r[a]=new RegExp(o,"i");h.props[e]=r}s(h.oss),s(h.phones),s(h.tablets),s(h.uas),s(h.utils),h.oss0={WindowsPhoneOS:h.oss.WindowsPhoneOS,WindowsMobileOS:h.oss.WindowsMobileOS}}(),i.findMatch=function(t,i){for(var e in t)if(n.call(t,e)&&t[e].test(i))return e;return null},i.findMatches=function(t,i){var e=[];for(var r in t)n.call(t,r)&&t[r].test(i)&&e.push(r);return e},i.getVersionStr=function(t,e){var r,s,o,a,u=i.mobileDetectRules.props;if(n.call(u,t))for(o=(r=u[t]).length,s=0;s<o;++s)if(null!==(a=r[s].exec(e)))return a[1];return null},i.getVersion=function(t,n){var e=i.getVersionStr(t,n);return e?i.prepareVersionNo(e):NaN},i.prepareVersionNo=function(t){var i;return 1===(i=t.split(/[a-z._ \/\-]/i)).length&&(t=i[0]),i.length>1&&(t=i[0]+".",i.shift(),t+=i.join("")),Number(t)},i.isMobileFallback=function(t){return i.detectMobileBrowsers.fullPattern.test(t)||i.detectMobileBrowsers.shortPattern.test(t.substr(0,4))},i.isTabletFallback=function(t){return i.detectMobileBrowsers.tabletPattern.test(t)},i.prepareDetectionCache=function(t,n,e){if(void 0===t.mobile){var r,s,a;if(s=i.findMatch(i.mobileDetectRules.tablets,n))return t.mobile=t.tablet=s,void(t.phone=null);if(r=i.findMatch(i.mobileDetectRules.phones,n))return t.mobile=t.phone=r,void(t.tablet=null);i.isMobileFallback(n)?void 0===(a=o.isPhoneSized(e))?(t.mobile=i.FALLBACK_MOBILE,t.tablet=t.phone=null):a?(t.mobile=t.phone=i.FALLBACK_PHONE,t.tablet=null):(t.mobile=t.tablet=i.FALLBACK_TABLET,t.phone=null):i.isTabletFallback(n)?(t.mobile=t.tablet=i.FALLBACK_TABLET,t.phone=null):t.mobile=t.tablet=t.phone=null}},i.mobileGrade=function(t){var i=null!==t.mobile();return t.os("iOS")&&t.version("iPad")>=4.3||t.os("iOS")&&t.version("iPhone")>=3.1||t.os("iOS")&&t.version("iPod")>=3.1||t.version("Android")>2.1&&t.is("Webkit")||t.version("Windows Phone OS")>=7||t.is("BlackBerry")&&t.version("BlackBerry")>=6||t.match("Playbook.*Tablet")||t.version("webOS")>=1.4&&t.match("Palm|Pre|Pixi")||t.match("hp.*TouchPad")||t.is("Firefox")&&t.version("Firefox")>=12||t.is("Chrome")&&t.is("AndroidOS")&&t.version("Android")>=4||t.is("Skyfire")&&t.version("Skyfire")>=4.1&&t.is("AndroidOS")&&t.version("Android")>=2.3||t.is("Opera")&&t.version("Opera Mobi")>11&&t.is("AndroidOS")||t.is("MeeGoOS")||t.is("Tizen")||t.is("Dolfin")&&t.version("Bada")>=2||(t.is("UC Browser")||t.is("Dolfin"))&&t.version("Android")>=2.3||t.match("Kindle Fire")||t.is("Kindle")&&t.version("Kindle")>=3||t.is("AndroidOS")&&t.is("NookTablet")||t.version("Chrome")>=11&&!i||t.version("Safari")>=5&&!i||t.version("Firefox")>=4&&!i||t.version("MSIE")>=7&&!i||t.version("Opera")>=10&&!i?"A":t.os("iOS")&&t.version("iPad")<4.3||t.os("iOS")&&t.version("iPhone")<3.1||t.os("iOS")&&t.version("iPod")<3.1||t.is("Blackberry")&&t.version("BlackBerry")>=5&&t.version("BlackBerry")<6||t.version("Opera Mini")>=5&&t.version("Opera Mini")<=6.5&&(t.version("Android")>=2.3||t.is("iOS"))||t.match("NokiaN8|NokiaC7|N97.*Series60|Symbian/3")||t.version("Opera Mobi")>=11&&t.is("SymbianOS")?"B":(t.version("BlackBerry")<5||t.match("MSIEMobile|Windows CE.*Mobile")||t.version("Windows Mobile"),"C")},i.detectOS=function(t){return i.findMatch(i.mobileDetectRules.oss0,t)||i.findMatch(i.mobileDetectRules.oss,t)},i.getDeviceSmallerSide=function(){return window.screen.width<window.screen.height?window.screen.width:window.screen.height},o.prototype={constructor:o,mobile:function(){return i.prepareDetectionCache(this._cache,this.ua,this.maxPhoneWidth),this._cache.mobile},phone:function(){return i.prepareDetectionCache(this._cache,this.ua,this.maxPhoneWidth),this._cache.phone},tablet:function(){return i.prepareDetectionCache(this._cache,this.ua,this.maxPhoneWidth),this._cache.tablet},userAgent:function(){return void 0===this._cache.userAgent&&(this._cache.userAgent=i.findMatch(i.mobileDetectRules.uas,this.ua)),this._cache.userAgent},userAgents:function(){return void 0===this._cache.userAgents&&(this._cache.userAgents=i.findMatches(i.mobileDetectRules.uas,this.ua)),this._cache.userAgents},os:function(){return void 0===this._cache.os&&(this._cache.os=i.detectOS(this.ua)),this._cache.os},version:function(t){return i.getVersion(t,this.ua)},versionStr:function(t){return i.getVersionStr(t,this.ua)},is:function(t){return r(this.userAgents(),t)||e(t,this.os())||e(t,this.phone())||e(t,this.tablet())||r(i.findMatches(i.mobileDetectRules.utils,this.ua),t)},match:function(t){return t instanceof RegExp||(t=new RegExp(t,"i")),t.test(this.ua)},isPhoneSized:function(t){return o.isPhoneSized(t||this.maxPhoneWidth)},mobileGrade:function(){return void 0===this._cache.grade&&(this._cache.grade=i.mobileGrade(this)),this._cache.grade}},o.isPhoneSized="undefined"!=typeof window&&window.screen?function(t){return t<0?void 0:i.getDeviceSmallerSide()<=t}:function(){},o._impl=i,o.version="1.4.3 2018-09-08",o})}))(window.navigator.userAgent);function kr(){return Ir.mobileGrade()}function Dr(){return Ir.os()}function Cr(){return Ir.phone()||Ir.tablet()||"web"}function Gr(t){let i=[],n=[];return t.fields&&t.fields.forEach(e=>{e.sequentialConditionalField&&e.sequentialConditionalField.conditionId===t.condition._id?i.push(e):(!e.sequentialConditionalField||e.sequentialConditionalField&&e.sequentialConditionalField.conditionId!==t.condition._id)&&n.push(e)}),{sequentialFields:i,nonSequentialFields:n}}function Or(t,i,n,e=!1,r){const s=Object.assign({},t[i].items[n]);return s.name=si(),e?t[i].items.push(s):r?t[r.slideIndex].items.splice(r.itemIndex+1,0,s):t[i].items.splice(n,0,s),t}function Br(t,i){return t.map(t=>(t.condition&&X(t.condition)&&t.condition.length>0&&(t.condition=t.condition.filter(t=>t._id!==i),t.condition&&0===t.condition.length&&delete t.condition),t.items&&t.items.length>0&&(t.items=t.items.map(t=>(t.condition&&X(t.condition)&&t.condition.length>0&&(t.condition=t.condition.filter(t=>"string"!=typeof t&&t._id!==i),t.condition&&0===t.condition.length&&delete t.condition),t))),t))}function xr(t,i){return t.filter(t=>t.condition._id!==i)}function Rr(t,i){return t.findIndex(t=>t.condition._id===i)>-1}function Nr(t,i){if(m(i.itemIndex)||m(i.slideIndex)){const{slideIndex:n,itemIndex:e}=Yr(t,i.name);i=Object.assign({slideIndex:n,itemIndex:e},i)}return t[i.slideIndex].items[i.itemIndex].parentConditions&&t[i.slideIndex].items[i.itemIndex].parentConditions.length>0&&t[i.slideIndex].items[i.itemIndex].parentConditions.forEach(n=>{const e=n.condition._id;n.fields.forEach(n=>{t=Zr(t,n.name,i.slideIndex,i.itemIndex,e)})}),(t=ms(t,i.name))[i.slideIndex].items.splice(i.itemIndex,1),t}function Hr(t,i){let n=[];return t[i.slideIndex].items[i.itemIndex].condition&&t[i.slideIndex].items[i.itemIndex].condition.length>0&&t[i.slideIndex].items[i.itemIndex].condition.forEach(i=>{const{length:e}=Qr(t,i._id);if(1===e){const{slideIndex:e,itemIndex:r}=Yr(t,i.field.name);n.push({slideIndex:e,itemIndex:r,condition:i})}}),n}function jr(t){return t.forEach(t=>{t.items&&t.items.forEach(t=>{delete t.selected})}),t}function _r(t,i,n,e){if(t)return t.map((t,r)=>{let s=r===n;return!s&&t.pageConditionIds&&t.pageConditionIds.length>0&&(s=t.pageConditionIds.includes(i._id)),{text:t.pageTitle,handler:()=>e(r),disabled:s}})}function Ur(t,i,n,e,r){if(t)return t.map((t,s)=>{let o;return o=0===t.pageItems.length&&r?[{text:r,handler:()=>n(s,0,null)}]:t.pageItems.map((t,r)=>{let o=!1;return i&&i.field&&t.itemId===i.field.name?o=!0:i&&t.conditionIds&&t.conditionIds.length>0&&t.conditionIds.includes(i._id)&&(o=!0),e&&(o=e.some(i=>i.name===t.itemId)),{text:t.itemTitle,handler:()=>n(s,r,t.itemId),disabled:o}}),{text:t.pageTitle,subMenu:o}})}function Lr(t){return t===pt.scoring}function Vr(t,i){let n=[];return t.forEach((t,e)=>{t.items&&t.items.forEach((t,r)=>{t.condition&&X(t.condition)&&t.condition.forEach((t,s)=>{"string"!=typeof t&&t._id===i&&n.push({slideIndex:e,itemIndex:r,conditionIndex:s})})})}),n}function Fr(t,i){let n={type:t,_id:si(),operator:""};return"field"===t&&(n=Object.assign({},n,{field:{name:i.name,title:i.title,type:i.type,values:i.values}})),n}function Wr(t){let i={type:t.type,title:p(t.title),name:si(),icon:t.icon,category:t.category};return t.type===K.select&&(i.imageLayout="row"),t.type===K.multiphotos&&(i.maxPhotos=5),t.type===K.information&&(i.value=""),t.type===K.emailreport&&(i.showUsers=!0),i}function Xr(t,i){const n=t.type===i.type,e=t.operator===i.operator;let r=!1;return t.values&&i.values&&t.values.length===i.values.length&&(r=!0,t.values.forEach(t=>{i.values.some(i=>i===t)||(r=!1)})),n&&e&&r}function $r(t){return t.forEach(t=>{t.items.forEach(t=>{t.parentConditions&&delete t.parentConditions,t.sequentialConditionalField&&delete t.sequentialConditionalField,t.nonSequentialConditionalFieldPosition&&delete t.nonSequentialConditionalFieldPosition})}),t}function zr(t){let i,n,e=[];return t.forEach((n,r)=>{n.condition&&X(n.condition)&&n.condition.forEach(t=>{t.field&&(e=function(t,i,n){return n.field&&X(n.field)?n.field.forEach(()=>{t=qr(t,n,i)}):n.field&&(t=qr(t,n,i)),t}(e,r,t))}),n.items&&n.items.forEach((n,e)=>{n.condition&&(X(n.condition)?n.condition.forEach(s=>{i=Kr({fieldConditions:i,slides:t,condition:s,field:n,childSlideIndex:r,childItemIndex:e})}):i=Kr({fieldConditions:i,slides:t,condition:n.condition,field:n,childSlideIndex:r,childItemIndex:e}))})}),n=function(t,i){let n=i;return t&&t.length>0&&i&&i.length>0?t.forEach(t=>{n.push();const i=n.findIndex(i=>i.condition._id===t.condition._id);i>-1?n[i]=Object.assign({},n[i],{pages:t.pages}):n.push(t)}):t&&t.length>0?n=t:i&&i.length>0&&(n=i),n}(e,i),t=function(t,i){return i&&i.length>0&&i.forEach(i=>{const{slideIndex:n,itemIndex:e}=Yr(t,i.condition.field.name);if(t[n].items[e].parentConditions&&t[n].items[e].parentConditions.length>0){let r=t[n].items[e].parentConditions.findIndex(t=>t.condition._id===i.condition._id);r>-1?t[n].items[e].parentConditions[r]=i:t[n].items[e].parentConditions.push(i)}else t[n].items[e].parentConditions=[i]}),t}(t,n)}function Kr({fieldConditions:t,slides:i,condition:n,field:e,childSlideIndex:r,childItemIndex:s}){if(n.field){const o=n.field.name,{slideIndex:a,itemIndex:u}=Yr(i,o);if(i[a].items[u]){let c={condition:n,fields:[e]};if(function({slides:t,parentFieldSlideIndex:i,parentFieldItemIndex:n,conditionalFieldSlideIndex:e,conditionalFieldItemIndex:r,condition:s}){let o=!1;const a=t[e].items[r-1];if(i===e)if(n===r-1)o=!0;else if(a&&a.sequentialConditionalField&&a.sequentialConditionalField.parentFieldName===s.field.name)if(a.sequentialConditionalField.conditionId===s._id)o=!0;else{let e=r-1;for(;e>n;){let r=t[i].items[e];r&&r.sequentialConditionalField&&r.sequentialConditionalField.parentFieldName===s.field.name&&r.sequentialConditionalField.conditionId!==s._id?(o=!0,e-=1):(o=!1,e=n)}}return o}({slides:i,parentFieldSlideIndex:a,parentFieldItemIndex:u,conditionalFieldSlideIndex:r,conditionalFieldItemIndex:s,condition:n})?e.sequentialConditionalField={conditionId:n._id,parentFieldName:o}:e.nonSequentialConditionalFieldPosition={slideIndex:r,itemIndex:s},t&&t.length>0){const i=t.findIndex(t=>t.condition._id===n._id);i>-1?t[i].fields.push(e):t.push(c)}else t=[c]}}return t}function qr(t,i,n){if(t&&t.length>0){let e=t.findIndex(t=>t.condition._id===i._id);e>-1?t[e].pages.push({pageIndex:n}):t.push({condition:i,pages:[{pageIndex:n}]})}else t.push({condition:i,pages:[{pageIndex:n}]});return t}function Yr(t,i){let n=-1,e=-1;for(;e<0&&n<t.length-1;)t[n+=1].items&&(e=t[n].items.findIndex(t=>t.name===i));return{slideIndex:n,itemIndex:e}}function Qr(t,i){let n=-1,e=-1,r=0;for(;e<0&&n<t.length-1;)t[n+=1].items&&t[n].items.length>0&&t[n].items.forEach((t,n)=>{t.parentConditions&&t.parentConditions.length>0&&t.parentConditions.findIndex(t=>t.condition._id===i)>-1&&(e=n,r=t.parentConditions.length)});return{slideIndex:n,itemIndex:e,length:r}}function Jr(t,i,n){return t[i]&&t[i].condition&&(X(t[i].condition)?(t[i].condition=t[i].condition.filter(t=>t._id!==n),0===t[i].condition.length&&delete t[i].condition):t[i].condition._id===n&&delete t[i].condition),t}function Zr(t,i,n,e,r){if(null==n){const r=Yr(t,i);n=r.slideIndex,e=r.itemIndex}return r&&X(t[n].items[e].condition)&&t[n].items[e].condition.length>0?(t[n].items[e].condition=t[n].items[e].condition.filter(t=>t._id!==r),0===t[n].items[e].condition.length&&delete t[n].items[e].condition):(r&&t[n].items[e].condition&&t[n].items[e].condition._id===r||!r)&&delete t[n].items[e].condition,t}function ts(t){let i=[];return t.reduce((t,n)=>(n.selectedFields.forEach(n=>{i.indexOf(n.name)<0&&t.push(n.name),i.push(n.name)}),t),[])}function is(t,i){return i.reduce((i,{type:n,scoringCategory:e})=>(n===t&&(i=e),i),"")}function ns(t){return t.reduce((t,i)=>t+i.items.reduce(t=>t+1,0),0)}function es(t){return!(t>-1337)&&t%-1337==0}function rs(t,i){return t.map(t=>(t.items.forEach(t=>(i.indexOf(t.name)>-1&&(t.hasScoring=!0),t)),t))}function ss(t){let i=0;return t.selectedFields.forEach(({name:n,type:e})=>{const r=is(e,at),s=os(t,n,r);i+=fs(s.scoreValuePairs,r)}),t.percentageBasis=i,t}function os(t,i,n){let e={fieldName:i,scoreValuePairs:[],maxScore:0};for(let r in t)if(r.includes(i)){const s=t[r];switch(n){case mt.singleChoice:case mt.multipleChoice:const t=r.split(i)[1];"number"==typeof s?e.scoreValuePairs.push({value:t,score:s}):e.maxScore=s.visible;break;case mt.presence:e.scoreValuePairs=[{value:"value",score:s.value},{value:"novalue",score:s.novalue}],e.maxScore=s.visible;break;case mt.numberRating:"number"==typeof s?e.scoreValuePairs.push({value:"value",score:s}):e.maxScore=s.visible}}return e}function as(t,i){const n=t.scoreValuePairs.map(t=>t.value);return i.forEach(i=>{n.includes(i)||t.scoreValuePairs.push({value:i,score:0})}),t}function us(t,i){let n=[];return n.push(`${t.fieldName}value`),i===mt.numberRating?n.push(t.fieldName):t.scoreValuePairs.forEach(i=>{n.push(`${t.fieldName}${i.value}`)}),n}function cs(t,i){let n={};switch(i){case mt.singleChoice:case mt.multipleChoice:n={[`${t.fieldName}value`]:{visible:t.maxScore}},t.scoreValuePairs.forEach(i=>{n=Object.assign({},n,{[`${t.fieldName}${i.value}`]:i.score})});break;case mt.presence:let e=t.scoreValuePairs.reduce((t,i)=>t=Object.assign({},t,{[i.value]:i.score}),{});n={[`${t.fieldName}value`]:Object.assign({},e,{visible:t.maxScore})};break;case mt.numberRating:n={[t.fieldName]:t.scoreValuePairs[0].score,[`${t.fieldName}value`]:{visible:t.maxScore}}}return n}const hs=5;function fs(t,i){return i===mt.multipleChoice?function(t){return t.reduce((t,i)=>(es(i.score)||(t+=i.score),t),0)}(t):t.reduce((t,i)=>es(i.score)?t:Math.max(t,i.score),0)}function ls(t,i){return t.reduce((t,n)=>(n.name!==i&&t.push(n),t),[])}function ds(t,i){let n,e=0;return[t.map((t,r)=>(Z(t,i)?(t.isSelected=!0,n=i,e=r):t.isSelected=!1,t)),n,e]}function vs(t){let i,n=0;return[t.map((t,e)=>(t.isActive?(i=Object.assign({},t),t.isSelected=!0,n=e):t.isSelected=!1,t)),i,n]}function ps(t,i){return t.some(t=>t.name===i)}function ms(t,i){return t.map(t=>(X(t.condition)&&t.condition.length>0&&(t.condition=t.condition.map(t=>X(t.field)&&t.field.length>0?t.field.filter(t=>t.name!==i):t.field&&t.field.name!==i?t:t.field?void 0:t),1===t.condition.length&&void 0===t.condition[0]&&delete t.condition),t))}function bs(t,i,n){if(n){let e=n.findIndex(i=>i.conditionId===t.sequentialConditionalField.conditionId);e>-1?n[e]={conditionId:t.sequentialConditionalField.conditionId,lastSequentialFieldIndex:i}:n.push({conditionId:t.sequentialConditionalField.conditionId,lastSequentialFieldIndex:i})}else n.push({conditionId:t.sequentialConditionalField.conditionId,lastSequentialFieldIndex:i});return n}function Ts(t,i){return t[i]&&t[i].items&&t[i].items.length>0}function ys(t){let i=[];return t&&X(t)?i=t.filter(t=>"tags"===t.type||"groups"===t.type):!t||"tags"!==t.type&&"groups"!==t.type||(i=[t]),i}function gs(t){return t.map(t=>(t.items=t.items.map((t,i)=>t=Object.assign({},t,{formCreatorIndex:i})),t))}function Ss(t,i){return t&&t.length>0&&t.forEach(t=>{const n=t.condition;i[t.slideIndex].items[t.itemIndex].parentConditions?i[t.slideIndex].items[t.itemIndex].parentConditions.findIndex(t=>t.condition._id===n._id)<0&&i[t.slideIndex].items[t.itemIndex].parentConditions.push({condition:n}):i[t.slideIndex].items[t.itemIndex].parentConditions=[{condition:n}]}),i}function ws(t,i){if(t&&t.length>0){let n=t.findIndex(t=>t.condition._id===i._id);n>-1&&t.splice(n,1)}return t}function As(t,i,n){if(t.fields&&t.fields.length>0){let e=[];return t.fields.forEach(t=>{t.parentConditions&&t.parentConditions.length>0&&t.parentConditions.forEach(t=>{const i=As(t);i&&(e=[...e,...i.childFields])}),t.sequentialConditionalField&&n&&(n=bs(t,i+=1,n)),e.push({name:t.name,sequentialConditionalField:t.sequentialConditionalField})}),n?{childFields:e,sequentialConditionFields:n,lastSequentialFieldIndex:i}:{childFields:e}}}function Ps(t,i){let n=[],e=[];if(t&&t.length>0){let r=i;t.forEach(t=>{let i=As(t,r,e);i&&(e=i.sequentialConditionFields,r=i.lastSequentialFieldIndex,n=[...n,...i.childFields])})}return{childFields:n,sequentialConditionFields:e}}function Ms(t){return t.items&&t.items.length>0&&(t.items=t.items.map(t=>(t.name=si(),t))),t}const Es="progressbar-text";function Is(t,i,n,e,r){let s=bt(t)?Math.round(100*t):"-",o=s>1?" pts":" pt",a=e||"",u=ks(n);return`<span class="progress-value ${n} ${a}">${{percentage:`<span>${s}<span class="${u}">%</span></span>`,points:`<span>${s}</span><span class="progress-point ${u}">${o}</span>`,step:r?`<span>${t}/${r[1]}</span>`:"",none:s}[i]}</span>`}function ks(t){let i=["extra-small","small","medium","large","extra-large","extra-extra-large"],n=i.indexOf(t);return n>0?i[n-1]:i[0]}function Ds(t,i,n,e,r){let s=Tt().boost&&!i&&"dark"!==i?i="danger-light":i;return`${Es} ${e} ${n} ${s} ${r} ${t} `}function Cs(t="middle",i="right",n="progress"){return t===i?`${t}-${n}`:`${t}-${i}-${n}`}var Gs=function(){var t=function(i,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var n in i)i.hasOwnProperty(n)&&(t[n]=i[n])})(i,n)};return function(i,n){function e(){this.constructor=i}t(i,n),i.prototype=null===n?Object.create(n):(e.prototype=n.prototype,new e)}}(),Os=new(function(i){function n(){return null!==i&&i.apply(this,arguments)||this}return Gs(n,i),n.prototype.overlaysWebView=function(i){return t(this,"overlaysWebView",{sync:!0},arguments)},n.prototype.styleDefault=function(){return t(this,"styleDefault",{sync:!0},arguments)},n.prototype.styleLightContent=function(){return t(this,"styleLightContent",{sync:!0},arguments)},n.prototype.styleBlackTranslucent=function(){return t(this,"styleBlackTranslucent",{sync:!0},arguments)},n.prototype.styleBlackOpaque=function(){return t(this,"styleBlackOpaque",{sync:!0},arguments)},n.prototype.backgroundColorByName=function(i){return t(this,"backgroundColorByName",{sync:!0},arguments)},n.prototype.backgroundColorByHexString=function(i){return t(this,"backgroundColorByHexString",{sync:!0},arguments)},n.prototype.hide=function(){return t(this,"hide",{sync:!0},arguments)},n.prototype.show=function(){return t(this,"show",{sync:!0},arguments)},Object.defineProperty(n.prototype,"isVisible",{get:function(){return r(this,"isVisible")},set:function(t){s(this,"isVisible",t)},enumerable:!0,configurable:!0}),n.pluginName="StatusBar",n.plugin="cordova-plugin-statusbar",n.pluginRef="StatusBar",n.repo="https://github.com/apache/cordova-plugin-statusbar",n.platforms=["Android","iOS","Windows"],n}(i)),Bs="undefined"!=typeof window?window:void 0!==Et?Et:"undefined"!=typeof self?self:{};const xs=kt(Object.freeze({default:{}}));var Rs,Ns=void 0!==Et?Et:"undefined"!=typeof window?window:{};"undefined"!=typeof document?Rs=document:(Rs=Ns["__GLOBAL_DOCUMENT_CACHE@4"])||(Rs=Ns["__GLOBAL_DOCUMENT_CACHE@4"]=xs);var Hs=Rs,js=Mt(function(t){t.exports=function(t,i){t=t&&t.hasOwnProperty("default")?t.default:t,i=i&&i.hasOwnProperty("default")?i.default:i;var n="7.6.0";function e(t,i){t.prototype=Object.create(i.prototype),(t.prototype.constructor=t).__proto__=i}function r(t,i){return(r=Object.setPrototypeOf||function(t,i){return t.__proto__=i,t})(t,i)}function s(t,i,n){return(s=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}()?Reflect.construct:function(t,i,n){var e=[null];e.push.apply(e,i);var s=new(Function.bind.apply(t,e));return n&&r(s,n.prototype),s}).apply(null,arguments)}function o(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function a(t,i){return i=i||t.slice(0),t.raw=i,t}var u=[],c=function i(n){function e(){for(var t=arguments.length,i=new Array(t),n=0;n<t;n++)i[n]=arguments[n];r("log",s,i)}var r,s="info";return r=function(i,n){return function(e,r,s){var o=n.levels[r],a=new RegExp("^("+o+")$");if("log"!==e&&s.unshift(e.toUpperCase()+":"),s.unshift(i+":"),u&&u.push([].concat(s)),t.console){var c=t.console[e];c||"debug"!==e||(c=t.console.info||t.console.log),c&&o&&a.test(e)&&c[Array.isArray(s)?"apply":"call"](t.console,s)}}}(n,e),e.createLogger=function(t){return i(n+": "+t)},e.levels={all:"debug|log|warn|error",off:"",debug:"debug|log|warn|error",info:"log|warn|error",warn:"warn|error",error:"error",DEFAULT:s},e.level=function(t){if("string"==typeof t){if(!e.levels.hasOwnProperty(t))throw new Error('"'+t+'" in not a valid log level');s=t}return s},(e.history=function(){return u?[].concat(u):[]}).filter=function(t){return(u||[]).filter(function(i){return new RegExp(".*"+t+".*").test(i[0])})},e.history.clear=function(){u&&(u.length=0)},e.history.disable=function(){null!==u&&(u.length=0,u=null)},e.history.enable=function(){null===u&&(u=[])},e.error=function(){for(var t=arguments.length,i=new Array(t),n=0;n<t;n++)i[n]=arguments[n];return r("error",s,i)},e.warn=function(){for(var t=arguments.length,i=new Array(t),n=0;n<t;n++)i[n]=arguments[n];return r("warn",s,i)},e.debug=function(){for(var t=arguments.length,i=new Array(t),n=0;n<t;n++)i[n]=arguments[n];return r("debug",s,i)},e}("VIDEOJS"),h=c.createLogger,f=function(t){for(var i="",n=0;n<arguments.length;n++)i+=t[n].replace(/\n\r?\s*/g,"")+(arguments[n+1]||"");return i},l=Object.prototype.toString,d=function(t){return m(t)?Object.keys(t):[]};function v(t,i){d(t).forEach(function(n){return i(t[n],n)})}function p(t){for(var i=arguments.length,n=new Array(1<i?i-1:0),e=1;e<i;e++)n[e-1]=arguments[e];return Object.assign?Object.assign.apply(Object,[t].concat(n)):(n.forEach(function(i){i&&v(i,function(i,n){t[n]=i})}),t)}function m(t){return!!t&&"object"==typeof t}function b(t){return m(t)&&"[object Object]"===l.call(t)&&t.constructor===Object}function T(i,n){if(!i||!n)return"";if("function"!=typeof t.getComputedStyle)return"";var e=t.getComputedStyle(i);return e?e[n]:""}function y(){var t=a(["Setting attributes in the second argument of createEl()\n                has been deprecated. Use the third argument instead.\n                createEl(type, properties, attributes). Attempting to set "," to ","."]);return y=function(){return t},t}function g(t){return"string"==typeof t&&/\S/.test(t)}function S(t){if(/\s/.test(t))throw new Error("class has illegal whitespace characters")}function w(){return i===t.document}function A(t){return m(t)&&1===t.nodeType}function P(){try{return t.parent!==t.self}catch(t){return!0}}function M(t){return function(n,e){if(!g(n))return i[t](null);g(e)&&(e=i.querySelector(e));var r=A(e)?e:i;return r[t]&&r[t](n)}}function E(t,n,e,r){void 0===t&&(t="div"),void 0===n&&(n={}),void 0===e&&(e={});var s=i.createElement(t);return Object.getOwnPropertyNames(n).forEach(function(t){var i=n[t];-1!==t.indexOf("aria-")||"role"===t||"type"===t?(c.warn(f(y(),t,i)),s.setAttribute(t,i)):"textContent"===t?I(s,i):s[t]=i}),Object.getOwnPropertyNames(e).forEach(function(t){s.setAttribute(t,e[t])}),r&&$(s,r),s}function I(t,i){return void 0===t.textContent?t.innerText=i:t.textContent=i,t}function k(t,i){i.firstChild?i.insertBefore(t,i.firstChild):i.appendChild(t)}function D(t,i){return S(i),t.classList?t.classList.contains(i):new RegExp("(^|\\s)"+i+"($|\\s)").test(t.className)}function C(t,i){return t.classList?t.classList.add(i):D(t,i)||(t.className=(t.className+" "+i).trim()),t}function G(t,i){return t.classList?t.classList.remove(i):(S(i),t.className=t.className.split(/\s+/).filter(function(t){return t!==i}).join(" ")),t}function O(t,i,n){var e=D(t,i);if("function"==typeof n&&(n=n(t,i)),"boolean"!=typeof n&&(n=!e),n!==e)return n?C(t,i):G(t,i),t}function B(t,i){Object.getOwnPropertyNames(i).forEach(function(n){var e=i[n];null==e||!1===e?t.removeAttribute(n):t.setAttribute(n,!0===e?"":e)})}function x(t){var i={};if(t&&t.attributes&&0<t.attributes.length)for(var n=t.attributes,e=n.length-1;0<=e;e--){var r=n[e].name,s=n[e].value;"boolean"!=typeof t[r]&&-1===",autoplay,controls,playsinline,loop,muted,default,defaultMuted,".indexOf(","+r+",")||(s=null!==s),i[r]=s}return i}function R(t,i){return t.getAttribute(i)}function N(t,i,n){t.setAttribute(i,n)}function H(t,i){t.removeAttribute(i)}function j(){i.body.focus(),i.onselectstart=function(){return!1}}function _(){i.onselectstart=function(){return!0}}function U(t){if(t&&t.getBoundingClientRect&&t.parentNode){var i=t.getBoundingClientRect(),n={};return["bottom","height","left","right","top","width"].forEach(function(t){void 0!==i[t]&&(n[t]=i[t])}),n.height||(n.height=parseFloat(T(t,"height"))),n.width||(n.width=parseFloat(T(t,"width"))),n}}function L(n){var e;if(n.getBoundingClientRect&&n.parentNode&&(e=n.getBoundingClientRect()),!e)return{left:0,top:0};var r=i.documentElement,s=i.body,o=e.top+(t.pageYOffset||s.scrollTop)-(r.clientTop||s.clientTop||0);return{left:Math.round(e.left+(t.pageXOffset||s.scrollLeft)-(r.clientLeft||s.clientLeft||0)),top:Math.round(o)}}function V(t,i){var n={},e=L(t),r=t.offsetWidth,s=t.offsetHeight,o=e.left,a=i.pageY,u=i.pageX;return i.changedTouches&&(u=i.changedTouches[0].pageX,a=i.changedTouches[0].pageY),n.y=Math.max(0,Math.min(1,(e.top-a+s)/s)),n.x=Math.max(0,Math.min(1,(u-o)/r)),n}function F(t){return m(t)&&3===t.nodeType}function W(t){for(;t.firstChild;)t.removeChild(t.firstChild);return t}function X(t){return"function"==typeof t&&(t=t()),(Array.isArray(t)?t:[t]).map(function(t){return"function"==typeof t&&(t=t()),A(t)||F(t)?t:"string"==typeof t&&/\S/.test(t)?i.createTextNode(t):void 0}).filter(function(t){return t})}function $(t,i){return X(i).forEach(function(i){return t.appendChild(i)}),t}function z(t,i){return $(W(t),i)}function K(t){return void 0===t.button&&void 0===t.buttons||0===t.button&&void 0===t.buttons||0===t.button&&0===t.buttons||0===t.button&&1===t.buttons}var q=M("querySelector"),Y=M("querySelectorAll"),Q=Object.freeze({isReal:w,isEl:A,isInFrame:P,createEl:E,textContent:I,prependTo:k,hasClass:D,addClass:C,removeClass:G,toggleClass:O,setAttributes:B,getAttributes:x,getAttribute:R,setAttribute:N,removeAttribute:H,blockTextSelection:j,unblockTextSelection:_,getBoundingClientRect:U,findPosition:L,getPointerPosition:V,isTextNode:F,emptyEl:W,normalizeContent:X,appendContent:$,insertContent:z,isSingleLeftClick:K,$:q,$$:Y}),J=1;function Z(){return J++}var tt={},it="vdata"+Math.floor(t.performance&&t.performance.now()||Date.now());function nt(t){var i=t[it];return i=i||(t[it]=Z()),tt[i]||(tt[i]={}),tt[i]}function et(t){var i=t[it];return!!i&&!!Object.getOwnPropertyNames(tt[i]).length}function rt(t){var i=t[it];if(i){delete tt[i];try{delete t[it]}catch(i){t.removeAttribute?t.removeAttribute(it):t[it]=null}}}function st(t,i){var n=nt(t);0===n.handlers[i].length&&(delete n.handlers[i],t.removeEventListener?t.removeEventListener(i,n.dispatcher,!1):t.detachEvent&&t.detachEvent("on"+i,n.dispatcher)),Object.getOwnPropertyNames(n.handlers).length<=0&&(delete n.handlers,delete n.dispatcher,delete n.disabled),0===Object.getOwnPropertyNames(n).length&&rt(t)}function ot(t,i,n,e){n.forEach(function(n){t(i,n,e)})}function at(n){function e(){return!0}function r(){return!1}if(!n||!n.isPropagationStopped){var s=n||t.event;for(var o in n={},s)"layerX"!==o&&"layerY"!==o&&"keyLocation"!==o&&"webkitMovementX"!==o&&"webkitMovementY"!==o&&("returnValue"===o&&s.preventDefault||(n[o]=s[o]));if(n.target||(n.target=n.srcElement||i),n.relatedTarget||(n.relatedTarget=n.fromElement===n.target?n.toElement:n.fromElement),n.preventDefault=function(){s.preventDefault&&s.preventDefault(),n.returnValue=!1,s.returnValue=!1,n.defaultPrevented=!0},n.defaultPrevented=!1,n.stopPropagation=function(){s.stopPropagation&&s.stopPropagation(),n.cancelBubble=!0,s.cancelBubble=!0,n.isPropagationStopped=e},n.isPropagationStopped=r,n.stopImmediatePropagation=function(){s.stopImmediatePropagation&&s.stopImmediatePropagation(),n.isImmediatePropagationStopped=e,n.stopPropagation()},n.isImmediatePropagationStopped=r,null!=n.clientX){var a=i.documentElement,u=i.body;n.pageX=n.clientX+(a&&a.scrollLeft||u&&u.scrollLeft||0)-(a&&a.clientLeft||u&&u.clientLeft||0),n.pageY=n.clientY+(a&&a.scrollTop||u&&u.scrollTop||0)-(a&&a.clientTop||u&&u.clientTop||0)}n.which=n.charCode||n.keyCode,null!=n.button&&(n.button=1&n.button?0:4&n.button?1:2&n.button?2:0)}return n}var ut=!1;!function(){try{var i=Object.defineProperty({},"passive",{get:function(){ut=!0}});t.addEventListener("test",null,i),t.removeEventListener("test",null,i)}catch(i){}}();var ct=["touchstart","touchmove"];function ht(t,i,n){if(Array.isArray(i))return ot(ht,t,i,n);var e=nt(t);if(e.handlers||(e.handlers={}),e.handlers[i]||(e.handlers[i]=[]),n.guid||(n.guid=Z()),e.handlers[i].push(n),e.dispatcher||(e.disabled=!1,e.dispatcher=function(i,n){if(!e.disabled){i=at(i);var r=e.handlers[i.type];if(r)for(var s=r.slice(0),o=0,a=s.length;o<a&&!i.isImmediatePropagationStopped();o++)try{s[o].call(t,i,n)}catch(i){c.error(i)}}}),1===e.handlers[i].length)if(t.addEventListener){var r=!1;ut&&-1<ct.indexOf(i)&&(r={passive:!0}),t.addEventListener(i,e.dispatcher,r)}else t.attachEvent&&t.attachEvent("on"+i,e.dispatcher)}function ft(t,i,n){if(et(t)){var e=nt(t);if(e.handlers){if(Array.isArray(i))return ot(ft,t,i,n);function r(t,i){e.handlers[i]=[],st(t,i)}if(void 0!==i){var s=e.handlers[i];if(s)if(n){if(n.guid)for(var o=0;o<s.length;o++)s[o].guid===n.guid&&s.splice(o--,1);st(t,i)}else r(t,i)}else for(var a in e.handlers)Object.prototype.hasOwnProperty.call(e.handlers||{},a)&&r(t,a)}}}function lt(t,i,n){var e=et(t)?nt(t):{},r=t.parentNode||t.ownerDocument;if("string"==typeof i?i={type:i,target:t}:i.target||(i.target=t),i=at(i),e.dispatcher&&e.dispatcher.call(t,i,n),r&&!i.isPropagationStopped()&&!0===i.bubbles)lt.call(null,r,i,n);else if(!r&&!i.defaultPrevented&&i.target&&i.target[i.type]){var s=nt(i.target);i.target[i.type]&&(s.disabled=!0,"function"==typeof i.target[i.type]&&i.target[i.type](),s.disabled=!1)}return!i.defaultPrevented}function dt(t,i,n){if(Array.isArray(i))return ot(dt,t,i,n);function e(){ft(t,i,e),n.apply(this,arguments)}e.guid=n.guid=n.guid||Z(),ht(t,i,e)}function vt(t,i,n){function e(){ft(t,i,e),n.apply(this,arguments)}e.guid=n.guid=n.guid||Z(),ht(t,i,e)}var pt,mt,bt=Object.freeze({fixEvent:at,on:ht,off:ft,trigger:lt,one:dt,any:vt}),Tt=!1,yt=function(){if(w()&&!1!==pt.options.autoSetup){var t=Array.prototype.slice.call(i.getElementsByTagName("video")),n=Array.prototype.slice.call(i.getElementsByTagName("audio")),e=Array.prototype.slice.call(i.getElementsByTagName("video-js")),r=t.concat(n,e);if(r&&0<r.length)for(var s=0,o=r.length;s<o;s++){var a=r[s];if(!a||!a.getAttribute){gt(1);break}void 0===a.player&&null!==a.getAttribute("data-setup")&&pt(a)}else Tt||gt(1)}};function gt(i,n){n&&(pt=n),t.setTimeout(yt,i)}function St(t){var n=i.createElement("style");return n.className=t,n}function wt(t,i){t.styleSheet?t.styleSheet.cssText=i:t.textContent=i}function At(t,i,n){function e(){return i.apply(t,arguments)}return i.guid||(i.guid=Z()),e.guid=n?n+"_"+i.guid:i.guid,e}function Pt(i,n){var e=t.performance.now();return function(){var r=t.performance.now();n<=r-e&&(i.apply(void 0,arguments),e=r)}}function Mt(){}function Et(t){return"string"==typeof t&&/\S/.test(t)||Array.isArray(t)&&!!t.length}function It(t){if(!t.nodeName&&!Ot(t))throw new Error("Invalid target; must be a DOM node or evented object.")}function kt(t){if(!Et(t))throw new Error("Invalid event type; must be a non-empty string or array.")}function Dt(t){if("function"!=typeof t)throw new Error("Invalid listener; must be a function.")}function Ct(t,i){var n,e,r,s=i.length<3||i[0]===t||i[0]===t.eventBusEl_;return r=s?(n=t.eventBusEl_,3<=i.length&&i.shift(),e=i[0],i[1]):(n=i[0],e=i[1],i[2]),It(n),kt(e),Dt(r),{isTargetingSelf:s,target:n,type:e,listener:r=At(t,r)}}function Gt(t,i,n,e){It(t),t.nodeName?bt[i](t,n,e):t[i](n,e)}w()&&"complete"===i.readyState?Tt=!0:dt(t,"load",function(){Tt=!0}),Mt.prototype.allowedEvents_={},Mt.prototype.addEventListener=Mt.prototype.on=function(t,i){var n=this.addEventListener;this.addEventListener=function(){},ht(this,t,i),this.addEventListener=n},Mt.prototype.removeEventListener=Mt.prototype.off=function(t,i){ft(this,t,i)},Mt.prototype.one=function(t,i){var n=this.addEventListener;this.addEventListener=function(){},dt(this,t,i),this.addEventListener=n},Mt.prototype.any=function(t,i){var n=this.addEventListener;this.addEventListener=function(){},vt(this,t,i),this.addEventListener=n},Mt.prototype.dispatchEvent=Mt.prototype.trigger=function(t){var i=t.type||t;"string"==typeof t&&(t={type:i}),t=at(t),this.allowedEvents_[i]&&this["on"+i]&&this["on"+i](t),lt(this,t)},Mt.prototype.queueTrigger=function(i){var n=this;mt=mt||new Map;var e=i.type||i,r=mt.get(this);r||(r=new Map,mt.set(this,r));var s=r.get(e);r.delete(e),t.clearTimeout(s);var o=t.setTimeout(function(){0===r.size&&(r=null,mt.delete(n)),n.trigger(i)},0);r.set(e,o)};var Ot=function(t){return t instanceof Mt||!!t.eventBusEl_&&["on","one","off","trigger"].every(function(i){return"function"==typeof t[i]})},Bt={on:function(){for(var t=this,i=arguments.length,n=new Array(i),e=0;e<i;e++)n[e]=arguments[e];var r=Ct(this,n),s=r.isTargetingSelf,o=r.target,a=r.type,u=r.listener;if(Gt(o,"on",a,u),!s){function c(){return t.off(o,a,u)}function h(){return t.off("dispose",c)}c.guid=u.guid,h.guid=u.guid,Gt(this,"on","dispose",c),Gt(o,"on","dispose",h)}},one:function(){for(var t=this,i=arguments.length,n=new Array(i),e=0;e<i;e++)n[e]=arguments[e];var r=Ct(this,n),s=r.isTargetingSelf,o=r.target,a=r.type,u=r.listener;if(s)Gt(o,"one",a,u);else{function c(){t.off(o,a,c);for(var i=arguments.length,n=new Array(i),e=0;e<i;e++)n[e]=arguments[e];u.apply(null,n)}c.guid=u.guid,Gt(o,"one",a,c)}},any:function(){for(var t=this,i=arguments.length,n=new Array(i),e=0;e<i;e++)n[e]=arguments[e];var r=Ct(this,n),s=r.isTargetingSelf,o=r.target,a=r.type,u=r.listener;if(s)Gt(o,"any",a,u);else{function c(){t.off(o,a,c);for(var i=arguments.length,n=new Array(i),e=0;e<i;e++)n[e]=arguments[e];u.apply(null,n)}c.guid=u.guid,Gt(o,"any",a,c)}},off:function(t,i,n){if(!t||Et(t))ft(this.eventBusEl_,t,i);else{var e=t,r=i;It(e),kt(r),Dt(n),n=At(this,n),this.off("dispose",n),e.nodeName?(ft(e,r,n),ft(e,"dispose",n)):Ot(e)&&(e.off(r,n),e.off("dispose",n))}},trigger:function(t,i){return lt(this.eventBusEl_,t,i)}};function xt(i,n){void 0===n&&(n={});var e=n.eventBusKey;if(e){if(!i[e].nodeName)throw new Error('The eventBusKey "'+e+'" does not refer to an element.');i.eventBusEl_=i[e]}else i.eventBusEl_=E("span",{className:"vjs-event-bus"});return p(i,Bt),i.eventedCallbacks&&i.eventedCallbacks.forEach(function(t){t()}),i.on("dispose",function(){i.off(),t.setTimeout(function(){i.eventBusEl_=null},0)}),i}var Rt={state:{},setState:function(t){var i,n=this;return"function"==typeof t&&(t=t()),v(t,function(t,e){n.state[e]!==t&&((i=i||{})[e]={from:n.state[e],to:t}),n.state[e]=t}),i&&Ot(this)&&this.trigger({changes:i,type:"statechanged"}),i}};function Nt(t,i){return p(t,Rt),t.state=p({},t.state,i),"function"==typeof t.handleStateChanged&&Ot(t)&&t.on("statechanged",t.handleStateChanged),t}function Ht(t){return"string"!=typeof t?t:t.charAt(0).toUpperCase()+t.slice(1)}function jt(){for(var t={},i=arguments.length,n=new Array(i),e=0;e<i;e++)n[e]=arguments[e];return n.forEach(function(i){i&&v(i,function(i,n){b(i)?(b(t[n])||(t[n]={}),t[n]=jt(t[n],i)):t[n]=i})}),t}var _t=function(){function i(t,i,n){if(this.player_=!t&&this.play?t=this:t,this.parentComponent_=null,this.options_=jt({},this.options_),i=this.options_=jt(this.options_,i),this.id_=i.id||i.el&&i.el.id,!this.id_){var e=t&&t.id&&t.id()||"no_player";this.id_=e+"_component_"+Z()}this.name_=i.name||null,i.el?this.el_=i.el:!1!==i.createEl&&(this.el_=this.createEl()),!1!==i.evented&&xt(this,{eventBusKey:this.el_?"el_":null}),Nt(this,this.constructor.defaultState),this.children_=[],this.childIndex_={},!(this.childNameIndex_={})!==i.initChildren&&this.initChildren(),this.ready(n),!1!==i.reportTouchActivity&&this.enableTouchActivity()}var n=i.prototype;return n.dispose=function(){if(this.trigger({type:"dispose",bubbles:!1}),this.children_)for(var t=this.children_.length-1;0<=t;t--)this.children_[t].dispose&&this.children_[t].dispose();this.children_=null,this.childIndex_=null,this.childNameIndex_=null,this.parentComponent_=null,this.el_&&(this.el_.parentNode&&this.el_.parentNode.removeChild(this.el_),rt(this.el_),this.el_=null),this.player_=null},n.player=function(){return this.player_},n.options=function(t){return t&&(this.options_=jt(this.options_,t)),this.options_},n.el=function(){return this.el_},n.createEl=function(t,i,n){return E(t,i,n)},n.localize=function(t,i,n){void 0===n&&(n=t);var e=this.player_.language&&this.player_.language(),r=this.player_.languages&&this.player_.languages(),s=r&&r[e],o=e&&e.split("-")[0],a=r&&r[o],u=n;return s&&s[t]?u=s[t]:a&&a[t]&&(u=a[t]),i&&(u=u.replace(/\{(\d+)\}/g,function(t,n){var e=i[n-1],r=e;return void 0===e&&(r=t),r})),u},n.contentEl=function(){return this.contentEl_||this.el_},n.id=function(){return this.id_},n.name=function(){return this.name_},n.children=function(){return this.children_},n.getChildById=function(t){return this.childIndex_[t]},n.getChild=function(t){if(t)return t=Ht(t),this.childNameIndex_[t]},n.addChild=function(t,n,e){var r,s;if(void 0===n&&(n={}),void 0===e&&(e=this.children_.length),"string"==typeof t){s=Ht(t);var o=n.componentClass||s;n.name=s;var a=i.getComponent(o);if(!a)throw new Error("Component "+o+" does not exist");if("function"!=typeof a)return null;r=new a(this.player_||this,n)}else r=t;if(r.parentComponent_&&r.parentComponent_.removeChild(r),this.children_.splice(e,0,r),r.parentComponent_=this,"function"==typeof r.id&&(this.childIndex_[r.id()]=r),(s=s||r.name&&Ht(r.name()))&&(this.childNameIndex_[s]=r),"function"==typeof r.el&&r.el()){var u=this.contentEl().children[e]||null;this.contentEl().insertBefore(r.el(),u)}return r},n.removeChild=function(t){if("string"==typeof t&&(t=this.getChild(t)),t&&this.children_){for(var i=!1,n=this.children_.length-1;0<=n;n--)if(this.children_[n]===t){i=!0,this.children_.splice(n,1);break}if(i){t.parentComponent_=null,this.childIndex_[t.id()]=null,this.childNameIndex_[t.name()]=null;var e=t.el();e&&e.parentNode===this.contentEl()&&this.contentEl().removeChild(t.el())}}},n.initChildren=function(){var t=this,n=this.options_.children;if(n){var e,r=this.options_,s=i.getComponent("Tech");(e=Array.isArray(n)?n:Object.keys(n)).concat(Object.keys(this.options_).filter(function(t){return!e.some(function(i){return"string"==typeof i?t===i:t===i.name})})).map(function(i){var e,r;return r="string"==typeof i?n[e=i]||t.options_[e]||{}:(e=i.name,i),{name:e,opts:r}}).filter(function(t){var n=i.getComponent(t.opts.componentClass||Ht(t.name));return n&&!s.isTech(n)}).forEach(function(i){var n=i.name,e=i.opts;if(void 0!==r[n]&&(e=r[n]),!1!==e){!0===e&&(e={}),e.playerOptions=t.options_.playerOptions;var s=t.addChild(n,e);s&&(t[n]=s)}})}},n.buildCSSClass=function(){return""},n.ready=function(t,i){if(void 0===i&&(i=!1),t)return this.isReady_?void(i?t.call(this):this.setTimeout(t,1)):(this.readyQueue_=this.readyQueue_||[],void this.readyQueue_.push(t))},n.triggerReady=function(){this.isReady_=!0,this.setTimeout(function(){var t=this.readyQueue_;this.readyQueue_=[],t&&0<t.length&&t.forEach(function(t){t.call(this)},this),this.trigger("ready")},1)},n.$=function(t,i){return q(t,i||this.contentEl())},n.$$=function(t,i){return Y(t,i||this.contentEl())},n.hasClass=function(t){return D(this.el_,t)},n.addClass=function(t){C(this.el_,t)},n.removeClass=function(t){G(this.el_,t)},n.toggleClass=function(t,i){O(this.el_,t,i)},n.show=function(){this.removeClass("vjs-hidden")},n.hide=function(){this.addClass("vjs-hidden")},n.lockShowing=function(){this.addClass("vjs-lock-showing")},n.unlockShowing=function(){this.removeClass("vjs-lock-showing")},n.getAttribute=function(t){return R(this.el_,t)},n.setAttribute=function(t,i){N(this.el_,t,i)},n.removeAttribute=function(t){H(this.el_,t)},n.width=function(t,i){return this.dimension("width",t,i)},n.height=function(t,i){return this.dimension("height",t,i)},n.dimensions=function(t,i){this.width(t,!0),this.height(i)},n.dimension=function(t,i,n){if(void 0!==i)return null!==i&&i==i||(i=0),this.el_.style[t]=-1!==(""+i).indexOf("%")||-1!==(""+i).indexOf("px")?i:"auto"===i?"":i+"px",void(n||this.trigger("componentresize"));if(!this.el_)return 0;var e=this.el_.style[t],r=e.indexOf("px");return-1!==r?parseInt(e.slice(0,r),10):parseInt(this.el_["offset"+Ht(t)],10)},n.currentDimension=function(i){var n=0;if("width"!==i&&"height"!==i)throw new Error("currentDimension only accepts width or height value");if("function"==typeof t.getComputedStyle){var e=t.getComputedStyle(this.el_);n=e.getPropertyValue(i)||e[i]}if(0===(n=parseFloat(n))){var r="offset"+Ht(i);n=this.el_[r]}return n},n.currentDimensions=function(){return{width:this.currentDimension("width"),height:this.currentDimension("height")}},n.currentWidth=function(){return this.currentDimension("width")},n.currentHeight=function(){return this.currentDimension("height")},n.focus=function(){this.el_.focus()},n.blur=function(){this.el_.blur()},n.handleKeyDown=function(t){this.player_&&(t.stopPropagation(),this.player_.handleKeyDown(t))},n.handleKeyPress=function(t){this.handleKeyDown(t)},n.emitTapEvents=function(){var i,n=0,e=null;function r(){i=!1}this.on("touchstart",function(r){1===r.touches.length&&(e={pageX:r.touches[0].pageX,pageY:r.touches[0].pageY},n=t.performance.now(),i=!0)}),this.on("touchmove",function(t){if(1<t.touches.length)i=!1;else if(e){var n=t.touches[0].pageX-e.pageX,r=t.touches[0].pageY-e.pageY;10<Math.sqrt(n*n+r*r)&&(i=!1)}}),this.on("touchleave",r),this.on("touchcancel",r),this.on("touchend",function(r){!(e=null)===i&&t.performance.now()-n<200&&(r.preventDefault(),this.trigger("tap"))})},n.enableTouchActivity=function(){if(this.player()&&this.player().reportUserActivity){var t,i=At(this.player(),this.player().reportUserActivity);function n(){i(),this.clearInterval(t)}this.on("touchstart",function(){i(),this.clearInterval(t),t=this.setInterval(i,250)}),this.on("touchmove",i),this.on("touchend",n),this.on("touchcancel",n)}},n.setTimeout=function(i,n){var e,r,s=this;return i=At(this,i),e=t.setTimeout(function(){s.off("dispose",r),i()},n),(r=function(){return s.clearTimeout(e)}).guid="vjs-timeout-"+e,this.on("dispose",r),e},n.clearTimeout=function(i){function n(){}return t.clearTimeout(i),n.guid="vjs-timeout-"+i,this.off("dispose",n),i},n.setInterval=function(i,n){var e=this;function r(){return e.clearInterval(s)}i=At(this,i);var s=t.setInterval(i,n);return r.guid="vjs-interval-"+s,this.on("dispose",r),s},n.clearInterval=function(i){function n(){}return t.clearInterval(i),n.guid="vjs-interval-"+i,this.off("dispose",n),i},n.requestAnimationFrame=function(i){var n,e,r=this;return this.supportsRaf_?(i=At(this,i),n=t.requestAnimationFrame(function(){r.off("dispose",e),i()}),(e=function(){return r.cancelAnimationFrame(n)}).guid="vjs-raf-"+n,this.on("dispose",e),n):this.setTimeout(i,1e3/60)},n.cancelAnimationFrame=function(i){if(this.supportsRaf_){function n(){}return t.cancelAnimationFrame(i),n.guid="vjs-raf-"+i,this.off("dispose",n),i}return this.clearTimeout(i)},i.registerComponent=function(t,n){if("string"!=typeof t||!t)throw new Error('Illegal component name, "'+t+'"; must be a non-empty string.');var e=i.getComponent("Tech"),r=e&&e.isTech(n),s=i===n||i.prototype.isPrototypeOf(n.prototype);if(r||!s)throw new Error('Illegal component, "'+t+'"; '+(r?"techs must be registered using Tech.registerTech()":"must be a Component subclass")+".");t=Ht(t),i.components_||(i.components_={});var o=i.getComponent("Player");if("Player"===t&&o&&o.players){var a=o.players,u=Object.keys(a);if(a&&0<u.length&&u.map(function(t){return a[t]}).every(Boolean))throw new Error("Can not register Player component after player has been created.")}return i.components_[t]=n},i.getComponent=function(t){if(t)return t=Ht(t),i.components_&&i.components_[t]?i.components_[t]:void 0},i}();_t.prototype.supportsRaf_="function"==typeof t.requestAnimationFrame&&"function"==typeof t.cancelAnimationFrame,_t.registerComponent("Component",_t);var Ut,Lt,Vt,Ft,Wt=t.navigator&&t.navigator.userAgent||"",Xt=/AppleWebKit\/([\d.]+)/i.exec(Wt),$t=Xt?parseFloat(Xt.pop()):null,zt=/iPad/i.test(Wt),Kt=/iPhone/i.test(Wt)&&!zt,qt=/iPod/i.test(Wt),Yt=Kt||zt||qt,Qt=(Ut=Wt.match(/OS (\d+)_/i))&&Ut[1]?Ut[1]:null,Jt=/Android/i.test(Wt),Zt=function(){var t=Wt.match(/Android (\d+)(?:\.(\d+))?(?:\.(\d+))*/i);if(!t)return null;var i=t[1]&&parseFloat(t[1]),n=t[2]&&parseFloat(t[2]);return i&&n?parseFloat(t[1]+"."+t[2]):i||null}(),ti=Jt&&Zt<5&&$t<537,ii=/Firefox/i.test(Wt),ni=/Edge/i.test(Wt),ei=!ni&&(/Chrome/i.test(Wt)||/CriOS/i.test(Wt)),ri=(Lt=Wt.match(/(Chrome|CriOS)\/(\d+)/))&&Lt[2]?parseFloat(Lt[2]):null,si=(!(Ft=(Vt=/MSIE\s(\d+)\.\d/.exec(Wt))&&parseFloat(Vt[1]))&&/Trident\/7.0/i.test(Wt)&&/rv:11.0/.test(Wt)&&(Ft=11),Ft),oi=/Safari/i.test(Wt)&&!ei&&!Jt&&!ni,ai=(oi||Yt)&&!ei,ui=/Windows/i.test(Wt),ci=w()&&("ontouchstart"in t||t.navigator.maxTouchPoints||t.DocumentTouch&&t.document instanceof t.DocumentTouch),hi=Object.freeze({IS_IPAD:zt,IS_IPHONE:Kt,IS_IPOD:qt,IS_IOS:Yt,IOS_VERSION:Qt,IS_ANDROID:Jt,ANDROID_VERSION:Zt,IS_NATIVE_ANDROID:ti,IS_FIREFOX:ii,IS_EDGE:ni,IS_CHROME:ei,CHROME_VERSION:ri,IE_VERSION:si,IS_SAFARI:oi,IS_ANY_SAFARI:ai,IS_WINDOWS:ui,TOUCH_ENABLED:ci});function fi(t,i,n,e){return function(t,i,n){if("number"!=typeof e||e<0||n<e)throw new Error("Failed to execute '"+t+"' on 'TimeRanges': The index provided ("+e+") is non-numeric or out of bounds (0-"+n+").")}(t,0,n.length-1),n[e][i]}function li(t){return void 0===t||0===t.length?{length:0,start:function(){throw new Error("This TimeRanges object is empty")},end:function(){throw new Error("This TimeRanges object is empty")}}:{length:t.length,start:fi.bind(null,"start",0,t),end:fi.bind(null,"end",1,t)}}function di(t,i){return Array.isArray(t)?li(t):void 0===t||void 0===i?li():li([[t,i]])}function vi(t,i){var n,e,r=0;if(!i)return 0;t&&t.length||(t=di(0,0));for(var s=0;s<t.length;s++)n=t.start(s),i<(e=t.end(s))&&(e=i),r+=e-n;return r/i}for(var pi,mi={prefixed:!0},bi=[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror","fullscreen"],["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror","-webkit-full-screen"],["mozRequestFullScreen","mozCancelFullScreen","mozFullScreenElement","mozFullScreenEnabled","mozfullscreenchange","mozfullscreenerror","-moz-full-screen"],["msRequestFullscreen","msExitFullscreen","msFullscreenElement","msFullscreenEnabled","MSFullscreenChange","MSFullscreenError","-ms-fullscreen"]],Ti=bi[0],yi=0;yi<bi.length;yi++)if(bi[yi][1]in i){pi=bi[yi];break}if(pi){for(var gi=0;gi<pi.length;gi++)mi[Ti[gi]]=pi[gi];mi.prefixed=pi[0]!==Ti[0]}function Si(t){if(t instanceof Si)return t;"number"==typeof t?this.code=t:"string"==typeof t?this.message=t:m(t)&&("number"==typeof t.code&&(this.code=t.code),p(this,t)),this.message||(this.message=Si.defaultMessages[this.code]||"")}Si.prototype.code=0,Si.prototype.message="",Si.prototype.status=null,Si.errorTypes=["MEDIA_ERR_CUSTOM","MEDIA_ERR_ABORTED","MEDIA_ERR_NETWORK","MEDIA_ERR_DECODE","MEDIA_ERR_SRC_NOT_SUPPORTED","MEDIA_ERR_ENCRYPTED"],Si.defaultMessages={1:"You aborted the media playback",2:"A network error caused the media download to fail part-way.",3:"The media playback was aborted due to a corruption problem or because the media used features your browser did not support.",4:"The media could not be loaded, either because the server or network failed or because the format is not supported.",5:"The media is encrypted and we do not have the keys to decrypt it."};for(var wi=0;wi<Si.errorTypes.length;wi++)Si[Si.errorTypes[wi]]=wi,Si.prototype[Si.errorTypes[wi]]=wi;function Ai(t){return null!=t&&"function"==typeof t.then}function Pi(t){Ai(t)&&t.then(null,function(){})}function Mi(t){return["kind","label","language","id","inBandMetadataTrackDispatchType","mode","src"].reduce(function(i,n){return t[n]&&(i[n]=t[n]),i},{cues:t.cues&&Array.prototype.map.call(t.cues,function(t){return{startTime:t.startTime,endTime:t.endTime,text:t.text,id:t.id}})})}function Ei(t,i){return t(i={exports:{}},i.exports),i.exports}var Ii=Ei(function(t,i){function n(t){if(t&&"object"==typeof t){var i=t.which||t.keyCode||t.charCode;i&&(t=i)}if("number"==typeof t)return o[t];var n,s=String(t);return(n=e[s.toLowerCase()])?n:(n=r[s.toLowerCase()])||(1===s.length?s.charCodeAt(0):void 0)}n.isEventKey=function(t,i){if(t&&"object"==typeof t){var n=t.which||t.keyCode||t.charCode;if(null==n)return!1;if("string"==typeof i){var s;if(s=e[i.toLowerCase()])return s===n;if(s=r[i.toLowerCase()])return s===n}else if("number"==typeof i)return i===n;return!1}};var e=(i=t.exports=n).code=i.codes={backspace:8,tab:9,enter:13,shift:16,ctrl:17,alt:18,"pause/break":19,"caps lock":20,esc:27,space:32,"page up":33,"page down":34,end:35,home:36,left:37,up:38,right:39,down:40,insert:45,delete:46,command:91,"left command":91,"right command":93,"numpad *":106,"numpad +":107,"numpad -":109,"numpad .":110,"numpad /":111,"num lock":144,"scroll lock":145,"my computer":182,"my calculator":183,";":186,"=":187,",":188,"-":189,".":190,"/":191,"`":192,"[":219,"\\":220,"]":221,"'":222},r=i.aliases={windows:91,"⇧":16,"⌥":18,"⌃":17,"⌘":91,ctl:17,control:17,option:18,pause:19,break:19,caps:20,return:13,escape:27,spc:32,spacebar:32,pgup:33,pgdn:34,ins:45,del:46,cmd:91};for(s=97;s<123;s++)e[String.fromCharCode(s)]=s-32;for(var s=48;s<58;s++)e[s-48]=s;for(s=1;s<13;s++)e["f"+s]=s+111;for(s=0;s<10;s++)e["numpad "+s]=s+96;var o=i.names=i.title={};for(s in e)o[e[s]]=s;for(var a in r)e[a]=r[a]}),ki="vjs-modal-dialog",Di=function(n){function r(t,i){var e;return(e=n.call(this,t,i)||this).opened_=e.hasBeenOpened_=e.hasBeenFilled_=!1,e.closeable(!e.options_.uncloseable),e.content(e.options_.content),e.contentEl_=E("div",{className:ki+"-content"},{role:"document"}),e.descEl_=E("p",{className:ki+"-description vjs-control-text",id:e.el().getAttribute("aria-describedby")}),I(e.descEl_,e.description()),e.el_.appendChild(e.descEl_),e.el_.appendChild(e.contentEl_),e}e(r,n);var s=r.prototype;return s.createEl=function(){return n.prototype.createEl.call(this,"div",{className:this.buildCSSClass(),tabIndex:-1},{"aria-describedby":this.id()+"_description","aria-hidden":"true","aria-label":this.label(),role:"dialog"})},s.dispose=function(){this.contentEl_=null,this.descEl_=null,this.previouslyActiveEl_=null,n.prototype.dispose.call(this)},s.buildCSSClass=function(){return ki+" vjs-hidden "+n.prototype.buildCSSClass.call(this)},s.label=function(){return this.localize(this.options_.label||"Modal Window")},s.description=function(){var t=this.options_.description||this.localize("This is a modal window.");return this.closeable()&&(t+=" "+this.localize("This modal can be closed by pressing the Escape key or activating the close button.")),t},s.open=function(){if(!this.opened_){var t=this.player();this.trigger("beforemodalopen"),this.opened_=!0,!this.options_.fillAlways&&(this.hasBeenOpened_||this.hasBeenFilled_)||this.fill(),this.wasPlaying_=!t.paused(),this.options_.pauseOnOpen&&this.wasPlaying_&&t.pause(),this.on("keydown",this.handleKeyDown),this.hadControls_=t.controls(),t.controls(!1),this.show(),this.conditionalFocus_(),this.el().setAttribute("aria-hidden","false"),this.trigger("modalopen"),this.hasBeenOpened_=!0}},s.opened=function(t){return"boolean"==typeof t&&this[t?"open":"close"](),this.opened_},s.close=function(){if(this.opened_){var t=this.player();this.trigger("beforemodalclose"),this.opened_=!1,this.wasPlaying_&&this.options_.pauseOnOpen&&t.play(),this.off("keydown",this.handleKeyDown),this.hadControls_&&t.controls(!0),this.hide(),this.el().setAttribute("aria-hidden","true"),this.trigger("modalclose"),this.conditionalBlur_(),this.options_.temporary&&this.dispose()}},s.closeable=function(t){if("boolean"==typeof t){var i=this.closeable_=!!t,n=this.getChild("closeButton");if(i&&!n){var e=this.contentEl_;this.contentEl_=this.el_,n=this.addChild("closeButton",{controlText:"Close Modal Dialog"}),this.contentEl_=e,this.on(n,"close",this.close)}!i&&n&&(this.off(n,"close",this.close),this.removeChild(n),n.dispose())}return this.closeable_},s.fill=function(){this.fillWith(this.content())},s.fillWith=function(t){var i=this.contentEl(),n=i.parentNode,e=i.nextSibling;this.trigger("beforemodalfill"),this.hasBeenFilled_=!0,n.removeChild(i),this.empty(),z(i,t),this.trigger("modalfill"),e?n.insertBefore(i,e):n.appendChild(i);var r=this.getChild("closeButton");r&&n.appendChild(r.el_)},s.empty=function(){this.trigger("beforemodalempty"),W(this.contentEl()),this.trigger("modalempty")},s.content=function(t){return void 0!==t&&(this.content_=t),this.content_},s.conditionalFocus_=function(){var t=i.activeElement,n=this.player_.el_;this.previouslyActiveEl_=null,!n.contains(t)&&n!==t||(this.previouslyActiveEl_=t,this.focus())},s.conditionalBlur_=function(){this.previouslyActiveEl_&&(this.previouslyActiveEl_.focus(),this.previouslyActiveEl_=null)},s.handleKeyDown=function(t){if(t.stopPropagation(),Ii.isEventKey(t,"Escape")&&this.closeable())return t.preventDefault(),void this.close();if(Ii.isEventKey(t,"Tab")){for(var n,e=this.focusableEls_(),r=this.el_.querySelector(":focus"),s=0;s<e.length;s++)if(r===e[s]){n=s;break}i.activeElement===this.el_&&(n=0),t.shiftKey&&0===n?(e[e.length-1].focus(),t.preventDefault()):t.shiftKey||n!==e.length-1||(e[0].focus(),t.preventDefault())}},s.focusableEls_=function(){var i=this.el_.querySelectorAll("*");return Array.prototype.filter.call(i,function(i){return(i instanceof t.HTMLAnchorElement||i instanceof t.HTMLAreaElement)&&i.hasAttribute("href")||(i instanceof t.HTMLInputElement||i instanceof t.HTMLSelectElement||i instanceof t.HTMLTextAreaElement||i instanceof t.HTMLButtonElement)&&!i.hasAttribute("disabled")||i instanceof t.HTMLIFrameElement||i instanceof t.HTMLObjectElement||i instanceof t.HTMLEmbedElement||i.hasAttribute("tabindex")&&-1!==i.getAttribute("tabindex")||i.hasAttribute("contenteditable")})},r}(_t);Di.prototype.options_={pauseOnOpen:!0,temporary:!0},_t.registerComponent("ModalDialog",Di);var Ci=function(t){function i(i){var n;void 0===i&&(i=[]),(n=t.call(this)||this).tracks_=[],Object.defineProperty(o(n),"length",{get:function(){return this.tracks_.length}});for(var e=0;e<i.length;e++)n.addTrack(i[e]);return n}e(i,t);var n=i.prototype;return n.addTrack=function(t){var i=this.tracks_.length;""+i in this||Object.defineProperty(this,i,{get:function(){return this.tracks_[i]}}),-1===this.tracks_.indexOf(t)&&(this.tracks_.push(t),this.trigger({track:t,type:"addtrack",target:this}))},n.removeTrack=function(t){for(var i,n=0,e=this.length;n<e;n++)if(this[n]===t){(i=this[n]).off&&i.off(),this.tracks_.splice(n,1);break}i&&this.trigger({track:i,type:"removetrack",target:this})},n.getTrackById=function(t){for(var i=null,n=0,e=this.length;n<e;n++){var r=this[n];if(r.id===t){i=r;break}}return i},i}(Mt);for(var Gi in Ci.prototype.allowedEvents_={change:"change",addtrack:"addtrack",removetrack:"removetrack"},Ci.prototype.allowedEvents_)Ci.prototype["on"+Gi]=null;function Oi(t,i){for(var n=0;n<t.length;n++)Object.keys(t[n]).length&&i.id!==t[n].id&&(t[n].enabled=!1)}function Bi(t,i){for(var n=0;n<t.length;n++)Object.keys(t[n]).length&&i.id!==t[n].id&&(t[n].selected=!1)}function xi(n){var e=["protocol","hostname","port","pathname","search","hash","host"],r=i.createElement("a");r.href=n;var s,o=""===r.host&&"file:"!==r.protocol;o&&((s=i.createElement("div")).innerHTML='<a href="'+n+'"></a>',r=s.firstChild,s.setAttribute("style","display:none; position:absolute;"),i.body.appendChild(s));for(var a={},u=0;u<e.length;u++)a[e[u]]=r[e[u]];return"http:"===a.protocol&&(a.host=a.host.replace(/:80$/,"")),"https:"===a.protocol&&(a.host=a.host.replace(/:443$/,"")),a.protocol||(a.protocol=t.location.protocol),o&&i.body.removeChild(s),a}function Ri(t){if(!t.match(/^https?:\/\//)){var n=i.createElement("div");n.innerHTML='<a href="'+t+'">x</a>',t=n.firstChild.href}return t}function Ni(t){if("string"==typeof t){var i=/^(\/?)([\s\S]*?)((?:\.{1,2}|[^\/]+?)(\.([^\.\/\?]+)))(?:[\/]*|[\?].*)$/i.exec(t);if(i)return i.pop().toLowerCase()}return""}function Hi(i){var n=t.location,e=xi(i);return(":"===e.protocol?n.protocol:e.protocol)+e.host!==n.protocol+n.host}var ji=function(t){function i(i){var n;void 0===i&&(i=[]);for(var e=i.length-1;0<=e;e--)if(i[e].enabled){Oi(i,i[e]);break}return(n=t.call(this,i)||this).changing_=!1,n}e(i,t);var n=i.prototype;return n.addTrack=function(i){var n=this;i.enabled&&Oi(this,i),t.prototype.addTrack.call(this,i),i.addEventListener&&(i.enabledChange_=function(){n.changing_||(n.changing_=!0,Oi(n,i),n.changing_=!1,n.trigger("change"))},i.addEventListener("enabledchange",i.enabledChange_))},n.removeTrack=function(i){t.prototype.removeTrack.call(this,i),i.removeEventListener&&i.enabledChange_&&(i.removeEventListener("enabledchange",i.enabledChange_),i.enabledChange_=null)},i}(Ci),_i=function(t){function i(i){var n;void 0===i&&(i=[]);for(var e=i.length-1;0<=e;e--)if(i[e].selected){Bi(i,i[e]);break}return(n=t.call(this,i)||this).changing_=!1,Object.defineProperty(o(n),"selectedIndex",{get:function(){for(var t=0;t<this.length;t++)if(this[t].selected)return t;return-1},set:function(){}}),n}e(i,t);var n=i.prototype;return n.addTrack=function(i){var n=this;i.selected&&Bi(this,i),t.prototype.addTrack.call(this,i),i.addEventListener&&(i.selectedChange_=function(){n.changing_||(n.changing_=!0,Bi(n,i),n.changing_=!1,n.trigger("change"))},i.addEventListener("selectedchange",i.selectedChange_))},n.removeTrack=function(i){t.prototype.removeTrack.call(this,i),i.removeEventListener&&i.selectedChange_&&(i.removeEventListener("selectedchange",i.selectedChange_),i.selectedChange_=null)},i}(Ci),Ui=function(t){function i(){return t.apply(this,arguments)||this}e(i,t);var n=i.prototype;return n.addTrack=function(i){var n=this;t.prototype.addTrack.call(this,i),this.queueChange_||(this.queueChange_=function(){return n.queueTrigger("change")}),this.triggerSelectedlanguagechange||(this.triggerSelectedlanguagechange_=function(){return n.trigger("selectedlanguagechange")}),i.addEventListener("modechange",this.queueChange_),-1===["metadata","chapters"].indexOf(i.kind)&&i.addEventListener("modechange",this.triggerSelectedlanguagechange_)},n.removeTrack=function(i){t.prototype.removeTrack.call(this,i),i.removeEventListener&&(this.queueChange_&&i.removeEventListener("modechange",this.queueChange_),this.selectedlanguagechange_&&i.removeEventListener("modechange",this.triggerSelectedlanguagechange_))},i}(Ci),Li=function(){function t(t){void 0===t&&(t=[]),this.trackElements_=[],Object.defineProperty(this,"length",{get:function(){return this.trackElements_.length}});for(var i=0,n=t.length;i<n;i++)this.addTrackElement_(t[i])}var i=t.prototype;return i.addTrackElement_=function(t){var i=this.trackElements_.length;""+i in this||Object.defineProperty(this,i,{get:function(){return this.trackElements_[i]}}),-1===this.trackElements_.indexOf(t)&&this.trackElements_.push(t)},i.getTrackElementByTrack_=function(t){for(var i,n=0,e=this.trackElements_.length;n<e;n++)if(t===this.trackElements_[n].track){i=this.trackElements_[n];break}return i},i.removeTrackElement_=function(t){for(var i=0,n=this.trackElements_.length;i<n;i++)if(t===this.trackElements_[i]){this.trackElements_[i].track&&"function"==typeof this.trackElements_[i].track.off&&this.trackElements_[i].track.off(),"function"==typeof this.trackElements_[i].off&&this.trackElements_[i].off(),this.trackElements_.splice(i,1);break}},t}(),Vi=function(){function t(i){t.prototype.setCues_.call(this,i),Object.defineProperty(this,"length",{get:function(){return this.length_}})}var i=t.prototype;return i.setCues_=function(t){var i=this.length||0,n=0,e=t.length;function r(t){""+t in this||Object.defineProperty(this,""+t,{get:function(){return this.cues_[t]}})}if(this.cues_=t,this.length_=t.length,i<e)for(n=i;n<e;n++)r.call(this,n)},i.getCueById=function(t){for(var i=null,n=0,e=this.length;n<e;n++){var r=this[n];if(r.id===t){i=r;break}}return i},t}(),Fi={alternative:"alternative",captions:"captions",main:"main",sign:"sign",subtitles:"subtitles",commentary:"commentary"},Wi={alternative:"alternative",descriptions:"descriptions",main:"main","main-desc":"main-desc",translation:"translation",commentary:"commentary"},Xi={subtitles:"subtitles",captions:"captions",descriptions:"descriptions",chapters:"chapters",metadata:"metadata"},$i={disabled:"disabled",hidden:"hidden",showing:"showing"},zi=function(t){function i(i){var n;function e(t){Object.defineProperty(o(n),t,{get:function(){return r[t]},set:function(){}})}void 0===i&&(i={}),n=t.call(this)||this;var r={id:i.id||"vjs_track_"+Z(),kind:i.kind||"",label:i.label||"",language:i.language||""};for(var s in r)e(s);return n}return e(i,t),i}(Mt),Ki=Object.freeze({parseUrl:xi,getAbsoluteURL:Ri,getFileExtension:Ni,isCrossOrigin:Hi}),qi=function(t){var i=Yi.call(t);return"[object Function]"===i||"function"==typeof t&&"[object RegExp]"!==i||"undefined"!=typeof window&&(t===window.setTimeout||t===window.alert||t===window.confirm||t===window.prompt)},Yi=Object.prototype.toString;function Qi(t){var i=en.call(t);return"[object Arguments]"===i||"[object Array]"!==i&&null!==t&&"object"==typeof t&&"number"==typeof t.length&&0<=t.length&&"[object Function]"===en.call(t.callee)}var Ji,Zi=Array.prototype.slice,tn=Object.prototype.toString,nn=Function.prototype.bind||function(t){var i=this;if("function"!=typeof i||"[object Function]"!==tn.call(i))throw new TypeError("Function.prototype.bind called on incompatible "+i);for(var n,e=Zi.call(arguments,1),r=Math.max(0,i.length-e.length),s=[],o=0;o<r;o++)s.push("$"+o);if(n=Function("binder","return function ("+s.join(",")+"){ return binder.apply(this,arguments); }")(function(){if(this instanceof n){var r=i.apply(this,e.concat(Zi.call(arguments)));return Object(r)===r?r:this}return i.apply(t,e.concat(Zi.call(arguments)))}),i.prototype){function a(){}a.prototype=i.prototype,n.prototype=new a,a.prototype=null}return n},en=Object.prototype.toString;if(!Object.keys){function rn(t){var i=t.constructor;return i&&i.prototype===t}var sn=Object.prototype.hasOwnProperty,on=Object.prototype.toString,an=Qi,un=Object.prototype.propertyIsEnumerable,cn=!un.call({toString:null},"toString"),hn=un.call(function(){},"prototype"),fn=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],ln={$applicationCache:!0,$console:!0,$external:!0,$frame:!0,$frameElement:!0,$frames:!0,$innerHeight:!0,$innerWidth:!0,$onmozfullscreenchange:!0,$onmozfullscreenerror:!0,$outerHeight:!0,$outerWidth:!0,$pageXOffset:!0,$pageYOffset:!0,$parent:!0,$scrollLeft:!0,$scrollTop:!0,$scrollX:!0,$scrollY:!0,$self:!0,$webkitIndexedDB:!0,$webkitStorageInfo:!0,$window:!0},dn=function(){if("undefined"==typeof window)return!1;for(var t in window)try{if(!ln["$"+t]&&sn.call(window,t)&&null!==window[t]&&"object"==typeof window[t])try{rn(window[t])}catch(t){return!0}}catch(t){return!0}return!1}();Ji=function(t){var i=null!==t&&"object"==typeof t,n="[object Function]"===on.call(t),e=an(t),r=i&&"[object String]"===on.call(t),s=[];if(!i&&!n&&!e)throw new TypeError("Object.keys called on a non-object");var o=hn&&n;if(r&&0<t.length&&!sn.call(t,0))for(var a=0;a<t.length;++a)s.push(String(a));if(e&&0<t.length)for(var u=0;u<t.length;++u)s.push(String(u));else for(var c in t)o&&"prototype"===c||!sn.call(t,c)||s.push(String(c));if(cn)for(var h=function(t){if("undefined"==typeof window||!dn)return rn(t);try{return rn(t)}catch(t){return!1}}(t),f=0;f<fn.length;++f)h&&"constructor"===fn[f]||!sn.call(t,fn[f])||s.push(fn[f]);return s}}var vn=Array.prototype.slice,pn=Object.keys,mn=pn?function(t){return pn(t)}:Ji,bn=Object.keys;function Tn(t,i,n,e){i in t&&("function"!=typeof e||"[object Function]"!==wn.call(e)||!e())||(Mn?Pn(t,i,{configurable:!0,enumerable:!1,value:n,writable:!0}):t[i]=n)}function yn(t,i,n){var e=2<arguments.length?n:{},r=gn(i);Sn&&(r=An.call(r,Object.getOwnPropertySymbols(i)));for(var s=0;s<r.length;s+=1)Tn(t,r[s],i[r[s]],e[r[s]])}mn.shim=function(){return Object.keys?function(){var t=Object.keys(arguments);return t&&t.length===arguments.length}(1,2)||(Object.keys=function(t){return Qi(t)?bn(vn.call(t)):bn(t)}):Object.keys=mn,Object.keys||mn};var gn=mn,Sn="function"==typeof Symbol&&"symbol"==typeof Symbol("foo"),wn=Object.prototype.toString,An=Array.prototype.concat,Pn=Object.defineProperty,Mn=Pn&&function(){var t={};try{for(var i in Pn(t,"x",{enumerable:!1,value:t}),t)return!1;return t.x===t}catch(t){return!1}}();function En(t,i){if(1<arguments.length&&"boolean"!=typeof i)throw new TypeError('"allowMissing" argument must be a boolean');var n="$ "+t;if(!(n in Un))throw new SyntaxError("intrinsic "+t+" does not exist!");if(void 0===Un[n]&&!i)throw new TypeError("intrinsic "+t+" exists, but is not available. Please file an issue!");return Un[n]}function In(t,i,n,e){var r=Wn[i];if("function"!=typeof r)throw new Fn("unknown record type: "+i);if(!r(t,e))throw new Vn(n+" must be a "+i)}function kn(t){return 0<=t?1:-1}function Dn(t){try{var i=Kn.call(t);return qn.test(i)}catch(t){return!1}}function Cn(t){if(!t)return!1;if("function"!=typeof t&&"object"!=typeof t)return!1;if("function"==typeof t&&!t.prototype)return!0;if(Qn)return function(t){try{return!Dn(t)&&(Kn.call(t),!0)}catch(t){return!1}}(t);if(Dn(t))return!1;var i=Yn.call(t);return"[object Function]"===i||"[object GeneratorFunction]"===i}function Gn(t){return null===t||"function"!=typeof t&&"object"!=typeof t}function On(){var t=ee.ToString(ee.CheckObjectCoercible(this));return re(re(t,se,""),oe,"")}function Bn(){return String.prototype.trim&&"​"==="​".trim()?String.prototype.trim:On}yn.supportsDescriptors=!!Mn;var xn,Rn=yn,Nn=Object.getOwnPropertyDescriptor?function(){return Object.getOwnPropertyDescriptor(arguments,"callee").get}():function(){throw new TypeError},Hn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator,jn=Object.getPrototypeOf||function(t){return t.__proto__},_n="undefined"==typeof Uint8Array?xn:jn(Uint8Array),Un={"$ %Array%":Array,"$ %ArrayBuffer%":"undefined"==typeof ArrayBuffer?xn:ArrayBuffer,"$ %ArrayBufferPrototype%":"undefined"==typeof ArrayBuffer?xn:ArrayBuffer.prototype,"$ %ArrayIteratorPrototype%":Hn?jn([][Symbol.iterator]()):xn,"$ %ArrayPrototype%":Array.prototype,"$ %ArrayProto_entries%":Array.prototype.entries,"$ %ArrayProto_forEach%":Array.prototype.forEach,"$ %ArrayProto_keys%":Array.prototype.keys,"$ %ArrayProto_values%":Array.prototype.values,"$ %AsyncFromSyncIteratorPrototype%":xn,"$ %AsyncFunction%":void 0,"$ %AsyncFunctionPrototype%":xn,"$ %AsyncGenerator%":xn,"$ %AsyncGeneratorFunction%":void 0,"$ %AsyncGeneratorPrototype%":xn,"$ %AsyncIteratorPrototype%":xn,"$ %Atomics%":"undefined"==typeof Atomics?xn:Atomics,"$ %Boolean%":Boolean,"$ %BooleanPrototype%":Boolean.prototype,"$ %DataView%":"undefined"==typeof DataView?xn:DataView,"$ %DataViewPrototype%":"undefined"==typeof DataView?xn:DataView.prototype,"$ %Date%":Date,"$ %DatePrototype%":Date.prototype,"$ %decodeURI%":decodeURI,"$ %decodeURIComponent%":decodeURIComponent,"$ %encodeURI%":encodeURI,"$ %encodeURIComponent%":encodeURIComponent,"$ %Error%":Error,"$ %ErrorPrototype%":Error.prototype,"$ %eval%":eval,"$ %EvalError%":EvalError,"$ %EvalErrorPrototype%":EvalError.prototype,"$ %Float32Array%":"undefined"==typeof Float32Array?xn:Float32Array,"$ %Float32ArrayPrototype%":"undefined"==typeof Float32Array?xn:Float32Array.prototype,"$ %Float64Array%":"undefined"==typeof Float64Array?xn:Float64Array,"$ %Float64ArrayPrototype%":"undefined"==typeof Float64Array?xn:Float64Array.prototype,"$ %Function%":Function,"$ %FunctionPrototype%":Function.prototype,"$ %Generator%":xn,"$ %GeneratorFunction%":void 0,"$ %GeneratorPrototype%":xn,"$ %Int8Array%":"undefined"==typeof Int8Array?xn:Int8Array,"$ %Int8ArrayPrototype%":"undefined"==typeof Int8Array?xn:Int8Array.prototype,"$ %Int16Array%":"undefined"==typeof Int16Array?xn:Int16Array,"$ %Int16ArrayPrototype%":"undefined"==typeof Int16Array?xn:Int8Array.prototype,"$ %Int32Array%":"undefined"==typeof Int32Array?xn:Int32Array,"$ %Int32ArrayPrototype%":"undefined"==typeof Int32Array?xn:Int32Array.prototype,"$ %isFinite%":isFinite,"$ %isNaN%":isNaN,"$ %IteratorPrototype%":Hn?jn(jn([][Symbol.iterator]())):xn,"$ %JSON%":JSON,"$ %JSONParse%":JSON.parse,"$ %Map%":"undefined"==typeof Map?xn:Map,"$ %MapIteratorPrototype%":"undefined"!=typeof Map&&Hn?jn((new Map)[Symbol.iterator]()):xn,"$ %MapPrototype%":"undefined"==typeof Map?xn:Map.prototype,"$ %Math%":Math,"$ %Number%":Number,"$ %NumberPrototype%":Number.prototype,"$ %Object%":Object,"$ %ObjectPrototype%":Object.prototype,"$ %ObjProto_toString%":Object.prototype.toString,"$ %ObjProto_valueOf%":Object.prototype.valueOf,"$ %parseFloat%":parseFloat,"$ %parseInt%":parseInt,"$ %Promise%":"undefined"==typeof Promise?xn:Promise,"$ %PromisePrototype%":"undefined"==typeof Promise?xn:Promise.prototype,"$ %PromiseProto_then%":"undefined"==typeof Promise?xn:Promise.prototype.then,"$ %Promise_all%":"undefined"==typeof Promise?xn:Promise.all,"$ %Promise_reject%":"undefined"==typeof Promise?xn:Promise.reject,"$ %Promise_resolve%":"undefined"==typeof Promise?xn:Promise.resolve,"$ %Proxy%":"undefined"==typeof Proxy?xn:Proxy,"$ %RangeError%":RangeError,"$ %RangeErrorPrototype%":RangeError.prototype,"$ %ReferenceError%":ReferenceError,"$ %ReferenceErrorPrototype%":ReferenceError.prototype,"$ %Reflect%":"undefined"==typeof Reflect?xn:Reflect,"$ %RegExp%":RegExp,"$ %RegExpPrototype%":RegExp.prototype,"$ %Set%":"undefined"==typeof Set?xn:Set,"$ %SetIteratorPrototype%":"undefined"!=typeof Set&&Hn?jn((new Set)[Symbol.iterator]()):xn,"$ %SetPrototype%":"undefined"==typeof Set?xn:Set.prototype,"$ %SharedArrayBuffer%":"undefined"==typeof SharedArrayBuffer?xn:SharedArrayBuffer,"$ %SharedArrayBufferPrototype%":"undefined"==typeof SharedArrayBuffer?xn:SharedArrayBuffer.prototype,"$ %String%":String,"$ %StringIteratorPrototype%":Hn?jn(""[Symbol.iterator]()):xn,"$ %StringPrototype%":String.prototype,"$ %Symbol%":Hn?Symbol:xn,"$ %SymbolPrototype%":Hn?Symbol.prototype:xn,"$ %SyntaxError%":SyntaxError,"$ %SyntaxErrorPrototype%":SyntaxError.prototype,"$ %ThrowTypeError%":Nn,"$ %TypedArray%":_n,"$ %TypedArrayPrototype%":_n?_n.prototype:xn,"$ %TypeError%":TypeError,"$ %TypeErrorPrototype%":TypeError.prototype,"$ %Uint8Array%":"undefined"==typeof Uint8Array?xn:Uint8Array,"$ %Uint8ArrayPrototype%":"undefined"==typeof Uint8Array?xn:Uint8Array.prototype,"$ %Uint8ClampedArray%":"undefined"==typeof Uint8ClampedArray?xn:Uint8ClampedArray,"$ %Uint8ClampedArrayPrototype%":"undefined"==typeof Uint8ClampedArray?xn:Uint8ClampedArray.prototype,"$ %Uint16Array%":"undefined"==typeof Uint16Array?xn:Uint16Array,"$ %Uint16ArrayPrototype%":"undefined"==typeof Uint16Array?xn:Uint16Array.prototype,"$ %Uint32Array%":"undefined"==typeof Uint32Array?xn:Uint32Array,"$ %Uint32ArrayPrototype%":"undefined"==typeof Uint32Array?xn:Uint32Array.prototype,"$ %URIError%":URIError,"$ %URIErrorPrototype%":URIError.prototype,"$ %WeakMap%":"undefined"==typeof WeakMap?xn:WeakMap,"$ %WeakMapPrototype%":"undefined"==typeof WeakMap?xn:WeakMap.prototype,"$ %WeakSet%":"undefined"==typeof WeakSet?xn:WeakSet,"$ %WeakSetPrototype%":"undefined"==typeof WeakSet?xn:WeakSet.prototype},Ln=nn.call(Function.call,Object.prototype.hasOwnProperty),Vn=En("%TypeError%"),Fn=En("%SyntaxError%"),Wn={"Property Descriptor":function(t,i){if("Object"!==t.Type(i))return!1;var n={"[[Configurable]]":!0,"[[Enumerable]]":!0,"[[Get]]":!0,"[[Set]]":!0,"[[Value]]":!0,"[[Writable]]":!0};for(var e in i)if(Ln(i,e)&&!n[e])return!1;var r=Ln(i,"[[Value]]"),s=Ln(i,"[[Get]]")||Ln(i,"[[Set]]");if(r&&s)throw new Vn("Property Descriptors may not be both accessor and data descriptors");return!0}},Xn=Number.isNaN||function(t){return t!=t},$n=Number.isNaN||function(t){return t!=t},zn=Number.isFinite||function(t){return"number"==typeof t&&!$n(t)&&t!==1/0&&t!==-1/0},Kn=Function.prototype.toString,qn=/^\s*class\b/,Yn=Object.prototype.toString,Qn="function"==typeof Symbol&&"symbol"==typeof Symbol.toStringTag,Jn=Object.prototype.toString,Zn=function(t,i){var n;if((n=1<arguments.length?i:"[object Date]"===Jn.call(t)?String:Number)!==String&&n!==Number)throw new TypeError("invalid [[DefaultValue]] hint supplied");var e,r,s=n===String?["toString","valueOf"]:["valueOf","toString"];for(r=0;r<s.length;++r)if(Cn(t[s[r]])&&Gn(e=t[s[r]]()))return e;throw new TypeError("No default value")},te=En("%Object%"),ie=En("%TypeError%"),ne=En("%String%"),ee={ToPrimitive:function(t,i){return Gn(t)?t:1<arguments.length?Zn(t,i):Zn(t)},ToBoolean:function(t){return!!t},ToNumber:function(t){return+t},ToInteger:function(t){var i=this.ToNumber(t);return Xn(i)?0:0!==i&&zn(i)?kn(i)*Math.floor(Math.abs(i)):i},ToInt32:function(t){return this.ToNumber(t)>>0},ToUint32:function(t){return this.ToNumber(t)>>>0},ToUint16:function(t){var i=this.ToNumber(t);return Xn(i)||0===i||!zn(i)?0:function(){var t=kn(i)*Math.floor(Math.abs(i))%65536;return Math.floor(0<=t?t:t+65536)}()},ToString:function(t){return ne(t)},ToObject:function(t){return this.CheckObjectCoercible(t),te(t)},CheckObjectCoercible:function(t,i){if(null==t)throw new ie(i||"Cannot call method on "+t);return t},IsCallable:Cn,SameValue:function(t,i){return t===i?0!==t||1/t==1/i:Xn(t)&&Xn(i)},Type:function(t){return null===t?"Null":void 0===t?"Undefined":"function"==typeof t||"object"==typeof t?"Object":"number"==typeof t?"Number":"boolean"==typeof t?"Boolean":"string"==typeof t?"String":void 0},IsPropertyDescriptor:function(t){if("Object"!==this.Type(t))return!1;var i={"[[Configurable]]":!0,"[[Enumerable]]":!0,"[[Get]]":!0,"[[Set]]":!0,"[[Value]]":!0,"[[Writable]]":!0};for(var n in t)if(Ln(t,n)&&!i[n])return!1;var e=Ln(t,"[[Value]]"),r=Ln(t,"[[Get]]")||Ln(t,"[[Set]]");if(e&&r)throw new ie("Property Descriptors may not be both accessor and data descriptors");return!0},IsAccessorDescriptor:function(t){return void 0!==t&&(In(this,"Property Descriptor","Desc",t),!(!Ln(t,"[[Get]]")&&!Ln(t,"[[Set]]")))},IsDataDescriptor:function(t){return void 0!==t&&(In(this,"Property Descriptor","Desc",t),!(!Ln(t,"[[Value]]")&&!Ln(t,"[[Writable]]")))},IsGenericDescriptor:function(t){return void 0!==t&&(In(this,"Property Descriptor","Desc",t),!this.IsAccessorDescriptor(t)&&!this.IsDataDescriptor(t))},FromPropertyDescriptor:function(t){if(void 0===t)return t;if(In(this,"Property Descriptor","Desc",t),this.IsDataDescriptor(t))return{value:t["[[Value]]"],writable:!!t["[[Writable]]"],enumerable:!!t["[[Enumerable]]"],configurable:!!t["[[Configurable]]"]};if(this.IsAccessorDescriptor(t))return{get:t["[[Get]]"],set:t["[[Set]]"],enumerable:!!t["[[Enumerable]]"],configurable:!!t["[[Configurable]]"]};throw new ie("FromPropertyDescriptor must be called with a fully populated Property Descriptor")},ToPropertyDescriptor:function(t){if("Object"!==this.Type(t))throw new ie("ToPropertyDescriptor requires an object");var i={};if(Ln(t,"enumerable")&&(i["[[Enumerable]]"]=this.ToBoolean(t.enumerable)),Ln(t,"configurable")&&(i["[[Configurable]]"]=this.ToBoolean(t.configurable)),Ln(t,"value")&&(i["[[Value]]"]=t.value),Ln(t,"writable")&&(i["[[Writable]]"]=this.ToBoolean(t.writable)),Ln(t,"get")){var n=t.get;if(void 0!==n&&!this.IsCallable(n))throw new TypeError("getter must be a function");i["[[Get]]"]=n}if(Ln(t,"set")){var e=t.set;if(void 0!==e&&!this.IsCallable(e))throw new ie("setter must be a function");i["[[Set]]"]=e}if((Ln(i,"[[Get]]")||Ln(i,"[[Set]]"))&&(Ln(i,"[[Value]]")||Ln(i,"[[Writable]]")))throw new ie("Invalid property descriptor. Cannot both specify accessors and a value or writable attribute");return i}},re=nn.call(Function.call,String.prototype.replace),se=/^[\x09\x0A\x0B\x0C\x0D\x20\xA0\u1680\u180E\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028\u2029\uFEFF]+/,oe=/[\x09\x0A\x0B\x0C\x0D\x20\xA0\u1680\u180E\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028\u2029\uFEFF]+$/,ae=nn.call(Function.call,Bn());Rn(ae,{getPolyfill:Bn,implementation:On,shim:function(){var t=Bn();return Rn(String.prototype,{trim:t},{trim:function(){return String.prototype.trim!==t}}),t}});var ue=ae,ce=Object.prototype.toString,he=Object.prototype.hasOwnProperty,fe=function(t){if(!t)return{};var i={};return function(t,i,n){if(!Cn(i))throw new TypeError("iterator must be a function");var e;3<=arguments.length&&(e=n),"[object Array]"===ce.call(t)?function(t,i,n){for(var e=0,r=t.length;e<r;e++)he.call(t,e)&&(null==n?i(t[e],e,t):i.call(n,t[e],e,t))}(t,i,e):"string"==typeof t?function(t,i,n){for(var e=0,r=t.length;e<r;e++)null==n?i(t.charAt(e),e,t):i.call(n,t.charAt(e),e,t)}(t,i,e):function(t,i,n){for(var e in t)he.call(t,e)&&(null==n?i(t[e],e,t):i.call(n,t[e],e,t))}(t,i,e)}(ue(t).split("\n"),function(t){var n=t.indexOf(":"),e=ue(t.slice(0,n)).toLowerCase(),r=ue(t.slice(n+1));void 0===i[e]?i[e]=r:"[object Array]"!==Object.prototype.toString.call(i[e])?i[e]=[i[e],r]:i[e].push(r)}),i},le=function(){for(var t={},i=0;i<arguments.length;i++){var n=arguments[i];for(var e in n)de.call(n,e)&&(t[e]=n[e])}return t},de=Object.prototype.hasOwnProperty,ve=me;function pe(t,i,n){var e=t;return qi(i)?(n=i,"string"==typeof t&&(e={uri:t})):e=le(i,{uri:t}),e.callback=n,e}function me(t,i,n){return be(i=pe(t,i,n))}function be(t){if(void 0===t.callback)throw new Error("callback argument missing");var i=!1,n=function(n,e,r){i||(i=!0,t.callback(n,e,r))};function e(t){return clearTimeout(a),t instanceof Error||(t=new Error(""+(t||"Unknown XMLHttpRequest Error"))),t.statusCode=0,n(t,p)}function r(){if(!o){var i;clearTimeout(a);var e=p,r=null;return 0!==(i=t.useXDR&&void 0===u.status?200:1223===u.status?204:u.status)?(e={body:function(){var t=void 0;if(t=u.response?u.response:u.responseText||("document"===u.responseType?u.responseXML:""!==u.responseType||u.responseXML&&"parsererror"===u.responseXML.documentElement.nodeName?null:u.responseXML),v)try{t=JSON.parse(t)}catch(t){}return t}(),statusCode:i,method:h,headers:{},url:c,rawRequest:u},u.getAllResponseHeaders&&(e.headers=fe(u.getAllResponseHeaders()))):r=new Error("Internal XMLHttpRequest Error"),n(r,e,e.body)}}var s,o,a,u=t.xhr||null,c=(u=u||(t.cors||t.useXDR?new me.XDomainRequest:new me.XMLHttpRequest)).url=t.uri||t.url,h=u.method=t.method||"GET",f=t.body||t.data,l=u.headers=t.headers||{},d=!!t.sync,v=!1,p={body:void 0,headers:{},statusCode:0,method:h,url:c,rawRequest:u};if("json"in t&&!1!==t.json&&(v=!0,l.accept||l.Accept||(l.Accept="application/json"),"GET"!==h&&"HEAD"!==h&&(l["content-type"]||l["Content-Type"]||(l["Content-Type"]="application/json"),f=JSON.stringify(!0===t.json?f:t.json))),u.onreadystatechange=function(){4===u.readyState&&setTimeout(r,0)},u.onload=r,u.onerror=e,u.onprogress=function(){},u.onabort=function(){o=!0},u.ontimeout=e,u.open(h,c,!d,t.username,t.password),d||(u.withCredentials=!!t.withCredentials),!d&&0<t.timeout&&(a=setTimeout(function(){if(!o){o=!0,u.abort("timeout");var t=new Error("XMLHttpRequest timeout");t.code="ETIMEDOUT",e(t)}},t.timeout)),u.setRequestHeader)for(s in l)l.hasOwnProperty(s)&&u.setRequestHeader(s,l[s]);else if(t.headers&&!function(t){for(var i in t)if(t.hasOwnProperty(i))return!1;return!0}(t.headers))throw new Error("Headers cannot be set on an XDomainRequest object");return"responseType"in t&&(u.responseType=t.responseType),"beforeSend"in t&&"function"==typeof t.beforeSend&&t.beforeSend(u),u.send(f||null),u}function Te(i,n){var e=new t.WebVTT.Parser(t,t.vttjs,t.WebVTT.StringDecoder()),r=[];e.oncue=function(t){n.addCue(t)},e.onparsingerror=function(t){r.push(t)},e.onflush=function(){n.trigger({type:"loadeddata",target:n})},e.parse(i),0<r.length&&(t.console&&t.console.groupCollapsed&&t.console.groupCollapsed("Text Track parsing errors for "+n.src),r.forEach(function(t){return c.error(t)}),t.console&&t.console.groupEnd&&t.console.groupEnd()),e.flush()}me.XMLHttpRequest=t.XMLHttpRequest||function(){},me.XDomainRequest="withCredentials"in new me.XMLHttpRequest?me.XMLHttpRequest:t.XDomainRequest,function(t,i){for(var n=0;n<t.length;n++)i(t[n])}(["get","put","post","patch","head","delete"],function(t){me["delete"===t?"del":t]=function(i,n,e){return(n=pe(i,n,e)).method=t.toUpperCase(),be(n)}});var ye=function(i){function n(n){var e;if(void 0===n&&(n={}),!n.tech)throw new Error("A tech was not provided.");var r=jt(n,{kind:Xi[n.kind]||"subtitles",language:n.language||n.srclang||""}),s=$i[r.mode]||"disabled",a=r.default;"metadata"!==r.kind&&"chapters"!==r.kind||(s="hidden"),(e=i.call(this,r)||this).tech_=r.tech,e.cues_=[],e.activeCues_=[];var u=new Vi(e.cues_),h=new Vi(e.activeCues_),f=!1,l=At(o(e),function(){this.activeCues=this.activeCues,f&&(this.trigger("cuechange"),f=!1)});return"disabled"!==s&&e.tech_.ready(function(){e.tech_.on("timeupdate",l)},!0),Object.defineProperties(o(e),{default:{get:function(){return a},set:function(){}},mode:{get:function(){return s},set:function(t){var i=this;$i[t]&&("disabled"!==(s=t)?this.tech_.ready(function(){i.tech_.on("timeupdate",l)},!0):this.tech_.off("timeupdate",l),this.trigger("modechange"))}},cues:{get:function(){return this.loaded_?u:null},set:function(){}},activeCues:{get:function(){if(!this.loaded_)return null;if(0===this.cues.length)return h;for(var t=this.tech_.currentTime(),i=[],n=0,e=this.cues.length;n<e;n++){var r=this.cues[n];r.startTime<=t&&r.endTime>=t?i.push(r):r.startTime===r.endTime&&r.startTime<=t&&r.startTime+.5>=t&&i.push(r)}if(f=!1,i.length!==this.activeCues_.length)f=!0;else for(var s=0;s<i.length;s++)-1===this.activeCues_.indexOf(i[s])&&(f=!0);return this.activeCues_=i,h.setCues_(this.activeCues_),h},set:function(){}}}),r.src?(e.src=r.src,function(i,n){var e={uri:i},r=Hi(i);r&&(e.cors=r),ve(e,At(this,function(i,e,r){if(i)return c.error(i,e);if(n.loaded_=!0,"function"!=typeof t.WebVTT){if(n.tech_){function s(){c.error("vttjs failed to load, stopping trying to process "+n.src),n.tech_.off("vttjsloaded",o)}var o;o=function(){return n.tech_.off("vttjserror",s),Te(r,n)},n.tech_.one("vttjsloaded",o),n.tech_.one("vttjserror",s)}}else Te(r,n)}))}(r.src,o(e))):e.loaded_=!0,e}e(n,i);var r=n.prototype;return r.addCue=function(i){var n=i;if(t.vttjs&&!(i instanceof t.vttjs.VTTCue)){for(var e in n=new t.vttjs.VTTCue(i.startTime,i.endTime,i.text),i)e in n||(n[e]=i[e]);n.id=i.id,n.originalCue_=i}for(var r=this.tech_.textTracks(),s=0;s<r.length;s++)r[s]!==this&&r[s].removeCue(n);this.cues_.push(n),this.cues.setCues_(this.cues_)},r.removeCue=function(t){for(var i=this.cues_.length;i--;){var n=this.cues_[i];if(n===t||n.originalCue_&&n.originalCue_===t){this.cues_.splice(i,1),this.cues.setCues_(this.cues_);break}}},n}(zi);ye.prototype.allowedEvents_={cuechange:"cuechange"};var ge=function(t){function i(i){var n;void 0===i&&(i={});var e=jt(i,{kind:Wi[i.kind]||""});n=t.call(this,e)||this;var r=!1;return Object.defineProperty(o(n),"enabled",{get:function(){return r},set:function(t){"boolean"==typeof t&&t!==r&&(r=t,this.trigger("enabledchange"))}}),e.enabled&&(n.enabled=e.enabled),n.loaded_=!0,n}return e(i,t),i}(zi),Se=function(t){function i(i){var n;void 0===i&&(i={});var e=jt(i,{kind:Fi[i.kind]||""});n=t.call(this,e)||this;var r=!1;return Object.defineProperty(o(n),"selected",{get:function(){return r},set:function(t){"boolean"==typeof t&&t!==r&&(r=t,this.trigger("selectedchange"))}}),e.selected&&(n.selected=e.selected),n}return e(i,t),i}(zi),we=function(t){function i(i){var n,e;void 0===i&&(i={}),n=t.call(this)||this;var r=new ye(i);return n.kind=r.kind,n.src=r.src,n.srclang=r.language,n.label=r.label,n.default=r.default,Object.defineProperties(o(n),{readyState:{get:function(){return e}},track:{get:function(){return r}}}),e=0,r.addEventListener("loadeddata",function(){e=2,n.trigger({type:"load",target:o(n)})}),n}return e(i,t),i}(Mt);we.prototype.allowedEvents_={load:"load"},we.NONE=0,we.LOADING=1,we.LOADED=2,we.ERROR=3;var Ae={audio:{ListClass:ji,TrackClass:ge,capitalName:"Audio"},video:{ListClass:_i,TrackClass:Se,capitalName:"Video"},text:{ListClass:Ui,TrackClass:ye,capitalName:"Text"}};Object.keys(Ae).forEach(function(t){Ae[t].getterName=t+"Tracks",Ae[t].privateName=t+"Tracks_"});var Pe={remoteText:{ListClass:Ui,TrackClass:ye,capitalName:"RemoteText",getterName:"remoteTextTracks",privateName:"remoteTextTracks_"},remoteTextEl:{ListClass:Li,TrackClass:we,capitalName:"RemoteTextTrackEls",getterName:"remoteTextTrackEls",privateName:"remoteTextTrackEls_"}},Me=jt(Ae,Pe);Pe.names=Object.keys(Pe),Ae.names=Object.keys(Ae),Me.names=[].concat(Pe.names).concat(Ae.names);var Ee=Object.create||function(t){if(1!==arguments.length)throw new Error("Object.create shim only accepts one parameter.");return Ie.prototype=t,new Ie};function Ie(){}function ke(t,i){this.name="ParsingError",this.code=t.code,this.message=i||t.message}function De(t){function i(t,i,n,e){return 3600*(0|t)+60*(0|i)+(0|n)+(0|e)/1e3}var n=t.match(/^(\d+):(\d{2})(:\d{2})?\.(\d{3})/);return n?n[3]?i(n[1],n[2],n[3].replace(":",""),n[4]):59<n[1]?i(n[1],n[2],0,n[4]):i(0,n[1],n[2],n[4]):null}function Ce(){this.values=Ee(null)}function Ge(t,i,n,e){var r=e?t.split(e):[t];for(var s in r)if("string"==typeof r[s]){var o=r[s].split(n);2===o.length&&i(o[0],o[1])}}function Oe(t,i,n){var e,r,s,o=t;function a(){var i=De(t);if(null===i)throw new ke(ke.Errors.BadTimeStamp,"Malformed timestamp: "+o);return t=t.replace(/^[^\sa-zA-Z-]+/,""),i}function u(){t=t.replace(/^\s+/,"")}if(u(),i.startTime=a(),u(),"--\x3e"!==t.substr(0,3))throw new ke(ke.Errors.BadTimeStamp,"Malformed time stamp (time stamps must be separated by '--\x3e'): "+o);t=t.substr(3),u(),i.endTime=a(),u(),e=t,r=i,s=new Ce,Ge(e,function(t,i){switch(t){case"region":for(var e=n.length-1;0<=e;e--)if(n[e].id===i){s.set(t,n[e].region);break}break;case"vertical":s.alt(t,i,["rl","lr"]);break;case"line":var r=i.split(","),o=r[0];s.integer(t,o),s.percent(t,o)&&s.set("snapToLines",!1),s.alt(t,o,["auto"]),2===r.length&&s.alt("lineAlign",r[1],["start","middle","end"]);break;case"position":r=i.split(","),s.percent(t,r[0]),2===r.length&&s.alt("positionAlign",r[1],["start","middle","end"]);break;case"size":s.percent(t,i);break;case"align":s.alt(t,i,["start","middle","end","left","right"])}},/:/,/\s/),r.region=s.get("region",null),r.vertical=s.get("vertical",""),r.line=s.get("line","auto"),r.lineAlign=s.get("lineAlign","start"),r.snapToLines=s.get("snapToLines",!0),r.size=s.get("size",100),r.align=s.get("align","middle"),r.position=s.get("position",{start:0,left:0,middle:50,end:100,right:100},r.align),r.positionAlign=s.get("positionAlign",{start:"start",left:"start",middle:"middle",end:"end",right:"end"},r.align)}((ke.prototype=Ee(Error.prototype)).constructor=ke).Errors={BadSignature:{code:0,message:"Malformed WebVTT signature."},BadTimeStamp:{code:1,message:"Malformed time stamp."}},Ce.prototype={set:function(t,i){this.get(t)||""===i||(this.values[t]=i)},get:function(t,i,n){return n?this.has(t)?this.values[t]:i[n]:this.has(t)?this.values[t]:i},has:function(t){return t in this.values},alt:function(t,i,n){for(var e=0;e<n.length;++e)if(i===n[e]){this.set(t,i);break}},integer:function(t,i){/^-?\d+$/.test(i)&&this.set(t,parseInt(i,10))},percent:function(t,i){return!!(i.match(/^([\d]{1,3})(\.[\d]*)?%$/)&&0<=(i=parseFloat(i))&&i<=100)&&(this.set(t,i),!0)}};var Be={"&amp;":"&","&lt;":"<","&gt;":">","&lrm;":"‎","&rlm;":"‏","&nbsp;":" "},xe={c:"span",i:"i",b:"b",u:"u",ruby:"ruby",rt:"rt",v:"span",lang:"span"},Re={v:"title",lang:"lang"},Ne={rt:"ruby"};function He(t,i){function n(){if(!i)return null;var t,n=i.match(/^([^<]*)(<[^>]*>?)?/);return i=i.substr((t=n[1]?n[1]:n[2]).length),t}function e(t){return Be[t]}function r(t){for(;d=t.match(/&(amp|lt|gt|lrm|rlm|nbsp);/);)t=t.replace(d[0],e);return t}function s(i,n){var e=xe[i];if(!e)return null;var r=t.document.createElement(e);r.localName=e;var s=Re[i];return s&&n&&(r[s]=n.trim()),r}for(var o,a,u=t.document.createElement("div"),c=u,h=[];null!==(o=n());)if("<"!==o[0])c.appendChild(t.document.createTextNode(r(o)));else{if("/"===o[1]){h.length&&h[h.length-1]===o.substr(2).replace(">","")&&(h.pop(),c=c.parentNode);continue}var f,l=De(o.substr(1,o.length-2));if(l){f=t.document.createProcessingInstruction("timestamp",l),c.appendChild(f);continue}var d=o.match(/^<([^.\s\/0-9>]+)(\.[^\s\\>]+)?([^>\\]+)?(\\?)>?$/);if(!d)continue;if(!(f=s(d[1],d[3])))continue;if(Ne[(a=f).localName]&&Ne[a.localName]!==c.localName)continue;d[2]&&(f.className=d[2].substr(1).replace("."," ")),h.push(d[1]),c.appendChild(f),c=f}return u}var je=[[1470,1470],[1472,1472],[1475,1475],[1478,1478],[1488,1514],[1520,1524],[1544,1544],[1547,1547],[1549,1549],[1563,1563],[1566,1610],[1645,1647],[1649,1749],[1765,1766],[1774,1775],[1786,1805],[1807,1808],[1810,1839],[1869,1957],[1969,1969],[1984,2026],[2036,2037],[2042,2042],[2048,2069],[2074,2074],[2084,2084],[2088,2088],[2096,2110],[2112,2136],[2142,2142],[2208,2208],[2210,2220],[8207,8207],[64285,64285],[64287,64296],[64298,64310],[64312,64316],[64318,64318],[64320,64321],[64323,64324],[64326,64449],[64467,64829],[64848,64911],[64914,64967],[65008,65020],[65136,65140],[65142,65276],[67584,67589],[67592,67592],[67594,67637],[67639,67640],[67644,67644],[67647,67669],[67671,67679],[67840,67867],[67872,67897],[67903,67903],[67968,68023],[68030,68031],[68096,68096],[68112,68115],[68117,68119],[68121,68147],[68160,68167],[68176,68184],[68192,68223],[68352,68405],[68416,68437],[68440,68466],[68472,68479],[68608,68680],[126464,126467],[126469,126495],[126497,126498],[126500,126500],[126503,126503],[126505,126514],[126516,126519],[126521,126521],[126523,126523],[126530,126530],[126535,126535],[126537,126537],[126539,126539],[126541,126543],[126545,126546],[126548,126548],[126551,126551],[126553,126553],[126555,126555],[126557,126557],[126559,126559],[126561,126562],[126564,126564],[126567,126570],[126572,126578],[126580,126583],[126585,126588],[126590,126590],[126592,126601],[126603,126619],[126625,126627],[126629,126633],[126635,126651],[1114109,1114109]];function _e(t){for(var i=0;i<je.length;i++){var n=je[i];if(t>=n[0]&&t<=n[1])return!0}return!1}function Ue(){}function Le(t,i,n){Ue.call(this),this.cue=i,this.cueDiv=He(t,i.text);var e={color:"rgba(255, 255, 255, 1)",backgroundColor:"rgba(0, 0, 0, 0.8)",position:"relative",left:0,right:0,top:0,bottom:0,display:"inline",writingMode:""===i.vertical?"horizontal-tb":"lr"===i.vertical?"vertical-lr":"vertical-rl",unicodeBidi:"plaintext"};this.applyStyles(e,this.cueDiv),this.div=t.document.createElement("div"),e={direction:function(t){var i=[],n="";if(!t||!t.childNodes)return"ltr";function e(t,i){for(var n=i.childNodes.length-1;0<=n;n--)t.push(i.childNodes[n])}function r(t){if(!t||!t.length)return null;var i=t.pop(),n=i.textContent||i.innerText;if(n){var s=n.match(/^.*(\n|\r)/);return s?s[t.length=0]:n}return"ruby"===i.tagName?r(t):i.childNodes?(e(t,i),r(t)):void 0}for(e(i,t);n=r(i);)for(var s=0;s<n.length;s++)if(_e(n.charCodeAt(s)))return"rtl";return"ltr"}(this.cueDiv),writingMode:""===i.vertical?"horizontal-tb":"lr"===i.vertical?"vertical-lr":"vertical-rl",unicodeBidi:"plaintext",textAlign:"middle"===i.align?"center":i.align,font:n.font,whiteSpace:"pre-line",position:"absolute"},this.applyStyles(e),this.div.appendChild(this.cueDiv);var r=0;switch(i.positionAlign){case"start":r=i.position;break;case"middle":r=i.position-i.size/2;break;case"end":r=i.position-i.size}this.applyStyles(""===i.vertical?{left:this.formatStyle(r,"%"),width:this.formatStyle(i.size,"%")}:{top:this.formatStyle(r,"%"),height:this.formatStyle(i.size,"%")}),this.move=function(t){this.applyStyles({top:this.formatStyle(t.top,"px"),bottom:this.formatStyle(t.bottom,"px"),left:this.formatStyle(t.left,"px"),right:this.formatStyle(t.right,"px"),height:this.formatStyle(t.height,"px"),width:this.formatStyle(t.width,"px")})}}function Ve(t){var i,n,e,r;if(t.div){n=t.div.offsetHeight,e=t.div.offsetWidth,r=t.div.offsetTop;var s=(s=t.div.childNodes)&&(s=s[0])&&s.getClientRects&&s.getClientRects();t=t.div.getBoundingClientRect(),i=s?Math.max(s[0]&&s[0].height||0,t.height/s.length):0}this.left=t.left,this.right=t.right,this.top=t.top||r,this.height=t.height||n,this.bottom=t.bottom||r+(t.height||n),this.width=t.width||e,this.lineHeight=void 0!==i?i:t.lineHeight}function Fe(t,i,n,e){var r=new Ve(i),s=i.cue,o=function(t){if("number"==typeof t.line&&(t.snapToLines||0<=t.line&&t.line<=100))return t.line;if(!t.track||!t.track.textTrackList||!t.track.textTrackList.mediaElement)return-1;for(var i=t.track,n=i.textTrackList,e=0,r=0;r<n.length&&n[r]!==i;r++)"showing"===n[r].mode&&e++;return-1*++e}(s),a=[];if(s.snapToLines){var u;switch(s.vertical){case"":a=["+y","-y"],u="height";break;case"rl":a=["+x","-x"],u="width";break;case"lr":a=["-x","+x"],u="width"}var c=r.lineHeight,h=c*Math.round(o),f=n[u]+c,l=a[0];Math.abs(h)>f&&(h=h<0?-1:1,h*=Math.ceil(f/c)*c),o<0&&(h+=""===s.vertical?n.height:n.width,a=a.reverse()),r.move(l,h)}else{var d=r.lineHeight/n.height*100;switch(s.lineAlign){case"middle":o-=d/2;break;case"end":o-=d}switch(s.vertical){case"":i.applyStyles({top:i.formatStyle(o,"%")});break;case"rl":i.applyStyles({left:i.formatStyle(o,"%")});break;case"lr":i.applyStyles({right:i.formatStyle(o,"%")})}a=["+y","-x","+x","-y"],r=new Ve(i)}var v=function(t,i){for(var r,s=new Ve(t),o=1,a=0;a<i.length;a++){for(;t.overlapsOppositeAxis(n,i[a])||t.within(n)&&t.overlapsAny(e);)t.move(i[a]);if(t.within(n))return t;var u=t.intersectPercentage(n);u<o&&(r=new Ve(t),o=u),t=new Ve(s)}return r||s}(r,a);i.move(v.toCSSCompatValues(n))}function We(){}Ue.prototype.applyStyles=function(t,i){for(var n in i=i||this.div,t)t.hasOwnProperty(n)&&(i.style[n]=t[n])},Ue.prototype.formatStyle=function(t,i){return 0===t?0:t+i},(Le.prototype=Ee(Ue.prototype)).constructor=Le,Ve.prototype.move=function(t,i){switch(i=void 0!==i?i:this.lineHeight,t){case"+x":this.left+=i,this.right+=i;break;case"-x":this.left-=i,this.right-=i;break;case"+y":this.top+=i,this.bottom+=i;break;case"-y":this.top-=i,this.bottom-=i}},Ve.prototype.overlaps=function(t){return this.left<t.right&&this.right>t.left&&this.top<t.bottom&&this.bottom>t.top},Ve.prototype.overlapsAny=function(t){for(var i=0;i<t.length;i++)if(this.overlaps(t[i]))return!0;return!1},Ve.prototype.within=function(t){return this.top>=t.top&&this.bottom<=t.bottom&&this.left>=t.left&&this.right<=t.right},Ve.prototype.overlapsOppositeAxis=function(t,i){switch(i){case"+x":return this.left<t.left;case"-x":return this.right>t.right;case"+y":return this.top<t.top;case"-y":return this.bottom>t.bottom}},Ve.prototype.intersectPercentage=function(t){return Math.max(0,Math.min(this.right,t.right)-Math.max(this.left,t.left))*Math.max(0,Math.min(this.bottom,t.bottom)-Math.max(this.top,t.top))/(this.height*this.width)},Ve.prototype.toCSSCompatValues=function(t){return{top:this.top-t.top,bottom:t.bottom-this.bottom,left:this.left-t.left,right:t.right-this.right,height:this.height,width:this.width}},Ve.getSimpleBoxPosition=function(t){var i=t.div?t.div.offsetHeight:t.tagName?t.offsetHeight:0,n=t.div?t.div.offsetWidth:t.tagName?t.offsetWidth:0,e=t.div?t.div.offsetTop:t.tagName?t.offsetTop:0;return{left:(t=t.div?t.div.getBoundingClientRect():t.tagName?t.getBoundingClientRect():t).left,right:t.right,top:t.top||e,height:t.height||i,bottom:t.bottom||e+(t.height||i),width:t.width||n}},We.StringDecoder=function(){return{decode:function(t){if(!t)return"";if("string"!=typeof t)throw new Error("Error - expected string data.");return decodeURIComponent(encodeURIComponent(t))}}},We.convertCueToDOMTree=function(t,i){return t&&i?He(t,i):null},We.processCues=function(t,i,n){if(!t||!i||!n)return null;for(;n.firstChild;)n.removeChild(n.firstChild);var e=t.document.createElement("div");if(e.style.position="absolute",e.style.left="0",e.style.right="0",e.style.top="0",e.style.bottom="0",e.style.margin="1.5%",n.appendChild(e),function(t){for(var i=0;i<t.length;i++)if(t[i].hasBeenReset||!t[i].displayState)return!0;return!1}(i)){var r=[],s=Ve.getSimpleBoxPosition(e),o={font:Math.round(.05*s.height*100)/100+"px sans-serif"};!function(){for(var n,a,u=0;u<i.length;u++)n=new Le(t,a=i[u],o),e.appendChild(n.div),Fe(0,n,s,r),a.displayState=n.div,r.push(Ve.getSimpleBoxPosition(n))}()}else for(var a=0;a<i.length;a++)e.appendChild(i[a].displayState)},(We.Parser=function(t,i,n){n||(n=i,i={}),i=i||{},this.window=t,this.vttjs=i,this.state="INITIAL",this.buffer="",this.decoder=n||new TextDecoder("utf8"),this.regionList=[]}).prototype={reportOrThrowError:function(t){if(!(t instanceof ke))throw t;this.onparsingerror&&this.onparsingerror(t)},parse:function(t){var i=this;function n(){for(var t=i.buffer,n=0;n<t.length&&"\r"!==t[n]&&"\n"!==t[n];)++n;var e=t.substr(0,n);return"\r"===t[n]&&++n,"\n"===t[n]&&++n,i.buffer=t.substr(n),e}function e(t){t.match(/X-TIMESTAMP-MAP/)?Ge(t,function(t,n){switch(t){case"X-TIMESTAMP-MAP":!function(t){var n=new Ce;Ge(t,function(t,i){switch(t){case"MPEGT":n.integer(t+"S",i);break;case"LOCA":n.set(t+"L",De(i))}},/[^\d]:/,/,/),i.ontimestampmap&&i.ontimestampmap({MPEGTS:n.get("MPEGTS"),LOCAL:n.get("LOCAL")})}(n)}},/=/):Ge(t,function(t,n){switch(t){case"Region":!function(t){var n=new Ce;if(Ge(t,function(t,i){switch(t){case"id":n.set(t,i);break;case"width":n.percent(t,i);break;case"lines":n.integer(t,i);break;case"regionanchor":case"viewportanchor":var e=i.split(",");if(2!==e.length)break;var r=new Ce;if(r.percent("x",e[0]),r.percent("y",e[1]),!r.has("x")||!r.has("y"))break;n.set(t+"X",r.get("x")),n.set(t+"Y",r.get("y"));break;case"scroll":n.alt(t,i,["up"])}},/=/,/\s/),n.has("id")){var e=new(i.vttjs.VTTRegion||i.window.VTTRegion);e.width=n.get("width",100),e.lines=n.get("lines",3),e.regionAnchorX=n.get("regionanchorX",0),e.regionAnchorY=n.get("regionanchorY",100),e.viewportAnchorX=n.get("viewportanchorX",0),e.viewportAnchorY=n.get("viewportanchorY",100),e.scroll=n.get("scroll",""),i.onregion&&i.onregion(e),i.regionList.push({id:n.get("id"),region:e})}}(n)}},/:/)}t&&(i.buffer+=i.decoder.decode(t,{stream:!0}));try{var r;if("INITIAL"===i.state){if(!/\r\n|\n/.test(i.buffer))return this;var s=(r=n()).match(/^WEBVTT([ \t].*)?$/);if(!s||!s[0])throw new ke(ke.Errors.BadSignature);i.state="HEADER"}for(var o=!1;i.buffer;){if(!/\r\n|\n/.test(i.buffer))return this;switch(o?o=!1:r=n(),i.state){case"HEADER":/:/.test(r)?e(r):r||(i.state="ID");continue;case"NOTE":r||(i.state="ID");continue;case"ID":if(/^NOTE($|[ \t])/.test(r)){i.state="NOTE";break}if(!r)continue;if(i.cue=new(i.vttjs.VTTCue||i.window.VTTCue)(0,0,""),i.state="CUE",-1===r.indexOf("--\x3e")){i.cue.id=r;continue}case"CUE":try{Oe(r,i.cue,i.regionList)}catch(t){i.reportOrThrowError(t),i.cue=null,i.state="BADCUE";continue}i.state="CUETEXT";continue;case"CUETEXT":var a=-1!==r.indexOf("--\x3e");if(!r||a&&(o=!0)){i.oncue&&i.oncue(i.cue),i.cue=null,i.state="ID";continue}i.cue.text&&(i.cue.text+="\n"),i.cue.text+=r;continue;case"BADCUE":r||(i.state="ID");continue}}}catch(t){i.reportOrThrowError(t),"CUETEXT"===i.state&&i.cue&&i.oncue&&i.oncue(i.cue),i.cue=null,i.state="INITIAL"===i.state?"BADWEBVTT":"BADCUE"}return this},flush:function(){var t=this;try{if(t.buffer+=t.decoder.decode(),!t.cue&&"HEADER"!==t.state||(t.buffer+="\n\n",t.parse()),"INITIAL"===t.state)throw new ke(ke.Errors.BadSignature)}catch(i){t.reportOrThrowError(i)}return t.onflush&&t.onflush(),this}};var Xe=We,$e={"":1,lr:1,rl:1},ze={start:1,middle:1,end:1,left:1,right:1};function Ke(t){return"string"==typeof t&&!!ze[t.toLowerCase()]&&t.toLowerCase()}function qe(t,i,n){this.hasBeenReset=!1;var e="",r=!1,s=t,o=i,a=n,u=null,c="",h=!0,f="auto",l="start",d=50,v="middle",p=50,m="middle";Object.defineProperties(this,{id:{enumerable:!0,get:function(){return e},set:function(t){e=""+t}},pauseOnExit:{enumerable:!0,get:function(){return r},set:function(t){r=!!t}},startTime:{enumerable:!0,get:function(){return s},set:function(t){if("number"!=typeof t)throw new TypeError("Start time must be set to a number.");s=t,this.hasBeenReset=!0}},endTime:{enumerable:!0,get:function(){return o},set:function(t){if("number"!=typeof t)throw new TypeError("End time must be set to a number.");o=t,this.hasBeenReset=!0}},text:{enumerable:!0,get:function(){return a},set:function(t){a=""+t,this.hasBeenReset=!0}},region:{enumerable:!0,get:function(){return u},set:function(t){u=t,this.hasBeenReset=!0}},vertical:{enumerable:!0,get:function(){return c},set:function(t){var i=function(t){return"string"==typeof t&&!!$e[t.toLowerCase()]&&t.toLowerCase()}(t);if(!1===i)throw new SyntaxError("An invalid or illegal string was specified.");c=i,this.hasBeenReset=!0}},snapToLines:{enumerable:!0,get:function(){return h},set:function(t){h=!!t,this.hasBeenReset=!0}},line:{enumerable:!0,get:function(){return f},set:function(t){if("number"!=typeof t&&"auto"!==t)throw new SyntaxError("An invalid number or illegal string was specified.");f=t,this.hasBeenReset=!0}},lineAlign:{enumerable:!0,get:function(){return l},set:function(t){var i=Ke(t);if(!i)throw new SyntaxError("An invalid or illegal string was specified.");l=i,this.hasBeenReset=!0}},position:{enumerable:!0,get:function(){return d},set:function(t){if(t<0||100<t)throw new Error("Position must be between 0 and 100.");d=t,this.hasBeenReset=!0}},positionAlign:{enumerable:!0,get:function(){return v},set:function(t){var i=Ke(t);if(!i)throw new SyntaxError("An invalid or illegal string was specified.");v=i,this.hasBeenReset=!0}},size:{enumerable:!0,get:function(){return p},set:function(t){if(t<0||100<t)throw new Error("Size must be between 0 and 100.");p=t,this.hasBeenReset=!0}},align:{enumerable:!0,get:function(){return m},set:function(t){var i=Ke(t);if(!i)throw new SyntaxError("An invalid or illegal string was specified.");m=i,this.hasBeenReset=!0}}}),this.displayState=void 0}qe.prototype.getCueAsHTML=function(){return WebVTT.convertCueToDOMTree(window,this.text)};var Ye=qe,Qe={"":!0,up:!0};function Je(t){return"number"==typeof t&&0<=t&&t<=100}function Ze(){var t=100,i=3,n=0,e=100,r=0,s=100,o="";Object.defineProperties(this,{width:{enumerable:!0,get:function(){return t},set:function(i){if(!Je(i))throw new Error("Width must be between 0 and 100.");t=i}},lines:{enumerable:!0,get:function(){return i},set:function(t){if("number"!=typeof t)throw new TypeError("Lines must be set to a number.");i=t}},regionAnchorY:{enumerable:!0,get:function(){return e},set:function(t){if(!Je(t))throw new Error("RegionAnchorX must be between 0 and 100.");e=t}},regionAnchorX:{enumerable:!0,get:function(){return n},set:function(t){if(!Je(t))throw new Error("RegionAnchorY must be between 0 and 100.");n=t}},viewportAnchorY:{enumerable:!0,get:function(){return s},set:function(t){if(!Je(t))throw new Error("ViewportAnchorY must be between 0 and 100.");s=t}},viewportAnchorX:{enumerable:!0,get:function(){return r},set:function(t){if(!Je(t))throw new Error("ViewportAnchorX must be between 0 and 100.");r=t}},scroll:{enumerable:!0,get:function(){return o},set:function(t){var i=function(t){return"string"==typeof t&&!!Qe[t.toLowerCase()]&&t.toLowerCase()}(t);if(!1===i)throw new SyntaxError("An invalid or illegal string was specified.");o=i}}})}var tr=Ei(function(i){var n=i.exports={WebVTT:Xe,VTTCue:Ye,VTTRegion:Ze};t.vttjs=n,t.WebVTT=n.WebVTT;var e=n.VTTCue,r=n.VTTRegion,s=t.VTTCue,o=t.VTTRegion;n.shim=function(){t.VTTCue=e,t.VTTRegion=r},n.restore=function(){t.VTTCue=s,t.VTTRegion=o},t.VTTCue||n.shim()}),ir=function(n){function r(t,i){var e;return void 0===t&&(t={}),void 0===i&&(i=function(){}),t.reportTouchActivity=!1,(e=n.call(this,null,t,i)||this).hasStarted_=!1,e.on("playing",function(){this.hasStarted_=!0}),e.on("loadstart",function(){this.hasStarted_=!1}),Me.names.forEach(function(i){var n=Me[i];t&&t[n.getterName]&&(e[n.privateName]=t[n.getterName])}),e.featuresProgressEvents||e.manualProgressOn(),e.featuresTimeupdateEvents||e.manualTimeUpdatesOn(),["Text","Audio","Video"].forEach(function(i){!1===t["native"+i+"Tracks"]&&(e["featuresNative"+i+"Tracks"]=!1)}),!1===t.nativeCaptions||!1===t.nativeTextTracks?e.featuresNativeTextTracks=!1:!0!==t.nativeCaptions&&!0!==t.nativeTextTracks||(e.featuresNativeTextTracks=!0),e.featuresNativeTextTracks||e.emulateTextTracks(),e.autoRemoteTextTracks_=new Me.text.ListClass,e.initTrackListeners(),t.nativeControlsForTouch||e.emitTapEvents(),e.constructor&&(e.name_=e.constructor.name||"Unknown Tech"),e}e(r,n);var s=r.prototype;return s.triggerSourceset=function(t){var i=this;this.isReady_||this.one("ready",function(){return i.setTimeout(function(){return i.triggerSourceset(t)},1)}),this.trigger({src:t,type:"sourceset"})},s.manualProgressOn=function(){this.on("durationchange",this.onDurationChange),this.manualProgress=!0,this.one("ready",this.trackProgress)},s.manualProgressOff=function(){this.manualProgress=!1,this.stopTrackingProgress(),this.off("durationchange",this.onDurationChange)},s.trackProgress=function(){this.stopTrackingProgress(),this.progressInterval=this.setInterval(At(this,function(){var t=this.bufferedPercent();this.bufferedPercent_!==t&&this.trigger("progress"),1===(this.bufferedPercent_=t)&&this.stopTrackingProgress()}),500)},s.onDurationChange=function(){this.duration_=this.duration()},s.buffered=function(){return di(0,0)},s.bufferedPercent=function(){return vi(this.buffered(),this.duration_)},s.stopTrackingProgress=function(){this.clearInterval(this.progressInterval)},s.manualTimeUpdatesOn=function(){this.manualTimeUpdates=!0,this.on("play",this.trackCurrentTime),this.on("pause",this.stopTrackingCurrentTime)},s.manualTimeUpdatesOff=function(){this.manualTimeUpdates=!1,this.stopTrackingCurrentTime(),this.off("play",this.trackCurrentTime),this.off("pause",this.stopTrackingCurrentTime)},s.trackCurrentTime=function(){this.currentTimeInterval&&this.stopTrackingCurrentTime(),this.currentTimeInterval=this.setInterval(function(){this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})},250)},s.stopTrackingCurrentTime=function(){this.clearInterval(this.currentTimeInterval),this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})},s.dispose=function(){this.clearTracks(Ae.names),this.manualProgress&&this.manualProgressOff(),this.manualTimeUpdates&&this.manualTimeUpdatesOff(),n.prototype.dispose.call(this)},s.clearTracks=function(t){var i=this;(t=[].concat(t)).forEach(function(t){for(var n=i[t+"Tracks"]()||[],e=n.length;e--;){var r=n[e];"text"===t&&i.removeRemoteTextTrack(r),n.removeTrack(r)}})},s.cleanupAutoTextTracks=function(){for(var t=this.autoRemoteTextTracks_||[],i=t.length;i--;)this.removeRemoteTextTrack(t[i])},s.reset=function(){},s.error=function(t){return void 0!==t&&(this.error_=new Si(t),this.trigger("error")),this.error_},s.played=function(){return this.hasStarted_?di(0,0):di()},s.setCurrentTime=function(){this.manualTimeUpdates&&this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})},s.initTrackListeners=function(){var t=this;Ae.names.forEach(function(i){function n(){t.trigger(i+"trackchange")}var e=t[Ae[i].getterName]();e.addEventListener("removetrack",n),e.addEventListener("addtrack",n),t.on("dispose",function(){e.removeEventListener("removetrack",n),e.removeEventListener("addtrack",n)})})},s.addWebVttScript_=function(){var n=this;if(!t.WebVTT)if(i.body.contains(this.el())){if(!this.options_["vtt.js"]&&b(tr)&&0<Object.keys(tr).length)return void this.trigger("vttjsloaded");var e=i.createElement("script");e.src=this.options_["vtt.js"]||"https://vjs.zencdn.net/vttjs/0.14.1/vtt.min.js",e.onload=function(){n.trigger("vttjsloaded")},e.onerror=function(){n.trigger("vttjserror")},this.on("dispose",function(){e.onload=null,e.onerror=null}),t.WebVTT=!0,this.el().parentNode.appendChild(e)}else this.ready(this.addWebVttScript_)},s.emulateTextTracks=function(){function t(t){return e.addTrack(t.track)}function i(t){return e.removeTrack(t.track)}var n=this,e=this.textTracks(),r=this.remoteTextTracks();function s(){return n.trigger("texttrackchange")}function o(){s();for(var t=0;t<e.length;t++){var i=e[t];i.removeEventListener("cuechange",s),"showing"===i.mode&&i.addEventListener("cuechange",s)}}r.on("addtrack",t),r.on("removetrack",i),this.addWebVttScript_(),o(),e.addEventListener("change",o),e.addEventListener("addtrack",o),e.addEventListener("removetrack",o),this.on("dispose",function(){r.off("addtrack",t),r.off("removetrack",i),e.removeEventListener("change",o),e.removeEventListener("addtrack",o),e.removeEventListener("removetrack",o);for(var n=0;n<e.length;n++)e[n].removeEventListener("cuechange",s)})},s.addTextTrack=function(t,i,n){if(!t)throw new Error("TextTrack kind is required but was not provided");return function(t,i,n,e,r){void 0===r&&(r={});var s=t.textTracks();r.kind=i,n&&(r.label=n),e&&(r.language=e),r.tech=t;var o=new Me.text.TrackClass(r);return s.addTrack(o),o}(this,t,i,n)},s.createRemoteTextTrack=function(t){var i=jt(t,{tech:this});return new Pe.remoteTextEl.TrackClass(i)},s.addRemoteTextTrack=function(t,i){var n=this;void 0===t&&(t={});var e=this.createRemoteTextTrack(t);return!0!==i&&!1!==i&&(c.warn('Calling addRemoteTextTrack without explicitly setting the "manualCleanup" parameter to `true` is deprecated and default to `false` in future version of video.js'),i=!0),this.remoteTextTrackEls().addTrackElement_(e),this.remoteTextTracks().addTrack(e.track),!0!==i&&this.ready(function(){return n.autoRemoteTextTracks_.addTrack(e.track)}),e},s.removeRemoteTextTrack=function(t){var i=this.remoteTextTrackEls().getTrackElementByTrack_(t);this.remoteTextTrackEls().removeTrackElement_(i),this.remoteTextTracks().removeTrack(t),this.autoRemoteTextTracks_.removeTrack(t)},s.getVideoPlaybackQuality=function(){return{}},s.requestPictureInPicture=function(){var i=this.options_.Promise||t.Promise;if(i)return i.reject()},s.setPoster=function(){},s.playsinline=function(){},s.setPlaysinline=function(){},s.overrideNativeAudioTracks=function(){},s.overrideNativeVideoTracks=function(){},s.canPlayType=function(){return""},r.canPlayType=function(){return""},r.canPlaySource=function(t){return r.canPlayType(t.type)},r.isTech=function(t){return t.prototype instanceof r||t instanceof r||t===r},r.registerTech=function(t,i){if(r.techs_||(r.techs_={}),!r.isTech(i))throw new Error("Tech "+t+" must be a Tech");if(!r.canPlayType)throw new Error("Techs must have a static canPlayType method on them");if(!r.canPlaySource)throw new Error("Techs must have a static canPlaySource method on them");return t=Ht(t),r.techs_[t]=i,"Tech"!==t&&r.defaultTechOrder_.push(t),i},r.getTech=function(i){if(i)return i=Ht(i),r.techs_&&r.techs_[i]?r.techs_[i]:t&&t.videojs&&t.videojs[i]?(c.warn("The "+i+" tech was added to the videojs object when it should be registered using videojs.registerTech(name, tech)"),t.videojs[i]):void 0},r}(_t);Me.names.forEach(function(t){var i=Me[t];ir.prototype[i.getterName]=function(){return this[i.privateName]=this[i.privateName]||new i.ListClass,this[i.privateName]}}),ir.prototype.featuresVolumeControl=!0,ir.prototype.featuresMuteControl=!0,ir.prototype.featuresFullscreenResize=!1,ir.prototype.featuresPlaybackRate=!1,ir.prototype.featuresProgressEvents=!1,ir.prototype.featuresSourceset=!1,ir.prototype.featuresTimeupdateEvents=!1,ir.prototype.featuresNativeTextTracks=!1,ir.withSourceHandlers=function(t){t.registerSourceHandler=function(i,n){var e=t.sourceHandlers;e=e||(t.sourceHandlers=[]),void 0===n&&(n=e.length),e.splice(n,0,i)},t.canPlayType=function(i){for(var n,e=t.sourceHandlers||[],r=0;r<e.length;r++)if(n=e[r].canPlayType(i))return n;return""},t.selectSourceHandler=function(i,n){for(var e=t.sourceHandlers||[],r=0;r<e.length;r++)if(e[r].canHandleSource(i,n))return e[r];return null},t.canPlaySource=function(i,n){var e=t.selectSourceHandler(i,n);return e?e.canHandleSource(i,n):""},["seekable","seeking","duration"].forEach(function(t){var i=this[t];"function"==typeof i&&(this[t]=function(){return this.sourceHandler_&&this.sourceHandler_[t]?this.sourceHandler_[t].apply(this.sourceHandler_,arguments):i.apply(this,arguments)})},t.prototype),t.prototype.setSource=function(i){var n=t.selectSourceHandler(i,this.options_);n||(t.nativeSourceHandler?n=t.nativeSourceHandler:c.error("No source handler found for the current source.")),this.disposeSourceHandler(),this.off("dispose",this.disposeSourceHandler),n!==t.nativeSourceHandler&&(this.currentSource_=i),this.sourceHandler_=n.handleSource(i,this,this.options_),this.one("dispose",this.disposeSourceHandler)},t.prototype.disposeSourceHandler=function(){this.currentSource_&&(this.clearTracks(["audio","video"]),this.currentSource_=null),this.cleanupAutoTextTracks(),this.sourceHandler_&&(this.sourceHandler_.dispose&&this.sourceHandler_.dispose(),this.sourceHandler_=null)}},_t.registerComponent("Tech",ir),ir.registerTech("Tech",ir),ir.defaultTechOrder_=[];var nr={},er={},rr={};function sr(t,i,n,e){void 0===e&&(e=null);var r="call"+Ht(n),s=t.reduce(cr(r),e),o=s===rr,a=o?null:i[n](s);return function(t,i,n,e){for(var r=t.length-1;0<=r;r--){var s=t[r];s[i]&&s[i](e,n)}}(t,n,a,o),a}var or={buffered:1,currentTime:1,duration:1,seekable:1,played:1,paused:1,volume:1},ar={setCurrentTime:1,setVolume:1},ur={play:1,pause:1};function cr(t){return function(i,n){return i===rr?rr:n[t]?n[t](i):i}}function hr(t){void 0===t&&(t="");var i=Ni(t);return fr[i.toLowerCase()]||""}var fr={opus:"video/ogg",ogv:"video/ogg",mp4:"video/mp4",mov:"video/mp4",m4v:"video/mp4",mkv:"video/x-matroska",m4a:"audio/mp4",mp3:"audio/mpeg",aac:"audio/aac",oga:"audio/ogg",m3u8:"application/x-mpegURL",jpg:"image/jpeg",jpeg:"image/jpeg",gif:"image/gif",png:"image/png",svg:"image/svg+xml",webp:"image/webp"};function lr(t){var i=hr(t.src);return!t.type&&i&&(t.type=i),t}var dr=function(t){function i(i,n,e){var r,s=jt({createEl:!1},n);if(r=t.call(this,i,s,e)||this,n.playerOptions.sources&&0!==n.playerOptions.sources.length)i.src(n.playerOptions.sources);else for(var o=0,a=n.playerOptions.techOrder;o<a.length;o++){var u=Ht(a[o]),c=ir.getTech(u);if(u||(c=_t.getComponent(u)),c&&c.isSupported()){i.loadTech_(u);break}}return r}return e(i,t),i}(_t);_t.registerComponent("MediaLoader",dr);var vr=function(t){function i(i,n){var e;return(e=t.call(this,i,n)||this).emitTapEvents(),e.enable(),e}e(i,t);var n=i.prototype;return n.createEl=function(i,n,e){void 0===i&&(i="div"),void 0===n&&(n={}),void 0===e&&(e={}),n=p({innerHTML:'<span aria-hidden="true" class="vjs-icon-placeholder"></span>',className:this.buildCSSClass(),tabIndex:0},n),"button"===i&&c.error("Creating a ClickableComponent with an HTML element of "+i+" is not supported; use a Button instead."),e=p({role:"button"},e),this.tabIndex_=n.tabIndex;var r=t.prototype.createEl.call(this,i,n,e);return this.createControlTextEl(r),r},n.dispose=function(){this.controlTextEl_=null,t.prototype.dispose.call(this)},n.createControlTextEl=function(t){return this.controlTextEl_=E("span",{className:"vjs-control-text"},{"aria-live":"polite"}),t&&t.appendChild(this.controlTextEl_),this.controlText(this.controlText_,t),this.controlTextEl_},n.controlText=function(t,i){if(void 0===i&&(i=this.el()),void 0===t)return this.controlText_||"Need Text";var n=this.localize(t);this.controlText_=t,I(this.controlTextEl_,n),this.nonIconControl||i.setAttribute("title",n)},n.buildCSSClass=function(){return"vjs-control vjs-button "+t.prototype.buildCSSClass.call(this)},n.enable=function(){this.enabled_||(this.enabled_=!0,this.removeClass("vjs-disabled"),this.el_.setAttribute("aria-disabled","false"),void 0!==this.tabIndex_&&this.el_.setAttribute("tabIndex",this.tabIndex_),this.on(["tap","click"],this.handleClick),this.on("keydown",this.handleKeyDown))},n.disable=function(){this.enabled_=!1,this.addClass("vjs-disabled"),this.el_.setAttribute("aria-disabled","true"),void 0!==this.tabIndex_&&this.el_.removeAttribute("tabIndex"),this.off(["tap","click"],this.handleClick),this.off("keydown",this.handleKeyDown)},n.handleClick=function(){},n.handleKeyDown=function(i){Ii.isEventKey(i,"Space")||Ii.isEventKey(i,"Enter")?(i.preventDefault(),i.stopPropagation(),this.trigger("click")):t.prototype.handleKeyDown.call(this,i)},i}(_t);_t.registerComponent("ClickableComponent",vr);var pr=function(t){function i(i,n){var e;return(e=t.call(this,i,n)||this).update(),i.on("posterchange",At(o(e),e.update)),e}e(i,t);var n=i.prototype;return n.dispose=function(){this.player().off("posterchange",this.update),t.prototype.dispose.call(this)},n.createEl=function(){return E("div",{className:"vjs-poster",tabIndex:-1})},n.update=function(){var t=this.player().poster();this.setSrc(t),t?this.show():this.hide()},n.setSrc=function(t){var i="";t&&(i='url("'+t+'")'),this.el_.style.backgroundImage=i},n.handleClick=function(){this.player_.controls()&&(this.player_.tech(!0)&&this.player_.tech(!0).focus(),this.player_.paused()?Pi(this.player_.play()):this.player_.pause())},i}(vr);_t.registerComponent("PosterImage",pr);var mr="#222",br={monospace:"monospace",sansSerif:"sans-serif",serif:"serif",monospaceSansSerif:'"Andale Mono", "Lucida Console", monospace',monospaceSerif:'"Courier New", monospace',proportionalSansSerif:"sans-serif",proportionalSerif:"serif",casual:'"Comic Sans MS", Impact, fantasy',script:'"Monotype Corsiva", cursive',smallcaps:'"Andale Mono", "Lucida Console", monospace, sans-serif'};function Tr(t,i){var n;if(4===t.length)n=t[1]+t[1]+t[2]+t[2]+t[3]+t[3];else{if(7!==t.length)throw new Error("Invalid color code provided, "+t+"; must be formatted as e.g. #f0e or #f604e2.");n=t.slice(1)}return"rgba("+parseInt(n.slice(0,2),16)+","+parseInt(n.slice(2,4),16)+","+parseInt(n.slice(4,6),16)+","+i+")"}function yr(t,i,n){try{t.style[i]=n}catch(t){return}}var gr=function(i){function n(n,e,r){var s,a=At(o(s=i.call(this,n,e,r)||this),s.updateDisplay);return n.on("loadstart",At(o(s),s.toggleDisplay)),n.on("texttrackchange",a),n.on("loadedmetadata",At(o(s),s.preselectTrack)),n.ready(At(o(s),function(){if(n.tech_&&n.tech_.featuresNativeTextTracks)this.hide();else{n.on("fullscreenchange",a),n.on("playerresize",a),t.addEventListener("orientationchange",a),n.on("dispose",function(){return t.removeEventListener("orientationchange",a)});for(var i=this.options_.playerOptions.tracks||[],e=0;e<i.length;e++)this.player_.addRemoteTextTrack(i[e],!0);this.preselectTrack()}})),s}e(n,i);var r=n.prototype;return r.preselectTrack=function(){for(var t,i,n,e={captions:1,subtitles:1},r=this.player_.textTracks(),s=this.player_.cache_.selectedLanguage,o=0;o<r.length;o++){var a=r[o];s&&s.enabled&&s.language&&s.language===a.language&&a.kind in e?n=a.kind===s.kind?a:n||a:s&&!s.enabled?i=t=n=null:a.default&&("descriptions"!==a.kind||t?a.kind in e&&!i&&(i=a):t=a)}n?n.mode="showing":i?i.mode="showing":t&&(t.mode="showing")},r.toggleDisplay=function(){this.player_.tech_&&this.player_.tech_.featuresNativeTextTracks?this.hide():this.show()},r.createEl=function(){return i.prototype.createEl.call(this,"div",{className:"vjs-text-track-display"},{"aria-live":"off","aria-atomic":"true"})},r.clearDisplay=function(){"function"==typeof t.WebVTT&&t.WebVTT.processCues(t,[],this.el_)},r.updateDisplay=function(){var t=this.player_.textTracks(),i=this.options_.allowMultipleShowingTracks;if(this.clearDisplay(),i){for(var n=[],e=0;e<t.length;++e){var r=t[e];"showing"===r.mode&&n.push(r)}this.updateForTrack(n)}else{for(var s=null,o=null,a=t.length;a--;){var u=t[a];"showing"===u.mode&&("descriptions"===u.kind?s=u:o=u)}o?("off"!==this.getAttribute("aria-live")&&this.setAttribute("aria-live","off"),this.updateForTrack(o)):s&&("assertive"!==this.getAttribute("aria-live")&&this.setAttribute("aria-live","assertive"),this.updateForTrack(s))}},r.updateDisplayState=function(i){for(var n=this.player_.textTrackSettings.getValues(),e=i.activeCues,r=e.length;r--;){var s=e[r];if(s){var o=s.displayState;if(n.color&&(o.firstChild.style.color=n.color),n.textOpacity&&yr(o.firstChild,"color",Tr(n.color||"#fff",n.textOpacity)),n.backgroundColor&&(o.firstChild.style.backgroundColor=n.backgroundColor),n.backgroundOpacity&&yr(o.firstChild,"backgroundColor",Tr(n.backgroundColor||"#000",n.backgroundOpacity)),n.windowColor&&(n.windowOpacity?yr(o,"backgroundColor",Tr(n.windowColor,n.windowOpacity)):o.style.backgroundColor=n.windowColor),n.edgeStyle&&("dropshadow"===n.edgeStyle?o.firstChild.style.textShadow="2px 2px 3px #222, 2px 2px 4px #222, 2px 2px 5px "+mr:"raised"===n.edgeStyle?o.firstChild.style.textShadow="1px 1px #222, 2px 2px #222, 3px 3px "+mr:"depressed"===n.edgeStyle?o.firstChild.style.textShadow="1px 1px #ccc, 0 1px #ccc, -1px -1px #222, 0 -1px "+mr:"uniform"===n.edgeStyle&&(o.firstChild.style.textShadow="0 0 4px #222, 0 0 4px #222, 0 0 4px #222, 0 0 4px "+mr)),n.fontPercent&&1!==n.fontPercent){var a=t.parseFloat(o.style.fontSize);o.style.fontSize=a*n.fontPercent+"px",o.style.height="auto",o.style.top="auto",o.style.bottom="2px"}n.fontFamily&&"default"!==n.fontFamily&&("small-caps"===n.fontFamily?o.firstChild.style.fontVariant="small-caps":o.firstChild.style.fontFamily=br[n.fontFamily])}}},r.updateForTrack=function(i){if(Array.isArray(i)||(i=[i]),"function"==typeof t.WebVTT&&!i.every(function(t){return!t.activeCues})){for(var n=[],e=0;e<i.length;++e)for(var r=i[e],s=0;s<r.activeCues.length;++s)n.push(r.activeCues[s]);t.WebVTT.processCues(t,n,this.el_);for(var o=0;o<i.length;++o){for(var a=i[o],u=0;u<a.activeCues.length;++u){var c=a.activeCues[u].displayState;C(c,"vjs-text-track-cue"),C(c,"vjs-text-track-cue-"+(a.language?a.language:o))}this.player_.textTrackSettings&&this.updateDisplayState(a)}}},n}(_t);_t.registerComponent("TextTrackDisplay",gr);var Sr=function(t){function i(){return t.apply(this,arguments)||this}return e(i,t),i.prototype.createEl=function(){var i=this.player_.isAudio(),n=this.localize(i?"Audio Player":"Video Player"),e=E("span",{className:"vjs-control-text",innerHTML:this.localize("{1} is loading.",[n])}),r=t.prototype.createEl.call(this,"div",{className:"vjs-loading-spinner",dir:"ltr"});return r.appendChild(e),r},i}(_t);_t.registerComponent("LoadingSpinner",Sr);var wr=function(t){function i(){return t.apply(this,arguments)||this}e(i,t);var n=i.prototype;return n.createEl=function(t,i,n){void 0===i&&(i={}),void 0===n&&(n={}),i=p({innerHTML:'<span aria-hidden="true" class="vjs-icon-placeholder"></span>',className:this.buildCSSClass()},i),n=p({type:"button"},n);var e=_t.prototype.createEl.call(this,"button",i,n);return this.createControlTextEl(e),e},n.addChild=function(t,i){return void 0===i&&(i={}),c.warn("Adding an actionable (user controllable) child to a Button ("+this.constructor.name+") is not supported; use a ClickableComponent instead."),_t.prototype.addChild.call(this,t,i)},n.enable=function(){t.prototype.enable.call(this),this.el_.removeAttribute("disabled")},n.disable=function(){t.prototype.disable.call(this),this.el_.setAttribute("disabled","disabled")},n.handleKeyDown=function(i){Ii.isEventKey(i,"Space")||Ii.isEventKey(i,"Enter")?i.stopPropagation():t.prototype.handleKeyDown.call(this,i)},i}(vr);_t.registerComponent("Button",wr);var Ar=function(t){function i(i,n){var e;return(e=t.call(this,i,n)||this).mouseused_=!1,e.on("mousedown",e.handleMouseDown),e}e(i,t);var n=i.prototype;return n.buildCSSClass=function(){return"vjs-big-play-button"},n.handleClick=function(t){var i=this.player_.play();if(this.mouseused_&&t.clientX&&t.clientY)return Pi(i),void(this.player_.tech(!0)&&this.player_.tech(!0).focus());var n=this.player_.getChild("controlBar"),e=n&&n.getChild("playToggle");if(e){function r(){return e.focus()}Ai(i)?i.then(r,function(){}):this.setTimeout(r,1)}else this.player_.tech(!0).focus()},n.handleKeyDown=function(i){this.mouseused_=!1,t.prototype.handleKeyDown.call(this,i)},n.handleMouseDown=function(){this.mouseused_=!0},i}(wr);Ar.prototype.controlText_="Play Video",_t.registerComponent("BigPlayButton",Ar);var Pr=function(t){function i(i,n){var e;return(e=t.call(this,i,n)||this).controlText(n&&n.controlText||e.localize("Close")),e}e(i,t);var n=i.prototype;return n.buildCSSClass=function(){return"vjs-close-button "+t.prototype.buildCSSClass.call(this)},n.handleClick=function(){this.trigger({type:"close",bubbles:!1})},n.handleKeyDown=function(i){Ii.isEventKey(i,"Esc")?(i.preventDefault(),i.stopPropagation(),this.trigger("click")):t.prototype.handleKeyDown.call(this,i)},i}(wr);_t.registerComponent("CloseButton",Pr);var Mr=function(t){function i(i,n){var e;return void 0===n&&(n={}),e=t.call(this,i,n)||this,n.replay=void 0===n.replay||n.replay,e.on(i,"play",e.handlePlay),e.on(i,"pause",e.handlePause),n.replay&&e.on(i,"ended",e.handleEnded),e}e(i,t);var n=i.prototype;return n.buildCSSClass=function(){return"vjs-play-control "+t.prototype.buildCSSClass.call(this)},n.handleClick=function(t){this.player_.paused()?this.player_.play():this.player_.pause(),t.stopPropagation()},n.handleSeeked=function(t){this.removeClass("vjs-ended"),this.player_.paused()?this.handlePause(t):this.handlePlay(t)},n.handlePlay=function(){this.removeClass("vjs-ended"),this.removeClass("vjs-paused"),this.addClass("vjs-playing"),this.controlText("Pause")},n.handlePause=function(){this.removeClass("vjs-playing"),this.addClass("vjs-paused"),this.controlText("Play")},n.handleEnded=function(){this.removeClass("vjs-playing"),this.addClass("vjs-ended"),this.controlText("Replay"),this.one(this.player_,"seeked",this.handleSeeked)},i}(wr);function Er(t,i){t=t<0?0:t;var n=Math.floor(t%60),e=Math.floor(t/60%60),r=Math.floor(t/3600),s=Math.floor(i/60%60),o=Math.floor(i/3600);return!isNaN(t)&&t!==1/0||(r=e=n="-"),(r=0<r||0<o?r+":":"")+(e=((r||10<=s)&&e<10?"0"+e:e)+":")+(n<10?"0"+n:n)}Mr.prototype.controlText_="Play",_t.registerComponent("PlayToggle",Mr);var Ir=Er;function kr(t,i){return void 0===i&&(i=t),Ir(t,i)}var Dr=function(t){function n(i,n){var e;return(e=t.call(this,i,n)||this).throttledUpdateContent=Pt(At(o(e),e.updateContent),25),e.on(i,"timeupdate",e.throttledUpdateContent),e}e(n,t);var r=n.prototype;return r.createEl=function(){var i=this.buildCSSClass(),n=t.prototype.createEl.call(this,"div",{className:i+" vjs-time-control vjs-control",innerHTML:'<span class="vjs-control-text" role="presentation">'+this.localize(this.labelText_)+" </span>"});return this.contentEl_=E("span",{className:i+"-display"},{"aria-live":"off",role:"presentation"}),this.updateTextNode_(),n.appendChild(this.contentEl_),n},r.dispose=function(){this.contentEl_=null,this.textNode_=null,t.prototype.dispose.call(this)},r.updateTextNode_=function(){if(this.contentEl_){for(;this.contentEl_.firstChild;)this.contentEl_.removeChild(this.contentEl_.firstChild);this.textNode_=i.createTextNode(this.formattedTime_||this.formatTime_(0)),this.contentEl_.appendChild(this.textNode_)}},r.formatTime_=function(t){return kr(t)},r.updateFormattedTime_=function(t){var i=this.formatTime_(t);i!==this.formattedTime_&&(this.formattedTime_=i,this.requestAnimationFrame(this.updateTextNode_))},r.updateContent=function(){},n}(_t);Dr.prototype.labelText_="Time",Dr.prototype.controlText_="Time",_t.registerComponent("TimeDisplay",Dr);var Cr=function(t){function i(i,n){var e;return(e=t.call(this,i,n)||this).on(i,"ended",e.handleEnded),e}e(i,t);var n=i.prototype;return n.buildCSSClass=function(){return"vjs-current-time"},n.updateContent=function(){var t=this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime();this.updateFormattedTime_(t)},n.handleEnded=function(){this.player_.duration()&&this.updateFormattedTime_(this.player_.duration())},i}(Dr);Cr.prototype.labelText_="Current Time",Cr.prototype.controlText_="Current Time",_t.registerComponent("CurrentTimeDisplay",Cr);var Gr=function(t){function i(i,n){var e;return(e=t.call(this,i,n)||this).on(i,"durationchange",e.updateContent),e.on(i,"loadstart",e.updateContent),e.on(i,"loadedmetadata",e.throttledUpdateContent),e}e(i,t);var n=i.prototype;return n.buildCSSClass=function(){return"vjs-duration"},n.updateContent=function(){var t=this.player_.duration();this.duration_!==t&&(this.duration_=t,this.updateFormattedTime_(t))},i}(Dr);Gr.prototype.labelText_="Duration",Gr.prototype.controlText_="Duration",_t.registerComponent("DurationDisplay",Gr);var Or=function(t){function i(){return t.apply(this,arguments)||this}return e(i,t),i.prototype.createEl=function(){return t.prototype.createEl.call(this,"div",{className:"vjs-time-control vjs-time-divider",innerHTML:"<div><span>/</span></div>"},{"aria-hidden":!0})},i}(_t);_t.registerComponent("TimeDivider",Or);var Br=function(t){function i(i,n){var e;return(e=t.call(this,i,n)||this).on(i,"durationchange",e.throttledUpdateContent),e.on(i,"ended",e.handleEnded),e}e(i,t);var n=i.prototype;return n.buildCSSClass=function(){return"vjs-remaining-time"},n.createEl=function(){var i=t.prototype.createEl.call(this);return i.insertBefore(E("span",{},{"aria-hidden":!0},"-"),this.contentEl_),i},n.updateContent=function(){"number"==typeof this.player_.duration()&&this.updateFormattedTime_(this.player_.remainingTimeDisplay?this.player_.remainingTimeDisplay():this.player_.remainingTime())},n.handleEnded=function(){this.player_.duration()&&this.updateFormattedTime_(0)},i}(Dr);Br.prototype.labelText_="Remaining Time",Br.prototype.controlText_="Remaining Time",_t.registerComponent("RemainingTimeDisplay",Br);var xr=function(t){function i(i,n){var e;return(e=t.call(this,i,n)||this).updateShowing(),e.on(e.player(),"durationchange",e.updateShowing),e}e(i,t);var n=i.prototype;return n.createEl=function(){var i=t.prototype.createEl.call(this,"div",{className:"vjs-live-control vjs-control"});return this.contentEl_=E("div",{className:"vjs-live-display",innerHTML:'<span class="vjs-control-text">'+this.localize("Stream Type")+" </span>"+this.localize("LIVE")},{"aria-live":"off"}),i.appendChild(this.contentEl_),i},n.dispose=function(){this.contentEl_=null,t.prototype.dispose.call(this)},n.updateShowing=function(){this.player().duration()===1/0?this.show():this.hide()},i}(_t);_t.registerComponent("LiveDisplay",xr);var Rr=function(t){function i(i,n){var e;return(e=t.call(this,i,n)||this).updateLiveEdgeStatus(),e.player_.liveTracker&&e.on(e.player_.liveTracker,"liveedgechange",e.updateLiveEdgeStatus),e}e(i,t);var n=i.prototype;return n.createEl=function(){var i=t.prototype.createEl.call(this,"button",{className:"vjs-seek-to-live-control vjs-control"});return this.textEl_=E("span",{className:"vjs-seek-to-live-text",innerHTML:this.localize("LIVE")},{"aria-hidden":"true"}),i.appendChild(this.textEl_),i},n.updateLiveEdgeStatus=function(){!this.player_.liveTracker||this.player_.liveTracker.atLiveEdge()?(this.setAttribute("aria-disabled",!0),this.addClass("vjs-at-live-edge"),this.controlText("Seek to live, currently playing live")):(this.setAttribute("aria-disabled",!1),this.removeClass("vjs-at-live-edge"),this.controlText("Seek to live, currently behind live"))},n.handleClick=function(){this.player_.liveTracker.seekToLiveEdge()},n.dispose=function(){this.player_.liveTracker&&this.off(this.player_.liveTracker,"liveedgechange",this.updateLiveEdgeStatus),this.textEl_=null,t.prototype.dispose.call(this)},i}(wr);Rr.prototype.controlText_="Seek to live, currently playing live",_t.registerComponent("SeekToLive",Rr);var Nr=function(t){function i(i,n){var e;return(e=t.call(this,i,n)||this).bar=e.getChild(e.options_.barName),e.vertical(!!e.options_.vertical),e.enable(),e}e(i,t);var n=i.prototype;return n.enabled=function(){return this.enabled_},n.enable=function(){this.enabled()||(this.on("mousedown",this.handleMouseDown),this.on("touchstart",this.handleMouseDown),this.on("keydown",this.handleKeyDown),this.on("click",this.handleClick),this.on(this.player_,"controlsvisible",this.update),this.playerEvent&&this.on(this.player_,this.playerEvent,this.update),this.removeClass("disabled"),this.setAttribute("tabindex",0),this.enabled_=!0)},n.disable=function(){if(this.enabled()){var t=this.bar.el_.ownerDocument;this.off("mousedown",this.handleMouseDown),this.off("touchstart",this.handleMouseDown),this.off("keydown",this.handleKeyDown),this.off("click",this.handleClick),this.off(this.player_,"controlsvisible",this.update),this.off(t,"mousemove",this.handleMouseMove),this.off(t,"mouseup",this.handleMouseUp),this.off(t,"touchmove",this.handleMouseMove),this.off(t,"touchend",this.handleMouseUp),this.removeAttribute("tabindex"),this.addClass("disabled"),this.playerEvent&&this.off(this.player_,this.playerEvent,this.update),this.enabled_=!1}},n.createEl=function(i,n,e){return void 0===n&&(n={}),void 0===e&&(e={}),n.className=n.className+" vjs-slider",n=p({tabIndex:0},n),e=p({role:"slider","aria-valuenow":0,"aria-valuemin":0,"aria-valuemax":100,tabIndex:0},e),t.prototype.createEl.call(this,i,n,e)},n.handleMouseDown=function(t){var i=this.bar.el_.ownerDocument;"mousedown"===t.type&&t.preventDefault(),"touchstart"!==t.type||ei||t.preventDefault(),j(),this.addClass("vjs-sliding"),this.trigger("slideractive"),this.on(i,"mousemove",this.handleMouseMove),this.on(i,"mouseup",this.handleMouseUp),this.on(i,"touchmove",this.handleMouseMove),this.on(i,"touchend",this.handleMouseUp),this.handleMouseMove(t)},n.handleMouseMove=function(){},n.handleMouseUp=function(){var t=this.bar.el_.ownerDocument;_(),this.removeClass("vjs-sliding"),this.trigger("sliderinactive"),this.off(t,"mousemove",this.handleMouseMove),this.off(t,"mouseup",this.handleMouseUp),this.off(t,"touchmove",this.handleMouseMove),this.off(t,"touchend",this.handleMouseUp),this.update()},n.update=function(){if(this.el_){var t=this.getPercent(),i=this.bar;if(i){("number"!=typeof t||t!=t||t<0||t===1/0)&&(t=0);var n=(100*t).toFixed(2)+"%",e=i.el().style;return this.vertical()?e.height=n:e.width=n,t}}},n.calculateDistance=function(t){var i=V(this.el_,t);return this.vertical()?i.y:i.x},n.handleKeyDown=function(i){Ii.isEventKey(i,"Left")||Ii.isEventKey(i,"Down")?(i.preventDefault(),i.stopPropagation(),this.stepBack()):Ii.isEventKey(i,"Right")||Ii.isEventKey(i,"Up")?(i.preventDefault(),i.stopPropagation(),this.stepForward()):t.prototype.handleKeyDown.call(this,i)},n.handleClick=function(t){t.stopPropagation(),t.preventDefault()},n.vertical=function(t){if(void 0===t)return this.vertical_||!1;this.vertical_=!!t,this.addClass(this.vertical_?"vjs-slider-vertical":"vjs-slider-horizontal")},i}(_t);_t.registerComponent("Slider",Nr);var Hr=function(t){function i(i,n){var e;return(e=t.call(this,i,n)||this).partEls_=[],e.on(i,"progress",e.update),e}e(i,t);var n=i.prototype;return n.createEl=function(){return t.prototype.createEl.call(this,"div",{className:"vjs-load-progress",innerHTML:'<span class="vjs-control-text"><span>'+this.localize("Loaded")+'</span>: <span class="vjs-control-text-loaded-percentage">0%</span></span>'})},n.dispose=function(){this.partEls_=null,t.prototype.dispose.call(this)},n.update=function(){function t(t,i,n){var e=t/i||0;return e=100*(1<=e?1:e),n&&(e=e.toFixed(2)),e+"%"}var i=this.player_.liveTracker,n=this.player_.buffered(),e=i&&i.isLive()?i.seekableEnd():this.player_.duration(),r=this.player_.bufferedEnd(),s=this.partEls_,o=this.$(".vjs-control-text-loaded-percentage");this.el_.style.width=t(r,e),I(o,t(r,e,!0));for(var a=0;a<n.length;a++){var u=n.start(a),c=n.end(a),h=s[a];h||(h=this.el_.appendChild(E()),s[a]=h),h.style.left=t(u,r),h.style.width=t(c-u,r)}for(var f=s.length;f>n.length;f--)this.el_.removeChild(s[f-1]);s.length=n.length},i}(_t);_t.registerComponent("LoadProgressBar",Hr);var jr=function(t){function i(){return t.apply(this,arguments)||this}e(i,t);var n=i.prototype;return n.createEl=function(){return t.prototype.createEl.call(this,"div",{className:"vjs-time-tooltip"},{"aria-hidden":"true"})},n.update=function(t,i,n){var e=U(this.el_),r=U(this.player_.el()),s=t.width*i;if(r&&e){var o=t.left-r.left+s,a=t.width-s+(r.right-t.right),u=e.width/2;o<u?u+=u-o:a<u&&(u=a),u<0?u=0:u>e.width&&(u=e.width),this.el_.style.right="-"+u+"px",this.write(n)}},n.write=function(t){I(this.el_,t)},n.updateTime=function(t,i,n,e){var r=this;this.rafId_&&this.cancelAnimationFrame(this.rafId_),this.rafId_=this.requestAnimationFrame(function(){var s,o=r.player_.duration();if(r.player_.liveTracker&&r.player_.liveTracker.isLive()){var a=r.player_.liveTracker.liveWindow(),u=a-i*a;s=(u<1?"":"-")+kr(u,a)}else s=kr(n,o);r.update(t,i,s),e&&e()})},i}(_t);_t.registerComponent("TimeTooltip",jr);var _r=function(t){function i(){return t.apply(this,arguments)||this}e(i,t);var n=i.prototype;return n.createEl=function(){return t.prototype.createEl.call(this,"div",{className:"vjs-play-progress vjs-slider-bar"},{"aria-hidden":"true"})},n.update=function(t,i){var n=this.getChild("timeTooltip");if(n){var e=this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime();n.updateTime(t,i,e)}},i}(_t);_r.prototype.options_={children:[]},Yt||Jt||_r.prototype.options_.children.push("timeTooltip"),_t.registerComponent("PlayProgressBar",_r);var Ur=function(t){function i(i,n){var e;return(e=t.call(this,i,n)||this).update=Pt(At(o(e),e.update),25),e}e(i,t);var n=i.prototype;return n.createEl=function(){return t.prototype.createEl.call(this,"div",{className:"vjs-mouse-display"})},n.update=function(t,i){var n=this,e=i*this.player_.duration();this.getChild("timeTooltip").updateTime(t,i,e,function(){n.el_.style.left=t.width*i+"px"})},i}(_t);Ur.prototype.options_={children:["timeTooltip"]},_t.registerComponent("MouseTimeDisplay",Ur);var Lr=function(t){function n(i,n){var e;return(e=t.call(this,i,n)||this).setEventHandlers_(),e}e(n,t);var r=n.prototype;return r.setEventHandlers_=function(){this.update=Pt(At(this,this.update),30),this.on(this.player_,"timeupdate",this.update),this.on(this.player_,"ended",this.handleEnded),this.on(this.player_,"durationchange",this.update),this.player_.liveTracker&&this.on(this.player_.liveTracker,"liveedgechange",this.update),this.updateInterval=null,this.on(this.player_,["playing"],this.enableInterval_),this.on(this.player_,["ended","pause","waiting"],this.disableInterval_),"hidden"in i&&"visibilityState"in i&&this.on(i,"visibilitychange",this.toggleVisibility_)},r.toggleVisibility_=function(t){i.hidden?this.disableInterval_(t):(this.enableInterval_(),this.requestAnimationFrame(this.update))},r.enableInterval_=function(){var t=this;this.clearInterval(this.updateInterval),this.updateInterval=this.setInterval(function(){t.requestAnimationFrame(t.update)},30)},r.disableInterval_=function(t){this.player_.liveTracker&&this.player_.liveTracker.isLive()&&"ended"!==t.type||this.clearInterval(this.updateInterval)},r.createEl=function(){return t.prototype.createEl.call(this,"div",{className:"vjs-progress-holder"},{"aria-label":this.localize("Progress Bar")})},r.update_=function(t,i){var n=this.player_.liveTracker,e=this.player_.duration();n&&n.isLive()&&(e=this.player_.liveTracker.liveCurrentTime()),this.el_.setAttribute("aria-valuenow",(100*i).toFixed(2)),this.el_.setAttribute("aria-valuetext",this.localize("progress bar timing: currentTime={1} duration={2}",[kr(t,e),kr(e,e)],"{1} of {2}")),this.bar&&this.bar.update(U(this.el_),i)},r.update=function(){if(null!==this.el().offsetParent){var i=t.prototype.update.call(this);return this.update_(this.getCurrentTime_(),i),i}},r.getCurrentTime_=function(){return this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime()},r.handleEnded=function(){this.update_(this.player_.duration(),1)},r.getPercent=function(){var t,i=this.getCurrentTime_(),n=this.player_.liveTracker;return n&&n.isLive()?(t=(i-n.seekableStart())/n.liveWindow(),n.atLiveEdge()&&(t=1)):t=i/this.player_.duration(),1<=t?1:t||0},r.handleMouseDown=function(i){K(i)&&(i.stopPropagation(),this.player_.scrubbing(!0),this.videoWasPlaying=!this.player_.paused(),this.player_.pause(),t.prototype.handleMouseDown.call(this,i))},r.handleMouseMove=function(t){if(K(t)){var i,n=this.calculateDistance(t),e=this.player_.liveTracker;if(e&&e.isLive()){var r=e.seekableStart(),s=e.liveCurrentTime();if(s<=(i=r+n*e.liveWindow())&&(i=s),i<=r&&(i=r+.1),i===1/0)return}else(i=n*this.player_.duration())===this.player_.duration()&&(i-=.1);this.player_.currentTime(i)}},r.enable=function(){t.prototype.enable.call(this);var i=this.getChild("mouseTimeDisplay");i&&i.show()},r.disable=function(){t.prototype.disable.call(this);var i=this.getChild("mouseTimeDisplay");i&&i.hide()},r.handleMouseUp=function(i){t.prototype.handleMouseUp.call(this,i),i&&i.stopPropagation(),this.player_.scrubbing(!1),this.player_.trigger({type:"timeupdate",target:this,manuallyTriggered:!0}),this.videoWasPlaying&&Pi(this.player_.play())},r.stepForward=function(){this.player_.currentTime(this.player_.currentTime()+5)},r.stepBack=function(){this.player_.currentTime(this.player_.currentTime()-5)},r.handleAction=function(){this.player_.paused()?this.player_.play():this.player_.pause()},r.handleKeyDown=function(i){if(Ii.isEventKey(i,"Space")||Ii.isEventKey(i,"Enter"))i.preventDefault(),i.stopPropagation(),this.handleAction(i);else if(Ii.isEventKey(i,"Home"))i.preventDefault(),i.stopPropagation(),this.player_.currentTime(0);else if(Ii.isEventKey(i,"End"))i.preventDefault(),i.stopPropagation(),this.player_.currentTime(this.player_.duration());else if(/^[0-9]$/.test(Ii(i))){i.preventDefault(),i.stopPropagation();var n=10*(Ii.codes[Ii(i)]-Ii.codes[0])/100;this.player_.currentTime(this.player_.duration()*n)}else Ii.isEventKey(i,"PgDn")?(i.preventDefault(),i.stopPropagation(),this.player_.currentTime(this.player_.currentTime()-60)):Ii.isEventKey(i,"PgUp")?(i.preventDefault(),i.stopPropagation(),this.player_.currentTime(this.player_.currentTime()+60)):t.prototype.handleKeyDown.call(this,i)},n}(Nr);Lr.prototype.options_={children:["loadProgressBar","playProgressBar"],barName:"playProgressBar"},Yt||Jt||Lr.prototype.options_.children.splice(1,0,"mouseTimeDisplay"),_t.registerComponent("SeekBar",Lr);var Vr=function(t){function i(i,n){var e;return(e=t.call(this,i,n)||this).handleMouseMove=Pt(At(o(e),e.handleMouseMove),25),e.throttledHandleMouseSeek=Pt(At(o(e),e.handleMouseSeek),25),e.enable(),e}e(i,t);var n=i.prototype;return n.createEl=function(){return t.prototype.createEl.call(this,"div",{className:"vjs-progress-control vjs-control"})},n.handleMouseMove=function(t){var i=this.getChild("seekBar");if(i){var n=i.getChild("mouseTimeDisplay"),e=i.el(),r=U(e),s=V(e,t).x;1<s?s=1:s<0&&(s=0),n&&n.update(r,s)}},n.handleMouseSeek=function(t){var i=this.getChild("seekBar");i&&i.handleMouseMove(t)},n.enabled=function(){return this.enabled_},n.disable=function(){this.children().forEach(function(t){return t.disable&&t.disable()}),this.enabled()&&(this.off(["mousedown","touchstart"],this.handleMouseDown),this.off(this.el_,"mousemove",this.handleMouseMove),this.handleMouseUp(),this.addClass("disabled"),this.enabled_=!1)},n.enable=function(){this.children().forEach(function(t){return t.enable&&t.enable()}),this.enabled()||(this.on(["mousedown","touchstart"],this.handleMouseDown),this.on(this.el_,"mousemove",this.handleMouseMove),this.removeClass("disabled"),this.enabled_=!0)},n.handleMouseDown=function(t){var i=this.el_.ownerDocument,n=this.getChild("seekBar");n&&n.handleMouseDown(t),this.on(i,"mousemove",this.throttledHandleMouseSeek),this.on(i,"touchmove",this.throttledHandleMouseSeek),this.on(i,"mouseup",this.handleMouseUp),this.on(i,"touchend",this.handleMouseUp)},n.handleMouseUp=function(t){var i=this.el_.ownerDocument,n=this.getChild("seekBar");n&&n.handleMouseUp(t),this.off(i,"mousemove",this.throttledHandleMouseSeek),this.off(i,"touchmove",this.throttledHandleMouseSeek),this.off(i,"mouseup",this.handleMouseUp),this.off(i,"touchend",this.handleMouseUp)},i}(_t);Vr.prototype.options_={children:["seekBar"]},_t.registerComponent("ProgressControl",Vr);var Fr=function(t){function n(n,e){var r;return(r=t.call(this,n,e)||this).on(n,["enterpictureinpicture","leavepictureinpicture"],r.handlePictureInPictureChange),i.pictureInPictureEnabled||r.disable(),r}e(n,t);var r=n.prototype;return r.buildCSSClass=function(){return"vjs-picture-in-picture-control "+t.prototype.buildCSSClass.call(this)},r.handlePictureInPictureChange=function(){this.player_.isInPictureInPicture()?this.controlText("Exit Picture-in-Picture"):this.controlText("Picture-in-Picture")},r.handleClick=function(){this.player_.isInPictureInPicture()?this.player_.exitPictureInPicture():this.player_.requestPictureInPicture()},n}(wr);Fr.prototype.controlText_="Picture-in-Picture",_t.registerComponent("PictureInPictureToggle",Fr);var Wr=function(t){function n(n,e){var r;return(r=t.call(this,n,e)||this).on(n,"fullscreenchange",r.handleFullscreenChange),!1===i[n.fsApi_.fullscreenEnabled]&&r.disable(),r}e(n,t);var r=n.prototype;return r.buildCSSClass=function(){return"vjs-fullscreen-control "+t.prototype.buildCSSClass.call(this)},r.handleFullscreenChange=function(){this.player_.isFullscreen()?this.controlText("Non-Fullscreen"):this.controlText("Fullscreen")},r.handleClick=function(){this.player_.isFullscreen()?this.player_.exitFullscreen():this.player_.requestFullscreen()},n}(wr);Wr.prototype.controlText_="Fullscreen",_t.registerComponent("FullscreenToggle",Wr);var Xr=function(t){function i(){return t.apply(this,arguments)||this}return e(i,t),i.prototype.createEl=function(){return t.prototype.createEl.call(this,"div",{className:"vjs-volume-level",innerHTML:'<span class="vjs-control-text"></span>'})},i}(_t);_t.registerComponent("VolumeLevel",Xr);var $r=function(t){function i(i,n){var e;return(e=t.call(this,i,n)||this).on("slideractive",e.updateLastVolume_),e.on(i,"volumechange",e.updateARIAAttributes),i.ready(function(){return e.updateARIAAttributes()}),e}e(i,t);var n=i.prototype;return n.createEl=function(){return t.prototype.createEl.call(this,"div",{className:"vjs-volume-bar vjs-slider-bar"},{"aria-label":this.localize("Volume Level"),"aria-live":"polite"})},n.handleMouseDown=function(i){K(i)&&t.prototype.handleMouseDown.call(this,i)},n.handleMouseMove=function(t){K(t)&&(this.checkMuted(),this.player_.volume(this.calculateDistance(t)))},n.checkMuted=function(){this.player_.muted()&&this.player_.muted(!1)},n.getPercent=function(){return this.player_.muted()?0:this.player_.volume()},n.stepForward=function(){this.checkMuted(),this.player_.volume(this.player_.volume()+.1)},n.stepBack=function(){this.checkMuted(),this.player_.volume(this.player_.volume()-.1)},n.updateARIAAttributes=function(){var t=this.player_.muted()?0:this.volumeAsPercentage_();this.el_.setAttribute("aria-valuenow",t),this.el_.setAttribute("aria-valuetext",t+"%")},n.volumeAsPercentage_=function(){return Math.round(100*this.player_.volume())},n.updateLastVolume_=function(){var t=this,i=this.player_.volume();this.one("sliderinactive",function(){0===t.player_.volume()&&t.player_.lastVolume_(i)})},i}(Nr);$r.prototype.options_={children:["volumeLevel"],barName:"volumeLevel"},$r.prototype.playerEvent="volumechange",_t.registerComponent("VolumeBar",$r);var zr=function(t){function i(i,n){var e;return void 0===n&&(n={}),n.vertical=n.vertical||!1,void 0!==n.volumeBar&&!b(n.volumeBar)||(n.volumeBar=n.volumeBar||{},n.volumeBar.vertical=n.vertical),function(t,i){i.tech_&&!i.tech_.featuresVolumeControl&&t.addClass("vjs-hidden"),t.on(i,"loadstart",function(){i.tech_.featuresVolumeControl?t.removeClass("vjs-hidden"):t.addClass("vjs-hidden")})}(o(e=t.call(this,i,n)||this),i),e.throttledHandleMouseMove=Pt(At(o(e),e.handleMouseMove),25),e.on("mousedown",e.handleMouseDown),e.on("touchstart",e.handleMouseDown),e.on(e.volumeBar,["focus","slideractive"],function(){e.volumeBar.addClass("vjs-slider-active"),e.addClass("vjs-slider-active"),e.trigger("slideractive")}),e.on(e.volumeBar,["blur","sliderinactive"],function(){e.volumeBar.removeClass("vjs-slider-active"),e.removeClass("vjs-slider-active"),e.trigger("sliderinactive")}),e}e(i,t);var n=i.prototype;return n.createEl=function(){var i="vjs-volume-horizontal";return this.options_.vertical&&(i="vjs-volume-vertical"),t.prototype.createEl.call(this,"div",{className:"vjs-volume-control vjs-control "+i})},n.handleMouseDown=function(){var t=this.el_.ownerDocument;this.on(t,"mousemove",this.throttledHandleMouseMove),this.on(t,"touchmove",this.throttledHandleMouseMove),this.on(t,"mouseup",this.handleMouseUp),this.on(t,"touchend",this.handleMouseUp)},n.handleMouseUp=function(){var t=this.el_.ownerDocument;this.off(t,"mousemove",this.throttledHandleMouseMove),this.off(t,"touchmove",this.throttledHandleMouseMove),this.off(t,"mouseup",this.handleMouseUp),this.off(t,"touchend",this.handleMouseUp)},n.handleMouseMove=function(t){this.volumeBar.handleMouseMove(t)},i}(_t);zr.prototype.options_={children:["volumeBar"]},_t.registerComponent("VolumeControl",zr);var Kr=function(t){function i(i,n){var e;return function(t,i){i.tech_&&!i.tech_.featuresMuteControl&&t.addClass("vjs-hidden"),t.on(i,"loadstart",function(){i.tech_.featuresMuteControl?t.removeClass("vjs-hidden"):t.addClass("vjs-hidden")})}(o(e=t.call(this,i,n)||this),i),e.on(i,["loadstart","volumechange"],e.update),e}e(i,t);var n=i.prototype;return n.buildCSSClass=function(){return"vjs-mute-control "+t.prototype.buildCSSClass.call(this)},n.handleClick=function(){var t=this.player_.volume(),i=this.player_.lastVolume_();0===t?(this.player_.volume(i<.1?.1:i),this.player_.muted(!1)):this.player_.muted(!this.player_.muted())},n.update=function(){this.updateIcon_(),this.updateControlText_()},n.updateIcon_=function(){var t=this.player_.volume(),i=3;Yt&&this.player_.tech_&&this.player_.tech_.el_&&this.player_.muted(this.player_.tech_.el_.muted),0===t||this.player_.muted()?i=0:t<.33?i=1:t<.67&&(i=2);for(var n=0;n<4;n++)G(this.el_,"vjs-vol-"+n);C(this.el_,"vjs-vol-"+i)},n.updateControlText_=function(){var t=this.player_.muted()||0===this.player_.volume()?"Unmute":"Mute";this.controlText()!==t&&this.controlText(t)},i}(wr);Kr.prototype.controlText_="Mute",_t.registerComponent("MuteToggle",Kr);var qr=function(t){function i(i,n){var e;return void 0===n&&(n={}),n.inline=void 0===n.inline||n.inline,void 0!==n.volumeControl&&!b(n.volumeControl)||(n.volumeControl=n.volumeControl||{},n.volumeControl.vertical=!n.inline),(e=t.call(this,i,n)||this).on(i,["loadstart"],e.volumePanelState_),e.on(e.volumeControl,["slideractive"],e.sliderActive_),e.on(e.volumeControl,["sliderinactive"],e.sliderInactive_),e}e(i,t);var n=i.prototype;return n.sliderActive_=function(){this.addClass("vjs-slider-active")},n.sliderInactive_=function(){this.removeClass("vjs-slider-active")},n.volumePanelState_=function(){this.volumeControl.hasClass("vjs-hidden")&&this.muteToggle.hasClass("vjs-hidden")&&this.addClass("vjs-hidden"),this.volumeControl.hasClass("vjs-hidden")&&!this.muteToggle.hasClass("vjs-hidden")&&this.addClass("vjs-mute-toggle-only")},n.createEl=function(){var i="vjs-volume-panel-horizontal";return this.options_.inline||(i="vjs-volume-panel-vertical"),t.prototype.createEl.call(this,"div",{className:"vjs-volume-panel vjs-control "+i})},i}(_t);qr.prototype.options_={children:["muteToggle","volumeControl"]},_t.registerComponent("VolumePanel",qr);var Yr=function(t){function n(i,n){var e;return e=t.call(this,i,n)||this,n&&(e.menuButton_=n.menuButton),e.focusedChild_=-1,e.on("keydown",e.handleKeyDown),e.boundHandleBlur_=At(o(e),e.handleBlur),e.boundHandleTapClick_=At(o(e),e.handleTapClick),e}e(n,t);var r=n.prototype;return r.addEventListenerForItem=function(t){t instanceof _t&&(this.on(t,"blur",this.boundHandleBlur_),this.on(t,["tap","click"],this.boundHandleTapClick_))},r.removeEventListenerForItem=function(t){t instanceof _t&&(this.off(t,"blur",this.boundHandleBlur_),this.off(t,["tap","click"],this.boundHandleTapClick_))},r.removeChild=function(i){"string"==typeof i&&(i=this.getChild(i)),this.removeEventListenerForItem(i),t.prototype.removeChild.call(this,i)},r.addItem=function(t){var i=this.addChild(t);i&&this.addEventListenerForItem(i)},r.createEl=function(){this.contentEl_=E(this.options_.contentElType||"ul",{className:"vjs-menu-content"}),this.contentEl_.setAttribute("role","menu");var i=t.prototype.createEl.call(this,"div",{append:this.contentEl_,className:"vjs-menu"});return i.appendChild(this.contentEl_),ht(i,"click",function(t){t.preventDefault(),t.stopImmediatePropagation()}),i},r.dispose=function(){this.contentEl_=null,this.boundHandleBlur_=null,this.boundHandleTapClick_=null,t.prototype.dispose.call(this)},r.handleBlur=function(t){var n=t.relatedTarget||i.activeElement;if(!this.children().some(function(t){return t.el()===n})){var e=this.menuButton_;e&&e.buttonPressed_&&n!==e.el().firstChild&&e.unpressButton()}},r.handleTapClick=function(t){if(this.menuButton_){this.menuButton_.unpressButton();var i=this.children();if(!Array.isArray(i))return;var n=i.filter(function(i){return i.el()===t.target})[0];if(!n)return;"CaptionSettingsMenuItem"!==n.name()&&this.menuButton_.focus()}},r.handleKeyDown=function(t){Ii.isEventKey(t,"Left")||Ii.isEventKey(t,"Down")?(t.preventDefault(),t.stopPropagation(),this.stepForward()):(Ii.isEventKey(t,"Right")||Ii.isEventKey(t,"Up"))&&(t.preventDefault(),t.stopPropagation(),this.stepBack())},r.stepForward=function(){var t=0;void 0!==this.focusedChild_&&(t=this.focusedChild_+1),this.focus(t)},r.stepBack=function(){var t=0;void 0!==this.focusedChild_&&(t=this.focusedChild_-1),this.focus(t)},r.focus=function(t){void 0===t&&(t=0);var i=this.children().slice();i.length&&i[0].className&&/vjs-menu-title/.test(i[0].className)&&i.shift(),0<i.length&&(t<0?t=0:t>=i.length&&(t=i.length-1),i[this.focusedChild_=t].el_.focus())},n}(_t);_t.registerComponent("Menu",Yr);var Qr=function(t){function i(i,n){var e;void 0===n&&(n={}),(e=t.call(this,i,n)||this).menuButton_=new wr(i,n),e.menuButton_.controlText(e.controlText_),e.menuButton_.el_.setAttribute("aria-haspopup","true");var r=wr.prototype.buildCSSClass();return e.menuButton_.el_.className=e.buildCSSClass()+" "+r,e.menuButton_.removeClass("vjs-control"),e.addChild(e.menuButton_),e.update(),e.enabled_=!0,e.on(e.menuButton_,"tap",e.handleClick),e.on(e.menuButton_,"click",e.handleClick),e.on(e.menuButton_,"keydown",e.handleKeyDown),e.on(e.menuButton_,"mouseenter",function(){e.menu.show()}),e.on("keydown",e.handleSubmenuKeyDown),e}e(i,t);var n=i.prototype;return n.update=function(){var t=this.createMenu();this.menu&&(this.menu.dispose(),this.removeChild(this.menu)),this.menu=t,this.addChild(t),this.buttonPressed_=!1,this.menuButton_.el_.setAttribute("aria-expanded","false"),this.items&&this.items.length<=this.hideThreshold_?this.hide():this.show()},n.createMenu=function(){var t=new Yr(this.player_,{menuButton:this});if(this.hideThreshold_=0,this.options_.title){var i=E("li",{className:"vjs-menu-title",innerHTML:Ht(this.options_.title),tabIndex:-1});this.hideThreshold_+=1;var n=new _t(this.player_,{el:i});t.addItem(n)}if(this.items=this.createItems(),this.items)for(var e=0;e<this.items.length;e++)t.addItem(this.items[e]);return t},n.createItems=function(){},n.createEl=function(){return t.prototype.createEl.call(this,"div",{className:this.buildWrapperCSSClass()},{})},n.buildWrapperCSSClass=function(){var i="vjs-menu-button";return"vjs-menu-button "+(i+=!0===this.options_.inline?"-inline":"-popup")+" "+wr.prototype.buildCSSClass()+" "+t.prototype.buildCSSClass.call(this)},n.buildCSSClass=function(){var i="vjs-menu-button";return"vjs-menu-button "+(i+=!0===this.options_.inline?"-inline":"-popup")+" "+t.prototype.buildCSSClass.call(this)},n.controlText=function(t,i){return void 0===i&&(i=this.menuButton_.el()),this.menuButton_.controlText(t,i)},n.handleClick=function(){this.buttonPressed_?this.unpressButton():this.pressButton()},n.focus=function(){this.menuButton_.focus()},n.blur=function(){this.menuButton_.blur()},n.handleKeyDown=function(t){Ii.isEventKey(t,"Esc")||Ii.isEventKey(t,"Tab")?(this.buttonPressed_&&this.unpressButton(),Ii.isEventKey(t,"Tab")||(t.preventDefault(),this.menuButton_.focus())):(Ii.isEventKey(t,"Up")||Ii.isEventKey(t,"Down"))&&(this.buttonPressed_||(t.preventDefault(),this.pressButton()))},n.handleSubmenuKeyPress=function(t){this.handleSubmenuKeyDown(t)},n.handleSubmenuKeyDown=function(t){(Ii.isEventKey(t,"Esc")||Ii.isEventKey(t,"Tab"))&&(this.buttonPressed_&&this.unpressButton(),Ii.isEventKey(t,"Tab")||(t.preventDefault(),this.menuButton_.focus()))},n.pressButton=function(){if(this.enabled_){if(this.buttonPressed_=!0,this.menu.show(),this.menu.lockShowing(),this.menuButton_.el_.setAttribute("aria-expanded","true"),Yt&&P())return;this.menu.focus()}},n.unpressButton=function(){this.enabled_&&(this.buttonPressed_=!1,this.menu.unlockShowing(),this.menu.hide(),this.menuButton_.el_.setAttribute("aria-expanded","false"))},n.disable=function(){this.unpressButton(),this.enabled_=!1,this.addClass("vjs-disabled"),this.menuButton_.disable()},n.enable=function(){this.enabled_=!0,this.removeClass("vjs-disabled"),this.menuButton_.enable()},i}(_t);_t.registerComponent("MenuButton",Qr);var Jr=function(t){function i(i,n){var e,r=n.tracks;if((e=t.call(this,i,n)||this).items.length<=1&&e.hide(),!r)return o(e);var s=At(o(e),e.update);return r.addEventListener("removetrack",s),r.addEventListener("addtrack",s),e.player_.on("ready",s),e.player_.on("dispose",function(){r.removeEventListener("removetrack",s),r.removeEventListener("addtrack",s)}),e}return e(i,t),i}(Qr);_t.registerComponent("TrackButton",Jr);var Zr=["Tab","Esc","Up","Down","Right","Left"],ts=function(t){function i(i,n){var e;return(e=t.call(this,i,n)||this).selectable=n.selectable,e.isSelected_=n.selected||!1,e.multiSelectable=n.multiSelectable,e.selected(e.isSelected_),e.el_.setAttribute("role",e.selectable?e.multiSelectable?"menuitemcheckbox":"menuitemradio":"menuitem"),e}e(i,t);var n=i.prototype;return n.createEl=function(i,n,e){return this.nonIconControl=!0,t.prototype.createEl.call(this,"li",p({className:"vjs-menu-item",innerHTML:'<span class="vjs-menu-item-text">'+this.localize(this.options_.label)+"</span>",tabIndex:-1},n),e)},n.handleKeyDown=function(i){Zr.some(function(t){return Ii.isEventKey(i,t)})||t.prototype.handleKeyDown.call(this,i)},n.handleClick=function(){this.selected(!0)},n.selected=function(t){this.selectable&&(t?(this.addClass("vjs-selected"),this.el_.setAttribute("aria-checked","true"),this.controlText(", selected"),this.isSelected_=!0):(this.removeClass("vjs-selected"),this.el_.setAttribute("aria-checked","false"),this.controlText(""),this.isSelected_=!1))},i}(vr);_t.registerComponent("MenuItem",ts);var is=function(n){function r(e,r){var s,a,u=r.track,c=e.textTracks();function h(){for(var t=arguments.length,i=new Array(t),n=0;n<t;n++)i[n]=arguments[n];s.handleTracksChange.apply(o(s),i)}function f(){for(var t=arguments.length,i=new Array(t),n=0;n<t;n++)i[n]=arguments[n];s.handleSelectedLanguageChange.apply(o(s),i)}return r.label=u.label||u.language||"Unknown",r.selected="showing"===u.mode,(s=n.call(this,e,r)||this).track=u,s.kinds=(r.kinds||[r.kind||s.track.kind]).filter(Boolean),e.on(["loadstart","texttrackchange"],h),c.addEventListener("change",h),c.addEventListener("selectedlanguagechange",f),s.on("dispose",function(){e.off(["loadstart","texttrackchange"],h),c.removeEventListener("change",h),c.removeEventListener("selectedlanguagechange",f)}),void 0===c.onchange&&s.on(["tap","click"],function(){if("object"!=typeof t.Event)try{a=new t.Event("change")}catch(t){}a||(a=i.createEvent("Event")).initEvent("change",!0,!0),c.dispatchEvent(a)}),s.handleTracksChange(),s}e(r,n);var s=r.prototype;return s.handleClick=function(t){var i=this.track,e=this.player_.textTracks();if(n.prototype.handleClick.call(this,t),e)for(var r=0;r<e.length;r++){var s=e[r];-1!==this.kinds.indexOf(s.kind)&&(s===i?"showing"!==s.mode&&(s.mode="showing"):"disabled"!==s.mode&&(s.mode="disabled"))}},s.handleTracksChange=function(){var t="showing"===this.track.mode;t!==this.isSelected_&&this.selected(t)},s.handleSelectedLanguageChange=function(){if("showing"===this.track.mode){var t=this.player_.cache_.selectedLanguage;if(t&&t.enabled&&t.language===this.track.language&&t.kind!==this.track.kind)return;this.player_.cache_.selectedLanguage={enabled:!0,language:this.track.language,kind:this.track.kind}}},s.dispose=function(){this.track=null,n.prototype.dispose.call(this)},r}(ts);_t.registerComponent("TextTrackMenuItem",is);var ns=function(t){function i(i,n){return n.track={player:i,kind:n.kind,kinds:n.kinds,default:!1,mode:"disabled"},n.kinds||(n.kinds=[n.kind]),n.track.label=n.label?n.label:n.kinds.join(" and ")+" off",n.selectable=!0,n.multiSelectable=!1,t.call(this,i,n)||this}e(i,t);var n=i.prototype;return n.handleTracksChange=function(){for(var t=this.player().textTracks(),i=!0,n=0,e=t.length;n<e;n++){var r=t[n];if(-1<this.options_.kinds.indexOf(r.kind)&&"showing"===r.mode){i=!1;break}}i!==this.isSelected_&&this.selected(i)},n.handleSelectedLanguageChange=function(){for(var t=this.player().textTracks(),i=!0,n=0,e=t.length;n<e;n++){var r=t[n];if(-1<["captions","descriptions","subtitles"].indexOf(r.kind)&&"showing"===r.mode){i=!1;break}}i&&(this.player_.cache_.selectedLanguage={enabled:!1})},i}(is);_t.registerComponent("OffTextTrackMenuItem",ns);var es=function(t){function i(i,n){return void 0===n&&(n={}),n.tracks=i.textTracks(),t.call(this,i,n)||this}return e(i,t),i.prototype.createItems=function(t,i){var n;void 0===t&&(t=[]),void 0===i&&(i=is),this.label_&&(n=this.label_+" off"),t.push(new ns(this.player_,{kinds:this.kinds_,kind:this.kind_,label:n})),this.hideThreshold_+=1;var e=this.player_.textTracks();Array.isArray(this.kinds_)||(this.kinds_=[this.kind_]);for(var r=0;r<e.length;r++){var s=e[r];if(-1<this.kinds_.indexOf(s.kind)){var o=new i(this.player_,{track:s,kinds:this.kinds_,kind:this.kind_,selectable:!0,multiSelectable:!1});o.addClass("vjs-"+s.kind+"-menu-item"),t.push(o)}}return t},i}(Jr);_t.registerComponent("TextTrackButton",es);var rs=function(t){function i(i,n){var e,r=n.track,s=n.cue,a=i.currentTime();return n.selectable=!0,n.multiSelectable=!1,n.label=s.text,n.selected=s.startTime<=a&&a<s.endTime,(e=t.call(this,i,n)||this).track=r,e.cue=s,r.addEventListener("cuechange",At(o(e),e.update)),e}e(i,t);var n=i.prototype;return n.handleClick=function(){t.prototype.handleClick.call(this),this.player_.currentTime(this.cue.startTime),this.update(this.cue.startTime)},n.update=function(){var t=this.cue,i=this.player_.currentTime();this.selected(t.startTime<=i&&i<t.endTime)},i}(ts);_t.registerComponent("ChaptersTrackMenuItem",rs);var ss=function(t){function i(i,n,e){return t.call(this,i,n,e)||this}e(i,t);var n=i.prototype;return n.buildCSSClass=function(){return"vjs-chapters-button "+t.prototype.buildCSSClass.call(this)},n.buildWrapperCSSClass=function(){return"vjs-chapters-button "+t.prototype.buildWrapperCSSClass.call(this)},n.update=function(i){this.track_&&(!i||"addtrack"!==i.type&&"removetrack"!==i.type)||this.setTrack(this.findChaptersTrack()),t.prototype.update.call(this)},n.setTrack=function(t){if(this.track_!==t){if(this.updateHandler_||(this.updateHandler_=this.update.bind(this)),this.track_){var i=this.player_.remoteTextTrackEls().getTrackElementByTrack_(this.track_);i&&i.removeEventListener("load",this.updateHandler_),this.track_=null}if(this.track_=t,this.track_){this.track_.mode="hidden";var n=this.player_.remoteTextTrackEls().getTrackElementByTrack_(this.track_);n&&n.addEventListener("load",this.updateHandler_)}}},n.findChaptersTrack=function(){for(var t=this.player_.textTracks()||[],i=t.length-1;0<=i;i--){var n=t[i];if(n.kind===this.kind_)return n}},n.getMenuCaption=function(){return this.track_&&this.track_.label?this.track_.label:this.localize(Ht(this.kind_))},n.createMenu=function(){return this.options_.title=this.getMenuCaption(),t.prototype.createMenu.call(this)},n.createItems=function(){var t=[];if(!this.track_)return t;var i=this.track_.cues;if(!i)return t;for(var n=0,e=i.length;n<e;n++){var r=new rs(this.player_,{track:this.track_,cue:i[n]});t.push(r)}return t},i}(es);ss.prototype.kind_="chapters",ss.prototype.controlText_="Chapters",_t.registerComponent("ChaptersButton",ss);var os=function(t){function i(i,n,e){var r;r=t.call(this,i,n,e)||this;var s=i.textTracks(),a=At(o(r),r.handleTracksChange);return s.addEventListener("change",a),r.on("dispose",function(){s.removeEventListener("change",a)}),r}e(i,t);var n=i.prototype;return n.handleTracksChange=function(){for(var t=this.player().textTracks(),i=!1,n=0,e=t.length;n<e;n++){var r=t[n];if(r.kind!==this.kind_&&"showing"===r.mode){i=!0;break}}i?this.disable():this.enable()},n.buildCSSClass=function(){return"vjs-descriptions-button "+t.prototype.buildCSSClass.call(this)},n.buildWrapperCSSClass=function(){return"vjs-descriptions-button "+t.prototype.buildWrapperCSSClass.call(this)},i}(es);os.prototype.kind_="descriptions",os.prototype.controlText_="Descriptions",_t.registerComponent("DescriptionsButton",os);var as=function(t){function i(i,n,e){return t.call(this,i,n,e)||this}e(i,t);var n=i.prototype;return n.buildCSSClass=function(){return"vjs-subtitles-button "+t.prototype.buildCSSClass.call(this)},n.buildWrapperCSSClass=function(){return"vjs-subtitles-button "+t.prototype.buildWrapperCSSClass.call(this)},i}(es);as.prototype.kind_="subtitles",as.prototype.controlText_="Subtitles",_t.registerComponent("SubtitlesButton",as);var us=function(t){function i(i,n){var e;return n.track={player:i,kind:n.kind,label:n.kind+" settings",selectable:!1,default:!1,mode:"disabled"},n.selectable=!1,n.name="CaptionSettingsMenuItem",(e=t.call(this,i,n)||this).addClass("vjs-texttrack-settings"),e.controlText(", opens "+n.kind+" settings dialog"),e}return e(i,t),i.prototype.handleClick=function(){this.player().getChild("textTrackSettings").open()},i}(is);_t.registerComponent("CaptionSettingsMenuItem",us);var cs=function(t){function i(i,n,e){return t.call(this,i,n,e)||this}e(i,t);var n=i.prototype;return n.buildCSSClass=function(){return"vjs-captions-button "+t.prototype.buildCSSClass.call(this)},n.buildWrapperCSSClass=function(){return"vjs-captions-button "+t.prototype.buildWrapperCSSClass.call(this)},n.createItems=function(){var i=[];return this.player().tech_&&this.player().tech_.featuresNativeTextTracks||!this.player().getChild("textTrackSettings")||(i.push(new us(this.player_,{kind:this.kind_})),this.hideThreshold_+=1),t.prototype.createItems.call(this,i)},i}(es);cs.prototype.kind_="captions",cs.prototype.controlText_="Captions",_t.registerComponent("CaptionsButton",cs);var hs=function(t){function i(){return t.apply(this,arguments)||this}return e(i,t),i.prototype.createEl=function(i,n,e){var r='<span class="vjs-menu-item-text">'+this.localize(this.options_.label);return"captions"===this.options_.track.kind&&(r+='\n        <span aria-hidden="true" class="vjs-icon-placeholder"></span>\n        <span class="vjs-control-text"> '+this.localize("Captions")+"</span>\n      "),t.prototype.createEl.call(this,i,p({innerHTML:r+="</span>"},n),e)},i}(is);_t.registerComponent("SubsCapsMenuItem",hs);var fs=function(t){function i(i,n){var e;return void 0===n&&(n={}),(e=t.call(this,i,n)||this).label_="subtitles",-1<["en","en-us","en-ca","fr-ca"].indexOf(e.player_.language_)&&(e.label_="captions"),e.menuButton_.controlText(Ht(e.label_)),e}e(i,t);var n=i.prototype;return n.buildCSSClass=function(){return"vjs-subs-caps-button "+t.prototype.buildCSSClass.call(this)},n.buildWrapperCSSClass=function(){return"vjs-subs-caps-button "+t.prototype.buildWrapperCSSClass.call(this)},n.createItems=function(){var i=[];return this.player().tech_&&this.player().tech_.featuresNativeTextTracks||!this.player().getChild("textTrackSettings")||(i.push(new us(this.player_,{kind:this.label_})),this.hideThreshold_+=1),t.prototype.createItems.call(this,i,hs)},i}(es);fs.prototype.kinds_=["captions","subtitles"],fs.prototype.controlText_="Subtitles",_t.registerComponent("SubsCapsButton",fs);var ls=function(t){function i(i,n){var e,r=n.track,s=i.audioTracks();function a(){for(var t=arguments.length,i=new Array(t),n=0;n<t;n++)i[n]=arguments[n];e.handleTracksChange.apply(o(e),i)}return n.label=r.label||r.language||"Unknown",n.selected=r.enabled,(e=t.call(this,i,n)||this).track=r,e.addClass("vjs-"+r.kind+"-menu-item"),s.addEventListener("change",a),e.on("dispose",function(){s.removeEventListener("change",a)}),e}e(i,t);var n=i.prototype;return n.createEl=function(i,n,e){var r='<span class="vjs-menu-item-text">'+this.localize(this.options_.label);return"main-desc"===this.options_.track.kind&&(r+='\n        <span aria-hidden="true" class="vjs-icon-placeholder"></span>\n        <span class="vjs-control-text"> '+this.localize("Descriptions")+"</span>\n      "),t.prototype.createEl.call(this,i,p({innerHTML:r+="</span>"},n),e)},n.handleClick=function(i){var n=this.player_.audioTracks();t.prototype.handleClick.call(this,i);for(var e=0;e<n.length;e++){var r=n[e];r.enabled=r===this.track}},n.handleTracksChange=function(){this.selected(this.track.enabled)},i}(ts);_t.registerComponent("AudioTrackMenuItem",ls);var ds=function(t){function i(i,n){return void 0===n&&(n={}),n.tracks=i.audioTracks(),t.call(this,i,n)||this}e(i,t);var n=i.prototype;return n.buildCSSClass=function(){return"vjs-audio-button "+t.prototype.buildCSSClass.call(this)},n.buildWrapperCSSClass=function(){return"vjs-audio-button "+t.prototype.buildWrapperCSSClass.call(this)},n.createItems=function(t){void 0===t&&(t=[]),this.hideThreshold_=1;for(var i=this.player_.audioTracks(),n=0;n<i.length;n++)t.push(new ls(this.player_,{track:i[n],selectable:!0,multiSelectable:!1}));return t},i}(Jr);ds.prototype.controlText_="Audio Track",_t.registerComponent("AudioTrackButton",ds);var vs=function(t){function i(i,n){var e,r=n.rate,s=parseFloat(r,10);return n.label=r,n.selected=1===s,n.selectable=!0,n.multiSelectable=!1,(e=t.call(this,i,n)||this).label=r,e.rate=s,e.on(i,"ratechange",e.update),e}e(i,t);var n=i.prototype;return n.handleClick=function(){t.prototype.handleClick.call(this),this.player().playbackRate(this.rate)},n.update=function(){this.selected(this.player().playbackRate()===this.rate)},i}(ts);vs.prototype.contentElType="button",_t.registerComponent("PlaybackRateMenuItem",vs);var ps=function(t){function i(i,n){var e;return(e=t.call(this,i,n)||this).updateVisibility(),e.updateLabel(),e.on(i,"loadstart",e.updateVisibility),e.on(i,"ratechange",e.updateLabel),e}e(i,t);var n=i.prototype;return n.createEl=function(){var i=t.prototype.createEl.call(this);return this.labelEl_=E("div",{className:"vjs-playback-rate-value",innerHTML:"1x"}),i.appendChild(this.labelEl_),i},n.dispose=function(){this.labelEl_=null,t.prototype.dispose.call(this)},n.buildCSSClass=function(){return"vjs-playback-rate "+t.prototype.buildCSSClass.call(this)},n.buildWrapperCSSClass=function(){return"vjs-playback-rate "+t.prototype.buildWrapperCSSClass.call(this)},n.createMenu=function(){var t=new Yr(this.player()),i=this.playbackRates();if(i)for(var n=i.length-1;0<=n;n--)t.addChild(new vs(this.player(),{rate:i[n]+"x"}));return t},n.updateARIAAttributes=function(){this.el().setAttribute("aria-valuenow",this.player().playbackRate())},n.handleClick=function(){for(var t=this.player().playbackRate(),i=this.playbackRates(),n=i[0],e=0;e<i.length;e++)if(i[e]>t){n=i[e];break}this.player().playbackRate(n)},n.playbackRates=function(){return this.options_.playbackRates||this.options_.playerOptions&&this.options_.playerOptions.playbackRates},n.playbackRateSupported=function(){return this.player().tech_&&this.player().tech_.featuresPlaybackRate&&this.playbackRates()&&0<this.playbackRates().length},n.updateVisibility=function(){this.playbackRateSupported()?this.removeClass("vjs-hidden"):this.addClass("vjs-hidden")},n.updateLabel=function(){this.playbackRateSupported()&&(this.labelEl_.innerHTML=this.player().playbackRate()+"x")},i}(Qr);ps.prototype.controlText_="Playback Rate",_t.registerComponent("PlaybackRateMenuButton",ps);var ms=function(t){function i(){return t.apply(this,arguments)||this}e(i,t);var n=i.prototype;return n.buildCSSClass=function(){return"vjs-spacer "+t.prototype.buildCSSClass.call(this)},n.createEl=function(){return t.prototype.createEl.call(this,"div",{className:this.buildCSSClass()})},i}(_t);_t.registerComponent("Spacer",ms);var bs=function(t){function i(){return t.apply(this,arguments)||this}e(i,t);var n=i.prototype;return n.buildCSSClass=function(){return"vjs-custom-control-spacer "+t.prototype.buildCSSClass.call(this)},n.createEl=function(){var i=t.prototype.createEl.call(this,{className:this.buildCSSClass()});return i.innerHTML=" ",i},i}(ms);_t.registerComponent("CustomControlSpacer",bs);var Ts=function(t){function i(){return t.apply(this,arguments)||this}return e(i,t),i.prototype.createEl=function(){return t.prototype.createEl.call(this,"div",{className:"vjs-control-bar",dir:"ltr"})},i}(_t);Ts.prototype.options_={children:["playToggle","volumePanel","currentTimeDisplay","timeDivider","durationDisplay","progressControl","liveDisplay","seekToLive","remainingTimeDisplay","customControlSpacer","playbackRateMenuButton","chaptersButton","descriptionsButton","subsCapsButton","audioTrackButton","pictureInPictureToggle","fullscreenToggle"]},_t.registerComponent("ControlBar",Ts);var ys=function(t){function i(i,n){var e;return(e=t.call(this,i,n)||this).on(i,"error",e.open),e}e(i,t);var n=i.prototype;return n.buildCSSClass=function(){return"vjs-error-display "+t.prototype.buildCSSClass.call(this)},n.content=function(){var t=this.player().error();return t?this.localize(t.message):""},i}(Di);ys.prototype.options_=jt(Di.prototype.options_,{pauseOnOpen:!1,fillAlways:!0,temporary:!1,uncloseable:!0}),_t.registerComponent("ErrorDisplay",ys);var gs="vjs-text-track-settings",Ss=["#000","Black"],ws=["#00F","Blue"],As=["#0FF","Cyan"],Ps=["#0F0","Green"],Ms=["#F0F","Magenta"],Es=["#F00","Red"],Is=["#FFF","White"],ks=["#FF0","Yellow"],Ds=["1","Opaque"],Cs=["0.5","Semi-Transparent"],Gs=["0","Transparent"],Os={backgroundColor:{selector:".vjs-bg-color > select",id:"captions-background-color-%s",label:"Color",options:[Ss,Is,Es,Ps,ws,ks,Ms,As]},backgroundOpacity:{selector:".vjs-bg-opacity > select",id:"captions-background-opacity-%s",label:"Transparency",options:[Ds,Cs,Gs]},color:{selector:".vjs-fg-color > select",id:"captions-foreground-color-%s",label:"Color",options:[Is,Ss,Es,Ps,ws,ks,Ms,As]},edgeStyle:{selector:".vjs-edge-style > select",id:"%s",label:"Text Edge Style",options:[["none","None"],["raised","Raised"],["depressed","Depressed"],["uniform","Uniform"],["dropshadow","Dropshadow"]]},fontFamily:{selector:".vjs-font-family > select",id:"captions-font-family-%s",label:"Font Family",options:[["proportionalSansSerif","Proportional Sans-Serif"],["monospaceSansSerif","Monospace Sans-Serif"],["proportionalSerif","Proportional Serif"],["monospaceSerif","Monospace Serif"],["casual","Casual"],["script","Script"],["small-caps","Small Caps"]]},fontPercent:{selector:".vjs-font-percent > select",id:"captions-font-size-%s",label:"Font Size",options:[["0.50","50%"],["0.75","75%"],["1.00","100%"],["1.25","125%"],["1.50","150%"],["1.75","175%"],["2.00","200%"],["3.00","300%"],["4.00","400%"]],default:2,parser:function(t){return"1.00"===t?null:Number(t)}},textOpacity:{selector:".vjs-text-opacity > select",id:"captions-foreground-opacity-%s",label:"Transparency",options:[Ds,Cs]},windowColor:{selector:".vjs-window-color > select",id:"captions-window-color-%s",label:"Color"},windowOpacity:{selector:".vjs-window-opacity > select",id:"captions-window-opacity-%s",label:"Transparency",options:[Gs,Cs,Ds]}};function Bs(t,i){if(i&&(t=i(t)),t&&"none"!==t)return t}Os.windowColor.options=Os.backgroundColor.options;var xs=function(i){function n(t,n){var e;return n.temporary=!1,(e=i.call(this,t,n)||this).updateDisplay=At(o(e),e.updateDisplay),e.fill(),e.hasBeenOpened_=e.hasBeenFilled_=!0,e.endDialog=E("p",{className:"vjs-control-text",textContent:e.localize("End of dialog window.")}),e.el().appendChild(e.endDialog),e.setDefaults(),void 0===n.persistTextTrackSettings&&(e.options_.persistTextTrackSettings=e.options_.playerOptions.persistTextTrackSettings),e.on(e.$(".vjs-done-button"),"click",function(){e.saveSettings(),e.close()}),e.on(e.$(".vjs-default-button"),"click",function(){e.setDefaults(),e.updateDisplay()}),v(Os,function(t){e.on(e.$(t.selector),"change",e.updateDisplay)}),e.options_.persistTextTrackSettings&&e.restoreSettings(),e}e(n,i);var r=n.prototype;return r.dispose=function(){this.endDialog=null,i.prototype.dispose.call(this)},r.createElSelect_=function(t,i,n){var e=this;void 0===i&&(i=""),void 0===n&&(n="label");var r=Os[t],s=r.id.replace("%s",this.id_),o=[i,s].join(" ").trim();return["<"+n+' id="'+s+'" class="'+("label"===n?"vjs-label":"")+'">',this.localize(r.label),"</"+n+">",'<select aria-labelledby="'+o+'">'].concat(r.options.map(function(t){var i=s+"-"+t[1].replace(/\W+/g,"");return['<option id="'+i+'" value="'+t[0]+'" ','aria-labelledby="'+o+" "+i+'">',e.localize(t[1]),"</option>"].join("")})).concat("</select>").join("")},r.createElFgColor_=function(){var t="captions-text-legend-"+this.id_;return['<fieldset class="vjs-fg-color vjs-track-setting">','<legend id="'+t+'">',this.localize("Text"),"</legend>",this.createElSelect_("color",t),'<span class="vjs-text-opacity vjs-opacity">',this.createElSelect_("textOpacity",t),"</span>","</fieldset>"].join("")},r.createElBgColor_=function(){var t="captions-background-"+this.id_;return['<fieldset class="vjs-bg-color vjs-track-setting">','<legend id="'+t+'">',this.localize("Background"),"</legend>",this.createElSelect_("backgroundColor",t),'<span class="vjs-bg-opacity vjs-opacity">',this.createElSelect_("backgroundOpacity",t),"</span>","</fieldset>"].join("")},r.createElWinColor_=function(){var t="captions-window-"+this.id_;return['<fieldset class="vjs-window-color vjs-track-setting">','<legend id="'+t+'">',this.localize("Window"),"</legend>",this.createElSelect_("windowColor",t),'<span class="vjs-window-opacity vjs-opacity">',this.createElSelect_("windowOpacity",t),"</span>","</fieldset>"].join("")},r.createElColors_=function(){return E("div",{className:"vjs-track-settings-colors",innerHTML:[this.createElFgColor_(),this.createElBgColor_(),this.createElWinColor_()].join("")})},r.createElFont_=function(){return E("div",{className:"vjs-track-settings-font",innerHTML:['<fieldset class="vjs-font-percent vjs-track-setting">',this.createElSelect_("fontPercent","","legend"),"</fieldset>",'<fieldset class="vjs-edge-style vjs-track-setting">',this.createElSelect_("edgeStyle","","legend"),"</fieldset>",'<fieldset class="vjs-font-family vjs-track-setting">',this.createElSelect_("fontFamily","","legend"),"</fieldset>"].join("")})},r.createElControls_=function(){var t=this.localize("restore all settings to the default values");return E("div",{className:"vjs-track-settings-controls",innerHTML:['<button type="button" class="vjs-default-button" title="'+t+'">',this.localize("Reset"),'<span class="vjs-control-text"> '+t+"</span>","</button>",'<button type="button" class="vjs-done-button">'+this.localize("Done")+"</button>"].join("")})},r.content=function(){return[this.createElColors_(),this.createElFont_(),this.createElControls_()]},r.label=function(){return this.localize("Caption Settings Dialog")},r.description=function(){return this.localize("Beginning of dialog window. Escape will cancel and close the window.")},r.buildCSSClass=function(){return i.prototype.buildCSSClass.call(this)+" vjs-text-track-settings"},r.getValues=function(){var t=this;return function(i,n,e){return void 0===e&&(e=0),d(i).reduce(function(n,e){return function(i,n,e){var r=function(t,i){return Bs(t.options[t.options.selectedIndex].value,i)}(t.$(n.selector),n.parser);return void 0!==r&&(i[e]=r),i}(n,i[e],e)},e)}(Os,0,{})},r.setValues=function(t){var i=this;v(Os,function(n,e){!function(t,i,n){if(i)for(var e=0;e<t.options.length;e++)if(Bs(t.options[e].value,n)===i){t.selectedIndex=e;break}}(i.$(n.selector),t[e],n.parser)})},r.setDefaults=function(){var t=this;v(Os,function(i){var n=i.hasOwnProperty("default")?i.default:0;t.$(i.selector).selectedIndex=n})},r.restoreSettings=function(){var i;try{i=JSON.parse(t.localStorage.getItem(gs))}catch(i){c.warn(i)}i&&this.setValues(i)},r.saveSettings=function(){if(this.options_.persistTextTrackSettings){var i=this.getValues();try{Object.keys(i).length?t.localStorage.setItem(gs,JSON.stringify(i)):t.localStorage.removeItem(gs)}catch(i){c.warn(i)}}},r.updateDisplay=function(){var t=this.player_.getChild("textTrackDisplay");t&&t.updateDisplay()},r.conditionalBlur_=function(){this.previouslyActiveEl_=null;var t=this.player_.controlBar,i=t&&t.subsCapsButton,n=t&&t.captionsButton;i?i.focus():n&&n.focus()},n}(Di);_t.registerComponent("TextTrackSettings",xs);var Rs=function(i){function n(n,e){var r,s=e.ResizeObserver||t.ResizeObserver;null===e.ResizeObserver&&(s=!1);var a=jt({createEl:!s,reportTouchActivity:!1},e);return(r=i.call(this,n,a)||this).ResizeObserver=e.ResizeObserver||t.ResizeObserver,r.loadListener_=null,r.resizeObserver_=null,r.debouncedHandler_=function(i,n,e,r){var s;function o(){var t=this,o=arguments,a=function(){a=s=null,e||i.apply(t,o)};!s&&e&&i.apply(t,o),r.clearTimeout(s),s=r.setTimeout(a,n)}return void 0===r&&(r=t),o.cancel=function(){r.clearTimeout(s),s=null},o}(function(){r.resizeHandler()},100,!1,o(r)),s?(r.resizeObserver_=new r.ResizeObserver(r.debouncedHandler_),r.resizeObserver_.observe(n.el())):(r.loadListener_=function(){if(r.el_&&r.el_.contentWindow){var t=r.debouncedHandler_,i=r.unloadListener_=function(){ft(this,"resize",t),ft(this,"unload",i),i=null};ht(r.el_.contentWindow,"unload",i),ht(r.el_.contentWindow,"resize",t)}},r.one("load",r.loadListener_)),r}e(n,i);var r=n.prototype;return r.createEl=function(){return i.prototype.createEl.call(this,"iframe",{className:"vjs-resize-manager",tabIndex:-1},{"aria-hidden":"true"})},r.resizeHandler=function(){this.player_&&this.player_.trigger&&this.player_.trigger("playerresize")},r.dispose=function(){this.debouncedHandler_&&this.debouncedHandler_.cancel(),this.resizeObserver_&&(this.player_.el()&&this.resizeObserver_.unobserve(this.player_.el()),this.resizeObserver_.disconnect()),this.loadListener_&&this.off("load",this.loadListener_),this.el_&&this.el_.contentWindow&&this.unloadListener_&&this.unloadListener_.call(this.el_.contentWindow),this.ResizeObserver=null,this.resizeObserver=null,this.debouncedHandler_=null,this.loadListener_=null,i.prototype.dispose.call(this)},n}(_t);_t.registerComponent("ResizeManager",Rs);var Ns=function(t){function n(n,e){var r,s=jt({createEl:!1},e);return(r=t.call(this,n,s)||this).reset_(),r.on(r.player_,"durationchange",r.handleDurationchange),si&&"hidden"in i&&"visibilityState"in i&&r.on(i,"visibilitychange",r.handleVisibilityChange),r}e(n,t);var r=n.prototype;return r.handleVisibilityChange=function(){this.player_.duration()===1/0&&(i.hidden?this.stopTracking():this.startTracking())},r.isBehind_=function(){if(!this.timeupdateSeen_)return!1;var t=this.liveCurrentTime(),i=this.player_.currentTime();return t!==1/0&&i<=t-(2*this.seekableIncrement_+.07)},r.trackLive_=function(){this.pastSeekEnd_=this.pastSeekEnd_;var t=this.player_.seekable();if(t&&t.length){var i=this.seekableEnd();i!==this.lastSeekEnd_&&(this.lastSeekEnd_&&(this.seekableIncrement_=Math.abs(i-this.lastSeekEnd_)),this.pastSeekEnd_=0,this.lastSeekEnd_=i,this.trigger("seekableendchange")),this.pastSeekEnd_=this.pastSeekEnd()+.03,this.isBehind_()!==this.behindLiveEdge()&&(this.behindLiveEdge_=this.isBehind_(),this.trigger("liveedgechange"))}},r.handleDurationchange=function(){this.player_.duration()===1/0?this.startTracking():this.stopTracking()},r.startTracking=function(){var t=this;this.isTracking()||(this.timeupdateSeen_||(this.timeupdateSeen_=this.player_.hasStarted()),this.trackingInterval_=this.setInterval(this.trackLive_,30),this.trackLive_(),this.on(this.player_,"play",this.trackLive_),this.on(this.player_,"pause",this.trackLive_),this.timeupdateSeen_||(this.one(this.player_,"play",this.handlePlay),this.handleTimeupdate=function(){t.timeupdateSeen_=!0,t.handleTimeupdate=null},this.one(this.player_,"timeupdate",this.handleTimeupdate)))},r.handlePlay=function(){this.one(this.player_,"timeupdate",this.seekToLiveEdge)},r.reset_=function(){this.pastSeekEnd_=0,this.lastSeekEnd_=null,this.behindLiveEdge_=null,this.timeupdateSeen_=!1,this.clearInterval(this.trackingInterval_),this.trackingInterval_=null,this.seekableIncrement_=12,this.off(this.player_,"play",this.trackLive_),this.off(this.player_,"pause",this.trackLive_),this.off(this.player_,"play",this.handlePlay),this.off(this.player_,"timeupdate",this.seekToLiveEdge),this.handleTimeupdate&&(this.off(this.player_,"timeupdate",this.handleTimeupdate),this.handleTimeupdate=null)},r.stopTracking=function(){this.isTracking()&&this.reset_()},r.seekableEnd=function(){for(var t=this.player_.seekable(),i=[],n=t?t.length:0;n--;)i.push(t.end(n));return i.length?i.sort()[i.length-1]:1/0},r.seekableStart=function(){for(var t=this.player_.seekable(),i=[],n=t?t.length:0;n--;)i.push(t.start(n));return i.length?i.sort()[0]:0},r.liveWindow=function(){var t=this.liveCurrentTime();return t===1/0?1/0:t-this.seekableStart()},r.isLive=function(){return this.isTracking()},r.atLiveEdge=function(){return!this.behindLiveEdge()},r.liveCurrentTime=function(){return this.pastSeekEnd()+this.seekableEnd()},r.pastSeekEnd=function(){return this.pastSeekEnd_},r.behindLiveEdge=function(){return this.behindLiveEdge_},r.isTracking=function(){return"number"==typeof this.trackingInterval_},r.seekToLiveEdge=function(){this.atLiveEdge()||(this.player_.currentTime(this.liveCurrentTime()),this.player_.paused()&&this.player_.play())},r.dispose=function(){this.stopTracking(),t.prototype.dispose.call(this)},n}(_t);function Hs(t){var i=t.el();if(i.hasAttribute("src"))return t.triggerSourceset(i.src),!0;var n=t.$$("source"),e=[],r="";if(!n.length)return!1;for(var s=0;s<n.length;s++){var o=n[s].src;o&&-1===e.indexOf(o)&&e.push(o)}return!!e.length&&(1===e.length&&(r=e[0]),t.triggerSourceset(r),!0)}function js(t,i){for(var n={},e=0;e<t.length&&!((n=Object.getOwnPropertyDescriptor(t[e],i))&&n.set&&n.get);e++);return n.enumerable=!0,n.configurable=!0,n}function _s(i){var n=i.el();if(!n.resetSourceWatch_){function e(t){return function(){for(var e=arguments.length,r=new Array(e),s=0;s<e;s++)r[s]=arguments[s];var o=t.apply(n,r);return Hs(i),o}}var r={},s=js([i.el(),t.HTMLMediaElement.prototype,t.Element.prototype,Us],"innerHTML");["append","appendChild","insertAdjacentHTML"].forEach(function(t){n[t]&&(r[t]=n[t],n[t]=e(r[t]))}),Object.defineProperty(n,"innerHTML",jt(s,{set:e(s.set)})),n.resetSourceWatch_=function(){n.resetSourceWatch_=null,Object.keys(r).forEach(function(t){n[t]=r[t]}),Object.defineProperty(n,"innerHTML",s)},i.one("sourceset",n.resetSourceWatch_)}}_t.registerComponent("LiveTracker",Ns);var Us=Object.defineProperty({},"innerHTML",{get:function(){return this.cloneNode(!0).innerHTML},set:function(n){var e=i.createElement(this.nodeName.toLowerCase());e.innerHTML=n;for(var r=i.createDocumentFragment();e.childNodes.length;)r.appendChild(e.childNodes[0]);return this.innerText="",t.Element.prototype.appendChild.call(this,r),this.innerHTML}}),Ls=Object.defineProperty({},"src",{get:function(){return this.hasAttribute("src")?Ri(t.Element.prototype.getAttribute.call(this,"src")):""},set:function(i){return t.Element.prototype.setAttribute.call(this,"src",i),i}});function Vs(){var t=a(["Text Tracks are being loaded from another origin but the crossorigin attribute isn't used.\n            This may prevent text tracks from loading."]);return Vs=function(){return t},t}var Fs=function(n){function r(t,i){var e;e=n.call(this,t,i)||this;var r=t.source,s=!1;if(r&&(e.el_.currentSrc!==r.src||t.tag&&3===t.tag.initNetworkState_)?e.setSource(r):e.handleLateInit_(e.el_),t.enableSourceset&&e.setupSourcesetHandling_(),e.el_.hasChildNodes()){for(var o=e.el_.childNodes,a=o.length,u=[];a--;){var h=o[a];"track"===h.nodeName.toLowerCase()&&(e.featuresNativeTextTracks?(e.remoteTextTrackEls().addTrackElement_(h),e.remoteTextTracks().addTrack(h.track),e.textTracks().addTrack(h.track),s||e.el_.hasAttribute("crossorigin")||!Hi(h.src)||(s=!0)):u.push(h))}for(var l=0;l<u.length;l++)e.el_.removeChild(u[l])}return e.proxyNativeTracks_(),e.featuresNativeTextTracks&&s&&c.warn(f(Vs())),e.restoreMetadataTracksInIOSNativePlayer_(),(ci||Kt||ti)&&!0===t.nativeControlsForTouch&&e.setControls(!0),e.proxyWebkitFullscreen_(),e.triggerReady(),e}e(r,n);var s=r.prototype;return s.dispose=function(){this.el_&&this.el_.resetSourceset_&&this.el_.resetSourceset_(),r.disposeMediaElement(this.el_),this.options_=null,n.prototype.dispose.call(this)},s.setupSourcesetHandling_=function(){!function(i){if(i.featuresSourceset){var n=i.el();if(!n.resetSourceset_){var e=js([i.el(),t.HTMLMediaElement.prototype,Ls],"src"),r=n.setAttribute,s=n.load;Object.defineProperty(n,"src",jt(e,{set:function(t){var r=e.set.call(n,t);return i.triggerSourceset(n.src),r}})),n.setAttribute=function(t,e){var s=r.call(n,t,e);return/src/i.test(t)&&i.triggerSourceset(n.src),s},n.load=function(){var t=s.call(n);return Hs(i)||(i.triggerSourceset(""),_s(i)),t},n.currentSrc?i.triggerSourceset(n.currentSrc):Hs(i)||_s(i),n.resetSourceset_=function(){n.resetSourceset_=null,n.load=s,n.setAttribute=r,Object.defineProperty(n,"src",e),n.resetSourceWatch_&&n.resetSourceWatch_()}}}}(this)},s.restoreMetadataTracksInIOSNativePlayer_=function(){function t(){i=[];for(var t=0;t<n.length;t++){var e=n[t];"metadata"===e.kind&&i.push({track:e,storedMode:e.mode})}}var i,n=this.textTracks();function e(){for(var t=0;t<i.length;t++){var r=i[t];"disabled"===r.track.mode&&r.track.mode!==r.storedMode&&(r.track.mode=r.storedMode)}n.removeEventListener("change",e)}t(),n.addEventListener("change",t),this.on("dispose",function(){return n.removeEventListener("change",t)}),this.on("webkitbeginfullscreen",function(){n.removeEventListener("change",t),n.removeEventListener("change",e),n.addEventListener("change",e)}),this.on("webkitendfullscreen",function(){n.removeEventListener("change",t),n.addEventListener("change",t),n.removeEventListener("change",e)})},s.overrideNative_=function(t,i){var n=this;if(i===this["featuresNative"+t+"Tracks"]){var e=t.toLowerCase();this[e+"TracksListeners_"]&&Object.keys(this[e+"TracksListeners_"]).forEach(function(t){n.el()[e+"Tracks"].removeEventListener(t,n[e+"TracksListeners_"][t])}),this["featuresNative"+t+"Tracks"]=!i,this[e+"TracksListeners_"]=null,this.proxyNativeTracksForType_(e)}},s.overrideNativeAudioTracks=function(t){this.overrideNative_("Audio",t)},s.overrideNativeVideoTracks=function(t){this.overrideNative_("Video",t)},s.proxyNativeTracksForType_=function(t){var i=this,n=Ae[t],e=this.el()[n.getterName],r=this[n.getterName]();if(this["featuresNative"+n.capitalName+"Tracks"]&&e&&e.addEventListener){function s(){for(var t=[],i=0;i<r.length;i++){for(var n=!1,s=0;s<e.length;s++)if(e[s]===r[i]){n=!0;break}n||t.push(r[i])}for(;t.length;)r.removeTrack(t.shift())}var o={change:function(){r.trigger({type:"change",target:r,currentTarget:r,srcElement:r})},addtrack:function(t){r.addTrack(t.track)},removetrack:function(t){r.removeTrack(t.track)}};this[n.getterName+"Listeners_"]=o,Object.keys(o).forEach(function(t){var n=o[t];e.addEventListener(t,n),i.on("dispose",function(){return e.removeEventListener(t,n)})}),this.on("loadstart",s),this.on("dispose",function(){return i.off("loadstart",s)})}},s.proxyNativeTracks_=function(){var t=this;Ae.names.forEach(function(i){t.proxyNativeTracksForType_(i)})},s.createEl=function(){var t=this.options_.tag;if(!t||!this.options_.playerElIngest&&!this.movingMediaElementInDOM){if(t){var n=t.cloneNode(!0);t.parentNode&&t.parentNode.insertBefore(n,t),r.disposeMediaElement(t),t=n}else{t=i.createElement("video");var e=jt({},this.options_.tag&&x(this.options_.tag));ci&&!0===this.options_.nativeControlsForTouch||delete e.controls,B(t,p(e,{id:this.options_.techId,class:"vjs-tech"}))}t.playerId=this.options_.playerId}void 0!==this.options_.preload&&N(t,"preload",this.options_.preload);for(var s=["loop","muted","playsinline","autoplay"],o=0;o<s.length;o++){var a=s[o],u=this.options_[a];void 0!==u&&(u?N(t,a,a):H(t,a),t[a]=u)}return t},s.handleLateInit_=function(t){if(0!==t.networkState&&3!==t.networkState){if(0===t.readyState){function i(){n=!0}var n=!1;function e(){n||this.trigger("loadstart")}return this.on("loadstart",i),this.on("loadedmetadata",e),void this.ready(function(){this.off("loadstart",i),this.off("loadedmetadata",e),n||this.trigger("loadstart")})}var r=["loadstart"];r.push("loadedmetadata"),2<=t.readyState&&r.push("loadeddata"),3<=t.readyState&&r.push("canplay"),4<=t.readyState&&r.push("canplaythrough"),this.ready(function(){r.forEach(function(t){this.trigger(t)},this)})}},s.setCurrentTime=function(t){try{this.el_.currentTime=t}catch(t){c(t,"Video is not ready. (Video.js)")}},s.duration=function(){var t=this;return this.el_.duration===1/0&&Jt&&ei&&0===this.el_.currentTime?(this.on("timeupdate",function i(){0<t.el_.currentTime&&(t.el_.duration===1/0&&t.trigger("durationchange"),t.off("timeupdate",i))}),NaN):this.el_.duration||NaN},s.width=function(){return this.el_.offsetWidth},s.height=function(){return this.el_.offsetHeight},s.proxyWebkitFullscreen_=function(){var t=this;if("webkitDisplayingFullscreen"in this.el_){function i(){this.trigger("fullscreenchange",{isFullscreen:!1})}function n(){"webkitPresentationMode"in this.el_&&"picture-in-picture"!==this.el_.webkitPresentationMode&&(this.one("webkitendfullscreen",i),this.trigger("fullscreenchange",{isFullscreen:!0}))}this.on("webkitbeginfullscreen",n),this.on("dispose",function(){t.off("webkitbeginfullscreen",n),t.off("webkitendfullscreen",i)})}},s.supportsFullScreen=function(){if("function"==typeof this.el_.webkitEnterFullScreen){var i=t.navigator&&t.navigator.userAgent||"";if(/Android/.test(i)||!/Chrome|Mac OS X 10.5/.test(i))return!0}return!1},s.enterFullScreen=function(){var t=this.el_;t.paused&&t.networkState<=t.HAVE_METADATA?(this.el_.play(),this.setTimeout(function(){t.pause(),t.webkitEnterFullScreen()},0)):t.webkitEnterFullScreen()},s.exitFullScreen=function(){this.el_.webkitExitFullScreen()},s.requestPictureInPicture=function(){return this.el_.requestPictureInPicture()},s.src=function(t){if(void 0===t)return this.el_.src;this.setSrc(t)},s.reset=function(){r.resetMediaElement(this.el_)},s.currentSrc=function(){return this.currentSource_?this.currentSource_.src:this.el_.currentSrc},s.setControls=function(t){this.el_.controls=!!t},s.addTextTrack=function(t,i,e){return this.featuresNativeTextTracks?this.el_.addTextTrack(t,i,e):n.prototype.addTextTrack.call(this,t,i,e)},s.createRemoteTextTrack=function(t){if(!this.featuresNativeTextTracks)return n.prototype.createRemoteTextTrack.call(this,t);var e=i.createElement("track");return t.kind&&(e.kind=t.kind),t.label&&(e.label=t.label),(t.language||t.srclang)&&(e.srclang=t.language||t.srclang),t.default&&(e.default=t.default),t.id&&(e.id=t.id),t.src&&(e.src=t.src),e},s.addRemoteTextTrack=function(t,i){var e=n.prototype.addRemoteTextTrack.call(this,t,i);return this.featuresNativeTextTracks&&this.el().appendChild(e),e},s.removeRemoteTextTrack=function(t){if(n.prototype.removeRemoteTextTrack.call(this,t),this.featuresNativeTextTracks)for(var i=this.$$("track"),e=i.length;e--;)t!==i[e]&&t!==i[e].track||this.el().removeChild(i[e])},s.getVideoPlaybackQuality=function(){if("function"==typeof this.el().getVideoPlaybackQuality)return this.el().getVideoPlaybackQuality();var i={};return void 0!==this.el().webkitDroppedFrameCount&&void 0!==this.el().webkitDecodedFrameCount&&(i.droppedVideoFrames=this.el().webkitDroppedFrameCount,i.totalVideoFrames=this.el().webkitDecodedFrameCount),t.performance&&"function"==typeof t.performance.now?i.creationTime=t.performance.now():t.performance&&t.performance.timing&&"number"==typeof t.performance.timing.navigationStart&&(i.creationTime=t.Date.now()-t.performance.timing.navigationStart),i},r}(ir);if(w()){Fs.TEST_VID=i.createElement("video");var Ws=i.createElement("track");Ws.kind="captions",Ws.srclang="en",Ws.label="English",Fs.TEST_VID.appendChild(Ws)}Fs.isSupported=function(){try{Fs.TEST_VID.volume=.5}catch(t){return!1}return!(!Fs.TEST_VID||!Fs.TEST_VID.canPlayType)},Fs.canPlayType=function(t){return Fs.TEST_VID.canPlayType(t)},Fs.canPlaySource=function(t){return Fs.canPlayType(t.type)},Fs.canControlVolume=function(){try{var t=Fs.TEST_VID.volume;return Fs.TEST_VID.volume=t/2+.1,t!==Fs.TEST_VID.volume}catch(t){return!1}},Fs.canMuteVolume=function(){try{var t=Fs.TEST_VID.muted;return Fs.TEST_VID.muted=!t,Fs.TEST_VID.muted?N(Fs.TEST_VID,"muted","muted"):H(Fs.TEST_VID,"muted"),t!==Fs.TEST_VID.muted}catch(t){return!1}},Fs.canControlPlaybackRate=function(){if(Jt&&ei&&ri<58)return!1;try{var t=Fs.TEST_VID.playbackRate;return Fs.TEST_VID.playbackRate=t/2+.1,t!==Fs.TEST_VID.playbackRate}catch(t){return!1}},Fs.canOverrideAttributes=function(){try{function t(){}Object.defineProperty(i.createElement("video"),"src",{get:t,set:t}),Object.defineProperty(i.createElement("audio"),"src",{get:t,set:t}),Object.defineProperty(i.createElement("video"),"innerHTML",{get:t,set:t}),Object.defineProperty(i.createElement("audio"),"innerHTML",{get:t,set:t})}catch(t){return!1}return!0},Fs.supportsNativeTextTracks=function(){return ai||Yt&&ei},Fs.supportsNativeVideoTracks=function(){return!(!Fs.TEST_VID||!Fs.TEST_VID.videoTracks)},Fs.supportsNativeAudioTracks=function(){return!(!Fs.TEST_VID||!Fs.TEST_VID.audioTracks)},Fs.Events=["loadstart","suspend","abort","error","emptied","stalled","loadedmetadata","loadeddata","canplay","canplaythrough","playing","waiting","seeking","seeked","ended","durationchange","timeupdate","progress","play","pause","ratechange","resize","volumechange"],Fs.prototype.featuresVolumeControl=Fs.canControlVolume(),Fs.prototype.featuresMuteControl=Fs.canMuteVolume(),Fs.prototype.featuresPlaybackRate=Fs.canControlPlaybackRate(),Fs.prototype.featuresSourceset=Fs.canOverrideAttributes(),Fs.prototype.movingMediaElementInDOM=!Yt,Fs.prototype.featuresFullscreenResize=!0,Fs.prototype.featuresProgressEvents=!0,Fs.prototype.featuresTimeupdateEvents=!0,Fs.prototype.featuresNativeTextTracks=Fs.supportsNativeTextTracks(),Fs.prototype.featuresNativeVideoTracks=Fs.supportsNativeVideoTracks(),Fs.prototype.featuresNativeAudioTracks=Fs.supportsNativeAudioTracks();var Xs=Fs.TEST_VID&&Fs.TEST_VID.constructor.prototype.canPlayType,$s=/^application\/(?:x-|vnd\.apple\.)mpegurl/i;function zs(){var t=a(["\n        Using the tech directly can be dangerous. I hope you know what you're doing.\n        See https://github.com/videojs/video.js/issues/2617 for more info.\n      "]);return zs=function(){return t},t}Fs.patchCanPlayType=function(){4<=Zt&&!ii&&!ei&&(Fs.TEST_VID.constructor.prototype.canPlayType=function(t){return t&&$s.test(t)?"maybe":Xs.call(this,t)})},Fs.unpatchCanPlayType=function(){var t=Fs.TEST_VID.constructor.prototype.canPlayType;return Fs.TEST_VID.constructor.prototype.canPlayType=Xs,t},Fs.patchCanPlayType(),Fs.disposeMediaElement=function(t){if(t){for(t.parentNode&&t.parentNode.removeChild(t);t.hasChildNodes();)t.removeChild(t.firstChild);t.removeAttribute("src"),"function"==typeof t.load&&function(){try{t.load()}catch(t){}}()}},Fs.resetMediaElement=function(t){if(t){for(var i=t.querySelectorAll("source"),n=i.length;n--;)t.removeChild(i[n]);t.removeAttribute("src"),"function"==typeof t.load&&function(){try{t.load()}catch(t){}}()}},["muted","defaultMuted","autoplay","controls","loop","playsinline"].forEach(function(t){Fs.prototype[t]=function(){return this.el_[t]||this.el_.hasAttribute(t)}}),["muted","defaultMuted","autoplay","loop","playsinline"].forEach(function(t){Fs.prototype["set"+Ht(t)]=function(i){(this.el_[t]=i)?this.el_.setAttribute(t,t):this.el_.removeAttribute(t)}}),["paused","currentTime","buffered","volume","poster","preload","error","seeking","seekable","ended","playbackRate","defaultPlaybackRate","played","networkState","readyState","videoWidth","videoHeight"].forEach(function(t){Fs.prototype[t]=function(){return this.el_[t]}}),["volume","src","poster","preload","playbackRate","defaultPlaybackRate"].forEach(function(t){Fs.prototype["set"+Ht(t)]=function(i){this.el_[t]=i}}),["pause","load","play"].forEach(function(t){Fs.prototype[t]=function(){return this.el_[t]()}}),ir.withSourceHandlers(Fs),Fs.nativeSourceHandler={},Fs.nativeSourceHandler.canPlayType=function(t){try{return Fs.TEST_VID.canPlayType(t)}catch(t){return""}},Fs.nativeSourceHandler.canHandleSource=function(t){if(t.type)return Fs.nativeSourceHandler.canPlayType(t.type);if(t.src){var i=Ni(t.src);return Fs.nativeSourceHandler.canPlayType("video/"+i)}return""},Fs.nativeSourceHandler.handleSource=function(t,i){i.setSrc(t.src)},Fs.nativeSourceHandler.dispose=function(){},Fs.registerSourceHandler(Fs.nativeSourceHandler),ir.registerTech("Html5",Fs);var Ks=["progress","abort","suspend","emptied","stalled","loadedmetadata","loadeddata","timeupdate","resize","volumechange","texttrackchange"],qs={canplay:"CanPlay",canplaythrough:"CanPlayThrough",playing:"Playing",seeked:"Seeked"},Ys=["tiny","xsmall","small","medium","large","xlarge","huge"],Qs={};Ys.forEach(function(t){var i="x"===t.charAt(0)?"x-"+t.substring(1):t;Qs[t]="vjs-layout-"+i});var Js={tiny:210,xsmall:320,small:425,medium:768,large:1440,xlarge:2560,huge:1/0},Zs=function(r){function s(t,i,e){var a;if(t.id=t.id||i.id||"vjs_video_"+Z(),(i=p(s.getTagSettings(t),i)).initChildren=!1,i.createEl=!1,i.evented=!1,i.reportTouchActivity=!1,!i.language)if("function"==typeof t.closest){var u=t.closest("[lang]");u&&u.getAttribute&&(i.language=u.getAttribute("lang"))}else for(var c=t;c&&1===c.nodeType;){if(x(c).hasOwnProperty("lang")){i.language=c.getAttribute("lang");break}c=c.parentNode}if((a=r.call(this,null,i,e)||this).boundDocumentFullscreenChange_=At(o(a),a.documentFullscreenChange_),a.boundFullWindowOnEscKey_=At(o(a),a.fullWindowOnEscKey),a.log=h(a.id_),a.fsApi_=mi,a.isPosterFromTech_=!1,a.queuedCallbacks_=[],a.isReady_=!1,a.hasStarted_=!1,a.userActive_=!1,!a.options_||!a.options_.techOrder||!a.options_.techOrder.length)throw new Error("No techOrder specified. Did you overwrite videojs.options instead of just changing the properties you want to override?");if(a.tag=t,a.tagAttributes=t&&x(t),a.language(a.options_.language),i.languages){var f={};Object.getOwnPropertyNames(i.languages).forEach(function(t){f[t.toLowerCase()]=i.languages[t]}),a.languages_=f}else a.languages_=s.prototype.options_.languages;a.resetCache_(),a.poster_=i.poster||"",a.controls_=!!i.controls,t.controls=!1,t.removeAttribute("controls"),a.changingSrc_=!1,a.playCallbacks_=[],a.playTerminatedQueue_=[],t.hasAttribute("autoplay")?a.autoplay(!0):a.autoplay(a.options_.autoplay),i.plugins&&Object.keys(i.plugins).forEach(function(t){if("function"!=typeof a[t])throw new Error('plugin "'+t+'" does not exist')}),a.scrubbing_=!1,a.el_=a.createEl(),xt(o(a),{eventBusKey:"el_"}),a.fluid_&&a.on("playerreset",a.updateStyleEl_);var l=jt(a.options_);i.plugins&&Object.keys(i.plugins).forEach(function(t){a[t](i.plugins[t])}),a.options_.playerOptions=l,a.middleware_=[],a.initChildren(),a.isAudio("audio"===t.nodeName.toLowerCase()),a.controls()?a.addClass("vjs-controls-enabled"):a.addClass("vjs-controls-disabled"),a.el_.setAttribute("role","region"),a.isAudio()?a.el_.setAttribute("aria-label",a.localize("Audio Player")):a.el_.setAttribute("aria-label",a.localize("Video Player")),a.isAudio()&&a.addClass("vjs-audio"),a.flexNotSupported_()&&a.addClass("vjs-no-flex"),ci&&a.addClass("vjs-touch-enabled"),Yt||a.addClass("vjs-workinghover"),s.players[a.id_]=o(a);var d=n.split(".")[0];return a.addClass("vjs-v"+d),a.userActive(!0),a.reportUserActivity(),a.one("play",a.listenForUserActivity_),a.on("stageclick",a.handleStageClick_),a.on("keydown",a.handleKeyDown),a.breakpoints(a.options_.breakpoints),a.responsive(a.options_.responsive),a}e(s,r);var a=s.prototype;return a.dispose=function(){var t=this;this.trigger("dispose"),this.off("dispose"),ft(i,this.fsApi_.fullscreenchange,this.boundDocumentFullscreenChange_),ft(i,"keydown",this.boundFullWindowOnEscKey_),this.styleEl_&&this.styleEl_.parentNode&&(this.styleEl_.parentNode.removeChild(this.styleEl_),this.styleEl_=null),s.players[this.id_]=null,this.tag&&this.tag.player&&(this.tag.player=null),this.el_&&this.el_.player&&(this.el_.player=null),this.tech_&&(this.tech_.dispose(),this.isPosterFromTech_=!1,this.poster_=""),this.playerElIngest_&&(this.playerElIngest_=null),this.tag&&(this.tag=null),function(t){er[t.id()]=null}(this),Me.names.forEach(function(i){var n=t[Me[i].getterName]();n&&n.off&&n.off()}),r.prototype.dispose.call(this)},a.createEl=function(){var n,e=this.tag,s=this.playerElIngest_=e.parentNode&&e.parentNode.hasAttribute&&e.parentNode.hasAttribute("data-vjs-player"),o="video-js"===this.tag.tagName.toLowerCase();s?n=this.el_=e.parentNode:o||(n=this.el_=r.prototype.createEl.call(this,"div"));var a=x(e);if(o){for(n=this.el_=e,e=this.tag=i.createElement("video");n.children.length;)e.appendChild(n.firstChild);D(n,"video-js")||C(n,"video-js"),n.appendChild(e),s=this.playerElIngest_=n,Object.keys(n).forEach(function(t){e[t]=n[t]})}if(e.setAttribute("tabindex","-1"),a.tabindex="-1",(si||ei&&ui)&&(e.setAttribute("role","application"),a.role="application"),e.removeAttribute("width"),e.removeAttribute("height"),"width"in a&&delete a.width,"height"in a&&delete a.height,Object.getOwnPropertyNames(a).forEach(function(t){o&&"class"===t||n.setAttribute(t,a[t]),o&&e.setAttribute(t,a[t])}),e.playerId=e.id,e.id+="_html5_api",e.className="vjs-tech",e.player=n.player=this,this.addClass("vjs-paused"),!0!==t.VIDEOJS_NO_DYNAMIC_STYLE){this.styleEl_=St("vjs-styles-dimensions");var u=q(".vjs-styles-defaults"),c=q("head");c.insertBefore(this.styleEl_,u?u.nextSibling:c.firstChild)}this.fill_=!1,this.fluid_=!1,this.width(this.options_.width),this.height(this.options_.height),this.fill(this.options_.fill),this.fluid(this.options_.fluid),this.aspectRatio(this.options_.aspectRatio);for(var h=e.getElementsByTagName("a"),f=0;f<h.length;f++){var l=h.item(f);C(l,"vjs-hidden"),l.setAttribute("hidden","hidden")}return e.initNetworkState_=e.networkState,e.parentNode&&!s&&e.parentNode.insertBefore(n,e),k(e,n),this.children_.unshift(e),this.el_.setAttribute("lang",this.language_),this.el_=n},a.width=function(t){return this.dimension("width",t)},a.height=function(t){return this.dimension("height",t)},a.dimension=function(t,i){var n=t+"_";if(void 0===i)return this[n]||0;if(""===i)return this[n]=void 0,void this.updateStyleEl_();var e=parseFloat(i);isNaN(e)?c.error('Improper value "'+i+'" supplied for for '+t):(this[n]=e,this.updateStyleEl_())},a.fluid=function(t){if(void 0===t)return!!this.fluid_;this.fluid_=!!t,Ot(this)&&this.off("playerreset",this.updateStyleEl_),t?(this.addClass("vjs-fluid"),this.fill(!1),function(t,i){Ot(t)?i():(t.eventedCallbacks||(t.eventedCallbacks=[]),t.eventedCallbacks.push(i))}(function(){this.on("playerreset",this.updateStyleEl_)})):this.removeClass("vjs-fluid"),this.updateStyleEl_()},a.fill=function(t){if(void 0===t)return!!this.fill_;this.fill_=!!t,t?(this.addClass("vjs-fill"),this.fluid(!1)):this.removeClass("vjs-fill")},a.aspectRatio=function(t){if(void 0===t)return this.aspectRatio_;if(!/^\d+\:\d+$/.test(t))throw new Error("Improper value supplied for aspect ratio. The format should be width:height, for example 16:9.");this.aspectRatio_=t,this.fluid(!0),this.updateStyleEl_()},a.updateStyleEl_=function(){if(!0!==t.VIDEOJS_NO_DYNAMIC_STYLE){var i,n,e,r=(void 0!==this.aspectRatio_&&"auto"!==this.aspectRatio_?this.aspectRatio_:0<this.videoWidth()?this.videoWidth()+":"+this.videoHeight():"16:9").split(":"),s=r[1]/r[0];i=void 0!==this.width_?this.width_:void 0!==this.height_?this.height_/s:this.videoWidth()||300,n=void 0!==this.height_?this.height_:i*s,e=/^[^a-zA-Z]/.test(this.id())?"dimensions-"+this.id():this.id()+"-dimensions",this.addClass(e),wt(this.styleEl_,"\n      ."+e+" {\n        width: "+i+"px;\n        height: "+n+"px;\n      }\n\n      ."+e+".vjs-fluid {\n        padding-top: "+100*s+"%;\n      }\n    ")}else{var o="number"==typeof this.width_?this.width_:this.options_.width,a="number"==typeof this.height_?this.height_:this.options_.height,u=this.tech_&&this.tech_.el();u&&(0<=o&&(u.width=o),0<=a&&(u.height=a))}},a.loadTech_=function(t,i){var n=this;this.tech_&&this.unloadTech_();var e=Ht(t),r=t.charAt(0).toLowerCase()+t.slice(1);"Html5"!==e&&this.tag&&(ir.getTech("Html5").disposeMediaElement(this.tag),this.tag.player=null,this.tag=null),this.techName_=e,this.isReady_=!1;var s={source:i,autoplay:"string"!=typeof this.autoplay()&&this.autoplay(),nativeControlsForTouch:this.options_.nativeControlsForTouch,playerId:this.id(),techId:this.id()+"_"+r+"_api",playsinline:this.options_.playsinline,preload:this.options_.preload,loop:this.options_.loop,muted:this.options_.muted,poster:this.poster(),language:this.language(),playerElIngest:this.playerElIngest_||!1,"vtt.js":this.options_["vtt.js"],canOverridePoster:!!this.options_.techCanOverridePoster,enableSourceset:this.options_.enableSourceset,Promise:this.options_.Promise};Me.names.forEach(function(t){var i=Me[t];s[i.getterName]=n[i.privateName]}),p(s,this.options_[e]),p(s,this.options_[r]),p(s,this.options_[t.toLowerCase()]),this.tag&&(s.tag=this.tag),i&&i.src===this.cache_.src&&0<this.cache_.currentTime&&(s.startTime=this.cache_.currentTime);var o=ir.getTech(t);if(!o)throw new Error("No Tech named '"+e+"' exists! '"+e+"' should be registered using videojs.registerTech()'");this.tech_=new o(s),this.tech_.ready(At(this,this.handleTechReady_),!0),function(t,i){t.forEach(function(t){var n=i.addRemoteTextTrack(t).track;!t.src&&t.cues&&t.cues.forEach(function(t){return n.addCue(t)})}),i.textTracks()}(this.textTracksJson_||[],this.tech_),Ks.forEach(function(t){n.on(n.tech_,t,n["handleTech"+Ht(t)+"_"])}),Object.keys(qs).forEach(function(t){n.on(n.tech_,t,function(i){0===n.tech_.playbackRate()&&n.tech_.seeking()?n.queuedCallbacks_.push({callback:n["handleTech"+qs[t]+"_"].bind(n),event:i}):n["handleTech"+qs[t]+"_"](i)})}),this.on(this.tech_,"loadstart",this.handleTechLoadStart_),this.on(this.tech_,"sourceset",this.handleTechSourceset_),this.on(this.tech_,"waiting",this.handleTechWaiting_),this.on(this.tech_,"ended",this.handleTechEnded_),this.on(this.tech_,"seeking",this.handleTechSeeking_),this.on(this.tech_,"play",this.handleTechPlay_),this.on(this.tech_,"firstplay",this.handleTechFirstPlay_),this.on(this.tech_,"pause",this.handleTechPause_),this.on(this.tech_,"durationchange",this.handleTechDurationChange_),this.on(this.tech_,"fullscreenchange",this.handleTechFullscreenChange_),this.on(this.tech_,"enterpictureinpicture",this.handleTechEnterPictureInPicture_),this.on(this.tech_,"leavepictureinpicture",this.handleTechLeavePictureInPicture_),this.on(this.tech_,"error",this.handleTechError_),this.on(this.tech_,"loadedmetadata",this.updateStyleEl_),this.on(this.tech_,"posterchange",this.handleTechPosterChange_),this.on(this.tech_,"textdata",this.handleTechTextData_),this.on(this.tech_,"ratechange",this.handleTechRateChange_),this.usingNativeControls(this.techGet_("controls")),this.controls()&&!this.usingNativeControls()&&this.addTechControlsListeners_(),this.tech_.el().parentNode===this.el()||"Html5"===e&&this.tag||k(this.tech_.el(),this.el()),this.tag&&(this.tag.player=null,this.tag=null)},a.unloadTech_=function(){var t=this;Me.names.forEach(function(i){var n=Me[i];t[n.privateName]=t[n.getterName]()}),this.textTracksJson_=function(t){var i=t.$$("track"),n=Array.prototype.map.call(i,function(t){return t.track});return Array.prototype.map.call(i,function(t){var i=Mi(t.track);return t.src&&(i.src=t.src),i}).concat(Array.prototype.filter.call(t.textTracks(),function(t){return-1===n.indexOf(t)}).map(Mi))}(this.tech_),this.isReady_=!1,this.tech_.dispose(),this.tech_=!1,this.isPosterFromTech_&&(this.poster_="",this.trigger("posterchange")),this.isPosterFromTech_=!1},a.tech=function(t){return void 0===t&&c.warn(f(zs())),this.tech_},a.addTechControlsListeners_=function(){this.removeTechControlsListeners_(),this.on(this.tech_,"mouseup",this.handleTechClick_),this.on(this.tech_,"dblclick",this.handleTechDoubleClick_),this.on(this.tech_,"touchstart",this.handleTechTouchStart_),this.on(this.tech_,"touchmove",this.handleTechTouchMove_),this.on(this.tech_,"touchend",this.handleTechTouchEnd_),this.on(this.tech_,"tap",this.handleTechTap_)},a.removeTechControlsListeners_=function(){this.off(this.tech_,"tap",this.handleTechTap_),this.off(this.tech_,"touchstart",this.handleTechTouchStart_),this.off(this.tech_,"touchmove",this.handleTechTouchMove_),this.off(this.tech_,"touchend",this.handleTechTouchEnd_),this.off(this.tech_,"mouseup",this.handleTechClick_),this.off(this.tech_,"dblclick",this.handleTechDoubleClick_)},a.handleTechReady_=function(){this.triggerReady(),this.cache_.volume&&this.techCall_("setVolume",this.cache_.volume),this.handleTechPosterChange_(),this.handleTechDurationChange_()},a.handleTechLoadStart_=function(){this.removeClass("vjs-ended"),this.removeClass("vjs-seeking"),this.error(null),this.handleTechDurationChange_(),this.paused()?(this.hasStarted(!1),this.trigger("loadstart")):(this.trigger("loadstart"),this.trigger("firstplay")),this.manualAutoplay_(this.autoplay())},a.manualAutoplay_=function(t){var i=this;if(this.tech_&&"string"==typeof t){function n(){var t=i.muted();function n(){i.muted(t)}i.muted(!0),i.playTerminatedQueue_.push(n);var e=i.play();if(Ai(e))return e.catch(n)}var e;if("any"===t&&!0!==this.muted()?Ai(e=this.play())&&(e=e.catch(n)):e="muted"===t&&!0!==this.muted()?n():this.play(),Ai(e))return e.then(function(){i.trigger({type:"autoplay-success",autoplay:t})}).catch(function(){i.trigger({type:"autoplay-failure",autoplay:t})})}},a.updateSourceCaches_=function(t){void 0===t&&(t="");var i=t,n="";"string"!=typeof i&&(i=t.src,n=t.type),this.cache_.source=this.cache_.source||{},this.cache_.sources=this.cache_.sources||[],i&&!n&&(n=function(t,i){if(!i)return"";if(t.cache_.source.src===i&&t.cache_.source.type)return t.cache_.source.type;var n=t.cache_.sources.filter(function(t){return t.src===i});if(n.length)return n[0].type;for(var e=t.$$("source"),r=0;r<e.length;r++){var s=e[r];if(s.type&&s.src&&s.src===i)return s.type}return hr(i)}(this,i)),this.cache_.source=jt({},t,{src:i,type:n});for(var e=this.cache_.sources.filter(function(t){return t.src&&t.src===i}),r=[],s=this.$$("source"),o=[],a=0;a<s.length;a++){var u=x(s[a]);r.push(u),u.src&&u.src===i&&o.push(u.src)}o.length&&!e.length?this.cache_.sources=r:e.length||(this.cache_.sources=[this.cache_.source]),this.cache_.src=i},a.handleTechSourceset_=function(t){var i=this;if(!this.changingSrc_){var n=function(t){return i.updateSourceCaches_(t)},e=this.currentSource().src,r=t.src;e&&!/^blob:/.test(e)&&/^blob:/.test(r)&&(this.lastSource_&&(this.lastSource_.tech===r||this.lastSource_.player===e)||(n=function(){})),n(r),t.src||this.tech_.one(["sourceset","loadstart"],function t(n){if("sourceset"!==n.type){var e=i.techGet("currentSrc");i.lastSource_.tech=e,i.updateSourceCaches_(e)}i.tech_.off(["sourceset","loadstart"],t)})}this.lastSource_={player:this.currentSource().src,tech:t.src},this.trigger({src:t.src,type:"sourceset"})},a.hasStarted=function(t){if(void 0===t)return this.hasStarted_;t!==this.hasStarted_&&(this.hasStarted_=t,this.hasStarted_?(this.addClass("vjs-has-started"),this.trigger("firstplay")):this.removeClass("vjs-has-started"))},a.handleTechPlay_=function(){this.removeClass("vjs-ended"),this.removeClass("vjs-paused"),this.addClass("vjs-playing"),this.hasStarted(!0),this.trigger("play")},a.handleTechRateChange_=function(){0<this.tech_.playbackRate()&&0===this.cache_.lastPlaybackRate&&(this.queuedCallbacks_.forEach(function(t){return t.callback(t.event)}),this.queuedCallbacks_=[]),this.cache_.lastPlaybackRate=this.tech_.playbackRate(),this.trigger("ratechange")},a.handleTechWaiting_=function(){var t=this;this.addClass("vjs-waiting"),this.trigger("waiting");var i=this.currentTime();this.on("timeupdate",function n(){i!==t.currentTime()&&(t.removeClass("vjs-waiting"),t.off("timeupdate",n))})},a.handleTechCanPlay_=function(){this.removeClass("vjs-waiting"),this.trigger("canplay")},a.handleTechCanPlayThrough_=function(){this.removeClass("vjs-waiting"),this.trigger("canplaythrough")},a.handleTechPlaying_=function(){this.removeClass("vjs-waiting"),this.trigger("playing")},a.handleTechSeeking_=function(){this.addClass("vjs-seeking"),this.trigger("seeking")},a.handleTechSeeked_=function(){this.removeClass("vjs-seeking"),this.removeClass("vjs-ended"),this.trigger("seeked")},a.handleTechFirstPlay_=function(){this.options_.starttime&&(c.warn("Passing the `starttime` option to the player will be deprecated in 6.0"),this.currentTime(this.options_.starttime)),this.addClass("vjs-has-started"),this.trigger("firstplay")},a.handleTechPause_=function(){this.removeClass("vjs-playing"),this.addClass("vjs-paused"),this.trigger("pause")},a.handleTechEnded_=function(){this.addClass("vjs-ended"),this.options_.loop?(this.currentTime(0),this.play()):this.paused()||this.pause(),this.trigger("ended")},a.handleTechDurationChange_=function(){this.duration(this.techGet_("duration"))},a.handleTechClick_=function(t){K(t)&&this.controls_&&(this.paused()?Pi(this.play()):this.pause())},a.handleTechDoubleClick_=function(t){this.controls_&&(Array.prototype.some.call(this.$$(".vjs-control-bar, .vjs-modal-dialog"),function(i){return i.contains(t.target)})||void 0!==this.options_&&void 0!==this.options_.userActions&&void 0!==this.options_.userActions.doubleClick&&!1===this.options_.userActions.doubleClick||(void 0!==this.options_&&void 0!==this.options_.userActions&&"function"==typeof this.options_.userActions.doubleClick?this.options_.userActions.doubleClick.call(this,t):this.isFullscreen()?this.exitFullscreen():this.requestFullscreen()))},a.handleTechTap_=function(){this.userActive(!this.userActive())},a.handleTechTouchStart_=function(){this.userWasActive=this.userActive()},a.handleTechTouchMove_=function(){this.userWasActive&&this.reportUserActivity()},a.handleTechTouchEnd_=function(t){t.preventDefault()},a.handleStageClick_=function(){this.reportUserActivity()},a.toggleFullscreenClass_=function(){this.isFullscreen()?this.addClass("vjs-fullscreen"):this.removeClass("vjs-fullscreen")},a.documentFullscreenChange_=function(){var t=this.el(),n=i[this.fsApi_.fullscreenElement]===t;!n&&t.matches?n=t.matches(":"+this.fsApi_.fullscreen):!n&&t.msMatchesSelector&&(n=t.msMatchesSelector(":"+this.fsApi_.fullscreen)),this.isFullscreen(n),!1===this.isFullscreen()&&ft(i,this.fsApi_.fullscreenchange,this.boundDocumentFullscreenChange_),this.fsApi_.prefixed&&this.trigger("fullscreenchange")},a.handleTechFullscreenChange_=function(t,i){i&&this.isFullscreen(i.isFullscreen),this.trigger("fullscreenchange")},a.togglePictureInPictureClass_=function(){this.isInPictureInPicture()?this.addClass("vjs-picture-in-picture"):this.removeClass("vjs-picture-in-picture")},a.handleTechEnterPictureInPicture_=function(){this.isInPictureInPicture(!0)},a.handleTechLeavePictureInPicture_=function(){this.isInPictureInPicture(!1)},a.handleTechError_=function(){var t=this.tech_.error();this.error(t)},a.handleTechTextData_=function(t,i){var n=null;1<arguments.length&&(n=i),this.trigger("textdata",n)},a.getCache=function(){return this.cache_},a.resetCache_=function(){this.cache_={currentTime:0,inactivityTimeout:this.options_.inactivityTimeout,duration:NaN,lastVolume:1,lastPlaybackRate:this.defaultPlaybackRate(),media:null,src:"",source:{},sources:[],volume:1}},a.techCall_=function(t,i){this.ready(function(){if(t in ar)return function(t,i,n,e){return i[n](t.reduce(cr(n),e))}(this.middleware_,this.tech_,t,i);if(t in ur)return sr(this.middleware_,this.tech_,t,i);try{this.tech_&&this.tech_[t](i)}catch(t){throw c(t),t}},!0)},a.techGet_=function(t){if(this.tech_&&this.tech_.isReady_){if(t in or)return function(t,i,n){return t.reduceRight(cr(n),i[n]())}(this.middleware_,this.tech_,t);if(t in ur)return sr(this.middleware_,this.tech_,t);try{return this.tech_[t]()}catch(i){if(void 0===this.tech_[t])throw c("Video.js: "+t+" method not defined for "+this.techName_+" playback technology.",i),i;if("TypeError"===i.name)throw c("Video.js: "+t+" unavailable on "+this.techName_+" playback technology element.",i),this.tech_.isReady_=!1,i;throw c(i),i}}},a.play=function(){var i=this,n=this.options_.Promise||t.Promise;return n?new n(function(t){i.play_(t)}):this.play_()},a.play_=function(t){var i=this;void 0===t&&(t=Pi),this.playCallbacks_.push(t);var n=Boolean(!this.changingSrc_&&(this.src()||this.currentSrc()));if(this.waitToPlay_&&(this.off(["ready","loadstart"],this.waitToPlay_),this.waitToPlay_=null),!this.isReady_||!n)return this.waitToPlay_=function(){i.play_()},this.one(["ready","loadstart"],this.waitToPlay_),void(n||!ai&&!Yt||this.load());var e=this.techGet_("play");null===e?this.runPlayTerminatedQueue_():this.runPlayCallbacks_(e)},a.runPlayTerminatedQueue_=function(){var t=this.playTerminatedQueue_.slice(0);this.playTerminatedQueue_=[],t.forEach(function(t){t()})},a.runPlayCallbacks_=function(t){var i=this.playCallbacks_.slice(0);this.playCallbacks_=[],this.playTerminatedQueue_=[],i.forEach(function(i){i(t)})},a.pause=function(){this.techCall_("pause")},a.paused=function(){return!1!==this.techGet_("paused")},a.played=function(){return this.techGet_("played")||di(0,0)},a.scrubbing=function(t){if(void 0===t)return this.scrubbing_;this.scrubbing_=!!t,t?this.addClass("vjs-scrubbing"):this.removeClass("vjs-scrubbing")},a.currentTime=function(t){return void 0!==t?(t<0&&(t=0),void this.techCall_("setCurrentTime",t)):(this.cache_.currentTime=this.techGet_("currentTime")||0,this.cache_.currentTime)},a.duration=function(t){if(void 0===t)return void 0!==this.cache_.duration?this.cache_.duration:NaN;(t=parseFloat(t))<0&&(t=1/0),t!==this.cache_.duration&&((this.cache_.duration=t)===1/0?(this.addClass("vjs-live"),this.options_.liveui&&this.player_.liveTracker&&this.addClass("vjs-liveui")):(this.removeClass("vjs-live"),this.removeClass("vjs-liveui")),isNaN(t)||this.trigger("durationchange"))},a.remainingTime=function(){return this.duration()-this.currentTime()},a.remainingTimeDisplay=function(){return Math.floor(this.duration())-Math.floor(this.currentTime())},a.buffered=function(){var t=this.techGet_("buffered");return t&&t.length||(t=di(0,0)),t},a.bufferedPercent=function(){return vi(this.buffered(),this.duration())},a.bufferedEnd=function(){var t=this.buffered(),i=this.duration(),n=t.end(t.length-1);return i<n&&(n=i),n},a.volume=function(t){var i;return void 0!==t?(i=Math.max(0,Math.min(1,parseFloat(t))),this.cache_.volume=i,this.techCall_("setVolume",i),void(0<i&&this.lastVolume_(i))):(i=parseFloat(this.techGet_("volume")),isNaN(i)?1:i)},a.muted=function(t){if(void 0===t)return this.techGet_("muted")||!1;this.techCall_("setMuted",t)},a.defaultMuted=function(t){return void 0!==t?this.techCall_("setDefaultMuted",t):this.techGet_("defaultMuted")||!1},a.lastVolume_=function(t){if(void 0===t||0===t)return this.cache_.lastVolume;this.cache_.lastVolume=t},a.supportsFullScreen=function(){return this.techGet_("supportsFullScreen")||!1},a.isFullscreen=function(t){return void 0!==t?(this.isFullscreen_=!!t,void this.toggleFullscreenClass_()):!!this.isFullscreen_},a.requestFullscreen=function(t){var n;this.isFullscreen(!0),this.fsApi_.requestFullscreen?(ht(i,this.fsApi_.fullscreenchange,this.boundDocumentFullscreenChange_),this.fsApi_.prefixed||(n=this.options_.fullscreen&&this.options_.fullscreen.options||{},void 0!==t&&(n=t)),Pi(this.el_[this.fsApi_.requestFullscreen](n))):this.tech_.supportsFullScreen()?this.techCall_("enterFullScreen"):(this.enterFullWindow(),this.trigger("fullscreenchange"))},a.exitFullscreen=function(){this.isFullscreen(!1),this.fsApi_.requestFullscreen?Pi(i[this.fsApi_.exitFullscreen]()):this.tech_.supportsFullScreen()?this.techCall_("exitFullScreen"):(this.exitFullWindow(),this.trigger("fullscreenchange"))},a.enterFullWindow=function(){this.isFullWindow=!0,this.docOrigOverflow=i.documentElement.style.overflow,ht(i,"keydown",this.boundFullWindowOnEscKey_),i.documentElement.style.overflow="hidden",C(i.body,"vjs-full-window"),this.trigger("enterFullWindow")},a.fullWindowOnEscKey=function(t){Ii.isEventKey(t,"Esc")&&(!0===this.isFullscreen()?this.exitFullscreen():this.exitFullWindow())},a.exitFullWindow=function(){this.isFullWindow=!1,ft(i,"keydown",this.boundFullWindowOnEscKey_),i.documentElement.style.overflow=this.docOrigOverflow,G(i.body,"vjs-full-window"),this.trigger("exitFullWindow")},a.isInPictureInPicture=function(t){return void 0!==t?(this.isInPictureInPicture_=!!t,void this.togglePictureInPictureClass_()):!!this.isInPictureInPicture_},a.requestPictureInPicture=function(){if("pictureInPictureEnabled"in i)return this.techGet_("requestPictureInPicture")},a.exitPictureInPicture=function(){if("pictureInPictureEnabled"in i)return i.exitPictureInPicture()},a.handleKeyDown=function(t){var i,n,e=this.options_.userActions;e&&e.hotkeys&&("input"===(n=(i=this.el_.ownerDocument.activeElement).tagName.toLowerCase())?-1!==["button","checkbox","hidden","radio","reset","submit"].indexOf(i.type):-1===["textarea"].indexOf(n))&&("function"==typeof e.hotkeys?e.hotkeys.call(this,t):this.handleHotkeys(t))},a.handleHotkeys=function(t){var n=this.options_.userActions?this.options_.userActions.hotkeys:{},e=n.fullscreenKey,r=n.muteKey,s=void 0===r?function(t){return Ii.isEventKey(t,"m")}:r,o=n.playPauseKey,a=void 0===o?function(t){return Ii.isEventKey(t,"k")||Ii.isEventKey(t,"Space")}:o;if((void 0===e?function(t){return Ii.isEventKey(t,"f")}:e).call(this,t)){t.preventDefault(),t.stopPropagation();var u=_t.getComponent("FullscreenToggle");!1!==i[this.fsApi_.fullscreenEnabled]&&u.prototype.handleClick.call(this,t)}else s.call(this,t)?(t.preventDefault(),t.stopPropagation(),_t.getComponent("MuteToggle").prototype.handleClick.call(this,t)):a.call(this,t)&&(t.preventDefault(),t.stopPropagation(),_t.getComponent("PlayToggle").prototype.handleClick.call(this,t))},a.canPlayType=function(t){for(var i,n=0,e=this.options_.techOrder;n<e.length;n++){var r=e[n],s=ir.getTech(r);if(s=s||_t.getComponent(r)){if(s.isSupported()&&(i=s.canPlayType(t)))return i}else c.error('The "'+r+'" tech is undefined. Skipped browser support check for that tech.')}return""},a.selectSource=function(t){function i(t,i,n){var e;return t.some(function(t){return i.some(function(i){if(e=n(t,i))return!0})}),e}function n(t,i){var n=t[0];if(t[1].canPlaySource(i,r.options_[n.toLowerCase()]))return{source:i,tech:n}}var e,r=this,s=this.options_.techOrder.map(function(t){return[t,ir.getTech(t)]}).filter(function(t){var i=t[0],n=t[1];return n?n.isSupported():(c.error('The "'+i+'" tech is undefined. Skipped browser support check for that tech.'),!1)});return(this.options_.sourceOrder?i(t,s,(e=n,function(t,i){return e(i,t)})):i(s,t,n))||!1},a.src=function(t){var i=this;if(void 0===t)return this.cache_.src||"";var n=function t(i){if(Array.isArray(i)){var n=[];i.forEach(function(i){i=t(i),Array.isArray(i)?n=n.concat(i):m(i)&&n.push(i)}),i=n}else i="string"==typeof i&&i.trim()?[lr({src:i})]:m(i)&&"string"==typeof i.src&&i.src&&i.src.trim()?[lr(i)]:[];return i}(t);n.length?(this.changingSrc_=!0,this.cache_.sources=n,this.updateSourceCaches_(n[0]),function(t,i,n){t.setTimeout(function(){return function t(i,n,e,r,s,o){void 0===i&&(i={}),void 0===n&&(n=[]),void 0===s&&(s=[]),void 0===o&&(o=!1);var a=n[0],u=n.slice(1);if("string"==typeof a)t(i,nr[a],e,r,s,o);else if(a){var c=function(t,i){var n=er[t.id()],e=null;if(null==n)return e=i(t),er[t.id()]=[[i,e]],e;for(var r=0;r<n.length;r++){var s=n[r];s[0]===i&&(e=s[1])}return null===e&&(e=i(t),n.push([i,e])),e}(r,a);if(!c.setSource)return s.push(c),t(i,u,e,r,s,o);c.setSource(p({},i),function(n,a){if(n)return t(i,u,e,r,s,o);s.push(c),t(a,i.type===a.type?u:nr[a.type],e,r,s,o)})}else u.length?t(i,u,e,r,s,o):o?e(i,s):t(i,nr["*"],e,r,s,!0)}(i,nr[i.type],n,t)},1)}(this,n[0],function(t,e){if(i.middleware_=e,i.cache_.sources=n,i.updateSourceCaches_(t),i.src_(t))return 1<n.length?i.src(n.slice(1)):(i.changingSrc_=!1,i.setTimeout(function(){this.error({code:4,message:this.localize(this.options_.notSupportedMessage)})},0),void i.triggerReady());!function(t,i){t.forEach(function(t){return t.setTech&&t.setTech(i)})}(e,i.tech_)})):this.setTimeout(function(){this.error({code:4,message:this.localize(this.options_.notSupportedMessage)})},0)},a.src_=function(t){var i=this,n=this.selectSource([t]);return!n||(function(t,i){return Ht(n.tech)===Ht(i)}(0,this.techName_)?this.ready(function(){this.tech_.constructor.prototype.hasOwnProperty("setSource")?this.techCall_("setSource",t):this.techCall_("src",t.src),this.changingSrc_=!1},!0):(this.changingSrc_=!0,this.loadTech_(n.tech,n.source),this.tech_.ready(function(){i.changingSrc_=!1})),!1)},a.load=function(){this.techCall_("load")},a.reset=function(){var i=this,n=this.options_.Promise||t.Promise;this.paused()||!n?this.doReset_():Pi(this.play().then(function(){return i.doReset_()}))},a.doReset_=function(){this.tech_&&this.tech_.clearTracks("text"),this.resetCache_(),this.poster(""),this.loadTech_(this.options_.techOrder[0],null),this.techCall_("reset"),this.resetControlBarUI_(),Ot(this)&&this.trigger("playerreset")},a.resetControlBarUI_=function(){this.resetProgressBar_(),this.resetPlaybackRate_(),this.resetVolumeBar_()},a.resetProgressBar_=function(){this.currentTime(0);var t=this.controlBar,i=t.durationDisplay,n=t.remainingTimeDisplay;i&&i.updateContent(),n&&n.updateContent()},a.resetPlaybackRate_=function(){this.playbackRate(this.defaultPlaybackRate()),this.handleTechRateChange_()},a.resetVolumeBar_=function(){this.volume(1),this.trigger("volumechange")},a.currentSources=function(){var t=this.currentSource(),i=[];return 0!==Object.keys(t).length&&i.push(t),this.cache_.sources||i},a.currentSource=function(){return this.cache_.source||{}},a.currentSrc=function(){return this.currentSource()&&this.currentSource().src||""},a.currentType=function(){return this.currentSource()&&this.currentSource().type||""},a.preload=function(t){return void 0!==t?(this.techCall_("setPreload",t),void(this.options_.preload=t)):this.techGet_("preload")},a.autoplay=function(t){if(void 0===t)return this.options_.autoplay||!1;var i;"string"==typeof t&&/(any|play|muted)/.test(t)?(this.options_.autoplay=t,this.manualAutoplay_(t),i=!1):this.options_.autoplay=!!t,i=void 0===i?this.options_.autoplay:i,this.tech_&&this.techCall_("setAutoplay",i)},a.playsinline=function(t){return void 0!==t?(this.techCall_("setPlaysinline",t),this.options_.playsinline=t,this):this.techGet_("playsinline")},a.loop=function(t){return void 0!==t?(this.techCall_("setLoop",t),void(this.options_.loop=t)):this.techGet_("loop")},a.poster=function(t){if(void 0===t)return this.poster_;(t=t||"")!==this.poster_&&(this.poster_=t,this.techCall_("setPoster",t),this.isPosterFromTech_=!1,this.trigger("posterchange"))},a.handleTechPosterChange_=function(){if((!this.poster_||this.options_.techCanOverridePoster)&&this.tech_&&this.tech_.poster){var t=this.tech_.poster()||"";t!==this.poster_&&(this.poster_=t,this.isPosterFromTech_=!0,this.trigger("posterchange"))}},a.controls=function(t){if(void 0===t)return!!this.controls_;this.controls_!==(t=!!t)&&(this.controls_=t,this.usingNativeControls()&&this.techCall_("setControls",t),this.controls_?(this.removeClass("vjs-controls-disabled"),this.addClass("vjs-controls-enabled"),this.trigger("controlsenabled"),this.usingNativeControls()||this.addTechControlsListeners_()):(this.removeClass("vjs-controls-enabled"),this.addClass("vjs-controls-disabled"),this.trigger("controlsdisabled"),this.usingNativeControls()||this.removeTechControlsListeners_()))},a.usingNativeControls=function(t){if(void 0===t)return!!this.usingNativeControls_;this.usingNativeControls_!==(t=!!t)&&(this.usingNativeControls_=t,this.usingNativeControls_?(this.addClass("vjs-using-native-controls"),this.trigger("usingnativecontrols")):(this.removeClass("vjs-using-native-controls"),this.trigger("usingcustomcontrols")))},a.error=function(t){if(void 0===t)return this.error_||null;if(this.options_.suppressNotSupportedError&&t&&t.message&&t.message===this.localize(this.options_.notSupportedMessage)){function i(){this.error(t)}return this.options_.suppressNotSupportedError=!1,this.any(["click","touchstart"],i),void this.one("loadstart",function(){this.off(["click","touchstart"],i)})}if(null===t)return this.error_=t,this.removeClass("vjs-error"),void(this.errorDisplay&&this.errorDisplay.close());this.error_=new Si(t),this.addClass("vjs-error"),c.error("(CODE:"+this.error_.code+" "+Si.errorTypes[this.error_.code]+")",this.error_.message,this.error_),this.trigger("error")},a.reportUserActivity=function(){this.userActivity_=!0},a.userActive=function(t){if(void 0===t)return this.userActive_;if((t=!!t)!==this.userActive_){if(this.userActive_=t,this.userActive_)return this.userActivity_=!0,this.removeClass("vjs-user-inactive"),this.addClass("vjs-user-active"),void this.trigger("useractive");this.tech_&&this.tech_.one("mousemove",function(t){t.stopPropagation(),t.preventDefault()}),this.userActivity_=!1,this.removeClass("vjs-user-active"),this.addClass("vjs-user-inactive"),this.trigger("userinactive")}},a.listenForUserActivity_=function(){var t,i,n,e=At(this,this.reportUserActivity);this.on("mousedown",function(){e(),this.clearInterval(t),t=this.setInterval(e,250)}),this.on("mousemove",function(t){t.screenX===i&&t.screenY===n||(i=t.screenX,n=t.screenY,e())}),this.on("mouseup",function(){e(),this.clearInterval(t)});var r,s=this.getChild("controlBar");!s||Yt||Jt||(s.on("mouseenter",function(){this.player().cache_.inactivityTimeout=this.player().options_.inactivityTimeout,this.player().options_.inactivityTimeout=0}),s.on("mouseleave",function(){this.player().options_.inactivityTimeout=this.player().cache_.inactivityTimeout})),this.on("keydown",e),this.on("keyup",e),this.setInterval(function(){if(this.userActivity_){this.userActivity_=!1,this.userActive(!0),this.clearTimeout(r);var t=this.options_.inactivityTimeout;t<=0||(r=this.setTimeout(function(){this.userActivity_||this.userActive(!1)},t))}},250)},a.playbackRate=function(t){if(void 0===t)return this.tech_&&this.tech_.featuresPlaybackRate?this.cache_.lastPlaybackRate||this.techGet_("playbackRate"):1;this.techCall_("setPlaybackRate",t)},a.defaultPlaybackRate=function(t){return void 0!==t?this.techCall_("setDefaultPlaybackRate",t):this.tech_&&this.tech_.featuresPlaybackRate?this.techGet_("defaultPlaybackRate"):1},a.isAudio=function(t){if(void 0===t)return!!this.isAudio_;this.isAudio_=!!t},a.addTextTrack=function(t,i,n){if(this.tech_)return this.tech_.addTextTrack(t,i,n)},a.addRemoteTextTrack=function(t,i){if(this.tech_)return this.tech_.addRemoteTextTrack(t,i)},a.removeRemoteTextTrack=function(t){void 0===t&&(t={});var i=t.track;if(i=i||t,this.tech_)return this.tech_.removeRemoteTextTrack(i)},a.getVideoPlaybackQuality=function(){return this.techGet_("getVideoPlaybackQuality")},a.videoWidth=function(){return this.tech_&&this.tech_.videoWidth&&this.tech_.videoWidth()||0},a.videoHeight=function(){return this.tech_&&this.tech_.videoHeight&&this.tech_.videoHeight()||0},a.language=function(t){if(void 0===t)return this.language_;this.language_=String(t).toLowerCase()},a.languages=function(){return jt(s.prototype.options_.languages,this.languages_)},a.toJSON=function(){var t=jt(this.options_),i=t.tracks;t.tracks=[];for(var n=0;n<i.length;n++){var e=i[n];(e=jt(e)).player=void 0,t.tracks[n]=e}return t},a.createModal=function(t,i){var n=this;(i=i||{}).content=t||"";var e=new Di(this,i);return this.addChild(e),e.on("dispose",function(){n.removeChild(e)}),e.open(),e},a.updateCurrentBreakpoint_=function(){if(this.responsive())for(var t=this.currentBreakpoint(),i=this.currentWidth(),n=0;n<Ys.length;n++){var e=Ys[n];if(i<=this.breakpoints_[e]){if(t===e)return;t&&this.removeClass(Qs[t]),this.addClass(Qs[e]),this.breakpoint_=e;break}}},a.removeCurrentBreakpoint_=function(){var t=this.currentBreakpointClass();this.breakpoint_="",t&&this.removeClass(t)},a.breakpoints=function(t){return void 0===t||(this.breakpoint_="",this.breakpoints_=p({},Js,t),this.updateCurrentBreakpoint_()),p(this.breakpoints_)},a.responsive=function(t){return void 0===t?this.responsive_:(t=Boolean(t))!==this.responsive_?((this.responsive_=t)?(this.on("playerresize",this.updateCurrentBreakpoint_),this.updateCurrentBreakpoint_()):(this.off("playerresize",this.updateCurrentBreakpoint_),this.removeCurrentBreakpoint_()),t):void 0},a.currentBreakpoint=function(){return this.breakpoint_},a.currentBreakpointClass=function(){return Qs[this.breakpoint_]||""},a.loadMedia=function(t,i){var n=this;if(t&&"object"==typeof t){this.reset(),this.cache_.media=jt(t);var e=this.cache_.media,r=e.poster,s=e.src,o=e.textTracks;!e.artwork&&r&&(this.cache_.media.artwork=[{src:r,type:hr(r)}]),s&&this.src(s),r&&this.poster(r),Array.isArray(o)&&o.forEach(function(t){return n.addRemoteTextTrack(t,!1)}),this.ready(i)}},a.getMedia=function(){if(this.cache_.media)return jt(this.cache_.media);var t=this.poster(),i={src:this.currentSources(),textTracks:Array.prototype.map.call(this.remoteTextTracks(),function(t){return{kind:t.kind,label:t.label,language:t.language,src:t.src}})};return t&&(i.poster=t,i.artwork=[{src:i.poster,type:hr(i.poster)}]),i},s.getTagSettings=function(t){var i={sources:[],tracks:[]},n=x(t),e=n["data-setup"];if(D(t,"vjs-fill")&&(n.fill=!0),D(t,"vjs-fluid")&&(n.fluid=!0),null!==e){var r=function(t){var i,n=null;try{i=JSON.parse(t,void 0)}catch(t){n=t}return[n,i]}(e||"{}"),s=r[0],o=r[1];s&&c.error(s),p(n,o)}if(p(i,n),t.hasChildNodes())for(var a=t.childNodes,u=0,h=a.length;u<h;u++){var f=a[u],l=f.nodeName.toLowerCase();"source"===l?i.sources.push(x(f)):"track"===l&&i.tracks.push(x(f))}return i},a.flexNotSupported_=function(){var t=i.createElement("i");return!("flexBasis"in t.style||"webkitFlexBasis"in t.style||"mozFlexBasis"in t.style||"msFlexBasis"in t.style||"msFlexOrder"in t.style)},s}(_t);Me.names.forEach(function(t){var i=Me[t];Zs.prototype[i.getterName]=function(){return this.tech_?this.tech_[i.getterName]():(this[i.privateName]=this[i.privateName]||new i.ListClass,this[i.privateName])}}),Zs.players={};var to=t.navigator;function io(t){return uo.hasOwnProperty(t)}function no(t){return io(t)?uo[t]:void 0}function eo(t,i){t[ao]=t[ao]||{},t[ao][i]=!0}function ro(t,i,n){var e=(n?"before":"")+"pluginsetup";t.trigger(e,i),t.trigger(e+":"+i.name,i)}function so(t,i){return i.prototype.name=t,function(){ro(this,{name:t,plugin:i,instance:null},!0);for(var n=arguments.length,e=new Array(n),r=0;r<n;r++)e[r]=arguments[r];var o=s(i,[this].concat(e));return this[t]=function(){return o},ro(this,o.getEventHash()),o}}Zs.prototype.options_={techOrder:ir.defaultTechOrder_,html5:{},flash:{},inactivityTimeout:2e3,playbackRates:[],liveui:!1,children:["mediaLoader","posterImage","textTrackDisplay","loadingSpinner","bigPlayButton","liveTracker","controlBar","errorDisplay","textTrackSettings","resizeManager"],language:to&&(to.languages&&to.languages[0]||to.userLanguage||to.language)||"en",languages:{},notSupportedMessage:"No compatible source was found for this media.",fullscreen:{options:{navigationUI:"hide"}},breakpoints:{},responsive:!1},["ended","seeking","seekable","networkState","readyState"].forEach(function(t){Zs.prototype[t]=function(){return this.techGet_(t)}}),Ks.forEach(function(t){Zs.prototype["handleTech"+Ht(t)+"_"]=function(){return this.trigger(t)}}),_t.registerComponent("Player",Zs);var oo="plugin",ao="activePlugins_",uo={},co=function(){function t(i){if(this.constructor===t)throw new Error("Plugin must be sub-classed; not directly instantiated.");this.player=i,xt(this),delete this.trigger,Nt(this,this.constructor.defaultState),eo(i,this.name),this.dispose=At(this,this.dispose),i.on("dispose",this.dispose)}var i=t.prototype;return i.version=function(){return this.constructor.VERSION},i.getEventHash=function(t){return void 0===t&&(t={}),t.name=this.name,t.plugin=this.constructor,t.instance=this,t},i.trigger=function(t,i){return void 0===i&&(i={}),lt(this.eventBusEl_,t,this.getEventHash(i))},i.handleStateChanged=function(){},i.dispose=function(){var t=this.name,i=this.player;this.trigger("dispose"),this.off(),i.off("dispose",this.dispose),i[ao][t]=!1,this.player=this.state=null,i[t]=so(t,uo[t])},t.isBasic=function(i){var n="string"==typeof i?no(i):i;return"function"==typeof n&&!t.prototype.isPrototypeOf(n.prototype)},t.registerPlugin=function(i,n){if("string"!=typeof i)throw new Error('Illegal plugin name, "'+i+'", must be a string, was '+typeof i+".");if(io(i))c.warn('A plugin named "'+i+'" already exists. You may want to avoid re-registering plugins!');else if(Zs.prototype.hasOwnProperty(i))throw new Error('Illegal plugin name, "'+i+'", cannot share a name with an existing player method!');if("function"!=typeof n)throw new Error('Illegal plugin for "'+i+'", must be a function, was '+typeof n+".");return uo[i]=n,i!==oo&&(Zs.prototype[i]=t.isBasic(n)?function(t,i){function n(){ro(this,{name:t,plugin:i,instance:null},!0);var n=i.apply(this,arguments);return eo(this,t),ro(this,{name:t,plugin:i,instance:n}),n}return Object.keys(i).forEach(function(t){n[t]=i[t]}),n}(i,n):so(i,n)),n},t.deregisterPlugin=function(t){if(t===oo)throw new Error("Cannot de-register base plugin.");io(t)&&(delete uo[t],delete Zs.prototype[t])},t.getPlugins=function(t){var i;return void 0===t&&(t=Object.keys(uo)),t.forEach(function(t){var n=no(t);n&&((i=i||{})[t]=n)}),i},t.getPluginVersion=function(t){var i=no(t);return i&&i.VERSION||""},t}();co.getPlugin=no,co.BASE_PLUGIN_NAME=oo,co.registerPlugin(oo,co),Zs.prototype.usingPlugin=function(t){return!!this[ao]&&!0===this[ao][t]},Zs.prototype.hasPlugin=function(t){return!!io(t)};var ho=function(t){return 0===t.indexOf("#")?t.slice(1):t};function fo(t,i,n){var e=fo.getPlayer(t);if(e)return i&&c.warn('Player "'+t+'" is already initialised. Options will not be applied.'),n&&e.ready(n),e;var r="string"==typeof t?q("#"+ho(t)):t;if(!A(r))throw new TypeError("The element or ID supplied is not valid. (videojs)");r.ownerDocument.defaultView&&r.ownerDocument.body.contains(r)||c.warn("The element supplied is not included in the DOM"),i=i||{},fo.hooks("beforesetup").forEach(function(t){var n=t(r,jt(i));m(n)&&!Array.isArray(n)?i=jt(i,n):c.error("please return an object in beforesetup hooks")});var s=_t.getComponent("Player");return e=new s(r,i,n),fo.hooks("setup").forEach(function(t){return t(e)}),e}if(fo.hooks_={},fo.hooks=function(t,i){return fo.hooks_[t]=fo.hooks_[t]||[],i&&(fo.hooks_[t]=fo.hooks_[t].concat(i)),fo.hooks_[t]},fo.hook=function(t,i){fo.hooks(t,i)},fo.hookOnce=function(t,i){fo.hooks(t,[].concat(i).map(function(i){return function n(){return fo.removeHook(t,n),i.apply(void 0,arguments)}}))},fo.removeHook=function(t,i){var n=fo.hooks(t).indexOf(i);return!(n<=-1||(fo.hooks_[t]=fo.hooks_[t].slice(),fo.hooks_[t].splice(n,1),0))},!0!==t.VIDEOJS_NO_DYNAMIC_STYLE&&w()){var lo=q(".vjs-styles-defaults");if(!lo){lo=St("vjs-styles-defaults");var vo=q("head");vo&&vo.insertBefore(lo,vo.firstChild),wt(lo,"\n      .video-js {\n        width: 300px;\n        height: 150px;\n      }\n\n      .vjs-fluid {\n        padding-top: 56.25%\n      }\n    ")}}gt(1,fo),fo.VERSION=n,fo.options=Zs.prototype.options_,fo.getPlayers=function(){return Zs.players},fo.getPlayer=function(t){var i,n=Zs.players;if("string"==typeof t){var e=ho(t),r=n[e];if(r)return r;i=q("#"+e)}else i=t;if(A(i)){var s=i.player,o=i.playerId;if(s||n[o])return s||n[o]}},fo.getAllPlayers=function(){return Object.keys(Zs.players).map(function(t){return Zs.players[t]}).filter(Boolean)},fo.players=Zs.players,fo.getComponent=_t.getComponent,fo.registerComponent=function(t,i){ir.isTech(i)&&c.warn("The "+t+" tech was registered as a component. It should instead be registered using videojs.registerTech(name, tech)"),_t.registerComponent.call(_t,t,i)},fo.getTech=ir.getTech,fo.registerTech=ir.registerTech,fo.use=function(t,i){nr[t]=nr[t]||[],nr[t].push(i)},Object.defineProperty(fo,"middleware",{value:{},writeable:!1,enumerable:!0}),Object.defineProperty(fo.middleware,"TERMINATOR",{value:rr,writeable:!1,enumerable:!0}),fo.browser=hi,fo.TOUCH_ENABLED=ci,fo.extend=function(t,i){void 0===i&&(i={});var n=function(){t.apply(this,arguments)},e={};for(var r in"object"==typeof i?(i.constructor!==Object.prototype.constructor&&(n=i.constructor),e=i):"function"==typeof i&&(n=i),function(t,i){if("function"!=typeof i&&null!==i)throw new TypeError("Super expression must either be null or a function, not "+typeof i);t.prototype=Object.create(i&&i.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),i&&(t.super_=i)}(n,t),e)e.hasOwnProperty(r)&&(n.prototype[r]=e[r]);return n},fo.mergeOptions=jt,fo.bind=At,fo.registerPlugin=co.registerPlugin,fo.deregisterPlugin=co.deregisterPlugin,fo.plugin=function(t,i){return c.warn("videojs.plugin() is deprecated; use videojs.registerPlugin() instead"),co.registerPlugin(t,i)},fo.getPlugins=co.getPlugins,fo.getPlugin=co.getPlugin,fo.getPluginVersion=co.getPluginVersion,fo.addLanguage=function(t,i){var n;return t=(""+t).toLowerCase(),(fo.options.languages=jt(fo.options.languages,((n={})[t]=i,n)))[t]},fo.log=c,fo.createLogger=h,fo.createTimeRange=fo.createTimeRanges=di,fo.formatTime=kr,fo.setFormatTime=function(t){Ir=t},fo.resetFormatTime=function(){Ir=Er},fo.parseUrl=xi,fo.isCrossOrigin=Hi,fo.EventTarget=Mt,fo.on=ht,fo.one=dt,fo.off=ft,fo.trigger=lt,fo.xhr=ve,fo.TextTrack=ye,fo.AudioTrack=ge,fo.VideoTrack=Se,["isEl","isTextNode","createEl","hasClass","addClass","removeClass","toggleClass","setAttributes","getAttributes","emptyEl","appendContent","insertContent"].forEach(function(t){fo[t]=function(){return c.warn("videojs."+t+"() is deprecated; use videojs.dom."+t+"() instead"),Q[t].apply(null,arguments)}}),fo.computedStyle=T,fo.dom=Q,fo.url=Ki;var po=Ei(function(t){var i,n,e,r,s;i=/^((?:[a-zA-Z0-9+\-.]+:)?)(\/\/[^\/?#]*)?((?:[^\/\?#]*\/)*.*?)??(;.*?)?(\?.*?)?(#.*?)?$/,n=/^([^\/?#]*)(.*)$/,e=/(?:\/|^)\.(?=\/)/g,r=/(?:\/|^)\.\.\/(?!\.\.\/).*?(?=\/)/g,s={buildAbsoluteURL:function(t,i,e){if(e=e||{},t=t.trim(),!(i=i.trim())){if(!e.alwaysNormalize)return t;var r=s.parseURL(t);if(!r)throw new Error("Error trying to parse base URL.");return r.path=s.normalizePath(r.path),s.buildURLFromParts(r)}var o=s.parseURL(i);if(!o)throw new Error("Error trying to parse relative URL.");if(o.scheme)return e.alwaysNormalize?(o.path=s.normalizePath(o.path),s.buildURLFromParts(o)):i;var a=s.parseURL(t);if(!a)throw new Error("Error trying to parse base URL.");if(!a.netLoc&&a.path&&"/"!==a.path[0]){var u=n.exec(a.path);a.netLoc=u[1],a.path=u[2]}a.netLoc&&!a.path&&(a.path="/");var c={scheme:a.scheme,netLoc:o.netLoc,path:null,params:o.params,query:o.query,fragment:o.fragment};if(!o.netLoc&&(c.netLoc=a.netLoc,"/"!==o.path[0]))if(o.path){var h=a.path,f=h.substring(0,h.lastIndexOf("/")+1)+o.path;c.path=s.normalizePath(f)}else c.path=a.path,o.params||(c.params=a.params,o.query||(c.query=a.query));return null===c.path&&(c.path=e.alwaysNormalize?s.normalizePath(o.path):o.path),s.buildURLFromParts(c)},parseURL:function(t){var n=i.exec(t);return n?{scheme:n[1]||"",netLoc:n[2]||"",path:n[3]||"",params:n[4]||"",query:n[5]||"",fragment:n[6]||""}:null},normalizePath:function(t){for(t=t.split("").reverse().join("").replace(e,"");t.length!==(t=t.replace(r,"")).length;);return t.split("").reverse().join("")},buildURLFromParts:function(t){return t.scheme+t.netLoc+t.path+t.params+t.query+t.fragment}},t.exports=s});function mo(){return(mo=Object.assign||function(t){for(var i=1;i<arguments.length;i++){var n=arguments[i];for(var e in n)Object.prototype.hasOwnProperty.call(n,e)&&(t[e]=n[e])}return t}).apply(this,arguments)}function bo(t,i){t.prototype=Object.create(i.prototype),(t.prototype.constructor=t).__proto__=i}function To(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function yo(t){for(var i,n=t.split(new RegExp('(?:^|,)((?:[^=]*)=(?:"[^"]*"|[^,]*))')),e={},r=n.length;r--;)""!==n[r]&&((i=/([^=]*)=(.*)/.exec(n[r]).slice(1))[0]=i[0].replace(/^\s+|\s+$/g,""),i[1]=i[1].replace(/^\s+|\s+$/g,""),i[1]=i[1].replace(/^['"](.*)['"]$/g,"$1"),e[i[0]]=i[1]);return e}function go(t){return!!t&&"object"==typeof t}function So(){for(var t=arguments.length,i=new Array(t),n=0;n<t;n++)i[n]=arguments[n];return i.reduce(function(t,i){return Object.keys(i).forEach(function(n){t[n]=Array.isArray(t[n])&&Array.isArray(i[n])?t[n].concat(i[n]):go(t[n])&&go(i[n])?So(t[n],i[n]):i[n]}),t},{})}function wo(t){return t.reduce(function(t,i){return t.concat(i)},[])}function Ao(t){if(!t.length)return[];for(var i=[],n=0;n<t.length;n++)i.push(t[n]);return i}var Po=function(){function t(){this.listeners={}}var i=t.prototype;return i.on=function(t,i){this.listeners[t]||(this.listeners[t]=[]),this.listeners[t].push(i)},i.off=function(t,i){if(!this.listeners[t])return!1;var n=this.listeners[t].indexOf(i);return this.listeners[t].splice(n,1),-1<n},i.trigger=function(t,i){var n,e,r,s=this.listeners[t];if(s)if(2===arguments.length)for(e=s.length,n=0;n<e;++n)s[n].call(this,i);else for(r=Array.prototype.slice.call(arguments,1),e=s.length,n=0;n<e;++n)s[n].apply(this,r)},i.dispose=function(){this.listeners={}},i.pipe=function(t){this.on("data",function(i){t.push(i)})},t}(),Mo=function(t){function i(){var i;return(i=t.call(this)||this).buffer="",i}return bo(i,t),i.prototype.push=function(t){var i;for(this.buffer+=t,i=this.buffer.indexOf("\n");-1<i;i=this.buffer.indexOf("\n"))this.trigger("data",this.buffer.substring(0,i)),this.buffer=this.buffer.substring(i+1)},i}(Po),Eo=function(t){function i(){var i;return(i=t.call(this)||this).customParsers=[],i.tagMappers=[],i}bo(i,t);var n=i.prototype;return n.push=function(t){var i,n,e=this;0!==(t=t.trim()).length&&("#"===t[0]?this.tagMappers.reduce(function(i,n){var e=n(t);return e===t?i:i.concat([e])},[t]).forEach(function(t){for(var r=0;r<e.customParsers.length;r++)if(e.customParsers[r].call(e,t))return;if(0===t.indexOf("#EXT"))if(t=t.replace("\r",""),i=/^#EXTM3U/.exec(t))e.trigger("data",{type:"tag",tagType:"m3u"});else{if(i=/^#EXTINF:?([0-9\.]*)?,?(.*)?$/.exec(t))return n={type:"tag",tagType:"inf"},i[1]&&(n.duration=parseFloat(i[1])),i[2]&&(n.title=i[2]),void e.trigger("data",n);if(i=/^#EXT-X-TARGETDURATION:?([0-9.]*)?/.exec(t))return n={type:"tag",tagType:"targetduration"},i[1]&&(n.duration=parseInt(i[1],10)),void e.trigger("data",n);if(i=/^#ZEN-TOTAL-DURATION:?([0-9.]*)?/.exec(t))return n={type:"tag",tagType:"totalduration"},i[1]&&(n.duration=parseInt(i[1],10)),void e.trigger("data",n);if(i=/^#EXT-X-VERSION:?([0-9.]*)?/.exec(t))return n={type:"tag",tagType:"version"},i[1]&&(n.version=parseInt(i[1],10)),void e.trigger("data",n);if(i=/^#EXT-X-MEDIA-SEQUENCE:?(\-?[0-9.]*)?/.exec(t))return n={type:"tag",tagType:"media-sequence"},i[1]&&(n.number=parseInt(i[1],10)),void e.trigger("data",n);if(i=/^#EXT-X-DISCONTINUITY-SEQUENCE:?(\-?[0-9.]*)?/.exec(t))return n={type:"tag",tagType:"discontinuity-sequence"},i[1]&&(n.number=parseInt(i[1],10)),void e.trigger("data",n);if(i=/^#EXT-X-PLAYLIST-TYPE:?(.*)?$/.exec(t))return n={type:"tag",tagType:"playlist-type"},i[1]&&(n.playlistType=i[1]),void e.trigger("data",n);if(i=/^#EXT-X-BYTERANGE:?([0-9.]*)?@?([0-9.]*)?/.exec(t))return n={type:"tag",tagType:"byterange"},i[1]&&(n.length=parseInt(i[1],10)),i[2]&&(n.offset=parseInt(i[2],10)),void e.trigger("data",n);if(i=/^#EXT-X-ALLOW-CACHE:?(YES|NO)?/.exec(t))return n={type:"tag",tagType:"allow-cache"},i[1]&&(n.allowed=!/NO/.test(i[1])),void e.trigger("data",n);if(i=/^#EXT-X-MAP:?(.*)$/.exec(t)){if(n={type:"tag",tagType:"map"},i[1]){var s=yo(i[1]);if(s.URI&&(n.uri=s.URI),s.BYTERANGE){var o=s.BYTERANGE.split("@"),a=o[0],u=o[1];n.byterange={},a&&(n.byterange.length=parseInt(a,10)),u&&(n.byterange.offset=parseInt(u,10))}}e.trigger("data",n)}else if(i=/^#EXT-X-STREAM-INF:?(.*)$/.exec(t)){if(n={type:"tag",tagType:"stream-inf"},i[1]){if(n.attributes=yo(i[1]),n.attributes.RESOLUTION){var c=n.attributes.RESOLUTION.split("x"),h={};c[0]&&(h.width=parseInt(c[0],10)),c[1]&&(h.height=parseInt(c[1],10)),n.attributes.RESOLUTION=h}n.attributes.BANDWIDTH&&(n.attributes.BANDWIDTH=parseInt(n.attributes.BANDWIDTH,10)),n.attributes["PROGRAM-ID"]&&(n.attributes["PROGRAM-ID"]=parseInt(n.attributes["PROGRAM-ID"],10))}e.trigger("data",n)}else{if(i=/^#EXT-X-MEDIA:?(.*)$/.exec(t))return n={type:"tag",tagType:"media"},i[1]&&(n.attributes=yo(i[1])),void e.trigger("data",n);if(i=/^#EXT-X-ENDLIST/.exec(t))e.trigger("data",{type:"tag",tagType:"endlist"});else if(i=/^#EXT-X-DISCONTINUITY/.exec(t))e.trigger("data",{type:"tag",tagType:"discontinuity"});else{if(i=/^#EXT-X-PROGRAM-DATE-TIME:?(.*)$/.exec(t))return n={type:"tag",tagType:"program-date-time"},i[1]&&(n.dateTimeString=i[1],n.dateTimeObject=new Date(i[1])),void e.trigger("data",n);if(i=/^#EXT-X-KEY:?(.*)$/.exec(t))return n={type:"tag",tagType:"key"},i[1]&&(n.attributes=yo(i[1]),n.attributes.IV&&("0x"===n.attributes.IV.substring(0,2).toLowerCase()&&(n.attributes.IV=n.attributes.IV.substring(2)),n.attributes.IV=n.attributes.IV.match(/.{8}/g),n.attributes.IV[0]=parseInt(n.attributes.IV[0],16),n.attributes.IV[1]=parseInt(n.attributes.IV[1],16),n.attributes.IV[2]=parseInt(n.attributes.IV[2],16),n.attributes.IV[3]=parseInt(n.attributes.IV[3],16),n.attributes.IV=new Uint32Array(n.attributes.IV))),void e.trigger("data",n);if(i=/^#EXT-X-START:?(.*)$/.exec(t))return n={type:"tag",tagType:"start"},i[1]&&(n.attributes=yo(i[1]),n.attributes["TIME-OFFSET"]=parseFloat(n.attributes["TIME-OFFSET"]),n.attributes.PRECISE=/YES/.test(n.attributes.PRECISE)),void e.trigger("data",n);if(i=/^#EXT-X-CUE-OUT-CONT:?(.*)?$/.exec(t))return(n={type:"tag",tagType:"cue-out-cont"}).data=i[1]?i[1]:"",void e.trigger("data",n);if(i=/^#EXT-X-CUE-OUT:?(.*)?$/.exec(t))return(n={type:"tag",tagType:"cue-out"}).data=i[1]?i[1]:"",void e.trigger("data",n);if(i=/^#EXT-X-CUE-IN:?(.*)?$/.exec(t))return(n={type:"tag",tagType:"cue-in"}).data=i[1]?i[1]:"",void e.trigger("data",n);e.trigger("data",{type:"tag",data:t.slice(4)})}}}else e.trigger("data",{type:"comment",text:t.slice(1)})}):this.trigger("data",{type:"uri",uri:t}))},n.addParser=function(t){var i=this,n=t.expression,e=t.customType,r=t.dataParser,s=t.segment;"function"!=typeof r&&(r=function(t){return t}),this.customParsers.push(function(t){if(n.exec(t))return i.trigger("data",{type:"custom",data:r(t),customType:e,segment:s}),!0})},n.addTagMapper=function(t){var i=t.expression,n=t.map;this.tagMappers.push(function(t){return i.test(t)?n(t):t})},i}(Po),Io=function(t){function i(){var i;(i=t.call(this)||this).lineStream=new Mo,i.parseStream=new Eo,i.lineStream.pipe(i.parseStream);var n,e,r=To(To(i)),s=[],o={},a={AUDIO:{},VIDEO:{},"CLOSED-CAPTIONS":{},SUBTITLES:{}},u=0;return i.manifest={allowCache:!0,discontinuityStarts:[],segments:[]},i.parseStream.on("data",function(t){var i,c;({tag:function(){({"allow-cache":function(){this.manifest.allowCache=t.allowed,"allowed"in t||(this.trigger("info",{message:"defaulting allowCache to YES"}),this.manifest.allowCache=!0)},byterange:function(){var i={};"length"in t&&((o.byterange=i).length=t.length,"offset"in t||(this.trigger("info",{message:"defaulting offset to zero"}),t.offset=0)),"offset"in t&&((o.byterange=i).offset=t.offset)},endlist:function(){this.manifest.endList=!0},inf:function(){"mediaSequence"in this.manifest||(this.manifest.mediaSequence=0,this.trigger("info",{message:"defaulting media sequence to zero"})),"discontinuitySequence"in this.manifest||(this.manifest.discontinuitySequence=0,this.trigger("info",{message:"defaulting discontinuity sequence to zero"})),0<t.duration&&(o.duration=t.duration),0===t.duration&&(o.duration=.01,this.trigger("info",{message:"updating zero segment duration to a small value"})),this.manifest.segments=s},key:function(){t.attributes?"NONE"!==t.attributes.METHOD?t.attributes.URI?(t.attributes.METHOD||this.trigger("warn",{message:"defaulting key method to AES-128"}),e={method:t.attributes.METHOD||"AES-128",uri:t.attributes.URI},void 0!==t.attributes.IV&&(e.iv=t.attributes.IV)):this.trigger("warn",{message:"ignoring key declaration without URI"}):e=null:this.trigger("warn",{message:"ignoring key declaration without attribute list"})},"media-sequence":function(){isFinite(t.number)?this.manifest.mediaSequence=t.number:this.trigger("warn",{message:"ignoring invalid media sequence: "+t.number})},"discontinuity-sequence":function(){isFinite(t.number)?(this.manifest.discontinuitySequence=t.number,u=t.number):this.trigger("warn",{message:"ignoring invalid discontinuity sequence: "+t.number})},"playlist-type":function(){/VOD|EVENT/.test(t.playlistType)?this.manifest.playlistType=t.playlistType:this.trigger("warn",{message:"ignoring unknown playlist type: "+t.playlist})},map:function(){n={},t.uri&&(n.uri=t.uri),t.byterange&&(n.byterange=t.byterange)},"stream-inf":function(){this.manifest.playlists=s,this.manifest.mediaGroups=this.manifest.mediaGroups||a,t.attributes?(o.attributes||(o.attributes={}),mo(o.attributes,t.attributes)):this.trigger("warn",{message:"ignoring empty stream-inf attributes"})},media:function(){if(this.manifest.mediaGroups=this.manifest.mediaGroups||a,t.attributes&&t.attributes.TYPE&&t.attributes["GROUP-ID"]&&t.attributes.NAME){var n=this.manifest.mediaGroups[t.attributes.TYPE];n[t.attributes["GROUP-ID"]]=n[t.attributes["GROUP-ID"]]||{},i=n[t.attributes["GROUP-ID"]],c.autoselect=!!(c={default:/yes/i.test(t.attributes.DEFAULT)}).default||/yes/i.test(t.attributes.AUTOSELECT),t.attributes.LANGUAGE&&(c.language=t.attributes.LANGUAGE),t.attributes.URI&&(c.uri=t.attributes.URI),t.attributes["INSTREAM-ID"]&&(c.instreamId=t.attributes["INSTREAM-ID"]),t.attributes.CHARACTERISTICS&&(c.characteristics=t.attributes.CHARACTERISTICS),t.attributes.FORCED&&(c.forced=/yes/i.test(t.attributes.FORCED)),i[t.attributes.NAME]=c}else this.trigger("warn",{message:"ignoring incomplete or missing media group"})},discontinuity:function(){u+=1,o.discontinuity=!0,this.manifest.discontinuityStarts.push(s.length)},"program-date-time":function(){void 0===this.manifest.dateTimeString&&(this.manifest.dateTimeString=t.dateTimeString,this.manifest.dateTimeObject=t.dateTimeObject),o.dateTimeString=t.dateTimeString,o.dateTimeObject=t.dateTimeObject},targetduration:function(){!isFinite(t.duration)||t.duration<0?this.trigger("warn",{message:"ignoring invalid target duration: "+t.duration}):this.manifest.targetDuration=t.duration},totalduration:function(){!isFinite(t.duration)||t.duration<0?this.trigger("warn",{message:"ignoring invalid total duration: "+t.duration}):this.manifest.totalDuration=t.duration},start:function(){t.attributes&&!isNaN(t.attributes["TIME-OFFSET"])?this.manifest.start={timeOffset:t.attributes["TIME-OFFSET"],precise:t.attributes.PRECISE}:this.trigger("warn",{message:"ignoring start declaration without appropriate attribute list"})},"cue-out":function(){o.cueOut=t.data},"cue-out-cont":function(){o.cueOutCont=t.data},"cue-in":function(){o.cueIn=t.data}}[t.tagType]||function(){}).call(r)},uri:function(){o.uri=t.uri,s.push(o),!this.manifest.targetDuration||"duration"in o||(this.trigger("warn",{message:"defaulting segment duration to the target duration"}),o.duration=this.manifest.targetDuration),e&&(o.key=e),o.timeline=u,n&&(o.map=n),o={}},comment:function(){},custom:function(){t.segment?(o.custom=o.custom||{},o.custom[t.customType]=t.data):(this.manifest.custom=this.manifest.custom||{},this.manifest.custom[t.customType]=t.data)}})[t.type].call(r)}),i}bo(i,t);var n=i.prototype;return n.push=function(t){this.lineStream.push(t)},n.end=function(){this.lineStream.push("\n")},n.addParser=function(t){this.parseStream.addParser(t)},n.addTagMapper=function(t){this.parseStream.addTagMapper(t)},i}(Po),ko="INVALID_NUMBER_OF_PERIOD",Do="DASH_EMPTY_MANIFEST",Co="DASH_INVALID_XML",Go="NO_BASE_URL",Oo="SEGMENT_TIME_UNSPECIFIED";function Bo(i,n){return/^[a-z]+:/i.test(n)?n:(/\/\//i.test(i)||(i=Qo.buildAbsoluteURL(t.location.href,i)),Qo.buildAbsoluteURL(i,n))}function xo(t){var i=t.baseUrl,n=t.source,e=void 0===n?"":n,r=t.range,s=void 0===r?"":r,o=t.indexRange,a=void 0===o?"":o,u={uri:e,resolvedUri:Bo((void 0===i?"":i)||"",e)};if(s||a){var c=(s||a).split("-"),h=parseInt(c[0],10),f=parseInt(c[1],10);u.byterange={length:f-h+1,offset:h}}return u}function Ro(t){var i=t.type,n=void 0===i?"static":i,e=t.duration,r=t.timescale,s=void 0===r?1:r,o=t.sourceDuration,a=Jo[n](t),u=function(t,i){for(var n=[],e=a.start;e<i;e++)n.push(e);return n}(0,a.end).map(function(t){return function(i,n){var e=t.duration,r=t.timescale,s=t.startNumber;return{number:(void 0===s?1:s)+i,duration:e/(void 0===r?1:r),timeline:t.periodIndex,time:n*e}}}(t));if("static"===n){var c=u.length-1;u[c].duration=o-e/s*c}return u}function No(t){var i=t.baseUrl,n=t.initialization,e=void 0===n?{}:n,r=t.sourceDuration,s=t.timescale,o=void 0===s?1:s,a=t.indexRange,u=void 0===a?"":a,c=t.duration;if(!i)throw new Error(Go);var h=xo({baseUrl:i,source:e.sourceURL,range:e.range}),f=xo({baseUrl:i,source:i,indexRange:u});if(f.map=h,c){var l=Ro(t);l.length&&(f.duration=l[0].duration,f.timeline=l[0].timeline)}else r&&(f.duration=r/o,f.timeline=0);return f.number=0,[f]}function Ho(t,i,n){for(var e=t.sidx.map?t.sidx.map:null,r=t.sidx.duration,s=t.timeline||0,o=t.sidx.byterange,a=o.offset+o.length,u=i.timescale,c=i.references.filter(function(t){return 1!==t.referenceType}),h=[],f=a+i.firstOffset,l=0;l<c.length;l++){var d=i.references[l],v=d.referencedSize,p=No({baseUrl:n,timescale:u,timeline:s,periodIndex:s,duration:d.subsegmentDuration,sourceDuration:r,indexRange:f+"-"+(f+v-1)})[0];e&&(p.map=e),h.push(p),f+=v}return t.segments=h,t}function jo(t){return function(t){return Object.keys(t).map(function(i){return t[i]})}(t.reduce(function(t,i){var n,e=i.attributes.id+(i.attributes.lang||"");return t[e]?(i.segments[0]&&(i.segments[0].discontinuity=!0),(n=t[e].segments).push.apply(n,i.segments),i.attributes.contentProtection&&(t[e].attributes.contentProtection=i.attributes.contentProtection)):t[e]=i,t},{})).map(function(t){return t.discontinuityStarts=function(t){return t.reduce(function(t,i,n){return i.discontinuity&&t.push(n),t},[])}(t.segments),t})}function _o(t,i){if(void 0===i&&(i={}),!Object.keys(i).length)return t;for(var n in t){var e=t[n];if(e.sidx){var r=e.sidx.uri+"-"+(o=e.sidx.byterange).offset+"-"+(o.offset+o.length-1),s=i[r]&&i[r].sidx;e.sidx&&s&&Ho(e,s,e.sidx.resolvedUri)}}var o;return t}function Uo(t){var i,n=t.attributes,e=t.segments,r=t.sidx,s={attributes:(i={NAME:n.id,AUDIO:"audio",SUBTITLES:"subs",RESOLUTION:{width:n.width,height:n.height},CODECS:n.codecs,BANDWIDTH:n.bandwidth},i["PROGRAM-ID"]=1,i),uri:"",endList:"static"===(n.type||"static"),timeline:n.periodIndex,resolvedUri:"",targetDuration:n.duration,segments:e,mediaSequence:e.length?e[0].number:1};return n.contentProtection&&(s.contentProtection=n.contentProtection),r&&(s.sidx=r),s}function Lo(t,i){for(var n,e,r,s,o,a=t.type,u=void 0===a?"static":a,c=t.minimumUpdatePeriod,h=void 0===c?0:c,f=t.media,l=void 0===f?"":f,d=t.sourceDuration,v=t.timescale,p=void 0===v?1:v,m=t.startNumber,b=void 0===m?1:m,T=t.periodIndex,y=[],g=-1,S=0;S<i.length;S++){var w=i[S],A=w.d,P=w.r||0,M=w.t||0;g<0&&(g=M),M&&g<M&&(g=M);var E=void 0;if(P<0){var I=S+1;E=I===i.length?"dynamic"===u&&0<h&&0<l.indexOf("$Number$")?(e=(n=t).NOW,r=n.timescale,s=n.start,o=n.minimumUpdatePeriod,Math.ceil((((e+n.clientOffset)/1e3+(void 0===o?0:o)-(n.availabilityStartTime+(void 0===s?0:s)))*(void 0===r?1:r)-g)/A)):(d*p-g)/A:(i[I].t-g)/A}else E=P+1;for(var k=b+y.length+E,D=b+y.length;D<k;)y.push({number:D,duration:A/p,time:g,timeline:T}),g+=A,D++}return y}function Vo(t,i){return t.replace(Zo,function(t){return function(i,n,e,r){if("$$"===i)return"$";if(void 0===t[n])return i;var s=""+t[n];return"RepresentationID"===n?s:(r=e?parseInt(r,10):1)<=s.length?s:new Array(r-s.length+1).join("0")+s}}(i))}function Fo(t,i){var n={RepresentationID:t.id,Bandwidth:t.bandwidth||0},e=t.initialization,r=void 0===e?{sourceURL:"",range:""}:e,s=xo({baseUrl:t.baseUrl,source:Vo(r.sourceURL,n),range:r.range});return function(t,i){return t.duration||i?t.duration?Ro(t):Lo(t,i):[{number:t.startNumber||1,duration:t.sourceDuration,time:0,timeline:t.periodIndex}]}(t,i).map(function(i){n.Number=i.number,n.Time=i.time;var e=Vo(t.media||"",n);return{uri:e,timeline:i.timeline,duration:i.duration,resolvedUri:Bo(t.baseUrl||"",e),map:s,number:i.number}})}function Wo(t,i){var n=t.duration,e=t.segmentUrls,r=void 0===e?[]:e;if(!n&&!i||n&&i)throw new Error(Oo);var s,o=r.map(function(i){return function(t,i){var n=t.baseUrl,e=t.initialization,r=void 0===e?{}:e,s=xo({baseUrl:n,source:r.sourceURL,range:r.range}),o=xo({baseUrl:n,source:i.media,range:i.mediaRange});return o.map=s,o}(t,i)});return n&&(s=Ro(t)),i&&(s=Lo(t,i)),s.map(function(t,i){if(o[i]){var n=o[i];return n.timeline=t.timeline,n.duration=t.duration,n.number=t.number,n}}).filter(function(t){return t})}function Xo(t){var i,n,e=t.attributes,r=t.segmentInfo;r.template?(n=Fo,i=So(e,r.template)):r.base?(n=No,i=So(e,r.base)):r.list&&(n=Wo,i=So(e,r.list));var s={attributes:e};if(!n)return s;var o=n(i,r.timeline);if(i.duration){var a=i.timescale;i.duration=i.duration/(void 0===a?1:a)}else i.duration=o.length?o.reduce(function(t,i){return Math.max(t,Math.ceil(i.duration))},0):0;return s.attributes=i,s.segments=o,r.base&&i.indexRange&&(s.sidx=o[0],s.segments=[]),s}function $o(t,i){return Ao(t.childNodes).filter(function(t){return t.tagName===i})}function zo(t){return t.textContent.trim()}function Ko(t){var i=/P(?:(\d*)Y)?(?:(\d*)M)?(?:(\d*)D)?(?:T(?:(\d*)H)?(?:(\d*)M)?(?:([\d.]*)S)?)?/.exec(t);if(!i)return 0;var n=i.slice(1),e=n[1],r=n[2],s=n[3],o=n[4],a=n[5];return 31536e3*parseFloat(n[0]||0)+2592e3*parseFloat(e||0)+86400*parseFloat(r||0)+3600*parseFloat(s||0)+60*parseFloat(o||0)+parseFloat(a||0)}function qo(t){return t&&t.attributes?Ao(t.attributes).reduce(function(t,i){return t[i.name]=(ta[i.name]||ta.DEFAULT)(i.value),t},{}):{}}var Yo,Qo=(function(t){var i,n,e,r,s;i=/^((?:[a-zA-Z0-9+\-.]+:)?)(\/\/[^\/?#]*)?((?:[^\/\?#]*\/)*.*?)??(;.*?)?(\?.*?)?(#.*?)?$/,n=/^([^\/?#]*)(.*)$/,e=/(?:\/|^)\.(?=\/)/g,r=/(?:\/|^)\.\.\/(?!\.\.\/).*?(?=\/)/g,s={buildAbsoluteURL:function(t,i,e){if(e=e||{},t=t.trim(),!(i=i.trim())){if(!e.alwaysNormalize)return t;var r=s.parseURL(t);if(!r)throw new Error("Error trying to parse base URL.");return r.path=s.normalizePath(r.path),s.buildURLFromParts(r)}var o=s.parseURL(i);if(!o)throw new Error("Error trying to parse relative URL.");if(o.scheme)return e.alwaysNormalize?(o.path=s.normalizePath(o.path),s.buildURLFromParts(o)):i;var a=s.parseURL(t);if(!a)throw new Error("Error trying to parse base URL.");if(!a.netLoc&&a.path&&"/"!==a.path[0]){var u=n.exec(a.path);a.netLoc=u[1],a.path=u[2]}a.netLoc&&!a.path&&(a.path="/");var c={scheme:a.scheme,netLoc:o.netLoc,path:null,params:o.params,query:o.query,fragment:o.fragment};if(!o.netLoc&&(c.netLoc=a.netLoc,"/"!==o.path[0]))if(o.path){var h=a.path,f=h.substring(0,h.lastIndexOf("/")+1)+o.path;c.path=s.normalizePath(f)}else c.path=a.path,o.params||(c.params=a.params,o.query||(c.query=a.query));return null===c.path&&(c.path=e.alwaysNormalize?s.normalizePath(o.path):o.path),s.buildURLFromParts(c)},parseURL:function(t){var n=i.exec(t);return n?{scheme:n[1]||"",netLoc:n[2]||"",path:n[3]||"",params:n[4]||"",query:n[5]||"",fragment:n[6]||""}:null},normalizePath:function(t){for(t=t.split("").reverse().join("").replace(e,"");t.length!==(t=t.replace(r,"")).length;);return t.split("").reverse().join("")},buildURLFromParts:function(t){return t.scheme+t.netLoc+t.path+t.params+t.query+t.fragment}},t.exports=s}(Yo={exports:{}}),Yo.exports),Jo={static:function(t){var i=t.timescale;return{start:0,end:Math.ceil(t.sourceDuration/(t.duration/(void 0===i?1:i)))}},dynamic:function(t){var i=t.timescale,n=void 0===i?1:i,e=t.duration,r=t.start,s=t.minimumUpdatePeriod,o=t.timeShiftBufferDepth,a=void 0===o?1/0:o,u=(t.NOW+t.clientOffset)/1e3,c=t.availabilityStartTime+(void 0===r?0:r),h=Math.ceil((u+(void 0===s?0:s)-c)*n/e),f=Math.floor((u-c-a)*n/e),l=Math.floor((u-c)*n/e);return{start:Math.max(0,f),end:Math.min(h,l)}}},Zo=/\$([A-z]*)(?:(%0)([0-9]+)d)?\$/g,ta={mediaPresentationDuration:function(t){return Ko(t)},availabilityStartTime:function(t){return function(t){return/^\d+-\d+-\d+T\d+:\d+:\d+(\.\d+)?$/.test(t)&&(t+="Z"),Date.parse(t)}(t)/1e3},minimumUpdatePeriod:function(t){return Ko(t)},timeShiftBufferDepth:function(t){return Ko(t)},start:function(t){return Ko(t)},width:function(t){return parseInt(t,10)},height:function(t){return parseInt(t,10)},bandwidth:function(t){return parseInt(t,10)},startNumber:function(t){return parseInt(t,10)},timescale:function(t){return parseInt(t,10)},duration:function(t){var i=parseInt(t,10);return isNaN(i)?Ko(t):i},d:function(t){return parseInt(t,10)},t:function(t){return parseInt(t,10)},r:function(t){return parseInt(t,10)},DEFAULT:function(t){return t}};function ia(t,i){return i.length?wo(t.map(function(t){return i.map(function(i){return Bo(t,zo(i))})})):t}function na(t){var i=$o(t,"SegmentTemplate")[0],n=$o(t,"SegmentList")[0],e=n&&$o(n,"SegmentURL").map(function(t){return So({tag:"SegmentURL"},qo(t))}),r=$o(t,"SegmentBase")[0],s=n||i,o=s&&$o(s,"SegmentTimeline")[0],a=n||r||i,u=a&&$o(a,"Initialization")[0],c=i&&qo(i);c&&u?c.initialization=u&&qo(u):c&&c.initialization&&(c.initialization={sourceURL:c.initialization});var h={template:c,timeline:o&&$o(o,"S").map(function(t){return qo(t)}),list:n&&So(qo(n),{segmentUrls:e,initialization:qo(u)}),base:r&&So(qo(r),{initialization:qo(u)})};return Object.keys(h).forEach(function(t){h[t]||delete h[t]}),h}function ea(i){if(""===i)throw new Error(Do);var n=(new t.DOMParser).parseFromString(i,"application/xml"),e=n&&"MPD"===n.documentElement.tagName?n.documentElement:null;if(!e||e&&0<e.getElementsByTagName("parsererror").length)throw new Error(Co);return e}function ra(i,n){return void 0===n&&(n={}),function(t,i){var n;if(void 0===i&&(i={}),!t.length)return{};var e=t[0].attributes,r=e.sourceDuration,s=e.minimumUpdatePeriod,o=void 0===s?0:s,a=jo(t.filter(function(t){var i=t.attributes;return"video/mp4"===i.mimeType||"video"===i.contentType})).map(Uo),u=jo(t.filter(function(t){var i=t.attributes;return"audio/mp4"===i.mimeType||"audio"===i.contentType})),c=t.filter(function(t){var i=t.attributes;return"text/vtt"===i.mimeType||"text"===i.contentType}),h={allowCache:!0,discontinuityStarts:[],segments:[],endList:!0,mediaGroups:(n={AUDIO:{},VIDEO:{}},n["CLOSED-CAPTIONS"]={},n.SUBTITLES={},n),uri:"",duration:r,playlists:_o(a,i),minimumUpdatePeriod:1e3*o};return u.length&&(h.mediaGroups.AUDIO.audio=function(t,i){var n;void 0===i&&(i={});var e=u.reduce(function(t,e){var r=e.attributes.role&&e.attributes.role.value||"",s=e.attributes.lang||"",o="main";return s&&(o=e.attributes.lang+(r?" ("+r+")":"")),t[o]&&t[o].playlists[0].attributes.BANDWIDTH>e.attributes.bandwidth||(t[o]={language:s,autoselect:!0,default:"main"===r,playlists:_o([function(t){var i,n=t.attributes,e=t.segments,r=t.sidx,s={attributes:(i={NAME:n.id,BANDWIDTH:n.bandwidth,CODECS:n.codecs},i["PROGRAM-ID"]=1,i),uri:"",endList:"static"===(n.type||"static"),timeline:n.periodIndex,resolvedUri:"",targetDuration:n.duration,segments:e,mediaSequence:e.length?e[0].number:1};return n.contentProtection&&(s.contentProtection=n.contentProtection),r&&(s.sidx=r),s}(e)],i),uri:""},void 0===n&&"main"===r&&((n=e).default=!0)),t},{});return n||(e[Object.keys(e)[0]].default=!0),e}(0,i)),c.length&&(h.mediaGroups.SUBTITLES.subs=function(t,i){return void 0===i&&(i={}),c.reduce(function(t,n){var e=n.attributes.lang||"text";return t[e]||(t[e]={language:e,default:!1,autoselect:!1,playlists:_o([function(t){var i,n=t.attributes,e=t.segments;return void 0===e&&(e=[{uri:n.baseUrl,timeline:n.periodIndex,resolvedUri:n.baseUrl||"",duration:n.sourceDuration,number:0}],n.duration=n.sourceDuration),{attributes:(i={NAME:n.id,BANDWIDTH:n.bandwidth},i["PROGRAM-ID"]=1,i),uri:"",endList:"static"===(n.type||"static"),timeline:n.periodIndex,resolvedUri:n.baseUrl||"",targetDuration:n.duration,segments:e,mediaSequence:e.length?e[0].number:1}}(n)],i),uri:""}),t},{})}(0,i)),h}(function(t){return t.map(Xo)}(function(i,n){void 0===n&&(n={});var e=n,r=e.manifestUri,s=void 0===r?"":r,o=e.NOW,a=void 0===o?Date.now():o,u=e.clientOffset,c=void 0===u?0:u,h=$o(i,"Period");if(!h.length)throw new Error(ko);var f=qo(i),l=ia([s],$o(i,"BaseURL"));return f.sourceDuration=f.mediaPresentationDuration||0,f.NOW=a,f.clientOffset=c,wo(h.map(function(i,n){return function(e,r){var s=ia(n,$o(e,"BaseURL")),o=qo(e),a=parseInt(o.id,10),u=t.isNaN(a)?r:a,c=So(i,{periodIndex:u}),h=$o(e,"AdaptationSet"),f=na(e);return wo(h.map(function(i,n,e){return function(r){var s=qo(r),o=ia(n,$o(r,"BaseURL")),a={role:qo($o(r,"Role")[0])},u=So(i,s,a),c=function(i){return i.reduce(function(i,n){var e=qo(n),r=ha[e.schemeIdUri];if(r){i[r]={attributes:e};var s=$o(n,"cenc:pssh")[0];if(s){var o=zo(s),a=o&&function(){for(var i=t.atob(o),n=new Uint8Array(i.length),e=0;e<i.length;e++)n[e]=i.charCodeAt(e);return n}();i[r].pssh=a}}return i},{})}($o(r,"ContentProtection"));Object.keys(c).length&&(u=So(u,{contentProtection:c}));var h=na(r),f=$o(r,"Representation"),l=So(e,h);return wo(f.map(function(t,i,n){return function(e){var r=$o(e,"BaseURL"),s=ia(i,r),o=So(t,qo(e)),a=na(e);return s.map(function(t){return{segmentInfo:So(n,a),attributes:So(o,{baseUrl:t})}})}}(u,o,l)))}}(c,s,f)))}}(f,l)))}(ea(i),n)),n.sidxMapping)}var sa,oa,aa,ua,ca,ha={"urn:uuid:1077efec-c0b2-4d02-ace3-3c1e52e2fb4b":"org.w3.clearkey","urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed":"com.widevine.alpha","urn:uuid:9a04f079-9840-4286-ab92-e65be0885f95":"com.microsoft.playready","urn:uuid:f239e769-efa3-4850-9c16-a903c6932efb":"com.adobe.primetime"},fa=function(t){return t>>>0};function la(t){return new Date(1e3*t-20828448e5)}function da(t){return{isLeading:(12&t[0])>>>2,dependsOn:3&t[0],isDependedOn:(192&t[1])>>>6,hasRedundancy:(48&t[1])>>>4,paddingValue:(14&t[1])>>>1,isNonSyncSample:1&t[1],degradationPriority:t[2]<<8|t[3]}}aa=function(t){return sa(t,["moov","trak"]).reduce(function(t,i){var n,e,r,s;return(n=sa(i,["tkhd"])[0])?(r=fa(n[e=0===n[0]?12:20]<<24|n[e+1]<<16|n[e+2]<<8|n[e+3]),(s=sa(i,["mdia","mdhd"])[0])?(t[r]=fa(s[e=0===s[0]?12:20]<<24|s[e+1]<<16|s[e+2]<<8|s[e+3]),t):null):null},{})},ua=function(t,i){var n,e,r;return n=sa(i,["moof","traf"]),e=[].concat.apply([],n.map(function(i){return sa(i,["tfhd"]).map(function(n){var e,r;return e=fa(n[4]<<24|n[5]<<16|n[6]<<8|n[7]),r=t[e]||9e4,(sa(i,["tfdt"]).map(function(t){var i,n;return i=t[0],n=fa(t[4]<<24|t[5]<<16|t[6]<<8|t[7]),1===i&&(n*=Math.pow(2,32),n+=fa(t[8]<<24|t[9]<<16|t[10]<<8|t[11])),n})[0]||1/0)/r})})),r=Math.min.apply(null,e),isFinite(r)?r:0},ca=function(t){var i=sa(t,["moov","trak"]),n=[];return i.forEach(function(t){var i=sa(t,["mdia","hdlr"]),e=sa(t,["tkhd"]);i.forEach(function(t,i){var r,s,o=oa(t.subarray(8,12)),a=e[i];"vide"===o&&(s=0===(r=new DataView(a.buffer,a.byteOffset,a.byteLength)).getUint8(0)?r.getUint32(12):r.getUint32(20),n.push(s))})}),n};var va,pa,ma,ba,Ta,ya,ga,Sa,wa,Aa,Pa,Ma,Ea,Ia,ka,Da,Ca,Ga,Oa,Ba,xa,Ra,Na,Ha,ja,_a,Ua,La,Va,Fa,Wa,Xa,$a,za,Ka,qa,Ya,Qa,Ja,Za,tu,iu,nu={findBox:sa=function(t,i){var n,e,r,s,o,a=[];if(!i.length)return null;for(n=0;n<t.byteLength;)e=fa(t[n]<<24|t[n+1]<<16|t[n+2]<<8|t[n+3]),r=oa(t.subarray(n+4,n+8)),s=1<e?n+e:t.byteLength,r===i[0]&&(1===i.length?a.push(t.subarray(n+8,s)):(o=sa(t.subarray(n+8,s),i.slice(1))).length&&(a=a.concat(o))),n=s;return a},parseType:oa=function(t){var i="";return i+=String.fromCharCode(t[0]),i+=String.fromCharCode(t[1]),(i+=String.fromCharCode(t[2]))+String.fromCharCode(t[3])},timescale:aa,startTime:ua,videoTrackIds:ca},eu=nu.parseType,ru={avc1:function(t){var i=new DataView(t.buffer,t.byteOffset,t.byteLength);return{dataReferenceIndex:i.getUint16(6),width:i.getUint16(24),height:i.getUint16(26),horizresolution:i.getUint16(28)+i.getUint16(30)/16,vertresolution:i.getUint16(32)+i.getUint16(34)/16,frameCount:i.getUint16(40),depth:i.getUint16(74),config:va(t.subarray(78,t.byteLength))}},avcC:function(t){var i,n,e,r,s=new DataView(t.buffer,t.byteOffset,t.byteLength),o={configurationVersion:t[0],avcProfileIndication:t[1],profileCompatibility:t[2],avcLevelIndication:t[3],lengthSizeMinusOne:3&t[4],sps:[],pps:[]},a=31&t[5];for(e=6,r=0;r<a;r++)n=s.getUint16(e),e+=2,o.sps.push(new Uint8Array(t.subarray(e,e+n))),e+=n;for(i=t[e],e++,r=0;r<i;r++)n=s.getUint16(e),e+=2,o.pps.push(new Uint8Array(t.subarray(e,e+n))),e+=n;return o},btrt:function(t){var i=new DataView(t.buffer,t.byteOffset,t.byteLength);return{bufferSizeDB:i.getUint32(0),maxBitrate:i.getUint32(4),avgBitrate:i.getUint32(8)}},esds:function(t){return{version:t[0],flags:new Uint8Array(t.subarray(1,4)),esId:t[6]<<8|t[7],streamPriority:31&t[8],decoderConfig:{objectProfileIndication:t[11],streamType:t[12]>>>2&63,bufferSize:t[13]<<16|t[14]<<8|t[15],maxBitrate:t[16]<<24|t[17]<<16|t[18]<<8|t[19],avgBitrate:t[20]<<24|t[21]<<16|t[22]<<8|t[23],decoderConfigDescriptor:{tag:t[24],length:t[25],audioObjectType:t[26]>>>3&31,samplingFrequencyIndex:(7&t[26])<<1|t[27]>>>7&1,channelConfiguration:t[27]>>>3&15}}}},ftyp:function(t){for(var i=new DataView(t.buffer,t.byteOffset,t.byteLength),n={majorBrand:eu(t.subarray(0,4)),minorVersion:i.getUint32(4),compatibleBrands:[]},e=8;e<t.byteLength;)n.compatibleBrands.push(eu(t.subarray(e,e+4))),e+=4;return n},dinf:function(t){return{boxes:va(t)}},dref:function(t){return{version:t[0],flags:new Uint8Array(t.subarray(1,4)),dataReferences:va(t.subarray(8))}},hdlr:function(t){var i={version:new DataView(t.buffer,t.byteOffset,t.byteLength).getUint8(0),flags:new Uint8Array(t.subarray(1,4)),handlerType:eu(t.subarray(8,12)),name:""},n=8;for(n=24;n<t.byteLength;n++){if(0===t[n]){n++;break}i.name+=String.fromCharCode(t[n])}return i.name=decodeURIComponent(escape(i.name)),i},mdat:function(t){return{byteLength:t.byteLength,nals:function(t){var i,n,e=new DataView(t.buffer,t.byteOffset,t.byteLength),r=[];for(i=0;i+4<t.length;i+=n)if(n=e.getUint32(i),i+=4,n<=0)r.push("<span style='color:red;'>MALFORMED DATA</span>");else switch(31&t[i]){case 1:r.push("slice_layer_without_partitioning_rbsp");break;case 5:r.push("slice_layer_without_partitioning_rbsp_idr");break;case 6:r.push("sei_rbsp");break;case 7:r.push("seq_parameter_set_rbsp");break;case 8:r.push("pic_parameter_set_rbsp");break;case 9:r.push("access_unit_delimiter_rbsp");break;default:r.push("UNKNOWN NAL - "+t[i]&31)}return r}(t)}},mdhd:function(t){var i,n=new DataView(t.buffer,t.byteOffset,t.byteLength),e=4,r={version:n.getUint8(0),flags:new Uint8Array(t.subarray(1,4)),language:""};return 1===r.version?(r.creationTime=la(n.getUint32(e+=4)),r.modificationTime=la(n.getUint32(e+=8)),r.timescale=n.getUint32(e+=4),e+=8):(r.creationTime=la(n.getUint32(e)),r.modificationTime=la(n.getUint32(e+=4)),r.timescale=n.getUint32(e+=4),e+=4),r.duration=n.getUint32(e),i=n.getUint16(e+=4),r.language+=String.fromCharCode(96+(i>>10)),r.language+=String.fromCharCode(96+((992&i)>>5)),r.language+=String.fromCharCode(96+(31&i)),r},mdia:function(t){return{boxes:va(t)}},mfhd:function(t){return{version:t[0],flags:new Uint8Array(t.subarray(1,4)),sequenceNumber:t[4]<<24|t[5]<<16|t[6]<<8|t[7]}},minf:function(t){return{boxes:va(t)}},mp4a:function(t){var i=new DataView(t.buffer,t.byteOffset,t.byteLength),n={dataReferenceIndex:i.getUint16(6),channelcount:i.getUint16(16),samplesize:i.getUint16(18),samplerate:i.getUint16(24)+i.getUint16(26)/65536};return 28<t.byteLength&&(n.streamDescriptor=va(t.subarray(28))[0]),n},moof:function(t){return{boxes:va(t)}},moov:function(t){return{boxes:va(t)}},mvex:function(t){return{boxes:va(t)}},mvhd:function(t){var i=new DataView(t.buffer,t.byteOffset,t.byteLength),n=4,e={version:i.getUint8(0),flags:new Uint8Array(t.subarray(1,4))};return 1===e.version?(e.creationTime=la(i.getUint32(n+=4)),e.modificationTime=la(i.getUint32(n+=8)),e.timescale=i.getUint32(n+=4),n+=8):(e.creationTime=la(i.getUint32(n)),e.modificationTime=la(i.getUint32(n+=4)),e.timescale=i.getUint32(n+=4),n+=4),e.duration=i.getUint32(n),e.rate=i.getUint16(n+=4)+i.getUint16(n+2)/16,e.volume=i.getUint8(n+=4)+i.getUint8(n+1)/8,n+=2,n+=2,n+=8,e.matrix=new Uint32Array(t.subarray(n,n+36)),n+=36,e.nextTrackId=i.getUint32(n+=24),e},pdin:function(t){var i=new DataView(t.buffer,t.byteOffset,t.byteLength);return{version:i.getUint8(0),flags:new Uint8Array(t.subarray(1,4)),rate:i.getUint32(4),initialDelay:i.getUint32(8)}},sdtp:function(t){var i,n={version:t[0],flags:new Uint8Array(t.subarray(1,4)),samples:[]};for(i=4;i<t.byteLength;i++)n.samples.push({dependsOn:(48&t[i])>>4,isDependedOn:(12&t[i])>>2,hasRedundancy:3&t[i]});return n},sidx:function(t){var i,n=new DataView(t.buffer,t.byteOffset,t.byteLength),e={version:t[0],flags:new Uint8Array(t.subarray(1,4)),references:[],referenceId:n.getUint32(4),timescale:n.getUint32(8),earliestPresentationTime:n.getUint32(12),firstOffset:n.getUint32(16)},r=n.getUint16(22);for(i=24;r;i+=12,r--)e.references.push({referenceType:(128&t[i])>>>7,referencedSize:2147483647&n.getUint32(i),subsegmentDuration:n.getUint32(i+4),startsWithSap:!!(128&t[i+8]),sapType:(112&t[i+8])>>>4,sapDeltaTime:268435455&n.getUint32(i+8)});return e},smhd:function(t){return{version:t[0],flags:new Uint8Array(t.subarray(1,4)),balance:t[4]+t[5]/256}},stbl:function(t){return{boxes:va(t)}},stco:function(t){var i,n=new DataView(t.buffer,t.byteOffset,t.byteLength),e={version:t[0],flags:new Uint8Array(t.subarray(1,4)),chunkOffsets:[]},r=n.getUint32(4);for(i=8;r;i+=4,r--)e.chunkOffsets.push(n.getUint32(i));return e},stsc:function(t){var i,n=new DataView(t.buffer,t.byteOffset,t.byteLength),e=n.getUint32(4),r={version:t[0],flags:new Uint8Array(t.subarray(1,4)),sampleToChunks:[]};for(i=8;e;i+=12,e--)r.sampleToChunks.push({firstChunk:n.getUint32(i),samplesPerChunk:n.getUint32(i+4),sampleDescriptionIndex:n.getUint32(i+8)});return r},stsd:function(t){return{version:t[0],flags:new Uint8Array(t.subarray(1,4)),sampleDescriptions:va(t.subarray(8))}},stsz:function(t){var i,n=new DataView(t.buffer,t.byteOffset,t.byteLength),e={version:t[0],flags:new Uint8Array(t.subarray(1,4)),sampleSize:n.getUint32(4),entries:[]};for(i=12;i<t.byteLength;i+=4)e.entries.push(n.getUint32(i));return e},stts:function(t){var i,n=new DataView(t.buffer,t.byteOffset,t.byteLength),e={version:t[0],flags:new Uint8Array(t.subarray(1,4)),timeToSamples:[]},r=n.getUint32(4);for(i=8;r;i+=8,r--)e.timeToSamples.push({sampleCount:n.getUint32(i),sampleDelta:n.getUint32(i+4)});return e},styp:function(t){return ru.ftyp(t)},tfdt:function(t){var i={version:t[0],flags:new Uint8Array(t.subarray(1,4)),baseMediaDecodeTime:t[4]<<24|t[5]<<16|t[6]<<8|t[7]};return 1===i.version&&(i.baseMediaDecodeTime*=Math.pow(2,32),i.baseMediaDecodeTime+=t[8]<<24|t[9]<<16|t[10]<<8|t[11]),i},tfhd:function(t){var i,n=new DataView(t.buffer,t.byteOffset,t.byteLength),e={version:t[0],flags:new Uint8Array(t.subarray(1,4)),trackId:n.getUint32(4)},r=1&e.flags[2],s=2&e.flags[2],o=8&e.flags[2],a=16&e.flags[2],u=32&e.flags[2],c=65536&e.flags[0],h=131072&e.flags[0];return i=8,r&&(i+=4,e.baseDataOffset=n.getUint32(12),i+=4),s&&(e.sampleDescriptionIndex=n.getUint32(i),i+=4),o&&(e.defaultSampleDuration=n.getUint32(i),i+=4),a&&(e.defaultSampleSize=n.getUint32(i),i+=4),u&&(e.defaultSampleFlags=n.getUint32(i)),c&&(e.durationIsEmpty=!0),!r&&h&&(e.baseDataOffsetIsMoof=!0),e},tkhd:function(t){var i=new DataView(t.buffer,t.byteOffset,t.byteLength),n=4,e={version:i.getUint8(0),flags:new Uint8Array(t.subarray(1,4))};return 1===e.version?(e.creationTime=la(i.getUint32(n+=4)),e.modificationTime=la(i.getUint32(n+=8)),e.trackId=i.getUint32(n+=4),n+=4,n+=8):(e.creationTime=la(i.getUint32(n)),e.modificationTime=la(i.getUint32(n+=4)),e.trackId=i.getUint32(n+=4),n+=4,n+=4),e.duration=i.getUint32(n),n+=4,e.layer=i.getUint16(n+=8),e.alternateGroup=i.getUint16(n+=2),e.volume=i.getUint8(n+=2)+i.getUint8(n+1)/8,n+=2,n+=2,e.matrix=new Uint32Array(t.subarray(n,n+36)),e.width=i.getUint16(n+=36)+i.getUint16(n+2)/16,e.height=i.getUint16(n+=4)+i.getUint16(n+2)/16,e},traf:function(t){return{boxes:va(t)}},trak:function(t){return{boxes:va(t)}},trex:function(t){var i=new DataView(t.buffer,t.byteOffset,t.byteLength);return{version:t[0],flags:new Uint8Array(t.subarray(1,4)),trackId:i.getUint32(4),defaultSampleDescriptionIndex:i.getUint32(8),defaultSampleDuration:i.getUint32(12),defaultSampleSize:i.getUint32(16),sampleDependsOn:3&t[20],sampleIsDependedOn:(192&t[21])>>6,sampleHasRedundancy:(48&t[21])>>4,samplePaddingValue:(14&t[21])>>1,sampleIsDifferenceSample:!!(1&t[21]),sampleDegradationPriority:i.getUint16(22)}},trun:function(t){var i,n={version:t[0],flags:new Uint8Array(t.subarray(1,4)),samples:[]},e=new DataView(t.buffer,t.byteOffset,t.byteLength),r=1&n.flags[2],s=4&n.flags[2],o=1&n.flags[1],a=2&n.flags[1],u=4&n.flags[1],c=8&n.flags[1],h=e.getUint32(4),f=8;for(r&&(n.dataOffset=e.getInt32(f),f+=4),s&&h&&(i={flags:da(t.subarray(f,f+4))},f+=4,o&&(i.duration=e.getUint32(f),f+=4),a&&(i.size=e.getUint32(f),f+=4),c&&(i.compositionTimeOffset=e.getUint32(f),f+=4),n.samples.push(i),h--);h--;)i={},o&&(i.duration=e.getUint32(f),f+=4),a&&(i.size=e.getUint32(f),f+=4),u&&(i.flags=da(t.subarray(f,f+4)),f+=4),c&&(i.compositionTimeOffset=e.getUint32(f),f+=4),n.samples.push(i);return n},"url ":function(t){return{version:t[0],flags:new Uint8Array(t.subarray(1,4))}},vmhd:function(t){var i=new DataView(t.buffer,t.byteOffset,t.byteLength);return{version:t[0],flags:new Uint8Array(t.subarray(1,4)),graphicsmode:i.getUint16(4),opcolor:new Uint16Array([i.getUint16(6),i.getUint16(8),i.getUint16(10)])}}},su={inspect:va=function(t){for(var i,n,e,r,s,o=0,a=[],u=new ArrayBuffer(t.length),c=new Uint8Array(u),h=0;h<t.length;++h)c[h]=t[h];for(i=new DataView(u);o<t.byteLength;)n=i.getUint32(o),e=eu(t.subarray(o+4,o+8)),(s=(ru[e]||function(t){return{data:t}})(t.subarray(o+8,r=1<n?o+n:t.byteLength))).size=n,s.type=e,a.push(s),o=r;return a},textify:pa=function(t,i){var n;return i=i||0,n=new Array(2*i+1).join(" "),t.map(function(t){return n+t.type+"\n"+Object.keys(t).filter(function(t){return"type"!==t&&"boxes"!==t}).map(function(i){var e=n+"  "+i+": ",r=t[i];if(r instanceof Uint8Array||r instanceof Uint32Array){var s=Array.prototype.slice.call(new Uint8Array(r.buffer,r.byteOffset,r.byteLength)).map(function(t){return" "+("00"+t.toString(16)).slice(-2)}).join("").match(/.{1,24}/g);return s?1===s.length?e+"<"+s.join("").slice(1)+">":e+"<\n"+s.map(function(t){return n+"  "+t}).join("\n")+"\n"+n+"  >":e+"<>"}return e+JSON.stringify(r,null,2).split("\n").map(function(t,i){return 0===i?t:n+"  "+t}).join("\n")}).join("\n")+(t.boxes?"\n"+pa(t.boxes,i+1):"")}).join("\n")},parseTfdt:ru.tfdt,parseHdlr:ru.hdlr,parseTfhd:ru.tfhd,parseTrun:ru.trun,parseSidx:ru.sidx},ou=Math.pow(2,32)-1;function au(){this.init=function(){var t={};this.on=function(i,n){t[i]||(t[i]=[]),t[i]=t[i].concat(n)},this.off=function(i,n){var e;return!!t[i]&&(e=t[i].indexOf(n),t[i]=t[i].slice(),t[i].splice(e,1),-1<e)},this.trigger=function(i){var n,e,r,s;if(n=t[i])if(2===arguments.length)for(r=n.length,e=0;e<r;++e)n[e].call(this,arguments[1]);else{for(s=[],e=arguments.length,e=1;e<arguments.length;++e)s.push(arguments[e]);for(r=n.length,e=0;e<r;++e)n[e].apply(this,s)}},this.dispose=function(){t={}}}}!function(){var t;if(Ha={avc1:[],avcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],mvex:[],mvhd:[],sdtp:[],smhd:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],styp:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[]},"undefined"!=typeof Uint8Array){for(t in Ha)Ha.hasOwnProperty(t)&&(Ha[t]=[t.charCodeAt(0),t.charCodeAt(1),t.charCodeAt(2),t.charCodeAt(3)]);ja=new Uint8Array(["i".charCodeAt(0),"s".charCodeAt(0),"o".charCodeAt(0),"m".charCodeAt(0)]),Ua=new Uint8Array(["a".charCodeAt(0),"v".charCodeAt(0),"c".charCodeAt(0),"1".charCodeAt(0)]),_a=new Uint8Array([0,0,0,1]),La=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),Va=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]),Fa={video:La,audio:Va},$a=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),Xa=new Uint8Array([0,0,0,0,0,0,0,0]),za=new Uint8Array([0,0,0,0,0,0,0,0]),Ka=za,qa=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),Ya=za,Wa=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0])}}(),ma=function(t){var i,n,e=[],r=0;for(i=1;i<arguments.length;i++)e.push(arguments[i]);for(i=e.length;i--;)r+=e[i].byteLength;for(n=new Uint8Array(r+8),new DataView(n.buffer,n.byteOffset,n.byteLength).setUint32(0,n.byteLength),n.set(t,4),i=0,r=8;i<e.length;i++)n.set(e[i],r),r+=e[i].byteLength;return n},ba=function(){return ma(Ha.dinf,ma(Ha.dref,$a))},Ta=function(t){return ma(Ha.esds,new Uint8Array([0,0,0,0,3,25,0,0,0,4,17,64,21,0,6,0,0,0,218,192,0,0,218,192,5,2,t.audioobjecttype<<3|t.samplingfrequencyindex>>>1,t.samplingfrequencyindex<<7|t.channelcount<<3,6,1,2]))},Ca=function(t){return ma(Ha.hdlr,Fa[t])},Da=function(t){var i=new Uint8Array([0,0,0,0,0,0,0,2,0,0,0,3,0,1,95,144,t.duration>>>24&255,t.duration>>>16&255,t.duration>>>8&255,255&t.duration,85,196,0,0]);return t.samplerate&&(i[12]=t.samplerate>>>24&255,i[13]=t.samplerate>>>16&255,i[14]=t.samplerate>>>8&255,i[15]=255&t.samplerate),ma(Ha.mdhd,i)},ka=function(t){return ma(Ha.mdia,Da(t),Ca(t.type),Sa(t))},ga=function(t){return ma(Ha.mfhd,new Uint8Array([0,0,0,0,(4278190080&t)>>24,(16711680&t)>>16,(65280&t)>>8,255&t]))},Sa=function(t){return ma(Ha.minf,"video"===t.type?ma(Ha.vmhd,Wa):ma(Ha.smhd,Xa),ba(),Oa(t))},wa=function(t,i){for(var n=[],e=i.length;e--;)n[e]=xa(i[e]);return ma.apply(null,[Ha.moof,ga(t)].concat(n))},Aa=function(t){for(var i=t.length,n=[];i--;)n[i]=Ea(t[i]);return ma.apply(null,[Ha.moov,Ma(4294967295)].concat(n).concat(Pa(t)))},Pa=function(t){for(var i=t.length,n=[];i--;)n[i]=Ra(t[i]);return ma.apply(null,[Ha.mvex].concat(n))},Ma=function(t){var i=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,2,0,1,95,144,(4278190080&t)>>24,(16711680&t)>>16,(65280&t)>>8,255&t,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]);return ma(Ha.mvhd,i)},Ga=function(t){var i,n,e=t.samples||[],r=new Uint8Array(4+e.length);for(n=0;n<e.length;n++)r[n+4]=(i=e[n].flags).dependsOn<<4|i.isDependedOn<<2|i.hasRedundancy;return ma(Ha.sdtp,r)},Oa=function(t){return ma(Ha.stbl,Ba(t),ma(Ha.stts,Ya),ma(Ha.stsc,Ka),ma(Ha.stsz,qa),ma(Ha.stco,za))},Ba=function(t){return ma(Ha.stsd,new Uint8Array([0,0,0,0,0,0,0,1]),"video"===t.type?Qa(t):Ja(t))},Qa=function(t){var i,n=t.sps||[],e=t.pps||[],r=[],s=[];for(i=0;i<n.length;i++)r.push((65280&n[i].byteLength)>>>8),r.push(255&n[i].byteLength),r=r.concat(Array.prototype.slice.call(n[i]));for(i=0;i<e.length;i++)s.push((65280&e[i].byteLength)>>>8),s.push(255&e[i].byteLength),s=s.concat(Array.prototype.slice.call(e[i]));return ma(Ha.avc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,(65280&t.width)>>8,255&t.width,(65280&t.height)>>8,255&t.height,0,72,0,0,0,72,0,0,0,0,0,0,0,1,19,118,105,100,101,111,106,115,45,99,111,110,116,114,105,98,45,104,108,115,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),ma(Ha.avcC,new Uint8Array([1,t.profileIdc,t.profileCompatibility,t.levelIdc,255].concat([n.length]).concat(r).concat([e.length]).concat(s))),ma(Ha.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192])))},Ja=function(t){return ma(Ha.mp4a,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,(65280&t.channelcount)>>8,255&t.channelcount,(65280&t.samplesize)>>8,255&t.samplesize,0,0,0,0,(65280&t.samplerate)>>8,255&t.samplerate,0,0]),Ta(t))},Ia=function(t){var i=new Uint8Array([0,0,0,7,0,0,0,0,0,0,0,0,(4278190080&t.id)>>24,(16711680&t.id)>>16,(65280&t.id)>>8,255&t.id,0,0,0,0,(4278190080&t.duration)>>24,(16711680&t.duration)>>16,(65280&t.duration)>>8,255&t.duration,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,(65280&t.width)>>8,255&t.width,0,0,(65280&t.height)>>8,255&t.height,0,0]);return ma(Ha.tkhd,i)},xa=function(t){var i,n,e,r,s,o;return i=ma(Ha.tfhd,new Uint8Array([0,0,0,58,(4278190080&t.id)>>24,(16711680&t.id)>>16,(65280&t.id)>>8,255&t.id,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0])),s=Math.floor(t.baseMediaDecodeTime/(1+ou)),o=Math.floor(t.baseMediaDecodeTime%(1+ou)),n=ma(Ha.tfdt,new Uint8Array([1,0,0,0,s>>>24&255,s>>>16&255,s>>>8&255,255&s,o>>>24&255,o>>>16&255,o>>>8&255,255&o])),"audio"===t.type?(e=Na(t,92),ma(Ha.traf,i,n,e)):(r=Ga(t),e=Na(t,r.length+92),ma(Ha.traf,i,n,e,r))},Ea=function(t){return t.duration=t.duration||4294967295,ma(Ha.trak,Ia(t),ka(t))},Ra=function(t){var i=new Uint8Array([0,0,0,0,(4278190080&t.id)>>24,(16711680&t.id)>>16,(65280&t.id)>>8,255&t.id,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]);return"video"!==t.type&&(i[i.length-1]=0),ma(Ha.trex,i)},iu=function(t,i){var n=0,e=0,r=0,s=0;return t.length&&(void 0!==t[0].duration&&(n=1),void 0!==t[0].size&&(e=2),void 0!==t[0].flags&&(r=4),void 0!==t[0].compositionTimeOffset&&(s=8)),[0,0,n|e|r|s,1,(4278190080&t.length)>>>24,(16711680&t.length)>>>16,(65280&t.length)>>>8,255&t.length,(4278190080&i)>>>24,(16711680&i)>>>16,(65280&i)>>>8,255&i]},tu=function(t,i){var n,e,r,s;for(i+=20+16*(e=t.samples||[]).length,n=iu(e,i),s=0;s<e.length;s++)n=n.concat([(4278190080&(r=e[s]).duration)>>>24,(16711680&r.duration)>>>16,(65280&r.duration)>>>8,255&r.duration,(4278190080&r.size)>>>24,(16711680&r.size)>>>16,(65280&r.size)>>>8,255&r.size,r.flags.isLeading<<2|r.flags.dependsOn,r.flags.isDependedOn<<6|r.flags.hasRedundancy<<4|r.flags.paddingValue<<1|r.flags.isNonSyncSample,61440&r.flags.degradationPriority,15&r.flags.degradationPriority,(4278190080&r.compositionTimeOffset)>>>24,(16711680&r.compositionTimeOffset)>>>16,(65280&r.compositionTimeOffset)>>>8,255&r.compositionTimeOffset]);return ma(Ha.trun,new Uint8Array(n))},Za=function(t,i){var n,e,r,s;for(i+=20+8*(e=t.samples||[]).length,n=iu(e,i),s=0;s<e.length;s++)n=n.concat([(4278190080&(r=e[s]).duration)>>>24,(16711680&r.duration)>>>16,(65280&r.duration)>>>8,255&r.duration,(4278190080&r.size)>>>24,(16711680&r.size)>>>16,(65280&r.size)>>>8,255&r.size]);return ma(Ha.trun,new Uint8Array(n))},Na=function(t,i){return"audio"===t.type?Za(t,i):tu(t,i)};var uu={ftyp:ya=function(){return ma(Ha.ftyp,ja,_a,ja,Ua)},mdat:function(t){return ma(Ha.mdat,t)},moof:wa,moov:Aa,initSegment:function(t){var i,n=ya(),e=Aa(t);return(i=new Uint8Array(n.byteLength+e.byteLength)).set(n),i.set(e,n.byteLength),i}};function cu(t){for(var i=[];t--;)i.push(0);return i}function hu(){hu.prototype.init.call(this),this.captionPackets_=[],this.ccStreams_=[new Du(0,0),new Du(0,1),new Du(1,0),new Du(1,1)],this.reset(),this.ccStreams_.forEach(function(t){t.on("data",this.trigger.bind(this,"data")),t.on("done",this.trigger.bind(this,"done"))},this)}au.prototype.pipe=function(t){return this.on("data",function(i){t.push(i)}),this.on("done",function(i){t.flush(i)}),t},au.prototype.push=function(t){this.trigger("data",t)},au.prototype.flush=function(t){this.trigger("done",t)};var fu,lu,du,vu,pu,mu=au,bu=[33,16,5,32,164,27],Tu=[33,65,108,84,1,2,4,8,168,2,4,8,17,191,252],yu={96e3:[bu,[227,64],cu(154),[56]],88200:[bu,[231],cu(170),[56]],64e3:[bu,[248,192],cu(240),[56]],48e3:[bu,[255,192],cu(268),[55,148,128],cu(54),[112]],44100:[bu,[255,192],cu(268),[55,163,128],cu(84),[112]],32e3:[bu,[255,192],cu(268),[55,234],cu(226),[112]],24e3:[bu,[255,192],cu(268),[55,255,128],cu(268),[111,112],cu(126),[224]],16e3:[bu,[255,192],cu(268),[55,255,128],cu(268),[111,255],cu(269),[223,108],cu(195),[1,192]],12e3:[Tu,cu(268),[3,127,248],cu(268),[6,255,240],cu(268),[13,255,224],cu(268),[27,253,128],cu(259),[56]],11025:[Tu,cu(268),[3,127,248],cu(268),[6,255,240],cu(268),[13,255,224],cu(268),[27,255,192],cu(268),[55,175,128],cu(108),[112]],8e3:[Tu,cu(268),[3,121,16],cu(47),[7]]},gu=(fu=yu,Object.keys(fu).reduce(function(t,i){return t[i]=new Uint8Array(fu[i].reduce(function(t,i){return t.concat(i)},[])),t},{})),Su=(lu=function(t){return 9e4*t},du=function(t,i){return t*i},vu=function(t){return t/9e4},pu=function(t,i){return t/i},function(t,i){return lu(pu(t,i))}),wu=function(t){delete t.minSegmentDts,delete t.maxSegmentDts,delete t.minSegmentPts,delete t.maxSegmentPts},Au=function(t,i){var n,e=t.minSegmentDts;return i||(e-=t.timelineStartInfo.dts),n=t.timelineStartInfo.baseMediaDecodeTime,n+=e,n=Math.max(0,n),"audio"===t.type&&(n*=t.samplerate/9e4,n=Math.floor(n)),n},Pu=function(t,i){"number"==typeof i.pts&&(void 0===t.timelineStartInfo.pts&&(t.timelineStartInfo.pts=i.pts),t.minSegmentPts=void 0===t.minSegmentPts?i.pts:Math.min(t.minSegmentPts,i.pts),t.maxSegmentPts=void 0===t.maxSegmentPts?i.pts:Math.max(t.maxSegmentPts,i.pts)),"number"==typeof i.dts&&(void 0===t.timelineStartInfo.dts&&(t.timelineStartInfo.dts=i.dts),t.minSegmentDts=void 0===t.minSegmentDts?i.dts:Math.min(t.minSegmentDts,i.dts),t.maxSegmentDts=void 0===t.maxSegmentDts?i.dts:Math.max(t.maxSegmentDts,i.dts))};function Mu(t){return null===t?"":(t=Iu[t]||t,String.fromCharCode(t))}function Eu(){for(var t=[],i=15;i--;)t.push("");return t}(hu.prototype=new mu).push=function(t){var i,n,e;if("sei_rbsp"===t.nalUnitType&&4===(i=function(t){for(var i=0,n={payloadType:-1,payloadSize:0},e=0,r=0;i<t.byteLength&&128!==t[i];){for(;255===t[i];)e+=255,i++;for(e+=t[i++];255===t[i];)r+=255,i++;if(r+=t[i++],!n.payload&&4===e){n.payloadType=e,n.payloadSize=r,n.payload=t.subarray(i,i+r);break}i+=r,r=e=0}return n}(t.escapedRBSP)).payloadType&&(n=function(t){return 181!==t.payload[0]?null:49!=(t.payload[1]<<8|t.payload[2])?null:"GA94"!==String.fromCharCode(t.payload[3],t.payload[4],t.payload[5],t.payload[6])?null:3!==t.payload[7]?null:t.payload.subarray(8,t.payload.length-1)}(i)))if(t.dts<this.latestDts_)this.ignoreNextEqualDts_=!0;else{if(t.dts===this.latestDts_&&this.ignoreNextEqualDts_)return this.numSameDts_--,void(this.numSameDts_||(this.ignoreNextEqualDts_=!1));e=function(t,i){var n,e,r,s,o=[];if(!(64&i[0]))return o;for(e=31&i[0],n=0;n<e;n++)s={type:3&i[2+(r=3*n)],pts:t},4&i[2+r]&&(s.ccData=i[3+r]<<8|i[4+r],o.push(s));return o}(t.pts,n),this.captionPackets_=this.captionPackets_.concat(e),this.latestDts_!==t.dts&&(this.numSameDts_=0),this.numSameDts_++,this.latestDts_=t.dts}},hu.prototype.flush=function(){this.captionPackets_.length?(this.captionPackets_.forEach(function(t,i){t.presortIndex=i}),this.captionPackets_.sort(function(t,i){return t.pts===i.pts?t.presortIndex-i.presortIndex:t.pts-i.pts}),this.captionPackets_.forEach(function(t){t.type<2&&this.dispatchCea608Packet(t)},this),this.captionPackets_.length=0,this.ccStreams_.forEach(function(t){t.flush()},this)):this.ccStreams_.forEach(function(t){t.flush()},this)},hu.prototype.reset=function(){this.latestDts_=null,this.ignoreNextEqualDts_=!1,this.numSameDts_=0,this.activeCea608Channel_=[null,null],this.ccStreams_.forEach(function(t){t.reset()})},hu.prototype.dispatchCea608Packet=function(t){this.setsTextOrXDSActive(t)?this.activeCea608Channel_[t.type]=null:this.setsChannel1Active(t)?this.activeCea608Channel_[t.type]=0:this.setsChannel2Active(t)&&(this.activeCea608Channel_[t.type]=1),null!==this.activeCea608Channel_[t.type]&&this.ccStreams_[(t.type<<1)+this.activeCea608Channel_[t.type]].push(t)},hu.prototype.setsChannel1Active=function(t){return 4096==(30720&t.ccData)},hu.prototype.setsChannel2Active=function(t){return 6144==(30720&t.ccData)},hu.prototype.setsTextOrXDSActive=function(t){return 256==(28928&t.ccData)||4138==(30974&t.ccData)||6186==(30974&t.ccData)};var Iu={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,304:174,305:176,306:189,307:191,308:8482,309:162,310:163,311:9834,312:224,313:160,314:232,315:226,316:234,317:238,318:244,319:251,544:193,545:201,546:211,547:218,548:220,549:252,550:8216,551:161,552:42,553:39,554:8212,555:169,556:8480,557:8226,558:8220,559:8221,560:192,561:194,562:199,563:200,564:202,565:203,566:235,567:206,568:207,569:239,570:212,571:217,572:249,573:219,574:171,575:187,800:195,801:227,802:205,803:204,804:236,805:210,806:242,807:213,808:245,809:123,810:125,811:92,812:94,813:95,814:124,815:126,816:196,817:228,818:214,819:246,820:223,821:165,822:164,823:9474,824:197,825:229,826:216,827:248,828:9484,829:9488,830:9492,831:9496},ku=[4352,4384,4608,4640,5376,5408,5632,5664,5888,5920,4096,4864,4896,5120,5152],Du=function t(i,n){t.prototype.init.call(this),this.field_=i||0,this.dataChannel_=n||0,this.name_="CC"+(1+(this.field_<<1|this.dataChannel_)),this.setConstants(),this.reset(),this.push=function(t){var i,n,e,r,s;if((i=32639&t.ccData)!==this.lastControlCode_){if(4096==(61440&i)?this.lastControlCode_=i:i!==this.PADDING_&&(this.lastControlCode_=null),e=i>>>8,r=255&i,i!==this.PADDING_)if(i===this.RESUME_CAPTION_LOADING_)this.mode_="popOn";else if(i===this.END_OF_CAPTION_)this.mode_="popOn",this.clearFormatting(t.pts),this.flushDisplayed(t.pts),n=this.displayed_,this.displayed_=this.nonDisplayed_,this.nonDisplayed_=n,this.startPts_=t.pts;else if(i===this.ROLL_UP_2_ROWS_)this.rollUpRows_=2,this.setRollUp(t.pts);else if(i===this.ROLL_UP_3_ROWS_)this.rollUpRows_=3,this.setRollUp(t.pts);else if(i===this.ROLL_UP_4_ROWS_)this.rollUpRows_=4,this.setRollUp(t.pts);else if(i===this.CARRIAGE_RETURN_)this.clearFormatting(t.pts),this.flushDisplayed(t.pts),this.shiftRowsUp_(),this.startPts_=t.pts;else if(i===this.BACKSPACE_)"popOn"===this.mode_?this.nonDisplayed_[this.row_]=this.nonDisplayed_[this.row_].slice(0,-1):this.displayed_[this.row_]=this.displayed_[this.row_].slice(0,-1);else if(i===this.ERASE_DISPLAYED_MEMORY_)this.flushDisplayed(t.pts),this.displayed_=Eu();else if(i===this.ERASE_NON_DISPLAYED_MEMORY_)this.nonDisplayed_=Eu();else if(i===this.RESUME_DIRECT_CAPTIONING_)"paintOn"!==this.mode_&&(this.flushDisplayed(t.pts),this.displayed_=Eu()),this.mode_="paintOn",this.startPts_=t.pts;else if(this.isSpecialCharacter(e,r))s=Mu((e=(3&e)<<8)|r),this[this.mode_](t.pts,s),this.column_++;else if(this.isExtCharacter(e,r))"popOn"===this.mode_?this.nonDisplayed_[this.row_]=this.nonDisplayed_[this.row_].slice(0,-1):this.displayed_[this.row_]=this.displayed_[this.row_].slice(0,-1),s=Mu((e=(3&e)<<8)|r),this[this.mode_](t.pts,s),this.column_++;else if(this.isMidRowCode(e,r))this.clearFormatting(t.pts),this[this.mode_](t.pts," "),this.column_++,14==(14&r)&&this.addFormatting(t.pts,["i"]),1==(1&r)&&this.addFormatting(t.pts,["u"]);else if(this.isOffsetControlCode(e,r))this.column_+=3&r;else if(this.isPAC(e,r)){var o=ku.indexOf(7968&i);"rollUp"===this.mode_&&(o-this.rollUpRows_+1<0&&(o=this.rollUpRows_-1),this.setRollUp(t.pts,o)),o!==this.row_&&(this.clearFormatting(t.pts),this.row_=o),1&r&&-1===this.formatting_.indexOf("u")&&this.addFormatting(t.pts,["u"]),16==(16&i)&&(this.column_=4*((14&i)>>1)),this.isColorPAC(r)&&14==(14&r)&&this.addFormatting(t.pts,["i"])}else this.isNormalChar(e)&&(0===r&&(r=null),s=Mu(e),s+=Mu(r),this[this.mode_](t.pts,s),this.column_+=s.length)}else this.lastControlCode_=null}};function Cu(t,i){var n=1;for(i<t&&(n=-1);4294967296<Math.abs(i-t);)t+=8589934592*n;return t}function Gu(t){var i,n;Gu.prototype.init.call(this),this.type_=t,this.push=function(t){t.type===this.type_&&(void 0===n&&(n=t.dts),t.dts=Cu(t.dts,n),t.pts=Cu(t.pts,n),i=t.dts,this.trigger("data",t))},this.flush=function(){n=i,this.trigger("done")},this.discontinuity=function(){i=n=void 0}}Du.prototype=new mu,Du.prototype.flushDisplayed=function(t){var i=this.displayed_.map(function(t){try{return t.trim()}catch(t){return""}}).join("\n").replace(/^\n+|\n+$/g,"");i.length&&this.trigger("data",{startPts:this.startPts_,endPts:t,text:i,stream:this.name_})},Du.prototype.reset=function(){this.mode_="popOn",this.topRow_=0,this.startPts_=0,this.displayed_=Eu(),this.nonDisplayed_=Eu(),this.lastControlCode_=null,this.column_=0,this.row_=14,this.rollUpRows_=2,this.formatting_=[]},Du.prototype.setConstants=function(){0===this.dataChannel_?(this.BASE_=16,this.EXT_=17,this.CONTROL_=(20|this.field_)<<8,this.OFFSET_=23):1===this.dataChannel_&&(this.BASE_=24,this.EXT_=25,this.CONTROL_=(28|this.field_)<<8,this.OFFSET_=31),this.PADDING_=0,this.RESUME_CAPTION_LOADING_=32|this.CONTROL_,this.END_OF_CAPTION_=47|this.CONTROL_,this.ROLL_UP_2_ROWS_=37|this.CONTROL_,this.ROLL_UP_3_ROWS_=38|this.CONTROL_,this.ROLL_UP_4_ROWS_=39|this.CONTROL_,this.CARRIAGE_RETURN_=45|this.CONTROL_,this.RESUME_DIRECT_CAPTIONING_=41|this.CONTROL_,this.BACKSPACE_=33|this.CONTROL_,this.ERASE_DISPLAYED_MEMORY_=44|this.CONTROL_,this.ERASE_NON_DISPLAYED_MEMORY_=46|this.CONTROL_},Du.prototype.isSpecialCharacter=function(t,i){return t===this.EXT_&&48<=i&&i<=63},Du.prototype.isExtCharacter=function(t,i){return(t===this.EXT_+1||t===this.EXT_+2)&&32<=i&&i<=63},Du.prototype.isMidRowCode=function(t,i){return t===this.EXT_&&32<=i&&i<=47},Du.prototype.isOffsetControlCode=function(t,i){return t===this.OFFSET_&&33<=i&&i<=35},Du.prototype.isPAC=function(t,i){return t>=this.BASE_&&t<this.BASE_+8&&64<=i&&i<=127},Du.prototype.isColorPAC=function(t){return 64<=t&&t<=79||96<=t&&t<=127},Du.prototype.isNormalChar=function(t){return 32<=t&&t<=127},Du.prototype.setRollUp=function(t,i){if("rollUp"!==this.mode_&&(this.row_=14,this.mode_="rollUp",this.flushDisplayed(t),this.nonDisplayed_=Eu(),this.displayed_=Eu()),void 0!==i&&i!==this.row_)for(var n=0;n<this.rollUpRows_;n++)this.displayed_[i-n]=this.displayed_[this.row_-n],this.displayed_[this.row_-n]="";void 0===i&&(i=this.row_),this.topRow_=i-this.rollUpRows_+1},Du.prototype.addFormatting=function(t,i){this.formatting_=this.formatting_.concat(i);var n=i.reduce(function(t,i){return t+"<"+i+">"},"");this[this.mode_](t,n)},Du.prototype.clearFormatting=function(t){if(this.formatting_.length){var i=this.formatting_.reverse().reduce(function(t,i){return t+"</"+i+">"},"");this.formatting_=[],this[this.mode_](t,i)}},Du.prototype.popOn=function(t,i){var n=this.nonDisplayed_[this.row_];this.nonDisplayed_[this.row_]=n+=i},Du.prototype.rollUp=function(t,i){var n=this.displayed_[this.row_];this.displayed_[this.row_]=n+=i},Du.prototype.shiftRowsUp_=function(){var t;for(t=0;t<this.topRow_;t++)this.displayed_[t]="";for(t=this.row_+1;t<15;t++)this.displayed_[t]="";for(t=this.topRow_;t<this.row_;t++)this.displayed_[t]=this.displayed_[t+1];this.displayed_[this.row_]=""},Du.prototype.paintOn=function(t,i){var n=this.displayed_[this.row_];this.displayed_[this.row_]=n+=i};var Ou={CaptionStream:hu,Cea608Stream:Du},Bu={H264_STREAM_TYPE:27,ADTS_STREAM_TYPE:15,METADATA_STREAM_TYPE:21};function xu(t,i,n){var e,r="";for(e=i;e<n;e++)r+="%"+("00"+t[e].toString(16)).slice(-2);return r}function Ru(t,i,n){return decodeURIComponent(xu(t,i,n))}function Nu(t){return t[0]<<21|t[1]<<14|t[2]<<7|t[3]}Gu.prototype=new mu;var Hu,ju=Gu,_u=Cu,Uu={TXXX:function(t){var i;if(3===t.data[0]){for(i=1;i<t.data.length;i++)if(0===t.data[i]){t.description=Ru(t.data,1,i),t.value=Ru(t.data,i+1,t.data.length).replace(/\0*$/,"");break}t.data=t.value}},WXXX:function(t){var i;if(3===t.data[0])for(i=1;i<t.data.length;i++)if(0===t.data[i]){t.description=Ru(t.data,1,i),t.url=Ru(t.data,i+1,t.data.length);break}},PRIV:function(t){var i;for(i=0;i<t.data.length;i++)if(0===t.data[i]){t.owner=unescape(xu(t.data,0,i));break}t.privateData=t.data.subarray(i+1),t.data=t.privateData}};(Hu=function(t){var i,n={debug:!(!t||!t.debug),descriptor:t&&t.descriptor},e=0,r=[],s=0;if(Hu.prototype.init.call(this),this.dispatchType=Bu.METADATA_STREAM_TYPE.toString(16),n.descriptor)for(i=0;i<n.descriptor.length;i++)this.dispatchType+=("00"+n.descriptor[i].toString(16)).slice(-2);this.push=function(t){var i,n,o,a,u;if("timed-metadata"===t.type)if(t.dataAlignmentIndicator&&(s=0,r.length=0),0===r.length&&(t.data.length<10||t.data[0]!=="I".charCodeAt(0)||t.data[1]!=="D".charCodeAt(0)||t.data[2]!=="3".charCodeAt(0)));else if(r.push(t),s+=t.data.byteLength,1===r.length&&(e=Nu(t.data.subarray(6,10)),e+=10),!(s<e)){for(i={data:new Uint8Array(e),frames:[],pts:r[0].pts,dts:r[0].dts},u=0;u<e;)i.data.set(r[0].data.subarray(0,e-u),u),u+=r[0].data.byteLength,s-=r[0].data.byteLength,r.shift();n=10,64&i.data[5]&&(n+=4,n+=Nu(i.data.subarray(10,14)),e-=Nu(i.data.subarray(16,20)));do{if((o=Nu(i.data.subarray(n+4,n+8)))<1)return;if((a={id:String.fromCharCode(i.data[n],i.data[n+1],i.data[n+2],i.data[n+3]),data:i.data.subarray(n+10,n+o+10)}).key=a.id,Uu[a.id]&&(Uu[a.id](a),"com.apple.streaming.transportStreamTimestamp"===a.owner)){var c=a.data,h=(1&c[3])<<30|c[4]<<22|c[5]<<14|c[6]<<6|c[7]>>>2;h*=4,a.timeStamp=h+=3&c[7],void 0===i.pts&&void 0===i.dts&&(i.pts=a.timeStamp,i.dts=a.timeStamp),this.trigger("timestamp",a)}i.frames.push(a),n+=10,n+=o}while(n<e);this.trigger("data",i)}}}).prototype=new mu;var Lu,Vu,Fu,Wu=Hu,Xu=ju;(Lu=function(){var t=new Uint8Array(188),i=0;Lu.prototype.init.call(this),this.push=function(n){var e,r=0,s=188;for(i?((e=new Uint8Array(n.byteLength+i)).set(t.subarray(0,i)),e.set(n,i),i=0):e=n;s<e.byteLength;)71!==e[r]||71!==e[s]?(r++,s++):(this.trigger("data",e.subarray(r,s)),r+=188,s+=188);r<e.byteLength&&(t.set(e.subarray(r),0),i=e.byteLength-r)},this.flush=function(){188===i&&71===t[0]&&(this.trigger("data",t),i=0),this.trigger("done")}}).prototype=new mu,(Vu=function(){var t,i,n,e;Vu.prototype.init.call(this),(e=this).packetsWaitingForPmt=[],this.programMapTable=void 0,t=function(t,e){var r=0;e.payloadUnitStartIndicator&&(r+=t[r]+1),"pat"===e.type?i(t.subarray(r),e):n(t.subarray(r),e)},i=function(t,i){i.section_number=t[7],i.last_section_number=t[8],e.pmtPid=(31&t[10])<<8|t[11],i.pmtPid=e.pmtPid},n=function(t,i){var n,r;if(1&t[5]){for(e.programMapTable={video:null,audio:null,"timed-metadata":{}},n=3+((15&t[1])<<8|t[2])-4,r=12+((15&t[10])<<8|t[11]);r<n;){var s=t[r],o=(31&t[r+1])<<8|t[r+2];s===Bu.H264_STREAM_TYPE&&null===e.programMapTable.video?e.programMapTable.video=o:s===Bu.ADTS_STREAM_TYPE&&null===e.programMapTable.audio?e.programMapTable.audio=o:s===Bu.METADATA_STREAM_TYPE&&(e.programMapTable["timed-metadata"][o]=s),r+=5+((15&t[r+3])<<8|t[r+4])}i.programMapTable=e.programMapTable}},this.push=function(i){var n={},e=4;if(n.payloadUnitStartIndicator=!!(64&i[1]),n.pid=31&i[1],n.pid<<=8,n.pid|=i[2],1<(48&i[3])>>>4&&(e+=i[e]+1),0===n.pid)n.type="pat",t(i.subarray(e),n),this.trigger("data",n);else if(n.pid===this.pmtPid)for(n.type="pmt",t(i.subarray(e),n),this.trigger("data",n);this.packetsWaitingForPmt.length;)this.processPes_.apply(this,this.packetsWaitingForPmt.shift());else void 0===this.programMapTable?this.packetsWaitingForPmt.push([i,e,n]):this.processPes_(i,e,n)},this.processPes_=function(t,i,n){n.streamType=n.pid===this.programMapTable.video?Bu.H264_STREAM_TYPE:n.pid===this.programMapTable.audio?Bu.ADTS_STREAM_TYPE:this.programMapTable["timed-metadata"][n.pid],n.type="pes",n.data=t.subarray(i),this.trigger("data",n)}}).prototype=new mu,Vu.STREAM_TYPES={h264:27,adts:15},(Fu=function(){function t(t,n,e){var r,s,o=new Uint8Array(t.size),a={type:n},u=0,c=0;if(t.data.length&&!(t.size<9)){for(a.trackId=t.data[0].pid,u=0;u<t.data.length;u++)o.set((s=t.data[u]).data,c),c+=s.data.byteLength;!function(t,i){var n;i.packetLength=6+(t[4]<<8|t[5]),i.dataAlignmentIndicator=0!=(4&t[6]),192&(n=t[7])&&(i.pts=(14&t[9])<<27|(255&t[10])<<20|(254&t[11])<<12|(255&t[12])<<5|(254&t[13])>>>3,i.pts*=4,i.pts+=(6&t[13])>>>1,i.dts=i.pts,64&n&&(i.dts=(14&t[14])<<27|(255&t[15])<<20|(254&t[16])<<12|(255&t[17])<<5|(254&t[18])>>>3,i.dts*=4,i.dts+=(6&t[18])>>>1)),i.data=t.subarray(9+t[8])}(o,a),r="video"===n||a.packetLength<=t.size,(e||r)&&(t.size=0,t.data.length=0),r&&i.trigger("data",a)}}var i=this,n={data:[],size:0},e={data:[],size:0},r={data:[],size:0};Fu.prototype.init.call(this),this.push=function(s){({pat:function(){},pes:function(){var i,o;switch(s.streamType){case Bu.H264_STREAM_TYPE:case Bu.H264_STREAM_TYPE:i=n,o="video";break;case Bu.ADTS_STREAM_TYPE:i=e,o="audio";break;case Bu.METADATA_STREAM_TYPE:i=r,o="timed-metadata";break;default:return}s.payloadUnitStartIndicator&&t(i,o,!0),i.data.push(s),i.size+=s.data.byteLength},pmt:function(){var t={type:"metadata",tracks:[]},n=s.programMapTable;null!==n.video&&t.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+n.video,codec:"avc",type:"video"}),null!==n.audio&&t.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+n.audio,codec:"adts",type:"audio"}),i.trigger("data",t)}})[s.type]()},this.flush=function(){t(n,"video"),t(e,"audio"),t(r,"timed-metadata"),this.trigger("done")}}).prototype=new mu;var $u={PAT_PID:0,MP2T_PACKET_LENGTH:188,TransportPacketStream:Lu,TransportParseStream:Vu,ElementaryStream:Fu,TimestampRolloverStream:Xu,CaptionStream:Ou.CaptionStream,Cea608Stream:Ou.Cea608Stream,MetadataStream:Wu};for(var zu in Bu)Bu.hasOwnProperty(zu)&&($u[zu]=Bu[zu]);var Ku,qu=$u,Yu=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350];(Ku=function(){var t;Ku.prototype.init.call(this),this.push=function(i){var n,e,r,s,o=0,a=0;if("audio"===i.type)for(t?(e=t,(t=new Uint8Array(e.byteLength+i.data.byteLength)).set(e),t.set(i.data,e.byteLength)):t=i.data;o+5<t.length;)if(255===t[o]&&240==(246&t[o+1])){if(s=9e4*(r=1024*(1+(3&t[o+6])))/Yu[(60&t[o+2])>>>2],t.byteLength<(n=o+((3&t[o+3])<<11|t[o+4]<<3|(224&t[o+5])>>5)))return;if(this.trigger("data",{pts:i.pts+a*s,dts:i.dts+a*s,sampleCount:r,audioobjecttype:1+(t[o+2]>>>6&3),channelcount:(1&t[o+2])<<2|(192&t[o+3])>>>6,samplerate:Yu[(60&t[o+2])>>>2],samplingfrequencyindex:(60&t[o+2])>>>2,samplesize:16,data:t.subarray(o+7+2*(1&~t[o+1]),n)}),t.byteLength===n)return void(t=void 0);a++,t=t.subarray(n)}else o++},this.flush=function(){this.trigger("done")}}).prototype=new mu;var Qu,Ju,Zu,tc=Ku,ic=function(t){var i=t.byteLength,n=0,e=0;this.length=function(){return 8*i},this.bitsAvailable=function(){return 8*i+e},this.loadWord=function(){var r=t.byteLength-i,s=new Uint8Array(4),o=Math.min(4,i);if(0===o)throw new Error("no bytes available");s.set(t.subarray(r,r+o)),n=new DataView(s.buffer).getUint32(0),e=8*o,i-=o},this.skipBits=function(t){var r;t<e||(t-=e,t-=8*(r=Math.floor(t/8)),i-=r,this.loadWord()),n<<=t,e-=t},this.readBits=function(t){var r=Math.min(e,t),s=n>>>32-r;return 0<(e-=r)?n<<=r:0<i&&this.loadWord(),0<(r=t-r)?s<<r|this.readBits(r):s},this.skipLeadingZeros=function(){var t;for(t=0;t<e;++t)if(0!=(n&2147483648>>>t))return n<<=t,e-=t,t;return this.loadWord(),t+this.skipLeadingZeros()},this.skipUnsignedExpGolomb=function(){this.skipBits(1+this.skipLeadingZeros())},this.skipExpGolomb=function(){this.skipBits(1+this.skipLeadingZeros())},this.readUnsignedExpGolomb=function(){var t=this.skipLeadingZeros();return this.readBits(t+1)-1},this.readExpGolomb=function(){var t=this.readUnsignedExpGolomb();return 1&t?1+t>>>1:-1*(t>>>1)},this.readBoolean=function(){return 1===this.readBits(1)},this.readUnsignedByte=function(){return this.readBits(8)},this.loadWord()};function nc(t){return t[0]<<21|t[1]<<14|t[2]<<7|t[3]}(Ju=function(){var t,i,n=0;Ju.prototype.init.call(this),this.push=function(e){var r;for(i=i?((r=new Uint8Array(i.byteLength+e.data.byteLength)).set(i),r.set(e.data,i.byteLength),r):e.data;n<i.byteLength-3;n++)if(1===i[n+2]){t=n+5;break}for(;t<i.byteLength;)switch(i[t]){case 0:if(0!==i[t-1]){t+=2;break}if(0!==i[t-2]){t++;break}for(n+3!==t-2&&this.trigger("data",i.subarray(n+3,t-2));1!==i[++t]&&t<i.length;);n=t-2,t+=3;break;case 1:if(0!==i[t-1]||0!==i[t-2]){t+=3;break}this.trigger("data",i.subarray(n+3,t-2)),n=t-2,t+=3;break;default:t+=3}i=i.subarray(n),t-=n,n=0},this.flush=function(){i&&3<i.byteLength&&this.trigger("data",i.subarray(n+3)),i=null,n=0,this.trigger("done")}}).prototype=new mu,Zu={100:!0,110:!0,122:!0,244:!0,44:!0,83:!0,86:!0,118:!0,128:!0,138:!0,139:!0,134:!0},(Qu=function(){var t,i,n,e,r,s,o,a=new Ju;Qu.prototype.init.call(this),(t=this).push=function(t){"video"===t.type&&(i=t.trackId,n=t.pts,e=t.dts,a.push(t))},a.on("data",function(o){var a={trackId:i,pts:n,dts:e,data:o};switch(31&o[0]){case 5:a.nalUnitType="slice_layer_without_partitioning_rbsp_idr";break;case 6:a.nalUnitType="sei_rbsp",a.escapedRBSP=r(o.subarray(1));break;case 7:a.nalUnitType="seq_parameter_set_rbsp",a.escapedRBSP=r(o.subarray(1)),a.config=s(a.escapedRBSP);break;case 8:a.nalUnitType="pic_parameter_set_rbsp";break;case 9:a.nalUnitType="access_unit_delimiter_rbsp"}t.trigger("data",a)}),a.on("done",function(){t.trigger("done")}),this.flush=function(){a.flush()},o=function(t,i){var n,e=8,r=8;for(n=0;n<t;n++)0!==r&&(r=(e+i.readExpGolomb()+256)%256),e=0===r?e:r},r=function(t){for(var i,n,e=t.byteLength,r=[],s=1;s<e-2;)0===t[s]&&0===t[s+1]&&3===t[s+2]?(r.push(s+2),s+=2):s++;if(0===r.length)return t;i=e-r.length,n=new Uint8Array(i);var o=0;for(s=0;s<i;o++,s++)o===r[0]&&(o++,r.shift()),n[s]=t[o];return n},s=function(t){var i,n,e,r,s,a,u,c,h,f,l,d,v,p=0,m=0,b=0,T=0,y=1;if(n=(i=new ic(t)).readUnsignedByte(),r=i.readUnsignedByte(),e=i.readUnsignedByte(),i.skipUnsignedExpGolomb(),Zu[n]&&(3===(s=i.readUnsignedExpGolomb())&&i.skipBits(1),i.skipUnsignedExpGolomb(),i.skipUnsignedExpGolomb(),i.skipBits(1),i.readBoolean()))for(l=3!==s?8:12,v=0;v<l;v++)i.readBoolean()&&o(v<6?16:64,i);if(i.skipUnsignedExpGolomb(),0===(a=i.readUnsignedExpGolomb()))i.readUnsignedExpGolomb();else if(1===a)for(i.skipBits(1),i.skipExpGolomb(),i.skipExpGolomb(),u=i.readUnsignedExpGolomb(),v=0;v<u;v++)i.skipExpGolomb();if(i.skipUnsignedExpGolomb(),i.skipBits(1),c=i.readUnsignedExpGolomb(),h=i.readUnsignedExpGolomb(),0===(f=i.readBits(1))&&i.skipBits(1),i.skipBits(1),i.readBoolean()&&(p=i.readUnsignedExpGolomb(),m=i.readUnsignedExpGolomb(),b=i.readUnsignedExpGolomb(),T=i.readUnsignedExpGolomb()),i.readBoolean()&&i.readBoolean()){switch(i.readUnsignedByte()){case 1:d=[1,1];break;case 2:d=[12,11];break;case 3:d=[10,11];break;case 4:d=[16,11];break;case 5:d=[40,33];break;case 6:d=[24,11];break;case 7:d=[20,11];break;case 8:d=[32,11];break;case 9:d=[80,33];break;case 10:d=[18,11];break;case 11:d=[15,11];break;case 12:d=[64,33];break;case 13:d=[160,99];break;case 14:d=[4,3];break;case 15:d=[3,2];break;case 16:d=[2,1];break;case 255:d=[i.readUnsignedByte()<<8|i.readUnsignedByte(),i.readUnsignedByte()<<8|i.readUnsignedByte()]}d&&(y=d[0]/d[1])}return{profileIdc:n,levelIdc:e,profileCompatibility:r,width:Math.ceil((16*(c+1)-2*p-2*m)*y),height:(2-f)*(h+1)*16-2*b-2*T}}}).prototype=new mu;var ec,rc={H264Stream:Qu,NalByteStream:Ju},sc=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350],oc={isLikelyAacData:function(t){return t[0]==="I".charCodeAt(0)&&t[1]==="D".charCodeAt(0)&&t[2]==="3".charCodeAt(0)},parseId3TagSize:function(t,i){var n=t[i+6]<<21|t[i+7]<<14|t[i+8]<<7|t[i+9];return(16&t[i+5])>>4?20+n:10+n},parseAdtsSize:function(t,i){return 6144&t[i+3]|t[i+4]<<3|(224&t[i+5])>>5},parseType:function(t,i){return t[i]==="I".charCodeAt(0)&&t[i+1]==="D".charCodeAt(0)&&t[i+2]==="3".charCodeAt(0)?"timed-metadata":!0&t[i]&&240==(240&t[i+1])?"audio":null},parseSampleRate:function(t){for(var i=0;i+5<t.length;){if(255===t[i]&&240==(246&t[i+1]))return sc[(60&t[i+2])>>>2];i++}return null},parseAacTimestamp:function(t){var i,n,e;i=10,64&t[5]&&(i+=4,i+=nc(t.subarray(10,14)));do{if((n=nc(t.subarray(i+4,i+8)))<1)return null;if("PRIV"===String.fromCharCode(t[i],t[i+1],t[i+2],t[i+3])){e=t.subarray(i+10,i+n+10);for(var r=0;r<e.byteLength;r++)if(0===e[r]){if("com.apple.streaming.transportStreamTimestamp"!==unescape(function(t,i,n){var e,r="";for(e=0;e<n;e++)r+="%"+("00"+t[e].toString(16)).slice(-2);return r}(e,0,r)))break;var s=e.subarray(r+1),o=(1&s[3])<<30|s[4]<<22|s[5]<<14|s[6]<<6|s[7]>>>2;return(o*=4)+(3&s[7])}}i+=10,i+=n}while(i<t.byteLength);return null}};function ac(t,i){var n;if(t.length!==i.length)return!1;for(n=0;n<t.length;n++)if(t[n]!==i[n])return!1;return!0}(ec=function(){var t=new Uint8Array,i=0;ec.prototype.init.call(this),this.setTimestamp=function(t){i=t},this.push=function(n){var e,r,s,o=0,a=0;for(t.length?(s=t.length,(t=new Uint8Array(n.byteLength+s)).set(t.subarray(0,s)),t.set(n,s)):t=n;3<=t.length-a;)if(t[a]!=="I".charCodeAt(0)||t[a+1]!=="D".charCodeAt(0)||t[a+2]!=="3".charCodeAt(0))if(255!=(255&t[a])||240!=(240&t[a+1]))a++;else{if(t.length-a<7)break;if(a+(o=oc.parseAdtsSize(t,a))>t.length)break;r={type:"audio",data:t.subarray(a,a+o),pts:i,dts:i},this.trigger("data",r),a+=o}else{if(t.length-a<10)break;if(a+(o=oc.parseId3TagSize(t,a))>t.length)break;e={type:"timed-metadata",data:t.subarray(a,a+o)},this.trigger("data",e),a+=o}t=0<t.length-a?t.subarray(a):new Uint8Array}}).prototype=new mu;var uc,cc,hc,fc,lc=ec,dc=rc.H264Stream,vc=oc.isLikelyAacData,pc=["audioobjecttype","channelcount","samplerate","samplingfrequencyindex","samplesize"],mc=["width","height","profileIdc","levelIdc","profileCompatibility"];function bc(t,i){for(var n=t,e=0;e<i.length;e++){var r=i[e];if(n<r.size)return r;n-=r.size}return null}function Tc(t,i){var n=nu.findBox(t,["moof","traf"]),e=nu.findBox(t,["mdat"]),r={},s=[];return e.forEach(function(t,i){s.push({mdat:t,traf:n[i]})}),s.forEach(function(t){var n,e=t.mdat,s=t.traf,o=nu.findBox(s,["tfhd"]),a=su.parseTfhd(o[0]),u=a.trackId,c=nu.findBox(s,["tfdt"]),h=0<c.length?su.parseTfdt(c[0]).baseMediaDecodeTime:0,f=nu.findBox(s,["trun"]);i===u&&0<f.length&&(n=function(t,i,n){var e,r,s,o,a=new DataView(t.buffer,t.byteOffset,t.byteLength),u=[];for(r=0;r+4<t.length;r+=s)if(s=a.getUint32(r),r+=4,!(s<=0))switch(31&t[r]){case 6:var c=t.subarray(r+1,r+1+s),h=bc(r,i);e={nalUnitType:"sei_rbsp",size:s,data:c,escapedRBSP:Ac(c),trackId:n},h?(e.pts=h.pts,e.dts=h.dts,o=h):(e.pts=o.pts,e.dts=o.dts),u.push(e)}return u}(e,function(t,i,n){var e=h,r=n.defaultSampleDuration||0,s=n.defaultSampleSize||0,o=n.trackId,a=[];return f.forEach(function(t){var i=su.parseTrun(t).samples;i.forEach(function(t){void 0===t.duration&&(t.duration=r),void 0===t.size&&(t.size=s),t.trackId=o,t.dts=e,void 0===t.compositionTimeOffset&&(t.compositionTimeOffset=0),t.pts=e+t.compositionTimeOffset,e+=t.duration}),a=a.concat(i)}),a}(0,0,a),u),r[u]||(r[u]=[]),r[u]=r[u].concat(n))}),r}function yc(t){var i=31&t[1];return(i<<=8)|t[2]}function gc(t){return!!(64&t[1])}function Sc(t){var i=0;return 1<(48&t[3])>>>4&&(i+=t[4]+1),i}function wc(t){switch(t){case 5:return"slice_layer_without_partitioning_rbsp_idr";case 6:return"sei_rbsp";case 7:return"seq_parameter_set_rbsp";case 8:return"pic_parameter_set_rbsp";case 9:return"access_unit_delimiter_rbsp";default:return null}}(cc=function(t,i){var n=[],e=0,r=0,s=0,o=1/0;i=i||{},cc.prototype.init.call(this),this.push=function(i){Pu(t,i),t&&pc.forEach(function(n){t[n]=i[n]}),n.push(i)},this.setEarliestDts=function(i){r=i-t.timelineStartInfo.baseMediaDecodeTime},this.setVideoBaseMediaDecodeTime=function(t){o=t},this.setAudioAppendStart=function(t){s=t},this.flush=function(){var a,u,c,h;0!==n.length&&(a=function(t,i,n){return i.minSegmentDts>=n?t:(i.minSegmentDts=1/0,t.filter(function(t){return t.dts>=n&&(i.minSegmentDts=Math.min(i.minSegmentDts,t.dts),i.minSegmentPts=i.minSegmentDts,!0)}))}(n,t,r),t.baseMediaDecodeTime=Au(t,i.keepOriginalTimestamps),function(t,i,n,e){var r,s,o,a,u=0,c=0,h=0;if(i.length&&(r=Su(t.baseMediaDecodeTime,t.samplerate),s=Math.ceil(9e4/(t.samplerate/1024)),n&&e&&(u=r-Math.max(n,e),h=(c=Math.floor(u/s))*s),!(c<1||45e3<h))){for(o=(o=gu[t.samplerate])||i[0].data,a=0;a<c;a++)i.splice(a,0,{data:o});t.baseMediaDecodeTime-=Math.floor(function(t,i){return du(vu(h),i)}(0,t.samplerate))}}(t,a,s,o),t.samples=function(t){var i,n=[];for(i=0;i<t.length;i++)n.push({size:t[i].data.byteLength,duration:1024});return n}(a),c=uu.mdat(function(t){var i,n,e=0,r=new Uint8Array(function(t){var i,n=0;for(i=0;i<t.length;i++)n+=t[i].data.byteLength;return n}(t));for(i=0;i<t.length;i++)r.set((n=t[i]).data,e),e+=n.data.byteLength;return r}(a)),n=[],u=uu.moof(e,[t]),h=new Uint8Array(u.byteLength+c.byteLength),e++,h.set(u),h.set(c,u.byteLength),wu(t),this.trigger("data",{track:t,boxes:h})),this.trigger("done","AudioSegmentStream")}}).prototype=new mu,(uc=function(t,i){var n,e,r=0,s=[],o=[];i=i||{},uc.prototype.init.call(this),delete t.minPTS,this.gopCache_=[],this.push=function(i){Pu(t,i),"seq_parameter_set_rbsp"!==i.nalUnitType||n||(n=i.config,t.sps=[i.data],mc.forEach(function(i){t[i]=n[i]},this)),"pic_parameter_set_rbsp"!==i.nalUnitType||e||(e=i.data,t.pps=[i.data]),s.push(i)},this.flush=function(){for(var n,e,a,u,c,h,f,l,d=0;s.length&&"access_unit_delimiter_rbsp"!==s[0].nalUnitType;)s.shift();if(0===s.length)return this.resetStream_(),void this.trigger("done","VideoSegmentStream");if(n=function(t){var i,n,e=[],r=[];for(i=e.byteLength=0;i<t.length;i++)"access_unit_delimiter_rbsp"===(n=t[i]).nalUnitType?(e.length&&(e.duration=n.dts-e.dts,r.push(e)),(e=[n]).byteLength=n.data.byteLength,e.pts=n.pts,e.dts=n.dts):("slice_layer_without_partitioning_rbsp_idr"===n.nalUnitType&&(e.keyFrame=!0),e.duration=n.dts-e.dts,e.byteLength+=n.data.byteLength,e.push(n));return r.length&&(!e.duration||e.duration<=0)&&(e.duration=r[r.length-1].duration),r.push(e),r}(s),(a=function(t){var i,n,e=[],r=[];for(e.byteLength=0,e.nalCount=0,e.duration=0,e.pts=t[0].pts,e.dts=t[0].dts,r.byteLength=0,r.nalCount=0,r.duration=0,r.pts=t[0].pts,r.dts=t[0].dts,i=0;i<t.length;i++)(n=t[i]).keyFrame?(e.length&&(r.push(e),r.byteLength+=e.byteLength,r.nalCount+=e.nalCount,r.duration+=e.duration),(e=[n]).nalCount=n.length,e.byteLength=n.byteLength,e.pts=n.pts,e.dts=n.dts,e.duration=n.duration):(e.duration+=n.duration,e.nalCount+=n.length,e.byteLength+=n.byteLength,e.push(n));return r.length&&e.duration<=0&&(e.duration=r[r.length-1].duration),r.byteLength+=e.byteLength,r.nalCount+=e.nalCount,r.duration+=e.duration,r.push(e),r}(n))[0][0].keyFrame||((e=this.getGopForFusion_(s[0],t))?(d=e.duration,a.unshift(e),a.byteLength+=e.byteLength,a.nalCount+=e.nalCount,a.pts=e.pts,a.dts=e.dts,a.duration+=e.duration):a=function(t){var i;return!t[0][0].keyFrame&&1<t.length&&(i=t.shift(),t.byteLength-=i.byteLength,t.nalCount-=i.nalCount,t[0][0].dts=i.dts,t[0][0].pts=i.pts,t[0][0].duration+=i.duration),t}(a)),o.length){var v;if(!(v=i.alignGopsAtEnd?this.alignGopsAtEnd_(a):this.alignGopsAtStart_(a)))return this.gopCache_.unshift({gop:a.pop(),pps:t.pps,sps:t.sps}),this.gopCache_.length=Math.min(6,this.gopCache_.length),s=[],this.resetStream_(),void this.trigger("done","VideoSegmentStream");wu(t),a=v}Pu(t,a),t.samples=function(t){var i,n,e,r,s,o,a=0,u=[];for(i=0;i<t.length;i++)for(r=t[i],n=0;n<r.length;n++)s=r[n],o=void 0,(o={size:0,flags:{isLeading:0,dependsOn:1,isDependedOn:0,hasRedundancy:0,degradationPriority:0,isNonSyncSample:1}}).dataOffset=a,o.compositionTimeOffset=s.pts-s.dts,o.duration=s.duration,o.size=4*s.length,o.size+=s.byteLength,s.keyFrame&&(o.flags.dependsOn=2,o.flags.isNonSyncSample=0),a+=(e=o).size,u.push(e);return u}(a),c=uu.mdat(function(t){var i,n,e,r,s,o,a=0,u=new Uint8Array(t.byteLength+4*t.nalCount),c=new DataView(u.buffer);for(i=0;i<t.length;i++)for(r=t[i],n=0;n<r.length;n++)for(s=r[n],e=0;e<s.length;e++)c.setUint32(a,(o=s[e]).data.byteLength),u.set(o.data,a+=4),a+=o.data.byteLength;return u}(a)),t.baseMediaDecodeTime=Au(t,i.keepOriginalTimestamps),this.trigger("processedGopsInfo",a.map(function(t){return{pts:t.pts,dts:t.dts,byteLength:t.byteLength}})),this.trigger("segmentTimingInfo",function(t,i,n,e,r,s){return{start:{dts:t,pts:t+(n-i)},end:{dts:t+(e-i),pts:t+(r-n)},prependedContentDuration:s,baseMediaDecodeTime:t}}(t.baseMediaDecodeTime,(f=a[0]).dts,f.pts,(l=a[a.length-1]).dts+l.duration,l.pts+l.duration,d)),this.gopCache_.unshift({gop:a.pop(),pps:t.pps,sps:t.sps}),this.gopCache_.length=Math.min(6,this.gopCache_.length),s=[],this.trigger("baseMediaDecodeTime",t.baseMediaDecodeTime),this.trigger("timelineStartInfo",t.timelineStartInfo),u=uu.moof(r,[t]),h=new Uint8Array(u.byteLength+c.byteLength),r++,h.set(u),h.set(c,u.byteLength),this.trigger("data",{track:t,boxes:h}),this.resetStream_(),this.trigger("done","VideoSegmentStream")},this.resetStream_=function(){wu(t),e=n=void 0},this.getGopForFusion_=function(i){var n,e,r,s,o,a=1/0;for(o=0;o<this.gopCache_.length;o++)r=(s=this.gopCache_[o]).gop,t.pps&&ac(t.pps[0],s.pps[0])&&t.sps&&ac(t.sps[0],s.sps[0])&&(r.dts<t.timelineStartInfo.dts||-1e4<=(n=i.dts-r.dts-r.duration)&&n<=45e3&&(!e||n<a)&&(e=s,a=n));return e?e.gop:null},this.alignGopsAtStart_=function(t){var i,n,e,r,s,a,u,c;for(s=t.byteLength,a=t.nalCount,u=t.duration,i=n=0;i<o.length&&n<t.length&&(e=o[i]).pts!==(r=t[n]).pts;)r.pts>e.pts?i++:(n++,s-=r.byteLength,a-=r.nalCount,u-=r.duration);return 0===n?t:n===t.length?null:((c=t.slice(n)).byteLength=s,c.duration=u,c.nalCount=a,c.pts=c[0].pts,c.dts=c[0].dts,c)},this.alignGopsAtEnd_=function(t){var i,n,e,r,s,a,u;for(i=o.length-1,n=t.length-1,s=null,a=!1;0<=i&&0<=n;){if((e=o[i]).pts===(r=t[n]).pts){a=!0;break}e.pts>r.pts?i--:(i===o.length-1&&(s=n),n--)}if(!a&&null===s)return null;if(0===(u=a?n:s))return t;var c=t.slice(u),h=c.reduce(function(t,i){return t.byteLength+=i.byteLength,t.duration+=i.duration,t.nalCount+=i.nalCount,t},{byteLength:0,duration:0,nalCount:0});return c.byteLength=h.byteLength,c.duration=h.duration,c.nalCount=h.nalCount,c.pts=c[0].pts,c.dts=c[0].dts,c},this.alignGopsWith=function(t){o=t}}).prototype=new mu,(fc=function(t,i){this.numberOfTracks=0,this.metadataStream=i,this.remuxTracks=void 0===(t=t||{}).remux||!!t.remux,"boolean"==typeof t.keepOriginalTimestamps&&(this.keepOriginalTimestamps=t.keepOriginalTimestamps),this.pendingTracks=[],this.videoTrack=null,this.pendingBoxes=[],this.pendingCaptions=[],this.pendingMetadata=[],this.pendingBytes=0,this.emittedTracks=0,fc.prototype.init.call(this),this.push=function(t){return t.text?this.pendingCaptions.push(t):t.frames?this.pendingMetadata.push(t):(this.pendingTracks.push(t.track),this.pendingBoxes.push(t.boxes),this.pendingBytes+=t.boxes.byteLength,"video"===t.track.type&&(this.videoTrack=t.track),void("audio"===t.track.type&&(this.audioTrack=t.track)))}}).prototype=new mu,fc.prototype.flush=function(t){var i,n,e,r,s=0,o={captions:[],captionStreams:{},metadata:[],info:{}},a=0;if(this.pendingTracks.length<this.numberOfTracks){if("VideoSegmentStream"!==t&&"AudioSegmentStream"!==t)return;if(this.remuxTracks)return;if(0===this.pendingTracks.length)return this.emittedTracks++,void(this.emittedTracks>=this.numberOfTracks&&(this.trigger("done"),this.emittedTracks=0))}for(this.videoTrack?(a=this.videoTrack.timelineStartInfo.pts,mc.forEach(function(t){o.info[t]=this.videoTrack[t]},this)):this.audioTrack&&(a=this.audioTrack.timelineStartInfo.pts,pc.forEach(function(t){o.info[t]=this.audioTrack[t]},this)),o.type=1===this.pendingTracks.length?this.pendingTracks[0].type:"combined",this.emittedTracks+=this.pendingTracks.length,e=uu.initSegment(this.pendingTracks),o.initSegment=new Uint8Array(e.byteLength),o.initSegment.set(e),o.data=new Uint8Array(this.pendingBytes),r=0;r<this.pendingBoxes.length;r++)o.data.set(this.pendingBoxes[r],s),s+=this.pendingBoxes[r].byteLength;for(r=0;r<this.pendingCaptions.length;r++)(i=this.pendingCaptions[r]).startTime=i.startPts,this.keepOriginalTimestamps||(i.startTime-=a),i.startTime/=9e4,i.endTime=i.endPts,this.keepOriginalTimestamps||(i.endTime-=a),i.endTime/=9e4,o.captionStreams[i.stream]=!0,o.captions.push(i);for(r=0;r<this.pendingMetadata.length;r++)(n=this.pendingMetadata[r]).cueTime=n.pts,this.keepOriginalTimestamps||(n.cueTime-=a),n.cueTime/=9e4,o.metadata.push(n);o.metadata.dispatchType=this.metadataStream.dispatchType,this.pendingTracks.length=0,this.videoTrack=null,this.pendingBoxes.length=0,this.pendingCaptions.length=0,this.pendingBytes=0,this.pendingMetadata.length=0,this.trigger("data",o),this.emittedTracks>=this.numberOfTracks&&(this.trigger("done"),this.emittedTracks=0)},(hc=function(t){var i,n,e=this,r=!0;hc.prototype.init.call(this),this.baseMediaDecodeTime=(t=t||{}).baseMediaDecodeTime||0,this.transmuxPipeline_={},this.setupAacPipeline=function(){var i={};(this.transmuxPipeline_=i).type="aac",i.metadataStream=new qu.MetadataStream,i.aacStream=new lc,i.audioTimestampRolloverStream=new qu.TimestampRolloverStream("audio"),i.timedMetadataTimestampRolloverStream=new qu.TimestampRolloverStream("timed-metadata"),i.adtsStream=new tc,i.coalesceStream=new fc(t,i.metadataStream),i.headOfPipeline=i.aacStream,i.aacStream.pipe(i.audioTimestampRolloverStream).pipe(i.adtsStream),i.aacStream.pipe(i.timedMetadataTimestampRolloverStream).pipe(i.metadataStream).pipe(i.coalesceStream),i.metadataStream.on("timestamp",function(t){i.aacStream.setTimestamp(t.timeStamp)}),i.aacStream.on("data",function(r){"timed-metadata"!==r.type||i.audioSegmentStream||(n=n||{timelineStartInfo:{baseMediaDecodeTime:e.baseMediaDecodeTime},codec:"adts",type:"audio"},i.coalesceStream.numberOfTracks++,i.audioSegmentStream=new cc(n,t),i.adtsStream.pipe(i.audioSegmentStream).pipe(i.coalesceStream))}),i.coalesceStream.on("data",this.trigger.bind(this,"data")),i.coalesceStream.on("done",this.trigger.bind(this,"done"))},this.setupTsPipeline=function(){var r={};(this.transmuxPipeline_=r).type="ts",r.metadataStream=new qu.MetadataStream,r.packetStream=new qu.TransportPacketStream,r.parseStream=new qu.TransportParseStream,r.elementaryStream=new qu.ElementaryStream,r.videoTimestampRolloverStream=new qu.TimestampRolloverStream("video"),r.audioTimestampRolloverStream=new qu.TimestampRolloverStream("audio"),r.timedMetadataTimestampRolloverStream=new qu.TimestampRolloverStream("timed-metadata"),r.adtsStream=new tc,r.h264Stream=new dc,r.captionStream=new qu.CaptionStream,r.coalesceStream=new fc(t,r.metadataStream),r.headOfPipeline=r.packetStream,r.packetStream.pipe(r.parseStream).pipe(r.elementaryStream),r.elementaryStream.pipe(r.videoTimestampRolloverStream).pipe(r.h264Stream),r.elementaryStream.pipe(r.audioTimestampRolloverStream).pipe(r.adtsStream),r.elementaryStream.pipe(r.timedMetadataTimestampRolloverStream).pipe(r.metadataStream).pipe(r.coalesceStream),r.h264Stream.pipe(r.captionStream).pipe(r.coalesceStream),r.elementaryStream.on("data",function(s){var o;if("metadata"===s.type){for(o=s.tracks.length;o--;)i||"video"!==s.tracks[o].type?n||"audio"!==s.tracks[o].type||((n=s.tracks[o]).timelineStartInfo.baseMediaDecodeTime=e.baseMediaDecodeTime):(i=s.tracks[o]).timelineStartInfo.baseMediaDecodeTime=e.baseMediaDecodeTime;i&&!r.videoSegmentStream&&(r.coalesceStream.numberOfTracks++,r.videoSegmentStream=new uc(i,t),r.videoSegmentStream.on("timelineStartInfo",function(t){n&&(n.timelineStartInfo=t,r.audioSegmentStream.setEarliestDts(t.dts))}),r.videoSegmentStream.on("processedGopsInfo",e.trigger.bind(e,"gopInfo")),r.videoSegmentStream.on("segmentTimingInfo",e.trigger.bind(e,"videoSegmentTimingInfo")),r.videoSegmentStream.on("baseMediaDecodeTime",function(t){n&&r.audioSegmentStream.setVideoBaseMediaDecodeTime(t)}),r.h264Stream.pipe(r.videoSegmentStream).pipe(r.coalesceStream)),n&&!r.audioSegmentStream&&(r.coalesceStream.numberOfTracks++,r.audioSegmentStream=new cc(n,t),r.adtsStream.pipe(r.audioSegmentStream).pipe(r.coalesceStream))}}),r.coalesceStream.on("data",this.trigger.bind(this,"data")),r.coalesceStream.on("done",this.trigger.bind(this,"done"))},this.setBaseMediaDecodeTime=function(e){var r=this.transmuxPipeline_;t.keepOriginalTimestamps||(this.baseMediaDecodeTime=e),n&&(n.timelineStartInfo.dts=void 0,n.timelineStartInfo.pts=void 0,wu(n),t.keepOriginalTimestamps||(n.timelineStartInfo.baseMediaDecodeTime=e),r.audioTimestampRolloverStream&&r.audioTimestampRolloverStream.discontinuity()),i&&(r.videoSegmentStream&&(r.videoSegmentStream.gopCache_=[],r.videoTimestampRolloverStream.discontinuity()),i.timelineStartInfo.dts=void 0,i.timelineStartInfo.pts=void 0,wu(i),r.captionStream.reset(),t.keepOriginalTimestamps||(i.timelineStartInfo.baseMediaDecodeTime=e)),r.timedMetadataTimestampRolloverStream&&r.timedMetadataTimestampRolloverStream.discontinuity()},this.setAudioAppendStart=function(t){n&&this.transmuxPipeline_.audioSegmentStream.setAudioAppendStart(t)},this.alignGopsWith=function(t){i&&this.transmuxPipeline_.videoSegmentStream&&this.transmuxPipeline_.videoSegmentStream.alignGopsWith(t)},this.push=function(t){if(r){var i=vc(t);i&&"aac"!==this.transmuxPipeline_.type?this.setupAacPipeline():i||"ts"===this.transmuxPipeline_.type||this.setupTsPipeline(),r=!1}this.transmuxPipeline_.headOfPipeline.push(t)},this.flush=function(){r=!0,this.transmuxPipeline_.headOfPipeline.flush()},this.resetCaptions=function(){this.transmuxPipeline_.captionStream&&this.transmuxPipeline_.captionStream.reset()}}).prototype=new mu;var Ac=function(t){for(var i,n,e=t.byteLength,r=[],s=1;s<e-2;)0===t[s]&&0===t[s+1]&&3===t[s+2]?(r.push(s+2),s+=2):s++;if(0===r.length)return t;i=e-r.length,n=new Uint8Array(i);var o=0;for(s=0;s<i;o++,s++)o===r[0]&&(o++,r.shift()),n[s]=t[o];return n},Pc=Ou.CaptionStream,Mc={generator:uu,probe:nu,Transmuxer:hc,AudioSegmentStream:cc,VideoSegmentStream:uc,CaptionParser:function(){var t,i,n,e,r,s=!1;this.isInitialized=function(){return s},this.init=function(){t=new Pc,s=!0,t.on("data",function(t){t.startTime=t.startPts/e,t.endTime=t.endPts/e,r.captions.push(t),r.captionStreams[t.stream]=!0})},this.isNewInit=function(t,i){return!(t&&0===t.length||i&&"object"==typeof i&&0===Object.keys(i).length||n===t[0]&&e===i[n])},this.parse=function(t,s,o){var a;if(!this.isInitialized())return null;if(!s||!o)return null;if(this.isNewInit(s,o))e=o[n=s[0]];else if(!n||!e)return i.push(t),null;for(;0<i.length;){var u=i.shift();this.parse(u,s,o)}return null!==(a=function(t,i,n){return i?{seiNals:Tc(t,i)[i],timescale:n}:null}(t,n,e))&&a.seiNals?(this.pushNals(a.seiNals),this.flushStream(),r):null},this.pushNals=function(i){if(!this.isInitialized()||!i||0===i.length)return null;i.forEach(function(i){t.push(i)})},this.flushStream=function(){if(!this.isInitialized())return null;t.flush()},this.clearParsedCaptions=function(){r.captions=[],r.captionStreams={}},this.resetCaptionStream=function(){if(!this.isInitialized())return null;t.reset()},this.clearAllCaptions=function(){this.clearParsedCaptions(),this.resetCaptionStream()},this.reset=function(){i=[],e=n=null,r?this.clearParsedCaptions():r={captions:[],captionStreams:{}},this.resetCaptionStream()},this.reset()}}.CaptionParser,Ec=_u,Ic={};function kc(t,i,n){for(var e,r,s,o,a=0,u=Cc,c=!1;u<=t.byteLength;)if(71!==t[a]||71!==t[u]&&u!==t.byteLength)a++,u++;else{switch(e=t.subarray(a,u),Ic.ts.parseType(e,i.pid)){case"pes":r=Ic.ts.parsePesType(e,i.table),s=Ic.ts.parsePayloadUnitStartIndicator(e),"audio"===r&&s&&(o=Ic.ts.parsePesTime(e))&&(o.type="audio",n.audio.push(o),c=!0)}if(c)break;a+=Cc,u+=Cc}for(a=(u=t.byteLength)-Cc,c=!1;0<=a;)if(71!==t[a]||71!==t[u]&&u!==t.byteLength)a--,u--;else{switch(e=t.subarray(a,u),Ic.ts.parseType(e,i.pid)){case"pes":r=Ic.ts.parsePesType(e,i.table),s=Ic.ts.parsePayloadUnitStartIndicator(e),"audio"===r&&s&&(o=Ic.ts.parsePesTime(e))&&(o.type="audio",n.audio.push(o),c=!0)}if(c)break;a-=Cc,u-=Cc}}function Dc(t,i,n){for(var e,r,s,o,a,u,c,h=0,f=Cc,l=!1,d={data:[],size:0};f<t.byteLength;)if(71!==t[h]||71!==t[f])h++,f++;else{switch(e=t.subarray(h,f),Ic.ts.parseType(e,i.pid)){case"pes":if(r=Ic.ts.parsePesType(e,i.table),s=Ic.ts.parsePayloadUnitStartIndicator(e),"video"===r&&(s&&!l&&(o=Ic.ts.parsePesTime(e))&&(o.type="video",n.video.push(o),l=!0),!n.firstKeyFrame)){if(s&&0!==d.size){for(a=new Uint8Array(d.size),u=0;d.data.length;)c=d.data.shift(),a.set(c,u),u+=c.byteLength;if(Ic.ts.videoPacketContainsKeyFrame(a)){var v=Ic.ts.parsePesTime(a);v&&(n.firstKeyFrame=v,n.firstKeyFrame.type="video")}d.size=0}d.data.push(e),d.size+=e.byteLength}}if(l&&n.firstKeyFrame)break;h+=Cc,f+=Cc}for(h=(f=t.byteLength)-Cc,l=!1;0<=h;)if(71!==t[h]||71!==t[f])h--,f--;else{switch(e=t.subarray(h,f),Ic.ts.parseType(e,i.pid)){case"pes":r=Ic.ts.parsePesType(e,i.table),s=Ic.ts.parsePayloadUnitStartIndicator(e),"video"===r&&s&&(o=Ic.ts.parsePesTime(e))&&(o.type="video",n.video.push(o),l=!0)}if(l)break;h-=Cc,f-=Cc}}Ic.ts={parseType:function(t,i){var n=yc(t);return 0===n?"pat":n===i?"pmt":i?"pes":null},parsePat:function(t){var i=gc(t),n=4+Sc(t);return i&&(n+=t[n]+1),(31&t[n+10])<<8|t[n+11]},parsePmt:function(t){var i={},n=gc(t),e=4+Sc(t);if(n&&(e+=t[e]+1),1&t[e+5]){var r;r=3+((15&t[e+1])<<8|t[e+2])-4;for(var s=12+((15&t[e+10])<<8|t[e+11]);s<r;){var o=e+s;i[(31&t[o+1])<<8|t[o+2]]=t[o],s+=5+((15&t[o+3])<<8|t[o+4])}return i}},parsePayloadUnitStartIndicator:gc,parsePesType:function(t,i){switch(i[yc(t)]){case Bu.H264_STREAM_TYPE:return"video";case Bu.ADTS_STREAM_TYPE:return"audio";case Bu.METADATA_STREAM_TYPE:return"timed-metadata";default:return null}},parsePesTime:function(t){if(!gc(t))return null;var i=4+Sc(t);if(i>=t.byteLength)return null;var n,e=null;return 192&(n=t[i+7])&&((e={}).pts=(14&t[i+9])<<27|(255&t[i+10])<<20|(254&t[i+11])<<12|(255&t[i+12])<<5|(254&t[i+13])>>>3,e.pts*=4,e.pts+=(6&t[i+13])>>>1,e.dts=e.pts,64&n&&(e.dts=(14&t[i+14])<<27|(255&t[i+15])<<20|(254&t[i+16])<<12|(255&t[i+17])<<5|(254&t[i+18])>>>3,e.dts*=4,e.dts+=(6&t[i+18])>>>1)),e},videoPacketContainsKeyFrame:function(t){for(var i=4+Sc(t),n=t.subarray(i),e=0,r=0,s=!1;r<n.byteLength-3;r++)if(1===n[r+2]){e=r+5;break}for(;e<n.byteLength;)switch(n[e]){case 0:if(0!==n[e-1]){e+=2;break}if(0!==n[e-2]){e++;break}for(r+3!==e-2&&"slice_layer_without_partitioning_rbsp_idr"===wc(31&n[r+3])&&(s=!0);1!==n[++e]&&e<n.length;);r=e-2,e+=3;break;case 1:if(0!==n[e-1]||0!==n[e-2]){e+=3;break}"slice_layer_without_partitioning_rbsp_idr"===wc(31&n[r+3])&&(s=!0),r=e-2,e+=3;break;default:e+=3}return n=n.subarray(r),e-=r,r=0,n&&3<n.byteLength&&"slice_layer_without_partitioning_rbsp_idr"===wc(31&n[r+3])&&(s=!0),s}},Ic.aac=oc;var Cc=188;function Gc(t,i){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}function Oc(t,i){for(var n=0;n<i.length;n++){var e=i[n];e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(t,e.key,e)}}var Bc=null,xc=(Rc.prototype.decrypt=function(t,i,n,e,r,s){var o=this._key[1],a=t^o[0],u=e^o[1],c=n^o[2],h=i^o[3],f=void 0,l=void 0,d=void 0,v=o.length/4-2,p=void 0,m=4,b=this._tables[1],T=b[0],y=b[1],g=b[2],S=b[3],w=b[4];for(p=0;p<v;p++)f=T[a>>>24]^y[u>>16&255]^g[c>>8&255]^S[255&h]^o[m],l=T[u>>>24]^y[c>>16&255]^g[h>>8&255]^S[255&a]^o[m+1],d=T[c>>>24]^y[h>>16&255]^g[a>>8&255]^S[255&u]^o[m+2],h=T[h>>>24]^y[a>>16&255]^g[u>>8&255]^S[255&c]^o[m+3],m+=4,a=f,u=l,c=d;for(p=0;p<4;p++)r[(3&-p)+s]=w[a>>>24]<<24^w[u>>16&255]<<16^w[c>>8&255]<<8^w[255&h]^o[m++],f=a,a=u,u=c,c=h,h=f},Rc);function Rc(t){Gc(this,Rc),Bc=Bc||function(){var t=[[[],[],[],[],[]],[[],[],[],[],[]]],i=t[0],n=t[1],e=i[4],r=n[4],s=void 0,o=void 0,a=void 0,u=[],c=[],h=void 0,f=void 0,l=void 0,d=void 0,v=void 0;for(s=0;s<256;s++)c[(u[s]=s<<1^283*(s>>7))^s]=s;for(o=a=0;!e[o];o^=h||1,a=c[a]||1)for(l=(l=a^a<<1^a<<2^a<<3^a<<4)>>8^255&l^99,v=16843009*u[f=u[h=u[r[e[o]=l]=o]]]^65537*f^257*h^16843008*o,d=257*u[l]^16843008*l,s=0;s<4;s++)i[s][o]=d=d<<24^d>>>8,n[s][l]=v=v<<24^v>>>8;for(s=0;s<5;s++)i[s]=i[s].slice(0),n[s]=n[s].slice(0);return t}(),this._tables=[[Bc[0][0].slice(),Bc[0][1].slice(),Bc[0][2].slice(),Bc[0][3].slice(),Bc[0][4].slice()],[Bc[1][0].slice(),Bc[1][1].slice(),Bc[1][2].slice(),Bc[1][3].slice(),Bc[1][4].slice()]];var i=void 0,n=void 0,e=void 0,r=void 0,s=void 0,o=this._tables[0][4],a=this._tables[1],u=t.length,c=1;if(4!==u&&6!==u&&8!==u)throw new Error("Invalid aes key size");for(r=t.slice(0),this._key=[r,s=[]],i=u;i<4*u+28;i++)e=r[i-1],(i%u==0||8===u&&i%u==4)&&(e=o[e>>>24]<<24^o[e>>16&255]<<16^o[e>>8&255]<<8^o[255&e],i%u==0&&(e=e<<8^e>>>24^c<<24,c=c<<1^283*(c>>7))),r[i]=r[i-u]^e;for(n=0;i;n++,i--)e=r[3&n?i:i-4],s[n]=i<=4||n<4?e:a[0][o[e>>>24]]^a[1][o[e>>16&255]]^a[2][o[e>>8&255]]^a[3][o[255&e]]}var Nc=(Hc.prototype.on=function(t,i){this.listeners[t]||(this.listeners[t]=[]),this.listeners[t].push(i)},Hc.prototype.off=function(t,i){if(!this.listeners[t])return!1;var n=this.listeners[t].indexOf(i);return this.listeners[t].splice(n,1),-1<n},Hc.prototype.trigger=function(t,i){var n=this.listeners[t];if(n)if(2===arguments.length)for(var e=n.length,r=0;r<e;++r)n[r].call(this,i);else for(var s=Array.prototype.slice.call(arguments,1),o=n.length,a=0;a<o;++a)n[a].apply(this,s)},Hc.prototype.dispose=function(){this.listeners={}},Hc.prototype.pipe=function(t){this.on("data",function(i){t.push(i)})},Hc);function Hc(){Gc(this,Hc),this.listeners={}}var jc,_c=(function(t,i){if("function"!=typeof i&&null!==i)throw new TypeError("Super expression must either be null or a function, not "+typeof i);t.prototype=Object.create(i&&i.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),i&&(Object.setPrototypeOf?Object.setPrototypeOf(t,i):t.__proto__=i)}(Uc,jc=Nc),Uc.prototype.processJob_=function(){this.jobs.shift()(),this.timeout_=this.jobs.length?setTimeout(this.processJob_.bind(this),this.delay):null},Uc.prototype.push=function(t){this.jobs.push(t),this.timeout_||(this.timeout_=setTimeout(this.processJob_.bind(this),this.delay))},Uc);function Uc(){Gc(this,Uc);var t=function(t,i){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!i||"object"!=typeof i&&"function"!=typeof i?t:i}(this,jc.call(this,Nc));return t.jobs=[],t.delay=1,t.timeout_=null,t}function Lc(t){return t<<24|(65280&t)<<8|(16711680&t)>>8|t>>>24}function Vc(t,i,n){var e=new Int32Array(t.buffer,t.byteOffset,t.byteLength>>2),r=new xc(Array.prototype.slice.call(i)),s=new Uint8Array(t.byteLength),o=new Int32Array(s.buffer),a=void 0,u=void 0,c=void 0,h=void 0,f=void 0,l=void 0,d=void 0,v=void 0,p=void 0;for(a=n[0],u=n[1],c=n[2],h=n[3],p=0;p<e.length;p+=4)f=Lc(e[p]),l=Lc(e[p+1]),d=Lc(e[p+2]),v=Lc(e[p+3]),r.decrypt(f,l,d,v,o,p),o[p]=Lc(o[p]^a),o[p+1]=Lc(o[p+1]^u),o[p+2]=Lc(o[p+2]^c),o[p+3]=Lc(o[p+3]^h),a=f,u=l,c=d,h=v;return s}var Fc=(Wc.prototype.decryptChunk_=function(t,i,n,e){return function(){var r=Vc(t,i,n);e.set(r,t.byteOffset)}},function(t,i,n){n&&Oc(t,n)}(Wc,0,[{key:"STEP",get:function(){return 32e3}}]),Wc);function Wc(t,i,n,e){Gc(this,Wc);var r=Wc.STEP,s=new Int32Array(t.buffer),o=new Uint8Array(t.byteLength),a=0;for(this.asyncStream_=new _c,this.asyncStream_.push(this.decryptChunk_(s.subarray(a,a+r),i,n,o)),a=r;a<s.length;a+=r)n=new Uint32Array([Lc(s[a-4]),Lc(s[a-3]),Lc(s[a-2]),Lc(s[a-1])]),this.asyncStream_.push(this.decryptChunk_(s.subarray(a,a+r),i,n,o));this.asyncStream_.push(function(){e(null,o.subarray(0,o.byteLength-o[o.byteLength-1]))})}function Xc(i,n){return/^[a-z]+:/i.test(n)?n:(/\/\//i.test(i)||(i=po.buildAbsoluteURL(t.location.href,i)),po.buildAbsoluteURL(i,n))}function $c(t,i,n){return t&&n.responseURL&&i!==n.responseURL?n.responseURL:i}function zc(t,i){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}var Kc=function(t,i,n){return i&&qc(t.prototype,i),n&&qc(t,n),t};function qc(t,i){for(var n=0;n<i.length;n++){var e=i[n];e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(t,e.key,e)}}function Yc(t,i){if("function"!=typeof i&&null!==i)throw new TypeError("Super expression must either be null or a function, not "+typeof i);t.prototype=Object.create(i&&i.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),i&&(Object.setPrototypeOf?Object.setPrototypeOf(t,i):t.__proto__=i)}function Qc(t,i){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!i||"object"!=typeof i&&"function"!=typeof i?t:i}function Jc(t,i){["AUDIO","SUBTITLES"].forEach(function(n){for(var e in t.mediaGroups[n])for(var r in t.mediaGroups[n][e])i(t.mediaGroups[n][e][r],n,e,r)})}function Zc(t,i){var n=rh(t,{}),e=n.playlists[i.uri];if(!e)return null;if(e.segments&&i.segments&&e.segments.length===i.segments.length&&e.endList===i.endList&&e.mediaSequence===i.mediaSequence)return null;var r=rh(e,i);e.segments&&(r.segments=function(t,i,n){var e=i.slice();n=n||0;for(var r=Math.min(t.length,i.length+n),s=n;s<r;s++)e[s-n]=rh(t[s],e[s-n]);return e}(e.segments,i.segments,i.mediaSequence-e.mediaSequence)),r.segments.forEach(function(t){!function(t,i){t.resolvedUri||(t.resolvedUri=Xc(i,t.uri)),t.key&&!t.key.resolvedUri&&(t.key.resolvedUri=Xc(i,t.key.uri)),t.map&&!t.map.resolvedUri&&(t.map.resolvedUri=Xc(i,t.map.uri))}(t,r.resolvedUri)});for(var s=0;s<n.playlists.length;s++)n.playlists[s].uri===i.uri&&(n.playlists[s]=r);return n.playlists[i.uri]=r,n}function th(t){for(var i=t.playlists.length;i--;){var n=t.playlists[i];(t.playlists[n.uri]=n).resolvedUri=Xc(t.uri,n.uri),n.id=i,n.attributes||(n.attributes={},sh.warn("Invalid playlist STREAM-INF detected. Missing BANDWIDTH attribute."))}}function ih(t){Jc(t,function(i){i.uri&&(i.resolvedUri=Xc(t.uri,i.uri))})}function nh(t,i){var n=t.segments[t.segments.length-1];return i&&n&&n.duration?1e3*n.duration:500*(t.targetDuration||10)}var eh=function(t,i){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,i){var n=[],e=!0,r=!1,s=void 0;try{for(var o,a=t[Symbol.iterator]();!(e=(o=a.next()).done)&&(n.push(o.value),!i||n.length!==i);e=!0);}catch(t){r=!0,s=t}finally{try{!e&&a.return&&a.return()}finally{if(r)throw s}}return n}(t,i);throw new TypeError("Invalid attempt to destructure non-iterable instance")},rh=fo.mergeOptions,sh=fo.log,oh=(Yc(ah,fo.EventTarget),Kc(ah,[{key:"playlistRequestError",value:function(t,i,n){this.request=null,n&&(this.state=n),this.error={playlist:this.master.playlists[i],status:t.status,message:"HLS playlist request error at URL: "+i+".",responseText:t.responseText,code:500<=t.status?4:2},this.trigger("error")}},{key:"haveMetadata",value:function(i,n){var e=this;this.request=null,this.state="HAVE_METADATA";var r=new Io;this.customTagParsers.forEach(function(t){return r.addParser(t)}),this.customTagMappers.forEach(function(t){return r.addTagMapper(t)}),r.push(i.responseText),r.end(),r.manifest.uri=n,r.manifest.attributes=r.manifest.attributes||{};var s=Zc(this.master,r.manifest);this.targetDuration=r.manifest.targetDuration,s?(this.master=s,this.media_=this.master.playlists[r.manifest.uri]):this.trigger("playlistunchanged"),this.media().endList||(t.clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=t.setTimeout(function(){e.trigger("mediaupdatetimeout")},nh(this.media(),!!s))),this.trigger("loadedplaylist")}},{key:"dispose",value:function(){this.stopRequest(),t.clearTimeout(this.mediaUpdateTimeout),t.clearTimeout(this.finalRenditionTimeout)}},{key:"stopRequest",value:function(){if(this.request){var t=this.request;this.request=null,t.onreadystatechange=null,t.abort()}}},{key:"media",value:function(i,n){var e=this;if(!i)return this.media_;if("HAVE_NOTHING"===this.state)throw new Error("Cannot switch media playlist from "+this.state);if("string"==typeof i){if(!this.master.playlists[i])throw new Error("Unknown playlist URI: "+i);i=this.master.playlists[i]}if(t.clearTimeout(this.finalRenditionTimeout),n){var r=i.targetDuration/2*1e3||5e3;this.finalRenditionTimeout=t.setTimeout(this.media.bind(this,i,!1),r)}else{var s=this.state,o=!this.media_||i.uri!==this.media_.uri;if(this.master.playlists[i.uri].endList)return this.request&&(this.request.onreadystatechange=null,this.request.abort(),this.request=null),this.state="HAVE_METADATA",this.media_=i,void(o&&(this.trigger("mediachanging"),this.trigger("mediachange")));if(o){if(this.state="SWITCHING_MEDIA",this.request){if(i.resolvedUri===this.request.url)return;this.request.onreadystatechange=null,this.request.abort(),this.request=null}this.media_&&this.trigger("mediachanging"),this.request=this.hls_.xhr({uri:i.resolvedUri,withCredentials:this.withCredentials},function(t,n){if(e.request){if(i.resolvedUri=$c(e.handleManifestRedirects,i.resolvedUri,n),t)return e.playlistRequestError(e.request,i.uri,s);e.haveMetadata(n,i.uri),e.trigger("HAVE_MASTER"===s?"loadedmetadata":"mediachange")}})}}}},{key:"pause",value:function(){this.stopRequest(),t.clearTimeout(this.mediaUpdateTimeout),"HAVE_NOTHING"===this.state&&(this.started=!1),"SWITCHING_MEDIA"===this.state?this.state=this.media_?"HAVE_METADATA":"HAVE_MASTER":"HAVE_CURRENT_METADATA"===this.state&&(this.state="HAVE_METADATA")}},{key:"load",value:function(i){var n=this;t.clearTimeout(this.mediaUpdateTimeout);var e=this.media();i?this.mediaUpdateTimeout=t.setTimeout(function(){return n.load()},e?e.targetDuration/2*1e3:5e3):this.started?this.trigger(e&&!e.endList?"mediaupdatetimeout":"loadedplaylist"):this.start()}},{key:"start",value:function(){var i=this;this.started=!0,this.request=this.hls_.xhr({uri:this.srcUrl,withCredentials:this.withCredentials},function(n,e){if(i.request){if(i.request=null,n)return i.error={status:e.status,message:"HLS playlist request error at URL: "+i.srcUrl+".",responseText:e.responseText,code:2},"HAVE_NOTHING"===i.state&&(i.started=!1),i.trigger("error");var r=new Io;return i.customTagParsers.forEach(function(t){return r.addParser(t)}),i.customTagMappers.forEach(function(t){return r.addTagMapper(t)}),r.push(e.responseText),r.end(),i.state="HAVE_MASTER",i.srcUrl=$c(i.handleManifestRedirects,i.srcUrl,e),r.manifest.uri=i.srcUrl,r.manifest.playlists?(i.master=r.manifest,th(i.master),ih(i.master),i.trigger("loadedplaylist"),void(i.request||i.media(r.manifest.playlists[0]))):(i.master={mediaGroups:{AUDIO:{},VIDEO:{},"CLOSED-CAPTIONS":{},SUBTITLES:{}},uri:t.location.href,playlists:[{uri:i.srcUrl,id:0,resolvedUri:i.srcUrl,attributes:{}}]},i.master.playlists[i.srcUrl]=i.master.playlists[0],i.haveMetadata(e,i.srcUrl),i.trigger("loadedmetadata"))}})}}]),ah);function ah(t,i){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{};zc(this,ah);var e=Qc(this,(ah.__proto__||Object.getPrototypeOf(ah)).call(this)),r=n.withCredentials,s=void 0!==r&&r,o=n.handleManifestRedirects,a=void 0!==o&&o;e.srcUrl=t,e.hls_=i,e.withCredentials=s,e.handleManifestRedirects=a;var u=i.options_;if(e.customTagParsers=u&&u.customTagParsers||[],e.customTagMappers=u&&u.customTagMappers||[],!e.srcUrl)throw new Error("A non-empty playlist URL is required");return e.state="HAVE_NOTHING",e.on("mediaupdatetimeout",function(){"HAVE_METADATA"===e.state&&(e.state="HAVE_CURRENT_METADATA",e.request=e.hls_.xhr({uri:Xc(e.master.uri,e.media().uri),withCredentials:e.withCredentials},function(t){if(e.request)return t?e.playlistRequestError(e.request,e.media().uri,"HAVE_METADATA"):void e.haveMetadata(e.request,e.media().uri)}))}),e}function uh(t,i,n){var e,r;return void 0===i&&(i=t.mediaSequence+t.segments.length),i<t.mediaSequence?0:(e=function(t,i){var n=0,e=i-t.mediaSequence,r=t.segments[e];if(r){if(void 0!==r.start)return{result:r.start,precise:!0};if(void 0!==r.end)return{result:r.end-r.duration,precise:!0}}for(;e--;){if(void 0!==(r=t.segments[e]).end)return{result:n+r.end,precise:!0};if(n+=r.duration,void 0!==r.start)return{result:n+r.start,precise:!0}}return{result:n,precise:!1}}(t,i)).precise?e.result:(r=function(t,i){for(var n=0,e=void 0,r=i-t.mediaSequence;r<t.segments.length;r++){if(void 0!==(e=t.segments[r]).start)return{result:e.start-n,precise:!0};if(n+=e.duration,void 0!==e.end)return{result:e.end-n,precise:!0}}return{result:-1,precise:!1}}(t,i)).precise?r.result:e.result+n}function ch(i,n,e){if(!i)return 0;if("number"!=typeof e&&(e=0),void 0===n){if(i.totalDuration)return i.totalDuration;if(!i.endList)return t.Infinity}return uh(i,n,e)}function hh(t,i,n){var e=0;if(n<i){var r=[n,i];i=r[0],n=r[1]}if(i<0){for(var s=i;s<Math.min(0,n);s++)e+=t.targetDuration;i=0}for(var o=i;o<n;o++)e+=t.segments[o].duration;return e}function fh(t){if(!t.segments.length)return 0;for(var i=t.segments.length-1,n=t.segments[i].duration||t.targetDuration,e=n+2*t.targetDuration;i--&&!(e<=(n+=t.segments[i].duration)););return Math.max(0,i)}function lh(t,i,n){if(!t||!t.segments)return null;if(t.endList)return ch(t);if(null===i)return null;i=i||0;var e=n?fh(t):t.segments.length;return uh(t,t.mediaSequence+e,i)}function dh(t){return t-Math.floor(t)==0}function vh(t,i){if(dh(i))return i+.1*t;for(var n=i.toString().split(".")[1].length,e=1;e<=n;e++){var r=Math.pow(10,e),s=i*r;if(dh(s)||e===n)return(s+t)/r}}function ph(t){return t.excludeUntil&&t.excludeUntil>Date.now()}function mh(t){return t.excludeUntil&&t.excludeUntil===1/0}function bh(t){var i=ph(t);return!t.disabled&&!i}function Th(t,i){return i.attributes&&i.attributes[t]}function yh(t,i){if(1===t.playlists.length)return!0;var n=i.attributes.BANDWIDTH||Number.MAX_VALUE;return 0===t.playlists.filter(function(t){return!!bh(t)&&(t.attributes.BANDWIDTH||0)<n}).length}function gh(){return function t(i,n){i=Lh({timeout:45e3},i);var e=t.beforeRequest||fo.Hls.xhr.beforeRequest;if(e&&"function"==typeof e){var r=e(i);r&&(i=r)}var s=Uh(i,function(t,i){var e=s.response;!t&&e&&(s.responseTime=Date.now(),s.roundTripTime=s.responseTime-s.requestTime,s.bytesReceived=e.byteLength||e.length,s.bandwidth||(s.bandwidth=Math.floor(s.bytesReceived/s.roundTripTime*8*1e3))),i.headers&&(s.responseHeaders=i.headers),t&&"ETIMEDOUT"===t.code&&(s.timedout=!0),t||s.aborted||200===i.statusCode||206===i.statusCode||0===i.statusCode||(t=new Error("XHR Failed with a response of: "+(s&&(e||s.responseText)))),n(t,s)}),o=s.abort;return s.abort=function(){return s.aborted=!0,o.apply(s,arguments)},s.uri=i.uri,s.requestTime=Date.now(),s}}function Sh(t){var i={};return t.byterange&&(i.Range=function(t){return"bytes="+t.offset+"-"+(t.offset+t.length-1)}(t.byterange)),i}function wh(t,i){var n=t.toString(16);return"00".substring(0,2-n.length)+n+(i%2?" ":"")}function Ah(t){return 32<=t&&t<126?String.fromCharCode(t):"."}function Ph(t){var i={};return Object.keys(t).forEach(function(n){var e=t[n];i[n]=ArrayBuffer.isView(e)?{bytes:e.buffer,byteOffset:e.byteOffset,byteLength:e.byteLength}:e}),i}function Mh(t){var i=t.byterange||{length:1/0,offset:0};return[i.length,i.offset,t.resolvedUri].join(",")}function Eh(t){return t.resolvedUri}function Ih(t){for(var i=Array.prototype.slice.call(t),n="",e=0;e<i.length/16;e++)n+=i.slice(16*e,16*e+16).map(wh).join("")+" "+i.slice(16*e,16*e+16).map(Ah).join("")+"\n";return n}function kh(t){var i=t.programTime,n=t.playlist,e=t.retryCount,r=void 0===e?2:e,s=t.seekTo,o=t.pauseAfterSeek,a=void 0===o||o,u=t.tech,c=t.callback;if(!c)throw new Error("seekToProgramTime: callback must be provided");if(void 0===i||!n||!s)return c({message:"seekToProgramTime: programTime, seekTo and playlist must be provided"});if(!n.endList&&!u.hasStarted_)return c({message:"player must be playing a live stream to start buffering"});if(!function(t){if(!t.segments||0===t.segments.length)return!1;for(var i=0;i<t.segments.length;i++)if(!t.segments[i].dateTimeObject)return!1;return!0}(n))return c({message:"programDateTime tags must be provided in the manifest "+n.resolvedUri});var h=function(t,i){var n=void 0;try{n=new Date(t)}catch(t){return null}if(!i||!i.segments||0===i.segments.length)return null;var e=i.segments[0];if(n<e.dateTimeObject)return null;for(var r=0;r<i.segments.length-1&&(e=i.segments[r],!(n<i.segments[r+1].dateTimeObject));r++);var s=i.segments[i.segments.length-1],o=s.dateTimeObject,a=s.videoTimingInfo?function(t){return t.transmuxedPresentationEnd-t.transmuxedPresentationStart-t.transmuxerPrependedSeconds}(s.videoTimingInfo):s.duration+.25*s.duration;return new Date(o.getTime()+1e3*a)<n?null:(o<n&&(e=s),{segment:e,estimatedStart:e.videoTimingInfo?e.videoTimingInfo.transmuxedPresentationStart:_h.duration(i,i.mediaSequence+i.segments.indexOf(e)),type:e.videoTimingInfo?"accurate":"estimate"})}(i,n);if(!h)return c({message:i+" was not found in the stream"});var f=h.segment,l=function(t,i){var n=void 0,e=void 0;try{n=new Date(t),e=new Date(i)}catch(t){}var r=n.getTime();return(e.getTime()-r)/1e3}(f.dateTimeObject,i);if("estimate"===h.type)return 0===r?c({message:i+" is not buffered yet. Try again"}):(s(h.estimatedStart+l),void u.one("seeked",function(){kh({programTime:i,playlist:n,retryCount:r-1,seekTo:s,pauseAfterSeek:a,tech:u,callback:c})}));var d=f.start+l;u.one("seeked",function(){return c(null,u.currentTime())}),a&&u.pause(),s(d)}function Dh(t,i){var n=[],e=void 0;if(t&&t.length)for(e=0;e<t.length;e++)i(t.start(e),t.end(e))&&n.push([t.start(e),t.end(e)]);return fo.createTimeRanges(n)}function Ch(t,i){return Dh(t,function(t,n){return t-Fh<=i&&i<=n+Fh})}function Gh(t,i){return Dh(t,function(t){return i<=t-Fh})}function Oh(t){var i=[];if(!t||!t.length)return"";for(var n=0;n<t.length;n++)i.push(t.start(n)+" => "+t.end(n));return i.join(", ")}function Bh(t){for(var i=[],n=0;n<t.length;n++)i.push({start:t.start(n),end:t.end(n)});return i}function xh(t,i,n){var e=void 0,r=void 0;if(n&&n.cues)for(e=n.cues.length;e--;)(r=n.cues[e]).startTime<=i&&r.endTime>=t&&n.removeCue(r)}function Rh(t){return isNaN(t)||Math.abs(t)===1/0?Number.MAX_VALUE:t}var Nh=fo.createTimeRange,Hh=vh.bind(null,1),jh=vh.bind(null,-1),_h={duration:ch,seekable:function(t,i){var n=i||0,e=lh(t,i,!0);return null===e?Nh():Nh(n,e)},safeLiveIndex:fh,getMediaInfoForTime:function(t,i,n,e){var r=void 0,s=t.segments.length,o=i-e;if(o<0){if(0<n)for(r=n-1;0<=r;r--)if(0<(o+=jh(t.segments[r].duration)))return{mediaIndex:r,startTime:e-hh(t,n,r)};return{mediaIndex:0,startTime:i}}if(n<0){for(r=n;r<0;r++)if((o-=t.targetDuration)<0)return{mediaIndex:0,startTime:i};n=0}for(r=n;r<s;r++)if((o-=Hh(t.segments[r].duration))<0)return{mediaIndex:r,startTime:e+hh(t,n,r)};return{mediaIndex:s-1,startTime:i}},isEnabled:bh,isDisabled:function(t){return t.disabled},isBlacklisted:ph,isIncompatible:mh,playlistEnd:lh,isAes:function(t){for(var i=0;i<t.segments.length;i++)if(t.segments[i].key)return!0;return!1},isFmp4:function(t){for(var i=0;i<t.segments.length;i++)if(t.segments[i].map)return!0;return!1},hasAttribute:Th,estimateSegmentRequestTime:function(t,i,n,e){var r=3<arguments.length&&void 0!==e?e:0;return Th("BANDWIDTH",n)?(t*n.attributes.BANDWIDTH-8*r)/i:NaN},isLowestEnabledRendition:yh},Uh=fo.xhr,Lh=fo.mergeOptions,Vh=Object.freeze({createTransferableMessage:Ph,initSegmentId:Mh,segmentKeyId:Eh,hexDump:Ih,tagDump:function(t){return Ih(t.bytes)},textRanges:function(t){var i,n,e="",r=void 0;for(r=0;r<t.length;r++)e+=(i=t).start(n=r)+"-"+i.end(n)+" ";return e}}),Fh=1/30,Wh="undefined"!=typeof window?window:{},Xh="undefined"==typeof Symbol?"__target":Symbol(),$h="application/javascript",zh=Wh.BlobBuilder||Wh.WebKitBlobBuilder||Wh.MozBlobBuilder||Wh.MSBlobBuilder,Kh=Wh.URL||Wh.webkitURL||Kh&&Kh.msURL,qh=Wh.Worker;function Yh(t,i){return function(n){var e=this;if(!i)return new qh(t);if(qh&&!n){var r=tf(i.toString().replace(/^function.+?{/,"").slice(0,-1));return this[Xh]=new qh(r),function(t,i){if(t&&i){var n=t.terminate;t.objURL=i,t.terminate=function(){t.objURL&&Kh.revokeObjectURL(t.objURL),n.call(t)}}}(this[Xh],r),this[Xh]}var s={postMessage:function(t){e.onmessage&&setTimeout(function(){e.onmessage({data:t,target:s})})}};i.call(s),this.postMessage=function(t){setTimeout(function(){s.onmessage({data:t,target:e})})},this.isThisThread=!0}}if(qh){var Qh,Jh=tf("self.onmessage = function () {}"),Zh=new Uint8Array(1);try{(Qh=new qh(Jh)).postMessage(Zh,[Zh.buffer])}catch(t){qh=null}finally{Kh.revokeObjectURL(Jh),Qh&&Qh.terminate()}}function tf(t){try{return Kh.createObjectURL(new Blob([t],{type:$h}))}catch(n){var i=new zh;return i.append(t),Kh.createObjectURL(i.getBlob(type))}}function nf(t){return t.map(function(t){return t.replace(/avc1\.(\d+)\.(\d+)/i,function(t,i,n){return"avc1."+("00"+Number(i).toString(16)).slice(-2)+"00"+("00"+Number(n).toString(16)).slice(-2)})})}function ef(t){var i,n=0<arguments.length&&void 0!==t?t:"",e={codecCount:0};return e.codecCount=n.split(",").length,e.codecCount=e.codecCount||2,(i=/(^|\s|,)+(avc[13])([^ ,]*)/i.exec(n))&&(e.videoCodec=i[2],e.videoObjectTypeIndicator=i[3]),e.audioProfile=/(^|\s|,)+mp4a.[0-9A-Fa-f]+\.([0-9A-Fa-f]+)/i.exec(n),e.audioProfile=e.audioProfile&&e.audioProfile[2],e}function rf(t,i,n){return t+"/"+i+'; codecs="'+n.filter(function(t){return!!t}).join(", ")+'"'}function sf(t){return/mp4a\.\d+.\d+/i.test(t)}function of(t){return/avc1\.[\da-f]+/i.test(t)}var af=new Yh("./transmuxer-worker.worker.js",function(){var t=this;!function(){var i,n,e,r,s,o,a,u,c,h,f,l,d,v,p,m,b,T,y,g,S,w,A,P,M,E,I,k,D,C,G,O,B,x,R,N,H,j,_,U,L=Math.pow(2,32)-1;!function(){var t;if(w={avc1:[],avcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],mvex:[],mvhd:[],sdtp:[],smhd:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],styp:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[]},"undefined"!=typeof Uint8Array){for(t in w)w.hasOwnProperty(t)&&(w[t]=[t.charCodeAt(0),t.charCodeAt(1),t.charCodeAt(2),t.charCodeAt(3)]);A=new Uint8Array(["i".charCodeAt(0),"s".charCodeAt(0),"o".charCodeAt(0),"m".charCodeAt(0)]),M=new Uint8Array(["a".charCodeAt(0),"v".charCodeAt(0),"c".charCodeAt(0),"1".charCodeAt(0)]),P=new Uint8Array([0,0,0,1]),E=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),I=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]),k={video:E,audio:I},G=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),C=new Uint8Array([0,0,0,0,0,0,0,0]),O=new Uint8Array([0,0,0,0,0,0,0,0]),B=O,x=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),R=O,D=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0])}}(),i=function(t){var i,n,e=[],r=0;for(i=1;i<arguments.length;i++)e.push(arguments[i]);for(i=e.length;i--;)r+=e[i].byteLength;for(n=new Uint8Array(r+8),new DataView(n.buffer,n.byteOffset,n.byteLength).setUint32(0,n.byteLength),n.set(t,4),i=0,r=8;i<e.length;i++)n.set(e[i],r),r+=e[i].byteLength;return n},n=function(){return i(w.dinf,i(w.dref,G))},e=function(t){return i(w.esds,new Uint8Array([0,0,0,0,3,25,0,0,0,4,17,64,21,0,6,0,0,0,218,192,0,0,218,192,5,2,t.audioobjecttype<<3|t.samplingfrequencyindex>>>1,t.samplingfrequencyindex<<7|t.channelcount<<3,6,1,2]))},p=function(t){return i(w.hdlr,k[t])},v=function(t){var n=new Uint8Array([0,0,0,0,0,0,0,2,0,0,0,3,0,1,95,144,t.duration>>>24&255,t.duration>>>16&255,t.duration>>>8&255,255&t.duration,85,196,0,0]);return t.samplerate&&(n[12]=t.samplerate>>>24&255,n[13]=t.samplerate>>>16&255,n[14]=t.samplerate>>>8&255,n[15]=255&t.samplerate),i(w.mdhd,n)},d=function(t){return i(w.mdia,v(t),p(t.type),o(t))},s=function(t){return i(w.mfhd,new Uint8Array([0,0,0,0,(4278190080&t)>>24,(16711680&t)>>16,(65280&t)>>8,255&t]))},o=function(t){return i(w.minf,"video"===t.type?i(w.vmhd,D):i(w.smhd,C),n(),b(t))},a=function(t,n){for(var e=[],r=n.length;r--;)e[r]=y(n[r]);return i.apply(null,[w.moof,s(t)].concat(e))},u=function(t){for(var n=t.length,e=[];n--;)e[n]=f(t[n]);return i.apply(null,[w.moov,h(4294967295)].concat(e).concat(c(t)))},c=function(t){for(var n=t.length,e=[];n--;)e[n]=g(t[n]);return i.apply(null,[w.mvex].concat(e))},h=function(t){var n=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,2,0,1,95,144,(4278190080&t)>>24,(16711680&t)>>16,(65280&t)>>8,255&t,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]);return i(w.mvhd,n)},m=function(t){var n,e,r=t.samples||[],s=new Uint8Array(4+r.length);for(e=0;e<r.length;e++)s[e+4]=(n=r[e].flags).dependsOn<<4|n.isDependedOn<<2|n.hasRedundancy;return i(w.sdtp,s)},b=function(t){return i(w.stbl,T(t),i(w.stts,R),i(w.stsc,B),i(w.stsz,x),i(w.stco,O))},T=function(t){return i(w.stsd,new Uint8Array([0,0,0,0,0,0,0,1]),"video"===t.type?N(t):H(t))},N=function(t){var n,e=t.sps||[],r=t.pps||[],s=[],o=[];for(n=0;n<e.length;n++)s.push((65280&e[n].byteLength)>>>8),s.push(255&e[n].byteLength),s=s.concat(Array.prototype.slice.call(e[n]));for(n=0;n<r.length;n++)o.push((65280&r[n].byteLength)>>>8),o.push(255&r[n].byteLength),o=o.concat(Array.prototype.slice.call(r[n]));return i(w.avc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,(65280&t.width)>>8,255&t.width,(65280&t.height)>>8,255&t.height,0,72,0,0,0,72,0,0,0,0,0,0,0,1,19,118,105,100,101,111,106,115,45,99,111,110,116,114,105,98,45,104,108,115,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),i(w.avcC,new Uint8Array([1,t.profileIdc,t.profileCompatibility,t.levelIdc,255].concat([e.length]).concat(s).concat([r.length]).concat(o))),i(w.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192])))},H=function(t){return i(w.mp4a,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,(65280&t.channelcount)>>8,255&t.channelcount,(65280&t.samplesize)>>8,255&t.samplesize,0,0,0,0,(65280&t.samplerate)>>8,255&t.samplerate,0,0]),e(t))},l=function(t){var n=new Uint8Array([0,0,0,7,0,0,0,0,0,0,0,0,(4278190080&t.id)>>24,(16711680&t.id)>>16,(65280&t.id)>>8,255&t.id,0,0,0,0,(4278190080&t.duration)>>24,(16711680&t.duration)>>16,(65280&t.duration)>>8,255&t.duration,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,(65280&t.width)>>8,255&t.width,0,0,(65280&t.height)>>8,255&t.height,0,0]);return i(w.tkhd,n)},y=function(t){var n,e,r,s,o,a;return n=i(w.tfhd,new Uint8Array([0,0,0,58,(4278190080&t.id)>>24,(16711680&t.id)>>16,(65280&t.id)>>8,255&t.id,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0])),o=Math.floor(t.baseMediaDecodeTime/(1+L)),a=Math.floor(t.baseMediaDecodeTime%(1+L)),e=i(w.tfdt,new Uint8Array([1,0,0,0,o>>>24&255,o>>>16&255,o>>>8&255,255&o,a>>>24&255,a>>>16&255,a>>>8&255,255&a])),"audio"===t.type?(r=S(t,92),i(w.traf,n,e,r)):(s=m(t),r=S(t,s.length+92),i(w.traf,n,e,r,s))},f=function(t){return t.duration=t.duration||4294967295,i(w.trak,l(t),d(t))},g=function(t){var n=new Uint8Array([0,0,0,0,(4278190080&t.id)>>24,(16711680&t.id)>>16,(65280&t.id)>>8,255&t.id,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]);return"video"!==t.type&&(n[n.length-1]=0),i(w.trex,n)},U=function(t,i){var n=0,e=0,r=0,s=0;return t.length&&(void 0!==t[0].duration&&(n=1),void 0!==t[0].size&&(e=2),void 0!==t[0].flags&&(r=4),void 0!==t[0].compositionTimeOffset&&(s=8)),[0,0,n|e|r|s,1,(4278190080&t.length)>>>24,(16711680&t.length)>>>16,(65280&t.length)>>>8,255&t.length,(4278190080&i)>>>24,(16711680&i)>>>16,(65280&i)>>>8,255&i]},_=function(t,n){var e,r,s,o;for(n+=20+16*(r=t.samples||[]).length,e=U(r,n),o=0;o<r.length;o++)e=e.concat([(4278190080&(s=r[o]).duration)>>>24,(16711680&s.duration)>>>16,(65280&s.duration)>>>8,255&s.duration,(4278190080&s.size)>>>24,(16711680&s.size)>>>16,(65280&s.size)>>>8,255&s.size,s.flags.isLeading<<2|s.flags.dependsOn,s.flags.isDependedOn<<6|s.flags.hasRedundancy<<4|s.flags.paddingValue<<1|s.flags.isNonSyncSample,61440&s.flags.degradationPriority,15&s.flags.degradationPriority,(4278190080&s.compositionTimeOffset)>>>24,(16711680&s.compositionTimeOffset)>>>16,(65280&s.compositionTimeOffset)>>>8,255&s.compositionTimeOffset]);return i(w.trun,new Uint8Array(e))},j=function(t,n){var e,r,s,o;for(n+=20+8*(r=t.samples||[]).length,e=U(r,n),o=0;o<r.length;o++)e=e.concat([(4278190080&(s=r[o]).duration)>>>24,(16711680&s.duration)>>>16,(65280&s.duration)>>>8,255&s.duration,(4278190080&s.size)>>>24,(16711680&s.size)>>>16,(65280&s.size)>>>8,255&s.size]);return i(w.trun,new Uint8Array(e))},S=function(t,i){return"audio"===t.type?j(t,i):_(t,i)};var V,F,W,X,$,z={ftyp:r=function(){return i(w.ftyp,A,P,A,M)},mdat:function(t){return i(w.mdat,t)},moof:a,moov:u,initSegment:function(t){var i,n=r(),e=u(t);return(i=new Uint8Array(n.byteLength+e.byteLength)).set(n),i.set(e,n.byteLength),i}},K=function(t){return t>>>0};function q(){this.init=function(){var t={};this.on=function(i,n){t[i]||(t[i]=[]),t[i]=t[i].concat(n)},this.off=function(i,n){var e;return!!t[i]&&(e=t[i].indexOf(n),t[i]=t[i].slice(),t[i].splice(e,1),-1<e)},this.trigger=function(i){var n,e,r,s;if(n=t[i])if(2===arguments.length)for(r=n.length,e=0;e<r;++e)n[e].call(this,arguments[1]);else{for(s=[],e=arguments.length,e=1;e<arguments.length;++e)s.push(arguments[e]);for(r=n.length,e=0;e<r;++e)n[e].apply(this,s)}},this.dispose=function(){t={}}}}W=function(t){return V(t,["moov","trak"]).reduce(function(t,i){var n,e,r,s;return(n=V(i,["tkhd"])[0])?(r=K(n[e=0===n[0]?12:20]<<24|n[e+1]<<16|n[e+2]<<8|n[e+3]),(s=V(i,["mdia","mdhd"])[0])?(t[r]=K(s[e=0===s[0]?12:20]<<24|s[e+1]<<16|s[e+2]<<8|s[e+3]),t):null):null},{})},X=function(t,i){var n,e,r;return n=V(i,["moof","traf"]),e=[].concat.apply([],n.map(function(i){return V(i,["tfhd"]).map(function(n){var e,r;return e=K(n[4]<<24|n[5]<<16|n[6]<<8|n[7]),r=t[e]||9e4,(V(i,["tfdt"]).map(function(t){var i,n;return i=t[0],n=K(t[4]<<24|t[5]<<16|t[6]<<8|t[7]),1===i&&(n*=Math.pow(2,32),n+=K(t[8]<<24|t[9]<<16|t[10]<<8|t[11])),n})[0]||1/0)/r})})),r=Math.min.apply(null,e),isFinite(r)?r:0},$=function(t){var i=V(t,["moov","trak"]),n=[];return i.forEach(function(t){var i=V(t,["mdia","hdlr"]),e=V(t,["tkhd"]);i.forEach(function(t,i){var r,s,o=F(t.subarray(8,12)),a=e[i];"vide"===o&&(s=0===(r=new DataView(a.buffer,a.byteOffset,a.byteLength)).getUint8(0)?r.getUint32(12):r.getUint32(20),n.push(s))})}),n};var Y={findBox:V=function(t,i){var n,e,r,s,o,a=[];if(!i.length)return null;for(n=0;n<t.byteLength;)e=K(t[n]<<24|t[n+1]<<16|t[n+2]<<8|t[n+3]),r=F(t.subarray(n+4,n+8)),s=1<e?n+e:t.byteLength,r===i[0]&&(1===i.length?a.push(t.subarray(n+8,s)):(o=V(t.subarray(n+8,s),i.slice(1))).length&&(a=a.concat(o))),n=s;return a},parseType:F=function(t){var i="";return i+=String.fromCharCode(t[0]),i+=String.fromCharCode(t[1]),(i+=String.fromCharCode(t[2]))+String.fromCharCode(t[3])},timescale:W,startTime:X,videoTrackIds:$};function Q(t){for(var i=[];t--;)i.push(0);return i}function J(){J.prototype.init.call(this),this.captionPackets_=[],this.ccStreams_=[new bt(0,0),new bt(0,1),new bt(1,0),new bt(1,1)],this.reset(),this.ccStreams_.forEach(function(t){t.on("data",this.trigger.bind(this,"data")),t.on("done",this.trigger.bind(this,"done"))},this)}q.prototype.pipe=function(t){return this.on("data",function(i){t.push(i)}),this.on("done",function(i){t.flush(i)}),t},q.prototype.push=function(t){this.trigger("data",t)},q.prototype.flush=function(t){this.trigger("done",t)};var Z,tt,it,nt,et,rt=q,st=[33,16,5,32,164,27],ot=[33,65,108,84,1,2,4,8,168,2,4,8,17,191,252],at={96e3:[st,[227,64],Q(154),[56]],88200:[st,[231],Q(170),[56]],64e3:[st,[248,192],Q(240),[56]],48e3:[st,[255,192],Q(268),[55,148,128],Q(54),[112]],44100:[st,[255,192],Q(268),[55,163,128],Q(84),[112]],32e3:[st,[255,192],Q(268),[55,234],Q(226),[112]],24e3:[st,[255,192],Q(268),[55,255,128],Q(268),[111,112],Q(126),[224]],16e3:[st,[255,192],Q(268),[55,255,128],Q(268),[111,255],Q(269),[223,108],Q(195),[1,192]],12e3:[ot,Q(268),[3,127,248],Q(268),[6,255,240],Q(268),[13,255,224],Q(268),[27,253,128],Q(259),[56]],11025:[ot,Q(268),[3,127,248],Q(268),[6,255,240],Q(268),[13,255,224],Q(268),[27,255,192],Q(268),[55,175,128],Q(108),[112]],8e3:[ot,Q(268),[3,121,16],Q(47),[7]]},ut=(Z=at,Object.keys(Z).reduce(function(t,i){return t[i]=new Uint8Array(Z[i].reduce(function(t,i){return t.concat(i)},[])),t},{})),ct=(tt=function(t){return 9e4*t},it=function(t,i){return t*i},nt=function(t){return t/9e4},et=function(t,i){return t/i},function(t,i){return tt(et(t,i))}),ht=function(t){delete t.minSegmentDts,delete t.maxSegmentDts,delete t.minSegmentPts,delete t.maxSegmentPts},ft=function(t,i){var n,e=t.minSegmentDts;return i||(e-=t.timelineStartInfo.dts),n=t.timelineStartInfo.baseMediaDecodeTime,n+=e,n=Math.max(0,n),"audio"===t.type&&(n*=t.samplerate/9e4,n=Math.floor(n)),n},lt=function(t,i){"number"==typeof i.pts&&(void 0===t.timelineStartInfo.pts&&(t.timelineStartInfo.pts=i.pts),t.minSegmentPts=void 0===t.minSegmentPts?i.pts:Math.min(t.minSegmentPts,i.pts),t.maxSegmentPts=void 0===t.maxSegmentPts?i.pts:Math.max(t.maxSegmentPts,i.pts)),"number"==typeof i.dts&&(void 0===t.timelineStartInfo.dts&&(t.timelineStartInfo.dts=i.dts),t.minSegmentDts=void 0===t.minSegmentDts?i.dts:Math.min(t.minSegmentDts,i.dts),t.maxSegmentDts=void 0===t.maxSegmentDts?i.dts:Math.max(t.maxSegmentDts,i.dts))};function dt(t){return null===t?"":(t=pt[t]||t,String.fromCharCode(t))}function vt(){for(var t=[],i=15;i--;)t.push("");return t}(J.prototype=new rt).push=function(t){var i,n,e;if("sei_rbsp"===t.nalUnitType&&4===(i=function(t){for(var i=0,n={payloadType:-1,payloadSize:0},e=0,r=0;i<t.byteLength&&128!==t[i];){for(;255===t[i];)e+=255,i++;for(e+=t[i++];255===t[i];)r+=255,i++;if(r+=t[i++],!n.payload&&4===e){n.payloadType=e,n.payloadSize=r,n.payload=t.subarray(i,i+r);break}i+=r,r=e=0}return n}(t.escapedRBSP)).payloadType&&(n=function(t){return 181!==t.payload[0]?null:49!=(t.payload[1]<<8|t.payload[2])?null:"GA94"!==String.fromCharCode(t.payload[3],t.payload[4],t.payload[5],t.payload[6])?null:3!==t.payload[7]?null:t.payload.subarray(8,t.payload.length-1)}(i)))if(t.dts<this.latestDts_)this.ignoreNextEqualDts_=!0;else{if(t.dts===this.latestDts_&&this.ignoreNextEqualDts_)return this.numSameDts_--,void(this.numSameDts_||(this.ignoreNextEqualDts_=!1));e=function(t,i){var n,e,r,s,o=[];if(!(64&i[0]))return o;for(e=31&i[0],n=0;n<e;n++)s={type:3&i[2+(r=3*n)],pts:t},4&i[2+r]&&(s.ccData=i[3+r]<<8|i[4+r],o.push(s));return o}(t.pts,n),this.captionPackets_=this.captionPackets_.concat(e),this.latestDts_!==t.dts&&(this.numSameDts_=0),this.numSameDts_++,this.latestDts_=t.dts}},J.prototype.flush=function(){this.captionPackets_.length?(this.captionPackets_.forEach(function(t,i){t.presortIndex=i}),this.captionPackets_.sort(function(t,i){return t.pts===i.pts?t.presortIndex-i.presortIndex:t.pts-i.pts}),this.captionPackets_.forEach(function(t){t.type<2&&this.dispatchCea608Packet(t)},this),this.captionPackets_.length=0,this.ccStreams_.forEach(function(t){t.flush()},this)):this.ccStreams_.forEach(function(t){t.flush()},this)},J.prototype.reset=function(){this.latestDts_=null,this.ignoreNextEqualDts_=!1,this.numSameDts_=0,this.activeCea608Channel_=[null,null],this.ccStreams_.forEach(function(t){t.reset()})},J.prototype.dispatchCea608Packet=function(t){this.setsTextOrXDSActive(t)?this.activeCea608Channel_[t.type]=null:this.setsChannel1Active(t)?this.activeCea608Channel_[t.type]=0:this.setsChannel2Active(t)&&(this.activeCea608Channel_[t.type]=1),null!==this.activeCea608Channel_[t.type]&&this.ccStreams_[(t.type<<1)+this.activeCea608Channel_[t.type]].push(t)},J.prototype.setsChannel1Active=function(t){return 4096==(30720&t.ccData)},J.prototype.setsChannel2Active=function(t){return 6144==(30720&t.ccData)},J.prototype.setsTextOrXDSActive=function(t){return 256==(28928&t.ccData)||4138==(30974&t.ccData)||6186==(30974&t.ccData)};var pt={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,304:174,305:176,306:189,307:191,308:8482,309:162,310:163,311:9834,312:224,313:160,314:232,315:226,316:234,317:238,318:244,319:251,544:193,545:201,546:211,547:218,548:220,549:252,550:8216,551:161,552:42,553:39,554:8212,555:169,556:8480,557:8226,558:8220,559:8221,560:192,561:194,562:199,563:200,564:202,565:203,566:235,567:206,568:207,569:239,570:212,571:217,572:249,573:219,574:171,575:187,800:195,801:227,802:205,803:204,804:236,805:210,806:242,807:213,808:245,809:123,810:125,811:92,812:94,813:95,814:124,815:126,816:196,817:228,818:214,819:246,820:223,821:165,822:164,823:9474,824:197,825:229,826:216,827:248,828:9484,829:9488,830:9492,831:9496},mt=[4352,4384,4608,4640,5376,5408,5632,5664,5888,5920,4096,4864,4896,5120,5152],bt=function t(i,n){t.prototype.init.call(this),this.field_=i||0,this.dataChannel_=n||0,this.name_="CC"+(1+(this.field_<<1|this.dataChannel_)),this.setConstants(),this.reset(),this.push=function(t){var i,n,e,r,s;if((i=32639&t.ccData)!==this.lastControlCode_){if(4096==(61440&i)?this.lastControlCode_=i:i!==this.PADDING_&&(this.lastControlCode_=null),e=i>>>8,r=255&i,i!==this.PADDING_)if(i===this.RESUME_CAPTION_LOADING_)this.mode_="popOn";else if(i===this.END_OF_CAPTION_)this.mode_="popOn",this.clearFormatting(t.pts),this.flushDisplayed(t.pts),n=this.displayed_,this.displayed_=this.nonDisplayed_,this.nonDisplayed_=n,this.startPts_=t.pts;else if(i===this.ROLL_UP_2_ROWS_)this.rollUpRows_=2,this.setRollUp(t.pts);else if(i===this.ROLL_UP_3_ROWS_)this.rollUpRows_=3,this.setRollUp(t.pts);else if(i===this.ROLL_UP_4_ROWS_)this.rollUpRows_=4,this.setRollUp(t.pts);else if(i===this.CARRIAGE_RETURN_)this.clearFormatting(t.pts),this.flushDisplayed(t.pts),this.shiftRowsUp_(),this.startPts_=t.pts;else if(i===this.BACKSPACE_)"popOn"===this.mode_?this.nonDisplayed_[this.row_]=this.nonDisplayed_[this.row_].slice(0,-1):this.displayed_[this.row_]=this.displayed_[this.row_].slice(0,-1);else if(i===this.ERASE_DISPLAYED_MEMORY_)this.flushDisplayed(t.pts),this.displayed_=vt();else if(i===this.ERASE_NON_DISPLAYED_MEMORY_)this.nonDisplayed_=vt();else if(i===this.RESUME_DIRECT_CAPTIONING_)"paintOn"!==this.mode_&&(this.flushDisplayed(t.pts),this.displayed_=vt()),this.mode_="paintOn",this.startPts_=t.pts;else if(this.isSpecialCharacter(e,r))s=dt((e=(3&e)<<8)|r),this[this.mode_](t.pts,s),this.column_++;else if(this.isExtCharacter(e,r))"popOn"===this.mode_?this.nonDisplayed_[this.row_]=this.nonDisplayed_[this.row_].slice(0,-1):this.displayed_[this.row_]=this.displayed_[this.row_].slice(0,-1),s=dt((e=(3&e)<<8)|r),this[this.mode_](t.pts,s),this.column_++;else if(this.isMidRowCode(e,r))this.clearFormatting(t.pts),this[this.mode_](t.pts," "),this.column_++,14==(14&r)&&this.addFormatting(t.pts,["i"]),1==(1&r)&&this.addFormatting(t.pts,["u"]);else if(this.isOffsetControlCode(e,r))this.column_+=3&r;else if(this.isPAC(e,r)){var o=mt.indexOf(7968&i);"rollUp"===this.mode_&&(o-this.rollUpRows_+1<0&&(o=this.rollUpRows_-1),this.setRollUp(t.pts,o)),o!==this.row_&&(this.clearFormatting(t.pts),this.row_=o),1&r&&-1===this.formatting_.indexOf("u")&&this.addFormatting(t.pts,["u"]),16==(16&i)&&(this.column_=4*((14&i)>>1)),this.isColorPAC(r)&&14==(14&r)&&this.addFormatting(t.pts,["i"])}else this.isNormalChar(e)&&(0===r&&(r=null),s=dt(e),s+=dt(r),this[this.mode_](t.pts,s),this.column_+=s.length)}else this.lastControlCode_=null}};function Tt(t,i){var n=1;for(i<t&&(n=-1);4294967296<Math.abs(i-t);)t+=8589934592*n;return t}function yt(t){var i,n;yt.prototype.init.call(this),this.type_=t,this.push=function(t){t.type===this.type_&&(void 0===n&&(n=t.dts),t.dts=Tt(t.dts,n),t.pts=Tt(t.pts,n),i=t.dts,this.trigger("data",t))},this.flush=function(){n=i,this.trigger("done")},this.discontinuity=function(){i=n=void 0}}bt.prototype=new rt,bt.prototype.flushDisplayed=function(t){var i=this.displayed_.map(function(t){try{return t.trim()}catch(t){return""}}).join("\n").replace(/^\n+|\n+$/g,"");i.length&&this.trigger("data",{startPts:this.startPts_,endPts:t,text:i,stream:this.name_})},bt.prototype.reset=function(){this.mode_="popOn",this.topRow_=0,this.startPts_=0,this.displayed_=vt(),this.nonDisplayed_=vt(),this.lastControlCode_=null,this.column_=0,this.row_=14,this.rollUpRows_=2,this.formatting_=[]},bt.prototype.setConstants=function(){0===this.dataChannel_?(this.BASE_=16,this.EXT_=17,this.CONTROL_=(20|this.field_)<<8,this.OFFSET_=23):1===this.dataChannel_&&(this.BASE_=24,this.EXT_=25,this.CONTROL_=(28|this.field_)<<8,this.OFFSET_=31),this.PADDING_=0,this.RESUME_CAPTION_LOADING_=32|this.CONTROL_,this.END_OF_CAPTION_=47|this.CONTROL_,this.ROLL_UP_2_ROWS_=37|this.CONTROL_,this.ROLL_UP_3_ROWS_=38|this.CONTROL_,this.ROLL_UP_4_ROWS_=39|this.CONTROL_,this.CARRIAGE_RETURN_=45|this.CONTROL_,this.RESUME_DIRECT_CAPTIONING_=41|this.CONTROL_,this.BACKSPACE_=33|this.CONTROL_,this.ERASE_DISPLAYED_MEMORY_=44|this.CONTROL_,this.ERASE_NON_DISPLAYED_MEMORY_=46|this.CONTROL_},bt.prototype.isSpecialCharacter=function(t,i){return t===this.EXT_&&48<=i&&i<=63},bt.prototype.isExtCharacter=function(t,i){return(t===this.EXT_+1||t===this.EXT_+2)&&32<=i&&i<=63},bt.prototype.isMidRowCode=function(t,i){return t===this.EXT_&&32<=i&&i<=47},bt.prototype.isOffsetControlCode=function(t,i){return t===this.OFFSET_&&33<=i&&i<=35},bt.prototype.isPAC=function(t,i){return t>=this.BASE_&&t<this.BASE_+8&&64<=i&&i<=127},bt.prototype.isColorPAC=function(t){return 64<=t&&t<=79||96<=t&&t<=127},bt.prototype.isNormalChar=function(t){return 32<=t&&t<=127},bt.prototype.setRollUp=function(t,i){if("rollUp"!==this.mode_&&(this.row_=14,this.mode_="rollUp",this.flushDisplayed(t),this.nonDisplayed_=vt(),this.displayed_=vt()),void 0!==i&&i!==this.row_)for(var n=0;n<this.rollUpRows_;n++)this.displayed_[i-n]=this.displayed_[this.row_-n],this.displayed_[this.row_-n]="";void 0===i&&(i=this.row_),this.topRow_=i-this.rollUpRows_+1},bt.prototype.addFormatting=function(t,i){this.formatting_=this.formatting_.concat(i);var n=i.reduce(function(t,i){return t+"<"+i+">"},"");this[this.mode_](t,n)},bt.prototype.clearFormatting=function(t){if(this.formatting_.length){var i=this.formatting_.reverse().reduce(function(t,i){return t+"</"+i+">"},"");this.formatting_=[],this[this.mode_](t,i)}},bt.prototype.popOn=function(t,i){var n=this.nonDisplayed_[this.row_];this.nonDisplayed_[this.row_]=n+=i},bt.prototype.rollUp=function(t,i){var n=this.displayed_[this.row_];this.displayed_[this.row_]=n+=i},bt.prototype.shiftRowsUp_=function(){var t;for(t=0;t<this.topRow_;t++)this.displayed_[t]="";for(t=this.row_+1;t<15;t++)this.displayed_[t]="";for(t=this.topRow_;t<this.row_;t++)this.displayed_[t]=this.displayed_[t+1];this.displayed_[this.row_]=""},bt.prototype.paintOn=function(t,i){var n=this.displayed_[this.row_];this.displayed_[this.row_]=n+=i};var gt={CaptionStream:J,Cea608Stream:bt},St={H264_STREAM_TYPE:27,ADTS_STREAM_TYPE:15,METADATA_STREAM_TYPE:21};function wt(t,i,n){var e,r="";for(e=i;e<n;e++)r+="%"+("00"+t[e].toString(16)).slice(-2);return r}function At(t,i,n){return decodeURIComponent(wt(t,i,n))}function Pt(t){return t[0]<<21|t[1]<<14|t[2]<<7|t[3]}yt.prototype=new rt;var Mt,Et=yt,It={TXXX:function(t){var i;if(3===t.data[0]){for(i=1;i<t.data.length;i++)if(0===t.data[i]){t.description=At(t.data,1,i),t.value=At(t.data,i+1,t.data.length).replace(/\0*$/,"");break}t.data=t.value}},WXXX:function(t){var i;if(3===t.data[0])for(i=1;i<t.data.length;i++)if(0===t.data[i]){t.description=At(t.data,1,i),t.url=At(t.data,i+1,t.data.length);break}},PRIV:function(t){var i;for(i=0;i<t.data.length;i++)if(0===t.data[i]){t.owner=unescape(wt(t.data,0,i));break}t.privateData=t.data.subarray(i+1),t.data=t.privateData}};(Mt=function(t){var i,n={debug:!(!t||!t.debug),descriptor:t&&t.descriptor},e=0,r=[],s=0;if(Mt.prototype.init.call(this),this.dispatchType=St.METADATA_STREAM_TYPE.toString(16),n.descriptor)for(i=0;i<n.descriptor.length;i++)this.dispatchType+=("00"+n.descriptor[i].toString(16)).slice(-2);this.push=function(t){var i,n,o,a,u;if("timed-metadata"===t.type)if(t.dataAlignmentIndicator&&(s=0,r.length=0),0===r.length&&(t.data.length<10||t.data[0]!=="I".charCodeAt(0)||t.data[1]!=="D".charCodeAt(0)||t.data[2]!=="3".charCodeAt(0)));else if(r.push(t),s+=t.data.byteLength,1===r.length&&(e=Pt(t.data.subarray(6,10)),e+=10),!(s<e)){for(i={data:new Uint8Array(e),frames:[],pts:r[0].pts,dts:r[0].dts},u=0;u<e;)i.data.set(r[0].data.subarray(0,e-u),u),u+=r[0].data.byteLength,s-=r[0].data.byteLength,r.shift();n=10,64&i.data[5]&&(n+=4,n+=Pt(i.data.subarray(10,14)),e-=Pt(i.data.subarray(16,20)));do{if((o=Pt(i.data.subarray(n+4,n+8)))<1)return;if((a={id:String.fromCharCode(i.data[n],i.data[n+1],i.data[n+2],i.data[n+3]),data:i.data.subarray(n+10,n+o+10)}).key=a.id,It[a.id]&&(It[a.id](a),"com.apple.streaming.transportStreamTimestamp"===a.owner)){var c=a.data,h=(1&c[3])<<30|c[4]<<22|c[5]<<14|c[6]<<6|c[7]>>>2;h*=4,a.timeStamp=h+=3&c[7],void 0===i.pts&&void 0===i.dts&&(i.pts=a.timeStamp,i.dts=a.timeStamp),this.trigger("timestamp",a)}i.frames.push(a),n+=10,n+=o}while(n<e);this.trigger("data",i)}}}).prototype=new rt;var kt,Dt,Ct,Gt=Mt,Ot=Et;(kt=function(){var t=new Uint8Array(188),i=0;kt.prototype.init.call(this),this.push=function(n){var e,r=0,s=188;for(i?((e=new Uint8Array(n.byteLength+i)).set(t.subarray(0,i)),e.set(n,i),i=0):e=n;s<e.byteLength;)71!==e[r]||71!==e[s]?(r++,s++):(this.trigger("data",e.subarray(r,s)),r+=188,s+=188);r<e.byteLength&&(t.set(e.subarray(r),0),i=e.byteLength-r)},this.flush=function(){188===i&&71===t[0]&&(this.trigger("data",t),i=0),this.trigger("done")}}).prototype=new rt,(Dt=function(){var t,i,n,e;Dt.prototype.init.call(this),(e=this).packetsWaitingForPmt=[],this.programMapTable=void 0,t=function(t,e){var r=0;e.payloadUnitStartIndicator&&(r+=t[r]+1),"pat"===e.type?i(t.subarray(r),e):n(t.subarray(r),e)},i=function(t,i){i.section_number=t[7],i.last_section_number=t[8],e.pmtPid=(31&t[10])<<8|t[11],i.pmtPid=e.pmtPid},n=function(t,i){var n,r;if(1&t[5]){for(e.programMapTable={video:null,audio:null,"timed-metadata":{}},n=3+((15&t[1])<<8|t[2])-4,r=12+((15&t[10])<<8|t[11]);r<n;){var s=t[r],o=(31&t[r+1])<<8|t[r+2];s===St.H264_STREAM_TYPE&&null===e.programMapTable.video?e.programMapTable.video=o:s===St.ADTS_STREAM_TYPE&&null===e.programMapTable.audio?e.programMapTable.audio=o:s===St.METADATA_STREAM_TYPE&&(e.programMapTable["timed-metadata"][o]=s),r+=5+((15&t[r+3])<<8|t[r+4])}i.programMapTable=e.programMapTable}},this.push=function(i){var n={},e=4;if(n.payloadUnitStartIndicator=!!(64&i[1]),n.pid=31&i[1],n.pid<<=8,n.pid|=i[2],1<(48&i[3])>>>4&&(e+=i[e]+1),0===n.pid)n.type="pat",t(i.subarray(e),n),this.trigger("data",n);else if(n.pid===this.pmtPid)for(n.type="pmt",t(i.subarray(e),n),this.trigger("data",n);this.packetsWaitingForPmt.length;)this.processPes_.apply(this,this.packetsWaitingForPmt.shift());else void 0===this.programMapTable?this.packetsWaitingForPmt.push([i,e,n]):this.processPes_(i,e,n)},this.processPes_=function(t,i,n){n.streamType=n.pid===this.programMapTable.video?St.H264_STREAM_TYPE:n.pid===this.programMapTable.audio?St.ADTS_STREAM_TYPE:this.programMapTable["timed-metadata"][n.pid],n.type="pes",n.data=t.subarray(i),this.trigger("data",n)}}).prototype=new rt,Dt.STREAM_TYPES={h264:27,adts:15},(Ct=function(){function t(t,n,e){var r,s,o=new Uint8Array(t.size),a={type:n},u=0,c=0;if(t.data.length&&!(t.size<9)){for(a.trackId=t.data[0].pid,u=0;u<t.data.length;u++)o.set((s=t.data[u]).data,c),c+=s.data.byteLength;!function(t,i){var n;i.packetLength=6+(t[4]<<8|t[5]),i.dataAlignmentIndicator=0!=(4&t[6]),192&(n=t[7])&&(i.pts=(14&t[9])<<27|(255&t[10])<<20|(254&t[11])<<12|(255&t[12])<<5|(254&t[13])>>>3,i.pts*=4,i.pts+=(6&t[13])>>>1,i.dts=i.pts,64&n&&(i.dts=(14&t[14])<<27|(255&t[15])<<20|(254&t[16])<<12|(255&t[17])<<5|(254&t[18])>>>3,i.dts*=4,i.dts+=(6&t[18])>>>1)),i.data=t.subarray(9+t[8])}(o,a),r="video"===n||a.packetLength<=t.size,(e||r)&&(t.size=0,t.data.length=0),r&&i.trigger("data",a)}}var i=this,n={data:[],size:0},e={data:[],size:0},r={data:[],size:0};Ct.prototype.init.call(this),this.push=function(s){({pat:function(){},pes:function(){var i,o;switch(s.streamType){case St.H264_STREAM_TYPE:case St.H264_STREAM_TYPE:i=n,o="video";break;case St.ADTS_STREAM_TYPE:i=e,o="audio";break;case St.METADATA_STREAM_TYPE:i=r,o="timed-metadata";break;default:return}s.payloadUnitStartIndicator&&t(i,o,!0),i.data.push(s),i.size+=s.data.byteLength},pmt:function(){var t={type:"metadata",tracks:[]},n=s.programMapTable;null!==n.video&&t.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+n.video,codec:"avc",type:"video"}),null!==n.audio&&t.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+n.audio,codec:"adts",type:"audio"}),i.trigger("data",t)}})[s.type]()},this.flush=function(){t(n,"video"),t(e,"audio"),t(r,"timed-metadata"),this.trigger("done")}}).prototype=new rt;var Bt={PAT_PID:0,MP2T_PACKET_LENGTH:188,TransportPacketStream:kt,TransportParseStream:Dt,ElementaryStream:Ct,TimestampRolloverStream:Ot,CaptionStream:gt.CaptionStream,Cea608Stream:gt.Cea608Stream,MetadataStream:Gt};for(var xt in St)St.hasOwnProperty(xt)&&(Bt[xt]=St[xt]);var Rt,Nt=Bt,Ht=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350];(Rt=function(){var t;Rt.prototype.init.call(this),this.push=function(i){var n,e,r,s,o=0,a=0;if("audio"===i.type)for(t?(e=t,(t=new Uint8Array(e.byteLength+i.data.byteLength)).set(e),t.set(i.data,e.byteLength)):t=i.data;o+5<t.length;)if(255===t[o]&&240==(246&t[o+1])){if(s=9e4*(r=1024*(1+(3&t[o+6])))/Ht[(60&t[o+2])>>>2],t.byteLength<(n=o+((3&t[o+3])<<11|t[o+4]<<3|(224&t[o+5])>>5)))return;if(this.trigger("data",{pts:i.pts+a*s,dts:i.dts+a*s,sampleCount:r,audioobjecttype:1+(t[o+2]>>>6&3),channelcount:(1&t[o+2])<<2|(192&t[o+3])>>>6,samplerate:Ht[(60&t[o+2])>>>2],samplingfrequencyindex:(60&t[o+2])>>>2,samplesize:16,data:t.subarray(o+7+2*(1&~t[o+1]),n)}),t.byteLength===n)return void(t=void 0);a++,t=t.subarray(n)}else o++},this.flush=function(){this.trigger("done")}}).prototype=new rt;var jt,_t,Ut,Lt=Rt,Vt=function(t){var i=t.byteLength,n=0,e=0;this.length=function(){return 8*i},this.bitsAvailable=function(){return 8*i+e},this.loadWord=function(){var r=t.byteLength-i,s=new Uint8Array(4),o=Math.min(4,i);if(0===o)throw new Error("no bytes available");s.set(t.subarray(r,r+o)),n=new DataView(s.buffer).getUint32(0),e=8*o,i-=o},this.skipBits=function(t){var r;t<e||(t-=e,t-=8*(r=Math.floor(t/8)),i-=r,this.loadWord()),n<<=t,e-=t},this.readBits=function(t){var r=Math.min(e,t),s=n>>>32-r;return 0<(e-=r)?n<<=r:0<i&&this.loadWord(),0<(r=t-r)?s<<r|this.readBits(r):s},this.skipLeadingZeros=function(){var t;for(t=0;t<e;++t)if(0!=(n&2147483648>>>t))return n<<=t,e-=t,t;return this.loadWord(),t+this.skipLeadingZeros()},this.skipUnsignedExpGolomb=function(){this.skipBits(1+this.skipLeadingZeros())},this.skipExpGolomb=function(){this.skipBits(1+this.skipLeadingZeros())},this.readUnsignedExpGolomb=function(){var t=this.skipLeadingZeros();return this.readBits(t+1)-1},this.readExpGolomb=function(){var t=this.readUnsignedExpGolomb();return 1&t?1+t>>>1:-1*(t>>>1)},this.readBoolean=function(){return 1===this.readBits(1)},this.readUnsignedByte=function(){return this.readBits(8)},this.loadWord()};(_t=function(){var t,i,n=0;_t.prototype.init.call(this),this.push=function(e){var r;for(i=i?((r=new Uint8Array(i.byteLength+e.data.byteLength)).set(i),r.set(e.data,i.byteLength),r):e.data;n<i.byteLength-3;n++)if(1===i[n+2]){t=n+5;break}for(;t<i.byteLength;)switch(i[t]){case 0:if(0!==i[t-1]){t+=2;break}if(0!==i[t-2]){t++;break}for(n+3!==t-2&&this.trigger("data",i.subarray(n+3,t-2));1!==i[++t]&&t<i.length;);n=t-2,t+=3;break;case 1:if(0!==i[t-1]||0!==i[t-2]){t+=3;break}this.trigger("data",i.subarray(n+3,t-2)),n=t-2,t+=3;break;default:t+=3}i=i.subarray(n),t-=n,n=0},this.flush=function(){i&&3<i.byteLength&&this.trigger("data",i.subarray(n+3)),i=null,n=0,this.trigger("done")}}).prototype=new rt,Ut={100:!0,110:!0,122:!0,244:!0,44:!0,83:!0,86:!0,118:!0,128:!0,138:!0,139:!0,134:!0},(jt=function(){var t,i,n,e,r,s,o,a=new _t;jt.prototype.init.call(this),(t=this).push=function(t){"video"===t.type&&(i=t.trackId,n=t.pts,e=t.dts,a.push(t))},a.on("data",function(o){var a={trackId:i,pts:n,dts:e,data:o};switch(31&o[0]){case 5:a.nalUnitType="slice_layer_without_partitioning_rbsp_idr";break;case 6:a.nalUnitType="sei_rbsp",a.escapedRBSP=r(o.subarray(1));break;case 7:a.nalUnitType="seq_parameter_set_rbsp",a.escapedRBSP=r(o.subarray(1)),a.config=s(a.escapedRBSP);break;case 8:a.nalUnitType="pic_parameter_set_rbsp";break;case 9:a.nalUnitType="access_unit_delimiter_rbsp"}t.trigger("data",a)}),a.on("done",function(){t.trigger("done")}),this.flush=function(){a.flush()},o=function(t,i){var n,e=8,r=8;for(n=0;n<t;n++)0!==r&&(r=(e+i.readExpGolomb()+256)%256),e=0===r?e:r},r=function(t){for(var i,n,e=t.byteLength,r=[],s=1;s<e-2;)0===t[s]&&0===t[s+1]&&3===t[s+2]?(r.push(s+2),s+=2):s++;if(0===r.length)return t;i=e-r.length,n=new Uint8Array(i);var o=0;for(s=0;s<i;o++,s++)o===r[0]&&(o++,r.shift()),n[s]=t[o];return n},s=function(t){var i,n,e,r,s,a,u,c,h,f,l,d,v,p=0,m=0,b=0,T=0,y=1;if(n=(i=new Vt(t)).readUnsignedByte(),r=i.readUnsignedByte(),e=i.readUnsignedByte(),i.skipUnsignedExpGolomb(),Ut[n]&&(3===(s=i.readUnsignedExpGolomb())&&i.skipBits(1),i.skipUnsignedExpGolomb(),i.skipUnsignedExpGolomb(),i.skipBits(1),i.readBoolean()))for(l=3!==s?8:12,v=0;v<l;v++)i.readBoolean()&&o(v<6?16:64,i);if(i.skipUnsignedExpGolomb(),0===(a=i.readUnsignedExpGolomb()))i.readUnsignedExpGolomb();else if(1===a)for(i.skipBits(1),i.skipExpGolomb(),i.skipExpGolomb(),u=i.readUnsignedExpGolomb(),v=0;v<u;v++)i.skipExpGolomb();if(i.skipUnsignedExpGolomb(),i.skipBits(1),c=i.readUnsignedExpGolomb(),h=i.readUnsignedExpGolomb(),0===(f=i.readBits(1))&&i.skipBits(1),i.skipBits(1),i.readBoolean()&&(p=i.readUnsignedExpGolomb(),m=i.readUnsignedExpGolomb(),b=i.readUnsignedExpGolomb(),T=i.readUnsignedExpGolomb()),i.readBoolean()&&i.readBoolean()){switch(i.readUnsignedByte()){case 1:d=[1,1];break;case 2:d=[12,11];break;case 3:d=[10,11];break;case 4:d=[16,11];break;case 5:d=[40,33];break;case 6:d=[24,11];break;case 7:d=[20,11];break;case 8:d=[32,11];break;case 9:d=[80,33];break;case 10:d=[18,11];break;case 11:d=[15,11];break;case 12:d=[64,33];break;case 13:d=[160,99];break;case 14:d=[4,3];break;case 15:d=[3,2];break;case 16:d=[2,1];break;case 255:d=[i.readUnsignedByte()<<8|i.readUnsignedByte(),i.readUnsignedByte()<<8|i.readUnsignedByte()]}d&&(y=d[0]/d[1])}return{profileIdc:n,levelIdc:e,profileCompatibility:r,width:Math.ceil((16*(c+1)-2*p-2*m)*y),height:(2-f)*(h+1)*16-2*b-2*T}}}).prototype=new rt;var Ft,Wt={H264Stream:jt,NalByteStream:_t},Xt=function(t,i){var n=t[i+6]<<21|t[i+7]<<14|t[i+8]<<7|t[i+9];return(16&t[i+5])>>4?20+n:10+n},$t=function(t,i){return 6144&t[i+3]|t[i+4]<<3|(224&t[i+5])>>5};function zt(t,i){var n;if(t.length!==i.length)return!1;for(n=0;n<t.length;n++)if(t[n]!==i[n])return!1;return!0}function Kt(t,i,n,e,r,s){return{start:{dts:t,pts:t+(n-i)},end:{dts:t+(e-i),pts:t+(r-n)},prependedContentDuration:s,baseMediaDecodeTime:t}}(Ft=function(){var t=new Uint8Array,i=0;Ft.prototype.init.call(this),this.setTimestamp=function(t){i=t},this.push=function(n){var e,r,s,o=0,a=0;for(t.length?(s=t.length,(t=new Uint8Array(n.byteLength+s)).set(t.subarray(0,s)),t.set(n,s)):t=n;3<=t.length-a;)if(t[a]!=="I".charCodeAt(0)||t[a+1]!=="D".charCodeAt(0)||t[a+2]!=="3".charCodeAt(0))if(255!=(255&t[a])||240!=(240&t[a+1]))a++;else{if(t.length-a<7)break;if(a+(o=$t(t,a))>t.length)break;r={type:"audio",data:t.subarray(a,a+o),pts:i,dts:i},this.trigger("data",r),a+=o}else{if(t.length-a<10)break;if(a+(o=Xt(t,a))>t.length)break;e={type:"timed-metadata",data:t.subarray(a,a+o)},this.trigger("data",e),a+=o}t=0<t.length-a?t.subarray(a):new Uint8Array}}).prototype=new rt;var qt,Yt,Qt,Jt,Zt=Ft,ti=Wt.H264Stream,ii=["audioobjecttype","channelcount","samplerate","samplingfrequencyindex","samplesize"],ni=["width","height","profileIdc","levelIdc","profileCompatibility"];function ei(t){return new Date(1e3*t-20828448e5)}function ri(t){return{isLeading:(12&t[0])>>>2,dependsOn:3&t[0],isDependedOn:(192&t[1])>>>6,hasRedundancy:(48&t[1])>>>4,paddingValue:(14&t[1])>>>1,isNonSyncSample:1&t[1],degradationPriority:t[2]<<8|t[3]}}function si(t,i){for(var n=t,e=0;e<i.length;e++){var r=i[e];if(n<r.size)return r;n-=r.size}return null}function oi(t,i){var n=Y.findBox(t,["moof","traf"]),e=Y.findBox(t,["mdat"]),r={},s=[];return e.forEach(function(t,i){s.push({mdat:t,traf:n[i]})}),s.forEach(function(t){var n,e=t.mdat,s=t.traf,o=Y.findBox(s,["tfhd"]),a=li.parseTfhd(o[0]),u=a.trackId,c=Y.findBox(s,["tfdt"]),h=0<c.length?li.parseTfdt(c[0]).baseMediaDecodeTime:0,f=Y.findBox(s,["trun"]);i===u&&0<f.length&&(n=function(t,i,n){var e,r,s,o,a=new DataView(t.buffer,t.byteOffset,t.byteLength),u=[];for(r=0;r+4<t.length;r+=s)if(s=a.getUint32(r),r+=4,!(s<=0))switch(31&t[r]){case 6:var c=t.subarray(r+1,r+1+s),h=si(r,i);e={nalUnitType:"sei_rbsp",size:s,data:c,escapedRBSP:di(c),trackId:n},h?(e.pts=h.pts,e.dts=h.dts,o=h):(e.pts=o.pts,e.dts=o.dts),u.push(e)}return u}(e,function(t,i,n){var e=h,r=n.defaultSampleDuration||0,s=n.defaultSampleSize||0,o=n.trackId,a=[];return f.forEach(function(t){var i=li.parseTrun(t).samples;i.forEach(function(t){void 0===t.duration&&(t.duration=r),void 0===t.size&&(t.size=s),t.trackId=o,t.dts=e,void 0===t.compositionTimeOffset&&(t.compositionTimeOffset=0),t.pts=e+t.compositionTimeOffset,e+=t.duration}),a=a.concat(i)}),a}(0,0,a),u),r[u]||(r[u]=[]),r[u]=r[u].concat(n))}),r}(Yt=function(t,i){var n=[],e=0,r=0,s=0,o=1/0;i=i||{},Yt.prototype.init.call(this),this.push=function(i){lt(t,i),t&&ii.forEach(function(n){t[n]=i[n]}),n.push(i)},this.setEarliestDts=function(i){r=i-t.timelineStartInfo.baseMediaDecodeTime},this.setVideoBaseMediaDecodeTime=function(t){o=t},this.setAudioAppendStart=function(t){s=t},this.flush=function(){var a,u,c,h;0!==n.length&&(a=function(t,i,n){return i.minSegmentDts>=n?t:(i.minSegmentDts=1/0,t.filter(function(t){return t.dts>=n&&(i.minSegmentDts=Math.min(i.minSegmentDts,t.dts),i.minSegmentPts=i.minSegmentDts,!0)}))}(n,t,r),t.baseMediaDecodeTime=ft(t,i.keepOriginalTimestamps),function(t,i,n,e){var r,s,o,a,u=0,c=0,h=0;if(i.length&&(r=ct(t.baseMediaDecodeTime,t.samplerate),s=Math.ceil(9e4/(t.samplerate/1024)),n&&e&&(u=r-Math.max(n,e),h=(c=Math.floor(u/s))*s),!(c<1||45e3<h))){for(o=(o=ut[t.samplerate])||i[0].data,a=0;a<c;a++)i.splice(a,0,{data:o});t.baseMediaDecodeTime-=Math.floor(function(t,i){return it(nt(h),i)}(0,t.samplerate))}}(t,a,s,o),t.samples=function(t){var i,n=[];for(i=0;i<t.length;i++)n.push({size:t[i].data.byteLength,duration:1024});return n}(a),c=z.mdat(function(t){var i,n,e=0,r=new Uint8Array(function(t){var i,n=0;for(i=0;i<t.length;i++)n+=t[i].data.byteLength;return n}(t));for(i=0;i<t.length;i++)r.set((n=t[i]).data,e),e+=n.data.byteLength;return r}(a)),n=[],u=z.moof(e,[t]),h=new Uint8Array(u.byteLength+c.byteLength),e++,h.set(u),h.set(c,u.byteLength),ht(t),this.trigger("data",{track:t,boxes:h})),this.trigger("done","AudioSegmentStream")}}).prototype=new rt,(qt=function(t,i){var n,e,r=0,s=[],o=[];i=i||{},qt.prototype.init.call(this),delete t.minPTS,this.gopCache_=[],this.push=function(i){lt(t,i),"seq_parameter_set_rbsp"!==i.nalUnitType||n||(n=i.config,t.sps=[i.data],ni.forEach(function(i){t[i]=n[i]},this)),"pic_parameter_set_rbsp"!==i.nalUnitType||e||(e=i.data,t.pps=[i.data]),s.push(i)},this.flush=function(){for(var n,e,a,u,c,h,f,l,d=0;s.length&&"access_unit_delimiter_rbsp"!==s[0].nalUnitType;)s.shift();if(0===s.length)return this.resetStream_(),void this.trigger("done","VideoSegmentStream");if(n=function(t){var i,n,e=[],r=[];for(i=e.byteLength=0;i<t.length;i++)"access_unit_delimiter_rbsp"===(n=t[i]).nalUnitType?(e.length&&(e.duration=n.dts-e.dts,r.push(e)),(e=[n]).byteLength=n.data.byteLength,e.pts=n.pts,e.dts=n.dts):("slice_layer_without_partitioning_rbsp_idr"===n.nalUnitType&&(e.keyFrame=!0),e.duration=n.dts-e.dts,e.byteLength+=n.data.byteLength,e.push(n));return r.length&&(!e.duration||e.duration<=0)&&(e.duration=r[r.length-1].duration),r.push(e),r}(s),(a=function(t){var i,n,e=[],r=[];for(e.byteLength=0,e.nalCount=0,e.duration=0,e.pts=t[0].pts,e.dts=t[0].dts,r.byteLength=0,r.nalCount=0,r.duration=0,r.pts=t[0].pts,r.dts=t[0].dts,i=0;i<t.length;i++)(n=t[i]).keyFrame?(e.length&&(r.push(e),r.byteLength+=e.byteLength,r.nalCount+=e.nalCount,r.duration+=e.duration),(e=[n]).nalCount=n.length,e.byteLength=n.byteLength,e.pts=n.pts,e.dts=n.dts,e.duration=n.duration):(e.duration+=n.duration,e.nalCount+=n.length,e.byteLength+=n.byteLength,e.push(n));return r.length&&e.duration<=0&&(e.duration=r[r.length-1].duration),r.byteLength+=e.byteLength,r.nalCount+=e.nalCount,r.duration+=e.duration,r.push(e),r}(n))[0][0].keyFrame||((e=this.getGopForFusion_(s[0],t))?(d=e.duration,a.unshift(e),a.byteLength+=e.byteLength,a.nalCount+=e.nalCount,a.pts=e.pts,a.dts=e.dts,a.duration+=e.duration):a=function(t){var i;return!t[0][0].keyFrame&&1<t.length&&(i=t.shift(),t.byteLength-=i.byteLength,t.nalCount-=i.nalCount,t[0][0].dts=i.dts,t[0][0].pts=i.pts,t[0][0].duration+=i.duration),t}(a)),o.length){var v;if(!(v=i.alignGopsAtEnd?this.alignGopsAtEnd_(a):this.alignGopsAtStart_(a)))return this.gopCache_.unshift({gop:a.pop(),pps:t.pps,sps:t.sps}),this.gopCache_.length=Math.min(6,this.gopCache_.length),s=[],this.resetStream_(),void this.trigger("done","VideoSegmentStream");ht(t),a=v}lt(t,a),t.samples=function(t){var i,n,e,r,s,o,a=0,u=[];for(i=0;i<t.length;i++)for(r=t[i],n=0;n<r.length;n++)s=r[n],o=void 0,(o={size:0,flags:{isLeading:0,dependsOn:1,isDependedOn:0,hasRedundancy:0,degradationPriority:0,isNonSyncSample:1}}).dataOffset=a,o.compositionTimeOffset=s.pts-s.dts,o.duration=s.duration,o.size=4*s.length,o.size+=s.byteLength,s.keyFrame&&(o.flags.dependsOn=2,o.flags.isNonSyncSample=0),a+=(e=o).size,u.push(e);return u}(a),c=z.mdat(function(t){var i,n,e,r,s,o,a=0,u=new Uint8Array(t.byteLength+4*t.nalCount),c=new DataView(u.buffer);for(i=0;i<t.length;i++)for(r=t[i],n=0;n<r.length;n++)for(s=r[n],e=0;e<s.length;e++)c.setUint32(a,(o=s[e]).data.byteLength),u.set(o.data,a+=4),a+=o.data.byteLength;return u}(a)),t.baseMediaDecodeTime=ft(t,i.keepOriginalTimestamps),this.trigger("processedGopsInfo",a.map(function(t){return{pts:t.pts,dts:t.dts,byteLength:t.byteLength}})),this.trigger("segmentTimingInfo",Kt(t.baseMediaDecodeTime,(f=a[0]).dts,f.pts,(l=a[a.length-1]).dts+l.duration,l.pts+l.duration,d)),this.gopCache_.unshift({gop:a.pop(),pps:t.pps,sps:t.sps}),this.gopCache_.length=Math.min(6,this.gopCache_.length),s=[],this.trigger("baseMediaDecodeTime",t.baseMediaDecodeTime),this.trigger("timelineStartInfo",t.timelineStartInfo),u=z.moof(r,[t]),h=new Uint8Array(u.byteLength+c.byteLength),r++,h.set(u),h.set(c,u.byteLength),this.trigger("data",{track:t,boxes:h}),this.resetStream_(),this.trigger("done","VideoSegmentStream")},this.resetStream_=function(){ht(t),e=n=void 0},this.getGopForFusion_=function(i){var n,e,r,s,o,a=1/0;for(o=0;o<this.gopCache_.length;o++)r=(s=this.gopCache_[o]).gop,t.pps&&zt(t.pps[0],s.pps[0])&&t.sps&&zt(t.sps[0],s.sps[0])&&(r.dts<t.timelineStartInfo.dts||-1e4<=(n=i.dts-r.dts-r.duration)&&n<=45e3&&(!e||n<a)&&(e=s,a=n));return e?e.gop:null},this.alignGopsAtStart_=function(t){var i,n,e,r,s,a,u,c;for(s=t.byteLength,a=t.nalCount,u=t.duration,i=n=0;i<o.length&&n<t.length&&(e=o[i]).pts!==(r=t[n]).pts;)r.pts>e.pts?i++:(n++,s-=r.byteLength,a-=r.nalCount,u-=r.duration);return 0===n?t:n===t.length?null:((c=t.slice(n)).byteLength=s,c.duration=u,c.nalCount=a,c.pts=c[0].pts,c.dts=c[0].dts,c)},this.alignGopsAtEnd_=function(t){var i,n,e,r,s,a,u;for(i=o.length-1,n=t.length-1,s=null,a=!1;0<=i&&0<=n;){if((e=o[i]).pts===(r=t[n]).pts){a=!0;break}e.pts>r.pts?i--:(i===o.length-1&&(s=n),n--)}if(!a&&null===s)return null;if(0===(u=a?n:s))return t;var c=t.slice(u),h=c.reduce(function(t,i){return t.byteLength+=i.byteLength,t.duration+=i.duration,t.nalCount+=i.nalCount,t},{byteLength:0,duration:0,nalCount:0});return c.byteLength=h.byteLength,c.duration=h.duration,c.nalCount=h.nalCount,c.pts=c[0].pts,c.dts=c[0].dts,c},this.alignGopsWith=function(t){o=t}}).prototype=new rt,(Jt=function(t,i){this.numberOfTracks=0,this.metadataStream=i,this.remuxTracks=void 0===(t=t||{}).remux||!!t.remux,"boolean"==typeof t.keepOriginalTimestamps&&(this.keepOriginalTimestamps=t.keepOriginalTimestamps),this.pendingTracks=[],this.videoTrack=null,this.pendingBoxes=[],this.pendingCaptions=[],this.pendingMetadata=[],this.pendingBytes=0,this.emittedTracks=0,Jt.prototype.init.call(this),this.push=function(t){return t.text?this.pendingCaptions.push(t):t.frames?this.pendingMetadata.push(t):(this.pendingTracks.push(t.track),this.pendingBoxes.push(t.boxes),this.pendingBytes+=t.boxes.byteLength,"video"===t.track.type&&(this.videoTrack=t.track),void("audio"===t.track.type&&(this.audioTrack=t.track)))}}).prototype=new rt,Jt.prototype.flush=function(t){var i,n,e,r,s=0,o={captions:[],captionStreams:{},metadata:[],info:{}},a=0;if(this.pendingTracks.length<this.numberOfTracks){if("VideoSegmentStream"!==t&&"AudioSegmentStream"!==t)return;if(this.remuxTracks)return;if(0===this.pendingTracks.length)return this.emittedTracks++,void(this.emittedTracks>=this.numberOfTracks&&(this.trigger("done"),this.emittedTracks=0))}for(this.videoTrack?(a=this.videoTrack.timelineStartInfo.pts,ni.forEach(function(t){o.info[t]=this.videoTrack[t]},this)):this.audioTrack&&(a=this.audioTrack.timelineStartInfo.pts,ii.forEach(function(t){o.info[t]=this.audioTrack[t]},this)),o.type=1===this.pendingTracks.length?this.pendingTracks[0].type:"combined",this.emittedTracks+=this.pendingTracks.length,e=z.initSegment(this.pendingTracks),o.initSegment=new Uint8Array(e.byteLength),o.initSegment.set(e),o.data=new Uint8Array(this.pendingBytes),r=0;r<this.pendingBoxes.length;r++)o.data.set(this.pendingBoxes[r],s),s+=this.pendingBoxes[r].byteLength;for(r=0;r<this.pendingCaptions.length;r++)(i=this.pendingCaptions[r]).startTime=i.startPts,this.keepOriginalTimestamps||(i.startTime-=a),i.startTime/=9e4,i.endTime=i.endPts,this.keepOriginalTimestamps||(i.endTime-=a),i.endTime/=9e4,o.captionStreams[i.stream]=!0,o.captions.push(i);for(r=0;r<this.pendingMetadata.length;r++)(n=this.pendingMetadata[r]).cueTime=n.pts,this.keepOriginalTimestamps||(n.cueTime-=a),n.cueTime/=9e4,o.metadata.push(n);o.metadata.dispatchType=this.metadataStream.dispatchType,this.pendingTracks.length=0,this.videoTrack=null,this.pendingBoxes.length=0,this.pendingCaptions.length=0,this.pendingBytes=0,this.pendingMetadata.length=0,this.trigger("data",o),this.emittedTracks>=this.numberOfTracks&&(this.trigger("done"),this.emittedTracks=0)},(Qt=function(t){var i,n,e=this,r=!0;Qt.prototype.init.call(this),this.baseMediaDecodeTime=(t=t||{}).baseMediaDecodeTime||0,this.transmuxPipeline_={},this.setupAacPipeline=function(){var i={};(this.transmuxPipeline_=i).type="aac",i.metadataStream=new Nt.MetadataStream,i.aacStream=new Zt,i.audioTimestampRolloverStream=new Nt.TimestampRolloverStream("audio"),i.timedMetadataTimestampRolloverStream=new Nt.TimestampRolloverStream("timed-metadata"),i.adtsStream=new Lt,i.coalesceStream=new Jt(t,i.metadataStream),i.headOfPipeline=i.aacStream,i.aacStream.pipe(i.audioTimestampRolloverStream).pipe(i.adtsStream),i.aacStream.pipe(i.timedMetadataTimestampRolloverStream).pipe(i.metadataStream).pipe(i.coalesceStream),i.metadataStream.on("timestamp",function(t){i.aacStream.setTimestamp(t.timeStamp)}),i.aacStream.on("data",function(r){"timed-metadata"!==r.type||i.audioSegmentStream||(n=n||{timelineStartInfo:{baseMediaDecodeTime:e.baseMediaDecodeTime},codec:"adts",type:"audio"},i.coalesceStream.numberOfTracks++,i.audioSegmentStream=new Yt(n,t),i.adtsStream.pipe(i.audioSegmentStream).pipe(i.coalesceStream))}),i.coalesceStream.on("data",this.trigger.bind(this,"data")),i.coalesceStream.on("done",this.trigger.bind(this,"done"))},this.setupTsPipeline=function(){var r={};(this.transmuxPipeline_=r).type="ts",r.metadataStream=new Nt.MetadataStream,r.packetStream=new Nt.TransportPacketStream,r.parseStream=new Nt.TransportParseStream,r.elementaryStream=new Nt.ElementaryStream,r.videoTimestampRolloverStream=new Nt.TimestampRolloverStream("video"),r.audioTimestampRolloverStream=new Nt.TimestampRolloverStream("audio"),r.timedMetadataTimestampRolloverStream=new Nt.TimestampRolloverStream("timed-metadata"),r.adtsStream=new Lt,r.h264Stream=new ti,r.captionStream=new Nt.CaptionStream,r.coalesceStream=new Jt(t,r.metadataStream),r.headOfPipeline=r.packetStream,r.packetStream.pipe(r.parseStream).pipe(r.elementaryStream),r.elementaryStream.pipe(r.videoTimestampRolloverStream).pipe(r.h264Stream),r.elementaryStream.pipe(r.audioTimestampRolloverStream).pipe(r.adtsStream),r.elementaryStream.pipe(r.timedMetadataTimestampRolloverStream).pipe(r.metadataStream).pipe(r.coalesceStream),r.h264Stream.pipe(r.captionStream).pipe(r.coalesceStream),r.elementaryStream.on("data",function(s){var o;if("metadata"===s.type){for(o=s.tracks.length;o--;)i||"video"!==s.tracks[o].type?n||"audio"!==s.tracks[o].type||((n=s.tracks[o]).timelineStartInfo.baseMediaDecodeTime=e.baseMediaDecodeTime):(i=s.tracks[o]).timelineStartInfo.baseMediaDecodeTime=e.baseMediaDecodeTime;i&&!r.videoSegmentStream&&(r.coalesceStream.numberOfTracks++,r.videoSegmentStream=new qt(i,t),r.videoSegmentStream.on("timelineStartInfo",function(t){n&&(n.timelineStartInfo=t,r.audioSegmentStream.setEarliestDts(t.dts))}),r.videoSegmentStream.on("processedGopsInfo",e.trigger.bind(e,"gopInfo")),r.videoSegmentStream.on("segmentTimingInfo",e.trigger.bind(e,"videoSegmentTimingInfo")),r.videoSegmentStream.on("baseMediaDecodeTime",function(t){n&&r.audioSegmentStream.setVideoBaseMediaDecodeTime(t)}),r.h264Stream.pipe(r.videoSegmentStream).pipe(r.coalesceStream)),n&&!r.audioSegmentStream&&(r.coalesceStream.numberOfTracks++,r.audioSegmentStream=new Yt(n,t),r.adtsStream.pipe(r.audioSegmentStream).pipe(r.coalesceStream))}}),r.coalesceStream.on("data",this.trigger.bind(this,"data")),r.coalesceStream.on("done",this.trigger.bind(this,"done"))},this.setBaseMediaDecodeTime=function(e){var r=this.transmuxPipeline_;t.keepOriginalTimestamps||(this.baseMediaDecodeTime=e),n&&(n.timelineStartInfo.dts=void 0,n.timelineStartInfo.pts=void 0,ht(n),t.keepOriginalTimestamps||(n.timelineStartInfo.baseMediaDecodeTime=e),r.audioTimestampRolloverStream&&r.audioTimestampRolloverStream.discontinuity()),i&&(r.videoSegmentStream&&(r.videoSegmentStream.gopCache_=[],r.videoTimestampRolloverStream.discontinuity()),i.timelineStartInfo.dts=void 0,i.timelineStartInfo.pts=void 0,ht(i),r.captionStream.reset(),t.keepOriginalTimestamps||(i.timelineStartInfo.baseMediaDecodeTime=e)),r.timedMetadataTimestampRolloverStream&&r.timedMetadataTimestampRolloverStream.discontinuity()},this.setAudioAppendStart=function(t){n&&this.transmuxPipeline_.audioSegmentStream.setAudioAppendStart(t)},this.alignGopsWith=function(t){i&&this.transmuxPipeline_.videoSegmentStream&&this.transmuxPipeline_.videoSegmentStream.alignGopsWith(t)},this.push=function(t){if(r){var i=function(t){return t[0]==="I".charCodeAt(0)&&t[1]==="D".charCodeAt(0)&&t[2]==="3".charCodeAt(0)}(t);i&&"aac"!==this.transmuxPipeline_.type?this.setupAacPipeline():i||"ts"===this.transmuxPipeline_.type||this.setupTsPipeline(),r=!1}this.transmuxPipeline_.headOfPipeline.push(t)},this.flush=function(){r=!0,this.transmuxPipeline_.headOfPipeline.flush()},this.resetCaptions=function(){this.transmuxPipeline_.captionStream&&this.transmuxPipeline_.captionStream.reset()}}).prototype=new rt;var ai,ui,ci={Transmuxer:Qt,VideoSegmentStream:qt,AudioSegmentStream:Yt,AUDIO_PROPERTIES:ii,VIDEO_PROPERTIES:ni,generateVideoSegmentTimingInfo:Kt},hi=Y.parseType,fi={avc1:function(t){var i=new DataView(t.buffer,t.byteOffset,t.byteLength);return{dataReferenceIndex:i.getUint16(6),width:i.getUint16(24),height:i.getUint16(26),horizresolution:i.getUint16(28)+i.getUint16(30)/16,vertresolution:i.getUint16(32)+i.getUint16(34)/16,frameCount:i.getUint16(40),depth:i.getUint16(74),config:ai(t.subarray(78,t.byteLength))}},avcC:function(t){var i,n,e,r,s=new DataView(t.buffer,t.byteOffset,t.byteLength),o={configurationVersion:t[0],avcProfileIndication:t[1],profileCompatibility:t[2],avcLevelIndication:t[3],lengthSizeMinusOne:3&t[4],sps:[],pps:[]},a=31&t[5];for(e=6,r=0;r<a;r++)n=s.getUint16(e),e+=2,o.sps.push(new Uint8Array(t.subarray(e,e+n))),e+=n;for(i=t[e],e++,r=0;r<i;r++)n=s.getUint16(e),e+=2,o.pps.push(new Uint8Array(t.subarray(e,e+n))),e+=n;return o},btrt:function(t){var i=new DataView(t.buffer,t.byteOffset,t.byteLength);return{bufferSizeDB:i.getUint32(0),maxBitrate:i.getUint32(4),avgBitrate:i.getUint32(8)}},esds:function(t){return{version:t[0],flags:new Uint8Array(t.subarray(1,4)),esId:t[6]<<8|t[7],streamPriority:31&t[8],decoderConfig:{objectProfileIndication:t[11],streamType:t[12]>>>2&63,bufferSize:t[13]<<16|t[14]<<8|t[15],maxBitrate:t[16]<<24|t[17]<<16|t[18]<<8|t[19],avgBitrate:t[20]<<24|t[21]<<16|t[22]<<8|t[23],decoderConfigDescriptor:{tag:t[24],length:t[25],audioObjectType:t[26]>>>3&31,samplingFrequencyIndex:(7&t[26])<<1|t[27]>>>7&1,channelConfiguration:t[27]>>>3&15}}}},ftyp:function(t){for(var i=new DataView(t.buffer,t.byteOffset,t.byteLength),n={majorBrand:hi(t.subarray(0,4)),minorVersion:i.getUint32(4),compatibleBrands:[]},e=8;e<t.byteLength;)n.compatibleBrands.push(hi(t.subarray(e,e+4))),e+=4;return n},dinf:function(t){return{boxes:ai(t)}},dref:function(t){return{version:t[0],flags:new Uint8Array(t.subarray(1,4)),dataReferences:ai(t.subarray(8))}},hdlr:function(t){var i={version:new DataView(t.buffer,t.byteOffset,t.byteLength).getUint8(0),flags:new Uint8Array(t.subarray(1,4)),handlerType:hi(t.subarray(8,12)),name:""},n=8;for(n=24;n<t.byteLength;n++){if(0===t[n]){n++;break}i.name+=String.fromCharCode(t[n])}return i.name=decodeURIComponent(escape(i.name)),i},mdat:function(t){return{byteLength:t.byteLength,nals:function(t){var i,n,e=new DataView(t.buffer,t.byteOffset,t.byteLength),r=[];for(i=0;i+4<t.length;i+=n)if(n=e.getUint32(i),i+=4,n<=0)r.push("<span style='color:red;'>MALFORMED DATA</span>");else switch(31&t[i]){case 1:r.push("slice_layer_without_partitioning_rbsp");break;case 5:r.push("slice_layer_without_partitioning_rbsp_idr");break;case 6:r.push("sei_rbsp");break;case 7:r.push("seq_parameter_set_rbsp");break;case 8:r.push("pic_parameter_set_rbsp");break;case 9:r.push("access_unit_delimiter_rbsp");break;default:r.push("UNKNOWN NAL - "+t[i]&31)}return r}(t)}},mdhd:function(t){var i,n=new DataView(t.buffer,t.byteOffset,t.byteLength),e=4,r={version:n.getUint8(0),flags:new Uint8Array(t.subarray(1,4)),language:""};return 1===r.version?(r.creationTime=ei(n.getUint32(e+=4)),r.modificationTime=ei(n.getUint32(e+=8)),r.timescale=n.getUint32(e+=4),e+=8):(r.creationTime=ei(n.getUint32(e)),r.modificationTime=ei(n.getUint32(e+=4)),r.timescale=n.getUint32(e+=4),e+=4),r.duration=n.getUint32(e),i=n.getUint16(e+=4),r.language+=String.fromCharCode(96+(i>>10)),r.language+=String.fromCharCode(96+((992&i)>>5)),r.language+=String.fromCharCode(96+(31&i)),r},mdia:function(t){return{boxes:ai(t)}},mfhd:function(t){return{version:t[0],flags:new Uint8Array(t.subarray(1,4)),sequenceNumber:t[4]<<24|t[5]<<16|t[6]<<8|t[7]}},minf:function(t){return{boxes:ai(t)}},mp4a:function(t){var i=new DataView(t.buffer,t.byteOffset,t.byteLength),n={dataReferenceIndex:i.getUint16(6),channelcount:i.getUint16(16),samplesize:i.getUint16(18),samplerate:i.getUint16(24)+i.getUint16(26)/65536};return 28<t.byteLength&&(n.streamDescriptor=ai(t.subarray(28))[0]),n},moof:function(t){return{boxes:ai(t)}},moov:function(t){return{boxes:ai(t)}},mvex:function(t){return{boxes:ai(t)}},mvhd:function(t){var i=new DataView(t.buffer,t.byteOffset,t.byteLength),n=4,e={version:i.getUint8(0),flags:new Uint8Array(t.subarray(1,4))};return 1===e.version?(e.creationTime=ei(i.getUint32(n+=4)),e.modificationTime=ei(i.getUint32(n+=8)),e.timescale=i.getUint32(n+=4),n+=8):(e.creationTime=ei(i.getUint32(n)),e.modificationTime=ei(i.getUint32(n+=4)),e.timescale=i.getUint32(n+=4),n+=4),e.duration=i.getUint32(n),e.rate=i.getUint16(n+=4)+i.getUint16(n+2)/16,e.volume=i.getUint8(n+=4)+i.getUint8(n+1)/8,n+=2,n+=2,n+=8,e.matrix=new Uint32Array(t.subarray(n,n+36)),n+=36,e.nextTrackId=i.getUint32(n+=24),e},pdin:function(t){var i=new DataView(t.buffer,t.byteOffset,t.byteLength);return{version:i.getUint8(0),flags:new Uint8Array(t.subarray(1,4)),rate:i.getUint32(4),initialDelay:i.getUint32(8)}},sdtp:function(t){var i,n={version:t[0],flags:new Uint8Array(t.subarray(1,4)),samples:[]};for(i=4;i<t.byteLength;i++)n.samples.push({dependsOn:(48&t[i])>>4,isDependedOn:(12&t[i])>>2,hasRedundancy:3&t[i]});return n},sidx:function(t){var i,n=new DataView(t.buffer,t.byteOffset,t.byteLength),e={version:t[0],flags:new Uint8Array(t.subarray(1,4)),references:[],referenceId:n.getUint32(4),timescale:n.getUint32(8),earliestPresentationTime:n.getUint32(12),firstOffset:n.getUint32(16)},r=n.getUint16(22);for(i=24;r;i+=12,r--)e.references.push({referenceType:(128&t[i])>>>7,referencedSize:2147483647&n.getUint32(i),subsegmentDuration:n.getUint32(i+4),startsWithSap:!!(128&t[i+8]),sapType:(112&t[i+8])>>>4,sapDeltaTime:268435455&n.getUint32(i+8)});return e},smhd:function(t){return{version:t[0],flags:new Uint8Array(t.subarray(1,4)),balance:t[4]+t[5]/256}},stbl:function(t){return{boxes:ai(t)}},stco:function(t){var i,n=new DataView(t.buffer,t.byteOffset,t.byteLength),e={version:t[0],flags:new Uint8Array(t.subarray(1,4)),chunkOffsets:[]},r=n.getUint32(4);for(i=8;r;i+=4,r--)e.chunkOffsets.push(n.getUint32(i));return e},stsc:function(t){var i,n=new DataView(t.buffer,t.byteOffset,t.byteLength),e=n.getUint32(4),r={version:t[0],flags:new Uint8Array(t.subarray(1,4)),sampleToChunks:[]};for(i=8;e;i+=12,e--)r.sampleToChunks.push({firstChunk:n.getUint32(i),samplesPerChunk:n.getUint32(i+4),sampleDescriptionIndex:n.getUint32(i+8)});return r},stsd:function(t){return{version:t[0],flags:new Uint8Array(t.subarray(1,4)),sampleDescriptions:ai(t.subarray(8))}},stsz:function(t){var i,n=new DataView(t.buffer,t.byteOffset,t.byteLength),e={version:t[0],flags:new Uint8Array(t.subarray(1,4)),sampleSize:n.getUint32(4),entries:[]};for(i=12;i<t.byteLength;i+=4)e.entries.push(n.getUint32(i));return e},stts:function(t){var i,n=new DataView(t.buffer,t.byteOffset,t.byteLength),e={version:t[0],flags:new Uint8Array(t.subarray(1,4)),timeToSamples:[]},r=n.getUint32(4);for(i=8;r;i+=8,r--)e.timeToSamples.push({sampleCount:n.getUint32(i),sampleDelta:n.getUint32(i+4)});return e},styp:function(t){return fi.ftyp(t)},tfdt:function(t){var i={version:t[0],flags:new Uint8Array(t.subarray(1,4)),baseMediaDecodeTime:t[4]<<24|t[5]<<16|t[6]<<8|t[7]};return 1===i.version&&(i.baseMediaDecodeTime*=Math.pow(2,32),i.baseMediaDecodeTime+=t[8]<<24|t[9]<<16|t[10]<<8|t[11]),i},tfhd:function(t){var i,n=new DataView(t.buffer,t.byteOffset,t.byteLength),e={version:t[0],flags:new Uint8Array(t.subarray(1,4)),trackId:n.getUint32(4)},r=1&e.flags[2],s=2&e.flags[2],o=8&e.flags[2],a=16&e.flags[2],u=32&e.flags[2],c=65536&e.flags[0],h=131072&e.flags[0];return i=8,r&&(i+=4,e.baseDataOffset=n.getUint32(12),i+=4),s&&(e.sampleDescriptionIndex=n.getUint32(i),i+=4),o&&(e.defaultSampleDuration=n.getUint32(i),i+=4),a&&(e.defaultSampleSize=n.getUint32(i),i+=4),u&&(e.defaultSampleFlags=n.getUint32(i)),c&&(e.durationIsEmpty=!0),!r&&h&&(e.baseDataOffsetIsMoof=!0),e},tkhd:function(t){var i=new DataView(t.buffer,t.byteOffset,t.byteLength),n=4,e={version:i.getUint8(0),flags:new Uint8Array(t.subarray(1,4))};return 1===e.version?(e.creationTime=ei(i.getUint32(n+=4)),e.modificationTime=ei(i.getUint32(n+=8)),e.trackId=i.getUint32(n+=4),n+=4,n+=8):(e.creationTime=ei(i.getUint32(n)),e.modificationTime=ei(i.getUint32(n+=4)),e.trackId=i.getUint32(n+=4),n+=4,n+=4),e.duration=i.getUint32(n),n+=4,e.layer=i.getUint16(n+=8),e.alternateGroup=i.getUint16(n+=2),e.volume=i.getUint8(n+=2)+i.getUint8(n+1)/8,n+=2,n+=2,e.matrix=new Uint32Array(t.subarray(n,n+36)),e.width=i.getUint16(n+=36)+i.getUint16(n+2)/16,e.height=i.getUint16(n+=4)+i.getUint16(n+2)/16,e},traf:function(t){return{boxes:ai(t)}},trak:function(t){return{boxes:ai(t)}},trex:function(t){var i=new DataView(t.buffer,t.byteOffset,t.byteLength);return{version:t[0],flags:new Uint8Array(t.subarray(1,4)),trackId:i.getUint32(4),defaultSampleDescriptionIndex:i.getUint32(8),defaultSampleDuration:i.getUint32(12),defaultSampleSize:i.getUint32(16),sampleDependsOn:3&t[20],sampleIsDependedOn:(192&t[21])>>6,sampleHasRedundancy:(48&t[21])>>4,samplePaddingValue:(14&t[21])>>1,sampleIsDifferenceSample:!!(1&t[21]),sampleDegradationPriority:i.getUint16(22)}},trun:function(t){var i,n={version:t[0],flags:new Uint8Array(t.subarray(1,4)),samples:[]},e=new DataView(t.buffer,t.byteOffset,t.byteLength),r=1&n.flags[2],s=4&n.flags[2],o=1&n.flags[1],a=2&n.flags[1],u=4&n.flags[1],c=8&n.flags[1],h=e.getUint32(4),f=8;for(r&&(n.dataOffset=e.getInt32(f),f+=4),s&&h&&(i={flags:ri(t.subarray(f,f+4))},f+=4,o&&(i.duration=e.getUint32(f),f+=4),a&&(i.size=e.getUint32(f),f+=4),c&&(i.compositionTimeOffset=e.getUint32(f),f+=4),n.samples.push(i),h--);h--;)i={},o&&(i.duration=e.getUint32(f),f+=4),a&&(i.size=e.getUint32(f),f+=4),u&&(i.flags=ri(t.subarray(f,f+4)),f+=4),c&&(i.compositionTimeOffset=e.getUint32(f),f+=4),n.samples.push(i);return n},"url ":function(t){return{version:t[0],flags:new Uint8Array(t.subarray(1,4))}},vmhd:function(t){var i=new DataView(t.buffer,t.byteOffset,t.byteLength);return{version:t[0],flags:new Uint8Array(t.subarray(1,4)),graphicsmode:i.getUint16(4),opcolor:new Uint16Array([i.getUint16(6),i.getUint16(8),i.getUint16(10)])}}},li={inspect:ai=function(t){for(var i,n,e,r,s,o=0,a=[],u=new ArrayBuffer(t.length),c=new Uint8Array(u),h=0;h<t.length;++h)c[h]=t[h];for(i=new DataView(u);o<t.byteLength;)n=i.getUint32(o),e=hi(t.subarray(o+4,o+8)),(s=(fi[e]||function(t){return{data:t}})(t.subarray(o+8,r=1<n?o+n:t.byteLength))).size=n,s.type=e,a.push(s),o=r;return a},textify:ui=function(t,i){var n;return i=i||0,n=new Array(2*i+1).join(" "),t.map(function(t){return n+t.type+"\n"+Object.keys(t).filter(function(t){return"type"!==t&&"boxes"!==t}).map(function(i){var e=n+"  "+i+": ",r=t[i];if(r instanceof Uint8Array||r instanceof Uint32Array){var s=Array.prototype.slice.call(new Uint8Array(r.buffer,r.byteOffset,r.byteLength)).map(function(t){return" "+("00"+t.toString(16)).slice(-2)}).join("").match(/.{1,24}/g);return s?1===s.length?e+"<"+s.join("").slice(1)+">":e+"<\n"+s.map(function(t){return n+"  "+t}).join("\n")+"\n"+n+"  >":e+"<>"}return e+JSON.stringify(r,null,2).split("\n").map(function(t,i){return 0===i?t:n+"  "+t}).join("\n")}).join("\n")+(t.boxes?"\n"+ui(t.boxes,i+1):"")}).join("\n")},parseTfdt:fi.tfdt,parseHdlr:fi.hdlr,parseTfhd:fi.tfhd,parseTrun:fi.trun,parseSidx:fi.sidx},di=function(t){for(var i,n,e=t.byteLength,r=[],s=1;s<e-2;)0===t[s]&&0===t[s+1]&&3===t[s+2]?(r.push(s+2),s+=2):s++;if(0===r.length)return t;i=e-r.length,n=new Uint8Array(i);var o=0;for(s=0;s<i;o++,s++)o===r[0]&&(o++,r.shift()),n[s]=t[o];return n},vi=gt.CaptionStream,pi={generator:z,probe:Y,Transmuxer:ci.Transmuxer,AudioSegmentStream:ci.AudioSegmentStream,VideoSegmentStream:ci.VideoSegmentStream,CaptionParser:function(){var t,i,n,e,r,s=!1;this.isInitialized=function(){return s},this.init=function(){t=new vi,s=!0,t.on("data",function(t){t.startTime=t.startPts/e,t.endTime=t.endPts/e,r.captions.push(t),r.captionStreams[t.stream]=!0})},this.isNewInit=function(t,i){return!(t&&0===t.length||i&&"object"==typeof i&&0===Object.keys(i).length||n===t[0]&&e===i[n])},this.parse=function(t,s,o){var a;if(!this.isInitialized())return null;if(!s||!o)return null;if(this.isNewInit(s,o))e=o[n=s[0]];else if(!n||!e)return i.push(t),null;for(;0<i.length;){var u=i.shift();this.parse(u,s,o)}return null!==(a=function(t,i,n){return i?{seiNals:oi(t,i)[i],timescale:n}:null}(t,n,e))&&a.seiNals?(this.pushNals(a.seiNals),this.flushStream(),r):null},this.pushNals=function(i){if(!this.isInitialized()||!i||0===i.length)return null;i.forEach(function(i){t.push(i)})},this.flushStream=function(){if(!this.isInitialized())return null;t.flush()},this.clearParsedCaptions=function(){r.captions=[],r.captionStreams={}},this.resetCaptionStream=function(){if(!this.isInitialized())return null;t.reset()},this.clearAllCaptions=function(){this.clearParsedCaptions(),this.resetCaptionStream()},this.reset=function(){i=[],e=n=null,r?this.clearParsedCaptions():r={captions:[],captionStreams:{}},this.resetCaptionStream()},this.reset()}};var mi=(function(t,i){i&&function(t,i){for(var n=0;n<i.length;n++){var e=i[n];e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(t,e.key,e)}}(bi.prototype,i)}(0,[{key:"init",value:function(){this.transmuxer&&this.transmuxer.dispose(),this.transmuxer=new pi.Transmuxer(this.options),function(t,i){i.on("data",function(i){var n=i.initSegment;i.initSegment={data:n.buffer,byteOffset:n.byteOffset,byteLength:n.byteLength};var e=i.data;i.data=e.buffer,t.postMessage({action:"data",segment:i,byteOffset:e.byteOffset,byteLength:e.byteLength},[i.data])}),i.captionStream&&i.captionStream.on("data",function(i){t.postMessage({action:"caption",data:i})}),i.on("done",function(){t.postMessage({action:"done"})}),i.on("gopInfo",function(i){t.postMessage({action:"gopInfo",gopInfo:i})}),i.on("videoSegmentTimingInfo",function(i){t.postMessage({action:"videoSegmentTimingInfo",videoSegmentTimingInfo:i})})}(this.self,this.transmuxer)}},{key:"push",value:function(t){var i=new Uint8Array(t.data,t.byteOffset,t.byteLength);this.transmuxer.push(i)}},{key:"reset",value:function(){this.init()}},{key:"setTimestampOffset",value:function(t){this.transmuxer.setBaseMediaDecodeTime(Math.round(9e4*(t.timestampOffset||0)))}},{key:"setAudioAppendStart",value:function(t){this.transmuxer.setAudioAppendStart(Math.ceil(9e4*t.appendStart))}},{key:"flush",value:function(){this.transmuxer.flush()}},{key:"resetCaptions",value:function(){this.transmuxer.resetCaptions()}},{key:"alignGopsWith",value:function(t){this.transmuxer.alignGopsWith(t.gopsToAlignWith.slice())}}]),bi);function bi(t,i){!function(t){if(!(t instanceof bi))throw new TypeError("Cannot call a class as a function")}(this),this.options=i||{},this.self=t,this.init()}new function(t){t.onmessage=function(i){"init"===i.data.action&&i.data.options?this.messageHandlers=new mi(t,i.data.options):(this.messageHandlers||(this.messageHandlers=new mi(t)),i.data&&i.data.action&&"init"!==i.data.action&&this.messageHandlers[i.data.action]&&this.messageHandlers[i.data.action](i.data))}}(t)}()}),uf={videoCodec:"avc1",videoObjectTypeIndicator:".4d400d",audioProfile:"2"},cf=(Yc(hf,fo.EventTarget),Kc(hf,[{key:"data_",value:function(t){var i=t.data.segment;i.data=new Uint8Array(i.data,t.data.byteOffset,t.data.byteLength),i.initSegment=new Uint8Array(i.initSegment.data,i.initSegment.byteOffset,i.initSegment.byteLength),function(t,i,n){var e=i.player_;if(n.captions&&n.captions.length)for(var r in t.inbandTextTracks_||(t.inbandTextTracks_={}),n.captionStreams)if(!t.inbandTextTracks_[r]){e.tech_.trigger({type:"usage",name:"hls-608"});var s=e.textTracks().getTrackById(r);t.inbandTextTracks_[r]=s||e.addRemoteTextTrack({kind:"captions",id:r,label:r},!1).track}n.metadata&&n.metadata.length&&!t.metadataTrack_&&(t.metadataTrack_=e.addRemoteTextTrack({kind:"metadata",label:"Timed Metadata"},!1).track,t.metadataTrack_.inBandMetadataTrackDispatchType=n.metadata.dispatchType)}(this,this.mediaSource_,i),this.pendingBuffers_.push(i)}},{key:"done_",value:function(){"closed"!==this.mediaSource_.readyState?this.processPendingSegments_():this.pendingBuffers_.length=0}},{key:"videoSegmentTimingInfo_",value:function(t){var i={start:{decode:t.start.dts/9e4,presentation:t.start.pts/9e4},end:{decode:t.end.dts/9e4,presentation:t.end.pts/9e4},baseMediaDecodeTime:t.baseMediaDecodeTime/9e4};t.prependedContentDuration&&(i.prependedContentDuration=t.prependedContentDuration/9e4),this.trigger({type:"videoSegmentTimingInfo",videoSegmentTimingInfo:i})}},{key:"createRealSourceBuffers_",value:function(){var t=this,i=["audio","video"];i.forEach(function(n){if(t[n+"Codec_"]&&!t[n+"Buffer_"]){var e=null;t.mediaSource_[n+"Buffer_"]?(e=t.mediaSource_[n+"Buffer_"]).updating=!1:(e=function(t,i){var n=t.addSourceBuffer(i),e=Object.create(null);function r(t){"function"==typeof n[t]?e[t]=function(){return n[t].apply(n,arguments)}:void 0===e[t]&&Object.defineProperty(e,t,{get:function(){return n[t]},set:function(i){return n[t]=i}})}for(var s in e.updating=!1,e.realBuffer_=n)r(s);return e}(t.mediaSource_.nativeMediaSource_,n+'/mp4;codecs="'+t[n+"Codec_"]+'"'),t.mediaSource_[n+"Buffer_"]=e),t[n+"Buffer_"]=e,["update","updatestart","updateend"].forEach(function(r){e.addEventListener(r,function(){if("audio"!==n||!t.audioDisabled_)return"updateend"===r&&(t[n+"Buffer_"].updating=!1),i.every(function(i){return!("audio"!==i||!t.audioDisabled_)||n===i||!t[i+"Buffer_"]||!t[i+"Buffer_"].updating})?t.trigger(r):void 0})})}})}},{key:"appendBuffer",value:function(t){if(this.bufferUpdating_=!0,this.audioBuffer_&&this.audioBuffer_.buffered.length){var i=this.audioBuffer_.buffered;this.transmuxer_.postMessage({action:"setAudioAppendStart",appendStart:i.end(i.length-1)})}this.videoBuffer_&&this.transmuxer_.postMessage({action:"alignGopsWith",gopsToAlignWith:function(t,i,n){if(null==i||!t.length)return[];var e=Math.ceil(9e4*(i-n+3)),r=void 0;for(r=0;r<t.length&&!(t[r].pts>e);r++);return t.slice(r)}(this.gopBuffer_,this.mediaSource_.player_?this.mediaSource_.player_.currentTime():null,this.timeMapping_)}),this.transmuxer_.postMessage({action:"push",data:t.buffer,byteOffset:t.byteOffset,byteLength:t.byteLength},[t.buffer]),this.transmuxer_.postMessage({action:"flush"})}},{key:"appendGopInfo_",value:function(t){this.gopBuffer_=function(t,i,n){if(!i.length)return t;if(n)return i.slice();for(var e=i[0].pts,r=0;r<t.length&&!(t[r].pts>=e);r++);return t.slice(0,r).concat(i)}(this.gopBuffer_,t.data.gopInfo,this.safeAppend_)}},{key:"remove",value:function(t,i){if(this.videoBuffer_&&(this.videoBuffer_.updating=!0,this.videoBuffer_.remove(t,i),this.gopBuffer_=function(t,i,n,e){for(var r=Math.ceil(9e4*(i-e)),s=Math.ceil(9e4*(n-e)),o=t.slice(),a=t.length;a--&&!(t[a].pts<=s););if(-1===a)return o;for(var u=a+1;u--&&!(t[u].pts<=r););return u=Math.max(u,0),o.splice(u,a-u+1),o}(this.gopBuffer_,t,i,this.timeMapping_)),!this.audioDisabled_&&this.audioBuffer_&&(this.audioBuffer_.updating=!0,this.audioBuffer_.remove(t,i)),xh(t,i,this.metadataTrack_),this.inbandTextTracks_)for(var n in this.inbandTextTracks_)xh(t,i,this.inbandTextTracks_[n])}},{key:"processPendingSegments_",value:function(){var i={video:{segments:[],bytes:0},audio:{segments:[],bytes:0},captions:[],metadata:[]};i=this.pendingBuffers_.reduce(function(t,i){var n=i.type,e=i.data,r=i.initSegment;return t[n].segments.push(e),t[n].bytes+=e.byteLength,t[n].initSegment=r,i.captions&&(t.captions=t.captions.concat(i.captions)),i.info&&(t[n].info=i.info),i.metadata&&(t.metadata=t.metadata.concat(i.metadata)),t},i),this.videoBuffer_||this.audioBuffer_||(0===i.video.bytes&&(this.videoCodec_=null),0===i.audio.bytes&&(this.audioCodec_=null),this.createRealSourceBuffers_()),i.audio.info&&this.mediaSource_.trigger({type:"audioinfo",info:i.audio.info}),i.video.info&&this.mediaSource_.trigger({type:"videoinfo",info:i.video.info}),this.appendAudioInitSegment_&&(!this.audioDisabled_&&this.audioBuffer_&&(i.audio.segments.unshift(i.audio.initSegment),i.audio.bytes+=i.audio.initSegment.byteLength),this.appendAudioInitSegment_=!1);var n=!1;this.videoBuffer_&&i.video.bytes?(i.video.segments.unshift(i.video.initSegment),i.video.bytes+=i.video.initSegment.byteLength,this.concatAndAppendSegments_(i.video,this.videoBuffer_)):!this.videoBuffer_||!this.audioDisabled_&&this.audioBuffer_||(n=!0),function(i,n,e){var r=t.WebKitDataCue||t.VTTCue;if(n&&n.forEach(function(t){this.inbandTextTracks_[t.stream].addCue(new r(t.startTime+this.timestampOffset,t.endTime+this.timestampOffset,t.text))},i),e){var s=Rh(i.mediaSource_.duration);if(e.forEach(function(i){var n=i.cueTime+this.timestampOffset;!("number"!=typeof n||t.isNaN(n)||n<0)&&n<1/0&&i.frames.forEach(function(t){var i=new r(n,n,t.value||t.url||t.data||"");i.frame=t,i.value=t,function(t){Object.defineProperties(t.frame,{id:{get:function(){return fo.log.warn("cue.frame.id is deprecated. Use cue.value.key instead."),t.value.key}},value:{get:function(){return fo.log.warn("cue.frame.value is deprecated. Use cue.value.data instead."),t.value.data}},privateData:{get:function(){return fo.log.warn("cue.frame.privateData is deprecated. Use cue.value.data instead."),t.value.data}}})}(i),this.metadataTrack_.addCue(i)},this)},i),i.metadataTrack_&&i.metadataTrack_.cues&&i.metadataTrack_.cues.length){for(var o=i.metadataTrack_.cues,a=[],u=0;u<o.length;u++)o[u]&&a.push(o[u]);var c=a.reduce(function(t,i){var n=t[i.startTime]||[];return n.push(i),t[i.startTime]=n,t},{}),h=Object.keys(c).sort(function(t,i){return Number(t)-Number(i)});h.forEach(function(t,i){var n=c[t],e=Number(h[i+1])||s;n.forEach(function(t){t.endTime=e})})}}}(this,i.captions,i.metadata),!this.audioDisabled_&&this.audioBuffer_&&this.concatAndAppendSegments_(i.audio,this.audioBuffer_),this.pendingBuffers_.length=0,n&&this.trigger("updateend"),this.bufferUpdating_=!1}},{key:"concatAndAppendSegments_",value:function(t,i){var n=0,e=void 0;if(t.bytes){e=new Uint8Array(t.bytes),t.segments.forEach(function(t){e.set(t,n),n+=t.byteLength});try{i.updating=!0,i.appendBuffer(e)}catch(t){this.mediaSource_.player_&&this.mediaSource_.player_.error({code:-3,type:"APPEND_BUFFER_ERR",message:t.message,originalError:t})}}}},{key:"abort",value:function(){this.videoBuffer_&&this.videoBuffer_.abort(),!this.audioDisabled_&&this.audioBuffer_&&this.audioBuffer_.abort(),this.transmuxer_&&this.transmuxer_.postMessage({action:"reset"}),this.pendingBuffers_.length=0,this.bufferUpdating_=!1}}]),hf);function hf(t,i){zc(this,hf);var n=Qc(this,(hf.__proto__||Object.getPrototypeOf(hf)).call(this,fo.EventTarget));n.timestampOffset_=0,n.pendingBuffers_=[],n.bufferUpdating_=!1,n.mediaSource_=t,n.codecs_=i,n.audioCodec_=null,n.videoCodec_=null,n.audioDisabled_=!1,n.appendAudioInitSegment_=!0,n.gopBuffer_=[],n.timeMapping_=0,n.safeAppend_=11<=fo.browser.IE_VERSION;var e={remux:!1,alignGopsAtEnd:n.safeAppend_};return n.codecs_.forEach(function(t){sf(t)?n.audioCodec_=t:of(t)&&(n.videoCodec_=t)}),n.transmuxer_=new af,n.transmuxer_.postMessage({action:"init",options:e}),n.transmuxer_.onmessage=function(t){return"data"===t.data.action?n.data_(t):"done"===t.data.action?n.done_(t):"gopInfo"===t.data.action?n.appendGopInfo_(t):"videoSegmentTimingInfo"===t.data.action?n.videoSegmentTimingInfo_(t.data.videoSegmentTimingInfo):void 0},Object.defineProperty(n,"timestampOffset",{get:function(){return this.timestampOffset_},set:function(t){"number"==typeof t&&0<=t&&(this.timestampOffset_=t,this.appendAudioInitSegment_=!0,this.gopBuffer_.length=0,this.timeMapping_=0,this.transmuxer_.postMessage({action:"setTimestampOffset",timestampOffset:t}))}}),Object.defineProperty(n,"appendWindowStart",{get:function(){return(this.videoBuffer_||this.audioBuffer_).appendWindowStart},set:function(t){this.videoBuffer_&&(this.videoBuffer_.appendWindowStart=t),this.audioBuffer_&&(this.audioBuffer_.appendWindowStart=t)}}),Object.defineProperty(n,"updating",{get:function(){return!!(this.bufferUpdating_||!this.audioDisabled_&&this.audioBuffer_&&this.audioBuffer_.updating||this.videoBuffer_&&this.videoBuffer_.updating)}}),Object.defineProperty(n,"buffered",{get:function(){return function(t,i,n){var e=null,r=null,s=0,o=[],a=[];if(!t&&!i)return fo.createTimeRange();if(!t)return i.buffered;if(!i)return t.buffered;if(n)return t.buffered;if(0===t.buffered.length&&0===i.buffered.length)return fo.createTimeRange();for(var u=t.buffered,c=i.buffered,h=u.length;h--;)o.push({time:u.start(h),type:"start"}),o.push({time:u.end(h),type:"end"});for(h=c.length;h--;)o.push({time:c.start(h),type:"start"}),o.push({time:c.end(h),type:"end"});for(o.sort(function(t,i){return t.time-i.time}),h=0;h<o.length;h++)"start"===o[h].type?2==++s&&(e=o[h].time):"end"===o[h].type&&1==--s&&(r=o[h].time),null!==e&&null!==r&&(a.push([e,r]),r=e=null);return fo.createTimeRanges(a)}(this.videoBuffer_,this.audioBuffer_,this.audioDisabled_)}}),n}var ff=(Yc(lf,fo.EventTarget),Kc(lf,[{key:"addSeekableRange_",value:function(t,i){var n=void 0;if(this.duration!==1/0)throw(n=new Error("MediaSource.addSeekableRange() can only be invoked when the duration is Infinity")).name="InvalidStateError",n.code=11,n;(i>this.nativeMediaSource_.duration||isNaN(this.nativeMediaSource_.duration))&&(this.nativeMediaSource_.duration=i)}},{key:"addSourceBuffer",value:function(t){var i=void 0,n=function(t){var i={type:"",parameters:{}},n=t.trim().split(";");return i.type=n.shift().trim(),n.forEach(function(t){var n=t.trim().split("=");if(1<n.length){var e=n[0].replace(/"/g,"").trim(),r=n[1].replace(/"/g,"").trim();i.parameters[e]=r}}),i}(t);if(/^(video|audio)\/mp2t$/i.test(n.type)){var e=[];n.parameters&&n.parameters.codecs&&(e=(e=nf(e=n.parameters.codecs.split(","))).filter(function(t){return sf(t)||of(t)})),0===e.length&&(e=["avc1.4d400d","mp4a.40.2"]),i=new cf(this,e),0!==this.sourceBuffers.length&&(this.sourceBuffers[0].createRealSourceBuffers_(),i.createRealSourceBuffers_(),this.sourceBuffers[0].audioDisabled_=!0)}else i=this.nativeMediaSource_.addSourceBuffer(t);return this.sourceBuffers.push(i),i}}]),lf);function lf(){zc(this,lf);var n=Qc(this,(lf.__proto__||Object.getPrototypeOf(lf)).call(this)),e=void 0;for(e in n.nativeMediaSource_=new t.MediaSource,n.nativeMediaSource_)e in lf.prototype||"function"!=typeof n.nativeMediaSource_[e]||(n[e]=n.nativeMediaSource_[e].bind(n.nativeMediaSource_));return n.duration_=NaN,Object.defineProperty(n,"duration",{get:function(){return this.duration_===1/0?this.duration_:this.nativeMediaSource_.duration},set:function(t){(this.duration_=t)===1/0||(this.nativeMediaSource_.duration=t)}}),Object.defineProperty(n,"seekable",{get:function(){return this.duration_===1/0?fo.createTimeRanges([[0,this.nativeMediaSource_.duration]]):this.nativeMediaSource_.seekable}}),Object.defineProperty(n,"readyState",{get:function(){return this.nativeMediaSource_.readyState}}),Object.defineProperty(n,"activeSourceBuffers",{get:function(){return this.activeSourceBuffers_}}),n.sourceBuffers=[],n.activeSourceBuffers_=[],n.updateActiveSourceBuffers_=function(){if(n.activeSourceBuffers_.length=0,1===n.sourceBuffers.length){var t=n.sourceBuffers[0];return t.appendAudioInitSegment_=!0,t.audioDisabled_=!t.audioCodec_,void n.activeSourceBuffers_.push(t)}for(var i=!1,e=!0,r=0;r<n.player_.audioTracks().length;r++){var s=n.player_.audioTracks()[r];if(s.enabled&&"main"!==s.kind){e=!(i=!0);break}}n.sourceBuffers.forEach(function(t,r){if(t.appendAudioInitSegment_=!0,t.videoCodec_&&t.audioCodec_)t.audioDisabled_=i;else if(t.videoCodec_&&!t.audioCodec_)t.audioDisabled_=!0,e=!1;else if(!t.videoCodec_&&t.audioCodec_&&(t.audioDisabled_=r?e:!e,t.audioDisabled_))return;n.activeSourceBuffers_.push(t)})},n.onPlayerMediachange_=function(){n.sourceBuffers.forEach(function(t){t.appendAudioInitSegment_=!0})},n.onHlsReset_=function(){n.sourceBuffers.forEach(function(t){t.transmuxer_&&t.transmuxer_.postMessage({action:"resetCaptions"})})},n.onHlsSegmentTimeMapping_=function(t){n.sourceBuffers.forEach(function(i){return i.timeMapping_=t.mapping})},["sourceopen","sourceclose","sourceended"].forEach(function(t){this.nativeMediaSource_.addEventListener(t,this.trigger.bind(this))},n),n.on("sourceopen",function(){var t=i.querySelector('[src="'+n.url_+'"]');t&&(n.player_=fo(t.parentNode),n.player_&&(n.player_.tech_.on("hls-reset",n.onHlsReset_),n.player_.tech_.on("hls-segment-time-mapping",n.onHlsSegmentTimeMapping_),n.player_.audioTracks&&n.player_.audioTracks()&&(n.player_.audioTracks().on("change",n.updateActiveSourceBuffers_),n.player_.audioTracks().on("addtrack",n.updateActiveSourceBuffers_),n.player_.audioTracks().on("removetrack",n.updateActiveSourceBuffers_)),n.player_.on("mediachange",n.onPlayerMediachange_)))}),n.on("sourceended",function(){for(var t=Rh(n.duration),i=0;i<n.sourceBuffers.length;i++){var e=n.sourceBuffers[i],r=e.metadataTrack_&&e.metadataTrack_.cues;r&&r.length&&(r[r.length-1].endTime=t)}}),n.on("sourceclose",function(){this.sourceBuffers.forEach(function(t){t.transmuxer_&&t.transmuxer_.terminate()}),this.sourceBuffers.length=0,this.player_&&(this.player_.audioTracks&&this.player_.audioTracks()&&(this.player_.audioTracks().off("change",this.updateActiveSourceBuffers_),this.player_.audioTracks().off("addtrack",this.updateActiveSourceBuffers_),this.player_.audioTracks().off("removetrack",this.updateActiveSourceBuffers_)),this.player_.el_&&this.player_.off("mediachange",this.onPlayerMediachange_),this.player_.tech_&&this.player_.tech_.el_&&(this.player_.tech_.off("hls-reset",this.onHlsReset_),this.player_.tech_.off("hls-segment-time-mapping",this.onHlsSegmentTimeMapping_)))}),n}var df=0;function vf(t,i){var n=fo.mediaSources[t];if(!n)throw new Error("Media Source not found (Video.js)");n.trigger({type:"sourceopen",swfId:i})}function pf(){return!!t.MediaSource&&!!t.MediaSource.isTypeSupported&&t.MediaSource.isTypeSupported('video/mp4;codecs="avc1.4d400d,mp4a.40.2"')}function mf(){if(this.MediaSource={open:vf,supportsNativeMediaSources:pf},pf())return new ff;throw new Error("Cannot use create a virtual MediaSource for this video")}fo.mediaSources={},mf.open=vf,mf.supportsNativeMediaSources=pf;var bf={createObjectURL:function(i){var n=void 0;return i instanceof ff?(n=t.URL.createObjectURL(i.nativeMediaSource_),i.url_=n):i instanceof ff?(n="blob:vjs-media-source/"+df,df++,fo.mediaSources[n]=i,n):(n=t.URL.createObjectURL(i),i.url_=n)}};function Tf(t,i){for(var n=void 0,e=wf(t,{duration:i.duration,minimumUpdatePeriod:i.minimumUpdatePeriod}),r=0;r<i.playlists.length;r++){var s=Zc(e,i.playlists[r]);s?e=s:n=!0}return Jc(i,function(t,i,r,s){if(t.playlists&&t.playlists.length){var o=t.playlists[0].uri,a=Zc(e,t.playlists[0]);a&&((e=a).mediaGroups[i][r][s].playlists[0]=e.playlists[o],n=!1)}}),n?null:e}function yf(t){return t.uri+"-"+t.byterange.offset+"-"+(t.byterange.offset+t.byterange.length-1)}function gf(t,i){var n,e,r={};for(var s in t){var o=t[s].sidx;if(o){var a=yf(o);if(!i[a])break;n=i[a].sidxInfo,e=o,(Boolean(!n.map&&!e.map)||Boolean(n.map&&e.map&&n.map.byterange.offset===e.map.byterange.offset&&n.map.byterange.length===e.map.byterange.length))&&n.uri===e.uri&&n.byterange.offset===e.byterange.offset&&n.byterange.length===e.byterange.length&&(r[a]=i[a])}}return r}function Sf(t,i,n,e,r){var s={uri:$c(e.handleManifestRedirects,t.resolvedUri),byterange:t.byterange,playlist:i};return n(fo.mergeOptions(s,{responseType:"arraybuffer",headers:Sh(s)}),r)}fo.MediaSource=mf,fo.URL=bf;var wf=fo.mergeOptions,Af=(Yc(Pf,fo.EventTarget),Kc(Pf,[{key:"setupChildLoader",value:function(t,i){this.masterPlaylistLoader_=t,this.childPlaylist_=i}},{key:"dispose",value:function(){this.stopRequest(),this.loadedPlaylists_={},t.clearTimeout(this.minimumUpdatePeriodTimeout_),t.clearTimeout(this.mediaRequest_),t.clearTimeout(this.mediaUpdateTimeout)}},{key:"hasPendingRequest",value:function(){return this.request||this.mediaRequest_}},{key:"stopRequest",value:function(){if(this.request){var t=this.request;this.request=null,t.onreadystatechange=null,t.abort()}}},{key:"sidxRequestFinished_",value:function(t,i,n,e){var r=this;return function(s,o){if(r.request){if(r.request=null,s)return r.error={status:o.status,message:"DASH playlist request error at URL: "+t.uri,response:o.response,code:2},n&&(r.state=n),r.trigger("error"),e(i,null);var a=new Uint8Array(o.response),u=su.parseSidx(a.subarray(8));return e(i,u)}}}},{key:"media",value:function(i){var n=this;if(!i)return this.media_;if("HAVE_NOTHING"===this.state)throw new Error("Cannot switch media playlist from "+this.state);var e=this.state;if("string"==typeof i){if(!this.master.playlists[i])throw new Error("Unknown playlist URI: "+i);i=this.master.playlists[i]}var r=!this.media_||i.uri!==this.media_.uri;if(r&&this.loadedPlaylists_[i.uri]&&this.loadedPlaylists_[i.uri].endList)return this.state="HAVE_METADATA",this.media_=i,void(r&&(this.trigger("mediachanging"),this.trigger("mediachange")));if(r)if(this.media_&&this.trigger("mediachanging"),i.sidx){var s=void 0,o=void 0;o=this.masterPlaylistLoader_?(s=this.masterPlaylistLoader_.master,this.masterPlaylistLoader_.sidxMapping_):(s=this.master,this.sidxMapping_);var a=yf(i.sidx);o[a]={sidxInfo:i.sidx},this.request=Sf(i.sidx,i,this.hls_.xhr,{handleManifestRedirects:this.handleManifestRedirects},this.sidxRequestFinished_(i,s,e,function(t,r){if(!t||!r)throw new Error("failed to request sidx");o[a].sidx=r,n.haveMetadata({startingState:e,playlist:t.playlists[i.uri]})}))}else this.mediaRequest_=t.setTimeout(this.haveMetadata.bind(this,{startingState:e,playlist:i}),0)}},{key:"haveMetadata",value:function(t){var i=t.startingState,n=t.playlist;this.state="HAVE_METADATA",this.loadedPlaylists_[n.uri]=n,this.mediaRequest_=null,this.refreshMedia_(n.uri),this.trigger("HAVE_MASTER"===i?"loadedmetadata":"mediachange")}},{key:"pause",value:function(){this.stopRequest(),t.clearTimeout(this.mediaUpdateTimeout),t.clearTimeout(this.minimumUpdatePeriodTimeout_),"HAVE_NOTHING"===this.state&&(this.started=!1)}},{key:"load",value:function(i){var n=this;t.clearTimeout(this.mediaUpdateTimeout),t.clearTimeout(this.minimumUpdatePeriodTimeout_);var e=this.media();i?this.mediaUpdateTimeout=t.setTimeout(function(){return n.load()},e?e.targetDuration/2*1e3:5e3):this.started?this.trigger("loadedplaylist"):this.start()}},{key:"parseMasterXml",value:function(){var t=ra(this.masterXml_,{manifestUri:this.srcUrl,clientOffset:this.clientOffset_,sidxMapping:this.sidxMapping_});t.uri=this.srcUrl;for(var i=0;i<t.playlists.length;i++){var n="placeholder-uri-"+i;t.playlists[i].uri=n,t.playlists[n]=t.playlists[i]}return Jc(t,function(i,n,e,r){if(i.playlists&&i.playlists.length){var s="placeholder-uri-"+n+"-"+e+"-"+r;i.playlists[0].uri=s,t.playlists[s]=i.playlists[0]}}),th(t),ih(t),t}},{key:"start",value:function(){var i=this;this.started=!0,this.masterPlaylistLoader_?this.mediaRequest_=t.setTimeout(this.haveMaster_.bind(this),0):this.request=this.hls_.xhr({uri:this.srcUrl,withCredentials:this.withCredentials},function(t,n){if(i.request){if(i.request=null,t)return i.error={status:n.status,message:"DASH playlist request error at URL: "+i.srcUrl,responseText:n.responseText,code:2},"HAVE_NOTHING"===i.state&&(i.started=!1),i.trigger("error");i.masterXml_=n.responseText,i.masterLoaded_=n.responseHeaders&&n.responseHeaders.date?Date.parse(n.responseHeaders.date):Date.now(),i.srcUrl=$c(i.handleManifestRedirects,i.srcUrl,n),i.syncClientServerClock_(i.onClientServerClockSync_.bind(i))}})}},{key:"syncClientServerClock_",value:function(t){var i=this,n=function(t){return function(t){var i=$o(t,"UTCTiming")[0];if(!i)return null;var n=qo(i);switch(n.schemeIdUri){case"urn:mpeg:dash:utc:http-head:2014":case"urn:mpeg:dash:utc:http-head:2012":n.method="HEAD";break;case"urn:mpeg:dash:utc:http-xsdate:2014":case"urn:mpeg:dash:utc:http-iso:2014":case"urn:mpeg:dash:utc:http-xsdate:2012":case"urn:mpeg:dash:utc:http-iso:2012":n.method="GET";break;case"urn:mpeg:dash:utc:direct:2014":case"urn:mpeg:dash:utc:direct:2012":n.method="DIRECT",n.value=Date.parse(n.value);break;case"urn:mpeg:dash:utc:http-ntp:2014":case"urn:mpeg:dash:utc:ntp:2014":case"urn:mpeg:dash:utc:sntp:2014":default:throw new Error("UNSUPPORTED_UTC_TIMING_SCHEME")}return n}(ea(t))}(this.masterXml_);return null===n?(this.clientOffset_=this.masterLoaded_-Date.now(),t()):"DIRECT"===n.method?(this.clientOffset_=n.value-Date.now(),t()):void(this.request=this.hls_.xhr({uri:Xc(this.srcUrl,n.value),method:n.method,withCredentials:this.withCredentials},function(e,r){if(i.request){if(e)return i.clientOffset_=i.masterLoaded_-Date.now(),t();var s;s="HEAD"===n.method?r.responseHeaders&&r.responseHeaders.date?Date.parse(r.responseHeaders.date):i.masterLoaded_:Date.parse(r.responseText),i.clientOffset_=s-Date.now(),t()}}))}},{key:"haveMaster_",value:function(){this.state="HAVE_MASTER",this.mediaRequest_=null,this.masterPlaylistLoader_?this.media_||this.media(this.childPlaylist_):(this.master=this.parseMasterXml(),this.trigger("loadedplaylist"))}},{key:"onClientServerClockSync_",value:function(){var i=this;this.haveMaster_(),this.hasPendingRequest()||this.media_||this.media(this.master.playlists[0]),this.master&&this.master.minimumUpdatePeriod&&(this.minimumUpdatePeriodTimeout_=t.setTimeout(function(){i.trigger("minimumUpdatePeriod")},this.master.minimumUpdatePeriod))}},{key:"refreshXml_",value:function(){var i=this;this.request=this.hls_.xhr({uri:this.srcUrl,withCredentials:this.withCredentials},function(n,e){if(i.request){if(i.request=null,n)return i.error={status:e.status,message:"DASH playlist request error at URL: "+i.srcUrl,responseText:e.responseText,code:2},"HAVE_NOTHING"===i.state&&(i.started=!1),i.trigger("error");i.masterXml_=e.responseText,i.sidxMapping_=function(t,i,n,e){var r=ra(t,{manifestUri:i,clientOffset:n}),s=gf(r.playlists,e);return Jc(r,function(t){t.playlists&&t.playlists.length&&(s=wf(s,gf(t.playlists,e)))}),s}(i.masterXml_,i.srcUrl,i.clientOffset_,i.sidxMapping_);var r=i.parseMasterXml(),s=Tf(i.master,r);if(s){var o=yf(i.media().sidx);if(i.sidxMapping_[o])i.master=s;else{var a=i.media();i.request=Sf(a.sidx,a,i.hls_.xhr,{handleManifestRedirects:i.handleManifestRedirects},i.sidxRequestFinished_(a,r,i.state,function(n,e){if(!n||!e)throw new Error("failed to request sidx on minimumUpdatePeriod");i.sidxMapping_[o].sidx=e,i.minimumUpdatePeriodTimeout_=t.setTimeout(function(){i.trigger("minimumUpdatePeriod")},i.master.minimumUpdatePeriod),i.refreshMedia_(i.media().uri)}))}}i.minimumUpdatePeriodTimeout_=t.setTimeout(function(){i.trigger("minimumUpdatePeriod")},i.master.minimumUpdatePeriod)}})}},{key:"refreshMedia_",value:function(i){var n=this;if(!i)throw new Error("refreshMedia_ must take a media uri");var e,r=void 0;e=this.masterPlaylistLoader_?(r=this.masterPlaylistLoader_.master,this.masterPlaylistLoader_.parseMasterXml()):(r=this.master,this.parseMasterXml());var s=Tf(r,e);s?(this.masterPlaylistLoader_?this.masterPlaylistLoader_.master=s:this.master=s,this.media_=s.playlists[i]):(this.media_=e.playlists[i],this.trigger("playlistunchanged")),this.media().endList||(this.mediaUpdateTimeout=t.setTimeout(function(){n.trigger("mediaupdatetimeout")},nh(this.media(),!!s))),this.trigger("loadedplaylist")}}]),Pf);function Pf(t,i){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},e=arguments[3];zc(this,Pf);var r=Qc(this,(Pf.__proto__||Object.getPrototypeOf(Pf)).call(this)),s=n.withCredentials,o=void 0!==s&&s,a=n.handleManifestRedirects,u=void 0!==a&&a;if(r.hls_=i,r.withCredentials=o,r.handleManifestRedirects=u,!t)throw new Error("A non-empty playlist URL or playlist is required");return r.on("minimumUpdatePeriod",function(){r.refreshXml_()}),r.on("mediaupdatetimeout",function(){r.refreshMedia_(r.media().uri)}),r.state="HAVE_NOTHING",r.loadedPlaylists_={},"string"==typeof t?(r.srcUrl=t,r.sidxMapping_={},Qc(r)):(r.setupChildLoader(e,t),r)}function Mf(t){return fo.log.debug?fo.log.debug.bind(fo,"VHS:",t+" >"):function(){}}function Ef(){}var If=(Kc(kf,[{key:"createSourceBuffer_",value:function(t,i){var n=this;this.sourceBuffer_=this.mediaSource.addSourceBuffer(t),this.logger_("created SourceBuffer"),i&&(i.trigger("sourcebufferadded"),this.mediaSource.sourceBuffers.length<2)?i.on("sourcebufferadded",function(){n.start_()}):this.start_()}},{key:"start_",value:function(){var t=this;this.started_=!0,this.onUpdateendCallback_=function(){var i=t.pendingCallback_;t.pendingCallback_=null,t.sourceBuffer_.removing=!1,t.logger_("buffered ["+Oh(t.buffered())+"]"),i&&i(),t.runCallback_()},this.sourceBuffer_.addEventListener("updateend",this.onUpdateendCallback_),this.runCallback_()}},{key:"abort",value:function(t){var i=this;this.processedAppend_&&this.queueCallback_(function(){i.sourceBuffer_.abort()},t)}},{key:"appendBuffer",value:function(t,i){var n=this;this.processedAppend_=!0,this.queueCallback_(function(){t.videoSegmentTimingInfoCallback&&n.sourceBuffer_.addEventListener("videoSegmentTimingInfo",t.videoSegmentTimingInfoCallback),n.sourceBuffer_.appendBuffer(t.bytes)},function(){t.videoSegmentTimingInfoCallback&&n.sourceBuffer_.removeEventListener("videoSegmentTimingInfo",t.videoSegmentTimingInfoCallback),i()})}},{key:"buffered",value:function(){return this.sourceBuffer_?this.sourceBuffer_.buffered:fo.createTimeRanges()}},{key:"remove",value:function(t,i,n){var e=this,r=2<arguments.length&&void 0!==n?n:Ef;this.processedAppend_&&this.queueCallback_(function(){e.logger_("remove ["+t+" => "+i+"]"),e.sourceBuffer_.removing=!0,e.sourceBuffer_.remove(t,i)},r)}},{key:"updating",value:function(){return!this.sourceBuffer_||this.sourceBuffer_.updating||!!this.pendingCallback_&&this.pendingCallback_!==Ef}},{key:"timestampOffset",value:function(t){var i=this;return void 0!==t&&(this.queueCallback_(function(){i.sourceBuffer_.timestampOffset=t,i.runCallback_()}),this.timestampOffset_=t),this.timestampOffset_}},{key:"queueCallback_",value:function(t,i){this.callbacks_.push([t.bind(this),i]),this.runCallback_()}},{key:"runCallback_",value:function(){var t=void 0;!this.updating()&&this.callbacks_.length&&this.started_&&(t=this.callbacks_.shift(),this.pendingCallback_=t[1],t[0]())}},{key:"dispose",value:function(){function t(){i.sourceBuffer_&&"open"===i.mediaSource.readyState&&i.sourceBuffer_.abort(),i.sourceBuffer_.removeEventListener("updateend",t)}var i=this;this.sourceBuffer_.removeEventListener("updateend",this.onUpdateendCallback_),this.sourceBuffer_.removing?this.sourceBuffer_.addEventListener("updateend",t):t()}}]),kf);function kf(t,i,n,e){zc(this,kf),this.callbacks_=[],this.pendingCallback_=null,this.timestampOffset_=0,this.mediaSource=t,this.processedAppend_=!1,this.type_=n,this.mimeType_=i,this.logger_=Mf("SourceUpdater["+n+"]["+i+"]"),"closed"===t.readyState?t.addEventListener("sourceopen",this.createSourceBuffer_.bind(this,i,e)):this.createSourceBuffer_(i,e)}function Df(t){t.forEach(function(t){t.abort()})}function Cf(t,i){return i.timedout?{status:i.status,message:"HLS request timed-out at URL: "+i.uri,code:Hf,xhr:i}:i.aborted?{status:i.status,message:"HLS request aborted at URL: "+i.uri,code:jf,xhr:i}:t?{status:i.status,message:"HLS request errored at URL: "+i.uri,code:Nf,xhr:i}:null}function Gf(i,n){var e;return i&&(e=t.getComputedStyle(i))?e[n]:""}function Of(t,i){var n=t.slice();t.sort(function(t,e){var r=i(t,e);return 0===r?n.indexOf(t)-n.indexOf(e):r})}function Bf(i,n){var e=void 0,r=void 0;return i.attributes.BANDWIDTH&&(e=i.attributes.BANDWIDTH),n.attributes.BANDWIDTH&&(r=n.attributes.BANDWIDTH),(e=e||t.Number.MAX_VALUE)-(r||t.Number.MAX_VALUE)}function xf(t){return"number"==typeof t&&isFinite(t)}var Rf={GOAL_BUFFER_LENGTH:30,MAX_GOAL_BUFFER_LENGTH:60,GOAL_BUFFER_LENGTH_RATE:1,INITIAL_BANDWIDTH:4194304,BANDWIDTH_VARIANCE:1.2,BUFFER_LOW_WATER_LINE:0,MAX_BUFFER_LOW_WATER_LINE:30,BUFFER_LOW_WATER_LINE_RATE:1},Nf=2,Hf=-101,jf=-102,_f=(Yc(Uf,fo.EventTarget),Kc(Uf,[{key:"resetStats_",value:function(){this.mediaBytesTransferred=0,this.mediaRequests=0,this.mediaRequestsAborted=0,this.mediaRequestsTimedout=0,this.mediaRequestsErrored=0,this.mediaTransferDuration=0,this.mediaSecondsLoaded=0}},{key:"dispose",value:function(){this.state="DISPOSED",this.pause(),this.abort_(),this.sourceUpdater_&&this.sourceUpdater_.dispose(),this.resetStats_(),this.captionParser_&&this.captionParser_.reset()}},{key:"abort",value:function(){"WAITING"===this.state?(this.abort_(),this.state="READY",this.paused()||this.monitorBuffer_()):this.pendingSegment_&&(this.pendingSegment_=null)}},{key:"abort_",value:function(){this.pendingSegment_&&this.pendingSegment_.abortRequests(),this.pendingSegment_=null}},{key:"error",value:function(t){return void 0!==t&&(this.error_=t),this.pendingSegment_=null,this.error_}},{key:"endOfStream",value:function(){this.ended_=!0,this.pause(),this.trigger("ended")}},{key:"buffered_",value:function(){return this.sourceUpdater_?this.sourceUpdater_.buffered():fo.createTimeRanges()}},{key:"initSegment",value:function(t,i){var n=1<arguments.length&&void 0!==i&&i;if(!t)return null;var e=Mh(t),r=this.initSegments_[e];return n&&!r&&t.bytes&&(this.initSegments_[e]=r={resolvedUri:t.resolvedUri,byterange:t.byterange,bytes:t.bytes,timescales:t.timescales,videoTrackIds:t.videoTrackIds}),r||t}},{key:"segmentKey",value:function(t,i){var n=1<arguments.length&&void 0!==i&&i;if(!t)return null;var e=Eh(t),r=this.keyCache_[e];this.cacheEncryptionKeys_&&n&&!r&&t.bytes&&(this.keyCache_[e]=r={resolvedUri:t.resolvedUri,bytes:t.bytes});var s={resolvedUri:(r||t).resolvedUri};return r&&(s.bytes=r.bytes),s}},{key:"couldBeginLoading_",value:function(){return this.playlist_&&(this.sourceUpdater_||this.mimeType_&&"INIT"===this.state)&&!this.paused()}},{key:"load",value:function(){if(this.monitorBuffer_(),this.playlist_){if(this.syncController_.setDateTimeMapping(this.playlist_),"INIT"===this.state&&this.couldBeginLoading_())return this.init_();!this.couldBeginLoading_()||"READY"!==this.state&&"INIT"!==this.state||(this.state="READY")}}},{key:"init_",value:function(){return this.state="READY",this.sourceUpdater_=new If(this.mediaSource_,this.mimeType_,this.loaderType_,this.sourceBufferEmitter_),this.resetEverything(),this.monitorBuffer_()}},{key:"playlist",value:function(t,i){var n=1<arguments.length&&void 0!==i?i:{};if(t){var e=this.playlist_,r=this.pendingSegment_;this.playlist_=t,this.xhrOptions_=n,this.hasPlayed_()||(t.syncInfo={mediaSequence:t.mediaSequence,time:0});var s=null;if(e&&(e.id?s=e.id:e.uri&&(s=e.uri)),this.logger_("playlist update ["+s+" => "+(t.id||t.uri)+"]"),this.trigger("syncinfoupdate"),"INIT"===this.state&&this.couldBeginLoading_())return this.init_();if(e&&e.uri===t.uri){var o=t.mediaSequence-e.mediaSequence;this.logger_("live window shift ["+o+"]"),null!==this.mediaIndex&&(this.mediaIndex-=o),r&&(r.mediaIndex-=o,0<=r.mediaIndex&&(r.segment=t.segments[r.mediaIndex])),this.syncController_.saveExpiredSegmentInfo(e,t)}else null!==this.mediaIndex&&this.resyncLoader()}}},{key:"pause",value:function(){this.checkBufferTimeout_&&(t.clearTimeout(this.checkBufferTimeout_),this.checkBufferTimeout_=null)}},{key:"paused",value:function(){return null===this.checkBufferTimeout_}},{key:"mimeType",value:function(t,i){this.mimeType_||(this.mimeType_=t,this.sourceBufferEmitter_=i,"INIT"===this.state&&this.couldBeginLoading_()&&this.init_())}},{key:"resetEverything",value:function(t){this.ended_=!1,this.resetLoader(),this.remove(0,this.duration_(),t),this.captionParser_&&this.captionParser_.clearAllCaptions(),this.trigger("reseteverything")}},{key:"resetLoader",value:function(){this.fetchAtBuffer_=!1,this.resyncLoader()}},{key:"resyncLoader",value:function(){this.mediaIndex=null,this.syncPoint_=null,this.abort()}},{key:"remove",value:function(t,i,n){if(this.sourceUpdater_&&this.sourceUpdater_.remove(t,i,n),xh(t,i,this.segmentMetadataTrack_),this.inbandTextTracks_)for(var e in this.inbandTextTracks_)xh(t,i,this.inbandTextTracks_[e])}},{key:"monitorBuffer_",value:function(){this.checkBufferTimeout_&&t.clearTimeout(this.checkBufferTimeout_),this.checkBufferTimeout_=t.setTimeout(this.monitorBufferTick_.bind(this),1)}},{key:"monitorBufferTick_",value:function(){"READY"===this.state&&this.fillBuffer_(),this.checkBufferTimeout_&&t.clearTimeout(this.checkBufferTimeout_),this.checkBufferTimeout_=t.setTimeout(this.monitorBufferTick_.bind(this),500)}},{key:"fillBuffer_",value:function(){if(!this.sourceUpdater_.updating()){this.syncPoint_||(this.syncPoint_=this.syncController_.getSyncPoint(this.playlist_,this.duration_(),this.currentTimeline_,this.currentTime_()));var t=this.checkBuffer_(this.buffered_(),this.playlist_,this.mediaIndex,this.hasPlayed_(),this.currentTime_(),this.syncPoint_);t&&(this.isEndOfStream_(t.mediaIndex)?this.endOfStream():t.mediaIndex===this.playlist_.segments.length-1&&"ended"===this.mediaSource_.readyState&&!this.seeking_()||(t.timeline!==this.currentTimeline_&&(this.syncController_.reset(),t.timestampOffset=t.startOfSegment,this.captionParser_&&this.captionParser_.clearAllCaptions()),this.loadSegment_(t)))}}},{key:"isEndOfStream_",value:function(t,i){return function(t,i,n){return!(!t||!i)&&t.endList&&"open"===i.readyState&&n===t.segments.length}(1<arguments.length&&void 0!==i?i:this.playlist_,this.mediaSource_,t)&&!this.sourceUpdater_.updating()}},{key:"checkBuffer_",value:function(t,i,n,e,r,s){var o=0,a=void 0;t.length&&(o=t.end(t.length-1));var u=Math.max(0,o-r);if(!i.segments.length)return null;if(u>=this.goalBufferLength_())return null;if(!e&&1<=u)return null;if(null===s)return n=this.getSyncSegmentCandidate_(i),this.generateSegmentInfo_(i,n,null,!0);if(null!==n){var c=i.segments[n];return this.generateSegmentInfo_(i,n+1,a=c&&c.end?c.end:o,!1)}if(this.fetchAtBuffer_){var h=_h.getMediaInfoForTime(i,o,s.segmentIndex,s.time);n=h.mediaIndex,a=h.startTime}else{var f=_h.getMediaInfoForTime(i,r,s.segmentIndex,s.time);n=f.mediaIndex,a=f.startTime}return this.generateSegmentInfo_(i,n,a,!1)}},{key:"getSyncSegmentCandidate_",value:function(t){var i=this;if(-1===this.currentTimeline_)return 0;var n=t.segments.map(function(t,i){return{timeline:t.timeline,segmentIndex:i}}).filter(function(t){return t.timeline===i.currentTimeline_});return n.length?n[Math.min(n.length-1,1)].segmentIndex:Math.max(t.segments.length-1,0)}},{key:"generateSegmentInfo_",value:function(t,i,n,e){if(i<0||i>=t.segments.length)return null;var r=t.segments[i];return{requestId:"segment-loader-"+Math.random(),uri:r.resolvedUri,mediaIndex:i,isSyncRequest:e,startOfSegment:n,playlist:t,bytes:null,encryptedBytes:null,timestampOffset:null,timeline:r.timeline,duration:r.duration,segment:r}}},{key:"abortRequestEarly_",value:function(t){if(this.hls_.tech_.paused()||!this.xhrOptions_.timeout||!this.playlist_.attributes.BANDWIDTH)return!1;if(Date.now()-(t.firstBytesReceivedAt||Date.now())<1e3)return!1;var i=this.currentTime_(),n=t.bandwidth,e=this.pendingSegment_.duration,r=_h.estimateSegmentRequestTime(e,n,this.playlist_,t.bytesReceived),s=function(t,i,n){var e=2<arguments.length&&void 0!==n?n:1;return((t.length?t.end(t.length-1):0)-i)/e}(this.buffered_(),i,this.hls_.tech_.playbackRate())-1;if(r<=s)return!1;var o=function(t){var i=t.currentTime,n=t.bandwidth,e=t.duration,r=t.segmentDuration,s=t.timeUntilRebuffer,o=t.currentTimeline,a=t.syncController,u=t.master.playlists.filter(function(t){return!_h.isIncompatible(t)}),c=u.filter(_h.isEnabled);c.length||(c=u.filter(function(t){return!_h.isDisabled(t)}));var h=c.filter(_h.hasAttribute.bind(null,"BANDWIDTH")).map(function(t){var u=a.getSyncPoint(t,e,o,i)?1:2;return{playlist:t,rebufferingImpact:_h.estimateSegmentRequestTime(r,n,t)*u-s}}),f=h.filter(function(t){return t.rebufferingImpact<=0});return Of(f,function(t,i){return Bf(i.playlist,t.playlist)}),f.length?f[0]:(Of(h,function(t,i){return t.rebufferingImpact-i.rebufferingImpact}),h[0]||null)}({master:this.hls_.playlists.master,currentTime:i,bandwidth:n,duration:this.duration_(),segmentDuration:e,timeUntilRebuffer:s,currentTimeline:this.currentTimeline_,syncController:this.syncController_});if(o){var a=.5;return s<=Fh&&(a=1),!(!o.playlist||o.playlist.uri===this.playlist_.uri||r-s-o.rebufferingImpact<a||(this.bandwidth=o.playlist.attributes.BANDWIDTH*Rf.BANDWIDTH_VARIANCE+1,this.abort(),this.trigger("earlyabort"),0))}}},{key:"handleProgress_",value:function(t,i){this.pendingSegment_&&i.requestId===this.pendingSegment_.requestId&&!this.abortRequestEarly_(i.stats)&&this.trigger("progress")}},{key:"loadSegment_",value:function(t){this.state="WAITING",this.pendingSegment_=t,this.trimBackBuffer_(t),t.abortRequests=function(t,i,n,e,r,s,o){var a=[],u=function(t,i,n){var e=0,r=!1;return function(s,o){if(!r)return s?(r=!0,Df(t),n(s,o)):(e+=1)===t.length?(o.endOfAllRequests=Date.now(),o.encryptedBytes?function(t,i,n){var e;t.addEventListener("message",function e(r){if(r.data.source===i.requestId){t.removeEventListener("message",e);var s=r.data.decrypted;return i.bytes=new Uint8Array(s.bytes,s.byteOffset,s.byteLength),n(null,i)}}),e=i.key.bytes.slice?i.key.bytes.slice():new Uint32Array(Array.prototype.slice.call(i.key.bytes)),t.postMessage(Ph({source:i.requestId,encrypted:i.encryptedBytes,key:e,iv:i.key.iv}),[i.encryptedBytes.buffer,e.buffer])}(i,o,n):n(null,o)):void 0}}(a,n,o);if(r.key&&!r.key.bytes){var c=t(fo.mergeOptions(i,{uri:r.key.resolvedUri,responseType:"arraybuffer"}),function(t,i){return function(n,e){var r=e.response,s=Cf(n,e);if(s)return i(s,t);if(16!==r.byteLength)return i({status:e.status,message:"Invalid HLS key at URL: "+e.uri,code:Nf,xhr:e},t);var o=new DataView(r);return t.key.bytes=new Uint32Array([o.getUint32(0),o.getUint32(4),o.getUint32(8),o.getUint32(12)]),i(null,t)}}(r,u));a.push(c)}if(r.map&&!r.map.bytes){var h=t(fo.mergeOptions(i,{uri:r.map.resolvedUri,responseType:"arraybuffer",headers:Sh(r.map)}),function(t,i,n){return function(e,r){var s=r.response,o=Cf(e,r);return o?n(o,t):0===s.byteLength?n({status:r.status,message:"Empty HLS segment content at URL: "+r.uri,code:Nf,xhr:r},t):(t.map.bytes=new Uint8Array(r.response),i&&!i.isInitialized()&&i.init(),t.map.timescales=nu.timescale(t.map.bytes),t.map.videoTrackIds=nu.videoTrackIds(t.map.bytes),n(null,t))}}(r,e,u));a.push(h)}var f=t(fo.mergeOptions(i,{uri:r.resolvedUri,responseType:"arraybuffer",headers:Sh(r)}),function(t,i,n){return function(e,r){var s=r.response,o=Cf(e,r),a=void 0;return o?n(o,t):0===s.byteLength?n({status:r.status,message:"Empty HLS segment content at URL: "+r.uri,code:Nf,xhr:r},t):(t.stats={bandwidth:r.bandwidth,bytesReceived:r.bytesReceived||0,roundTripTime:r.roundTripTime||0},t.key?t.encryptedBytes=new Uint8Array(r.response):t.bytes=new Uint8Array(r.response),i&&t.map&&t.map.bytes&&(i.isInitialized()||i.init(),(a=i.parse(t.bytes,t.map.videoTrackIds,t.map.timescales))&&a.captions&&(t.captionStreams=a.captionStreams,t.fmp4Captions=a.captions)),n(null,t))}}(r,e,u));return f.addEventListener("progress",function(t,i){return function(n){return t.stats=fo.mergeOptions(t.stats,function(t){var i=t.target,n={bandwidth:1/0,bytesReceived:0,roundTripTime:Date.now()-i.requestTime||0};return n.bytesReceived=t.loaded,n.bandwidth=Math.floor(n.bytesReceived/n.roundTripTime*8*1e3),n}(n)),!t.stats.firstBytesReceivedAt&&t.stats.bytesReceived&&(t.stats.firstBytesReceivedAt=Date.now()),i(n,t)}}(r,s)),a.push(f),function(){return Df(a)}}(this.hls_.xhr,this.xhrOptions_,this.decrypter_,this.captionParser_,this.createSimplifiedSegmentObj_(t),this.handleProgress_.bind(this),this.segmentRequestFinished_.bind(this))}},{key:"trimBackBuffer_",value:function(){var t=function(t,i,n){var e;return e=t.length&&0<t.start(0)&&t.start(0)<i?t.start(0):i-30,Math.min(e,i-n)}(this.seekable_(),this.currentTime_(),this.playlist_.targetDuration||10);0<t&&this.remove(0,t)}},{key:"createSimplifiedSegmentObj_",value:function(t){var i=t.segment,n={resolvedUri:i.resolvedUri,byterange:i.byterange,requestId:t.requestId};if(i.key){var e=i.key.iv||new Uint32Array([0,0,0,t.mediaIndex+t.playlist.mediaSequence]);n.key=this.segmentKey(i.key),n.key.iv=e}return i.map&&(n.map=this.initSegment(i.map)),n}},{key:"segmentRequestFinished_",value:function(t,i){if(this.mediaRequests+=1,i.stats&&(this.mediaBytesTransferred+=i.stats.bytesReceived,this.mediaTransferDuration+=i.stats.roundTripTime),this.pendingSegment_){if(i.requestId===this.pendingSegment_.requestId){if(t)return this.pendingSegment_=null,this.state="READY",t.code===jf?void(this.mediaRequestsAborted+=1):(this.pause(),t.code===Hf?(this.mediaRequestsTimedout+=1,this.bandwidth=1,this.roundTrip=NaN,void this.trigger("bandwidthupdate")):(this.mediaRequestsErrored+=1,this.error(t),void this.trigger("error")));this.bandwidth=i.stats.bandwidth,this.roundTrip=i.stats.roundTripTime,i.map&&(i.map=this.initSegment(i.map,!0)),i.key&&this.segmentKey(i.key,!0),this.processSegmentResponse_(i)}}else this.mediaRequestsAborted+=1}},{key:"processSegmentResponse_",value:function(t){var i=this.pendingSegment_;i.bytes=t.bytes,t.map&&(i.segment.map.bytes=t.map.bytes),i.endOfAllRequests=t.endOfAllRequests,t.fmp4Captions&&(function(t,i,n){for(var e in n)if(!t[e]){i.trigger({type:"usage",name:"hls-608"});var r=i.textTracks().getTrackById(e);t[e]=r||i.addRemoteTextTrack({kind:"captions",id:e,label:e},!1).track}}(this.inbandTextTracks_,this.hls_.tech_,t.captionStreams),function(t){var i=t.inbandTextTracks,n=t.captionArray,e=t.timestampOffset;if(n){var r=window.WebKitDataCue||window.VTTCue;n.forEach(function(t){var n=t.stream,s=t.startTime,o=t.endTime;i[n]&&i[n].addCue(new r(s+=e,o+=e,t.text))})}}({inbandTextTracks:this.inbandTextTracks_,captionArray:t.fmp4Captions,timestampOffset:0}),this.captionParser_&&this.captionParser_.clearParsedCaptions()),this.handleSegment_()}},{key:"handleSegment_",value:function(){var t=this;if(this.pendingSegment_){var i=this.pendingSegment_,n=i.segment,e=this.syncController_.probeSegmentInfo(i);void 0===this.startingMedia_&&e&&(e.containsAudio||e.containsVideo)&&(this.startingMedia_={containsAudio:e.containsAudio,containsVideo:e.containsVideo});var r=function(t,i){return"main"===t&&i&&e?e.containsAudio||e.containsVideo?i.containsVideo&&!e.containsVideo?"Only audio found in segment when we expected video. We can't switch to audio only from a stream that had video. To get rid of this message, please add codec information to the manifest.":!i.containsVideo&&e.containsVideo?"Video found in segment when we expected only audio. We can't switch to a stream with video from an audio only stream. To get rid of this message, please add codec information to the manifest.":null:"Neither audio nor video found in segment.":null}(this.loaderType_,this.startingMedia_);if(r)return this.error({message:r,blacklistDuration:1/0}),void this.trigger("error");if(i.isSyncRequest)return this.trigger("syncinfoupdate"),this.pendingSegment_=null,void(this.state="READY");null!==i.timestampOffset&&i.timestampOffset!==this.sourceUpdater_.timestampOffset()&&(this.sourceUpdater_.timestampOffset(i.timestampOffset),this.trigger("timestampoffset"));var s=this.syncController_.mappingForTimeline(i.timeline);if(null!==s&&this.trigger({type:"segmenttimemapping",mapping:s}),this.state="APPENDING",n.map){var o=Mh(n.map);if(!this.activeInitSegmentId_||this.activeInitSegmentId_!==o){var a=this.initSegment(n.map);this.sourceUpdater_.appendBuffer({bytes:a.bytes},function(){t.activeInitSegmentId_=o})}}i.byteLength=i.bytes.byteLength,this.mediaSecondsLoaded+="number"==typeof n.start&&"number"==typeof n.end?n.end-n.start:n.duration,this.logger_(function(t){var i=t.segment,n=t.playlist,e=n.mediaSequence,r=n.segments;return["appending ["+t.mediaIndex+"] of ["+e+", "+(e+(void 0===r?[]:r).length)+"] from playlist ["+n.id+"]","["+i.start+" => "+i.end+"] in timeline ["+t.timeline+"]"].join(" ")}(i)),this.sourceUpdater_.appendBuffer({bytes:i.bytes,videoSegmentTimingInfoCallback:this.handleVideoSegmentTimingInfo_.bind(this,i.requestId)},this.handleUpdateEnd_.bind(this))}else this.state="READY"}},{key:"handleVideoSegmentTimingInfo_",value:function(t,i){if(this.pendingSegment_&&t===this.pendingSegment_.requestId){var n=this.pendingSegment_.segment;n.videoTimingInfo||(n.videoTimingInfo={}),n.videoTimingInfo.transmuxerPrependedSeconds=i.videoSegmentTimingInfo.prependedContentDuration||0,n.videoTimingInfo.transmuxedPresentationStart=i.videoSegmentTimingInfo.start.presentation,n.videoTimingInfo.transmuxedPresentationEnd=i.videoSegmentTimingInfo.end.presentation,n.videoTimingInfo.baseMediaDecodeTime=i.videoSegmentTimingInfo.baseMediaDecodeTime}}},{key:"handleUpdateEnd_",value:function(){if(!this.pendingSegment_)return this.state="READY",void(this.paused()||this.monitorBuffer_());var t=this.pendingSegment_,i=t.segment,n=null!==this.mediaIndex;this.pendingSegment_=null,this.recordThroughput_(t),this.addSegmentMetadataCue_(t),this.state="READY",this.mediaIndex=t.mediaIndex,this.fetchAtBuffer_=!0,this.currentTimeline_=t.timeline,this.trigger("syncinfoupdate"),i.end&&this.currentTime_()-i.end>3*t.playlist.targetDuration?this.resetEverything():(n&&this.trigger("bandwidthupdate"),this.trigger("progress"),this.isEndOfStream_(t.mediaIndex+1,t.playlist)&&this.endOfStream(),this.paused()||this.monitorBuffer_())}},{key:"recordThroughput_",value:function(t){var i=this.throughput.rate,n=Date.now()-t.endOfAllRequests+1,e=Math.floor(t.byteLength/n*8*1e3);this.throughput.rate+=(e-i)/++this.throughput.count}},{key:"addSegmentMetadataCue_",value:function(i){if(this.segmentMetadataTrack_){var n=i.segment,e=n.start,r=n.end;if(xf(e)&&xf(r)){xh(e,r,this.segmentMetadataTrack_);var s={custom:n.custom,dateTimeObject:n.dateTimeObject,dateTimeString:n.dateTimeString,bandwidth:i.playlist.attributes.BANDWIDTH,resolution:i.playlist.attributes.RESOLUTION,codecs:i.playlist.attributes.CODECS,byteLength:i.byteLength,uri:i.uri,timeline:i.timeline,playlist:i.playlist.uri,start:e,end:r},o=new(t.WebKitDataCue||t.VTTCue)(e,r,JSON.stringify(s));o.value=s,this.segmentMetadataTrack_.addCue(o)}}}}]),Uf);function Uf(t){zc(this,Uf);var i=Qc(this,(Uf.__proto__||Object.getPrototypeOf(Uf)).call(this));if(!t)throw new TypeError("Initialization settings are required");if("function"!=typeof t.currentTime)throw new TypeError("No currentTime getter specified");if(!t.mediaSource)throw new TypeError("No MediaSource specified");return i.bandwidth=t.bandwidth,i.throughput={rate:0,count:0},i.roundTrip=NaN,i.resetStats_(),i.mediaIndex=null,i.hasPlayed_=t.hasPlayed,i.currentTime_=t.currentTime,i.seekable_=t.seekable,i.seeking_=t.seeking,i.duration_=t.duration,i.mediaSource_=t.mediaSource,i.hls_=t.hls,i.loaderType_=t.loaderType,i.startingMedia_=void 0,i.segmentMetadataTrack_=t.segmentMetadataTrack,i.goalBufferLength_=t.goalBufferLength,i.sourceType_=t.sourceType,i.inbandTextTracks_=t.inbandTextTracks,i.state_="INIT",i.checkBufferTimeout_=null,i.error_=void 0,i.currentTimeline_=-1,i.pendingSegment_=null,i.mimeType_=null,i.sourceUpdater_=null,i.xhrOptions_=null,i.activeInitSegmentId_=null,i.initSegments_={},i.cacheEncryptionKeys_=t.cacheEncryptionKeys,i.keyCache_={},i.captionParser_="main"===i.loaderType_?new Mc:null,i.decrypter_=t.decrypter,i.syncController_=t.syncController,i.syncPoint_={segmentIndex:0,time:0},i.syncController_.on("syncinfoupdate",function(){return i.trigger("syncinfoupdate")}),i.mediaSource_.addEventListener("sourceopen",function(){return i.ended_=!1}),i.fetchAtBuffer_=!1,i.logger_=Mf("SegmentLoader["+i.loaderType_+"]"),Object.defineProperty(i,"state",{get:function(){return this.state_},set:function(t){t!==this.state_&&(this.logger_(this.state_+" -> "+t),this.state_=t)}}),i}function Lf(t){return decodeURIComponent(escape(String.fromCharCode.apply(null,t)))}var Vf=new Uint8Array("\n\n".split("").map(function(t){return t.charCodeAt(0)})),Ff=(Yc(Wf,_f),Kc(Wf,[{key:"buffered_",value:function(){if(!this.subtitlesTrack_||!this.subtitlesTrack_.cues.length)return fo.createTimeRanges();var t=this.subtitlesTrack_.cues;return fo.createTimeRanges([[t[0].startTime,t[t.length-1].startTime]])}},{key:"initSegment",value:function(t,i){var n=1<arguments.length&&void 0!==i&&i;if(!t)return null;var e=Mh(t),r=this.initSegments_[e];if(n&&!r&&t.bytes){var s=Vf.byteLength+t.bytes.byteLength,o=new Uint8Array(s);o.set(t.bytes),o.set(Vf,t.bytes.byteLength),this.initSegments_[e]=r={resolvedUri:t.resolvedUri,byterange:t.byterange,bytes:o}}return r||t}},{key:"couldBeginLoading_",value:function(){return this.playlist_&&this.subtitlesTrack_&&!this.paused()}},{key:"init_",value:function(){return this.state="READY",this.resetEverything(),this.monitorBuffer_()}},{key:"track",value:function(t){return void 0===t||(this.subtitlesTrack_=t,"INIT"===this.state&&this.couldBeginLoading_()&&this.init_()),this.subtitlesTrack_}},{key:"remove",value:function(t,i){xh(t,i,this.subtitlesTrack_)}},{key:"fillBuffer_",value:function(){var t=this;this.syncPoint_||(this.syncPoint_=this.syncController_.getSyncPoint(this.playlist_,this.duration_(),this.currentTimeline_,this.currentTime_()));var i=this.checkBuffer_(this.buffered_(),this.playlist_,this.mediaIndex,this.hasPlayed_(),this.currentTime_(),this.syncPoint_);if(i=this.skipEmptySegments_(i)){if(null===this.syncController_.timestampOffsetForTimeline(i.timeline))return this.syncController_.one("timestampoffset",function(){t.state="READY",t.paused()||t.monitorBuffer_()}),void(this.state="WAITING_ON_TIMELINE");this.loadSegment_(i)}}},{key:"skipEmptySegments_",value:function(t){for(;t&&t.segment.empty;)t=this.generateSegmentInfo_(t.playlist,t.mediaIndex+1,t.startOfSegment+t.duration,t.isSyncRequest);return t}},{key:"handleSegment_",value:function(){var i=this;if(this.pendingSegment_&&this.subtitlesTrack_){this.state="APPENDING";var n=this.pendingSegment_,e=n.segment;if("function"!=typeof t.WebVTT&&this.subtitlesTrack_&&this.subtitlesTrack_.tech_){function r(){i.subtitlesTrack_.tech_.off("vttjsloaded",s),i.error({message:"Error loading vtt.js"}),i.state="READY",i.pause(),i.trigger("error")}var s=void 0;return s=function(){i.subtitlesTrack_.tech_.off("vttjserror",r),i.handleSegment_()},this.state="WAITING_ON_VTTJS",this.subtitlesTrack_.tech_.one("vttjsloaded",s),void this.subtitlesTrack_.tech_.one("vttjserror",r)}e.requested=!0;try{this.parseVTTCues_(n)}catch(n){return this.error({message:n.message}),this.state="READY",this.pause(),this.trigger("error")}if(this.updateTimeMapping_(n,this.syncController_.timelines[n.timeline],this.playlist_),n.isSyncRequest)return this.trigger("syncinfoupdate"),this.pendingSegment_=null,void(this.state="READY");n.byteLength=n.bytes.byteLength,this.mediaSecondsLoaded+=e.duration,n.cues.length&&this.remove(n.cues[0].endTime,n.cues[n.cues.length-1].endTime),n.cues.forEach(function(t){i.subtitlesTrack_.addCue(t)}),this.handleUpdateEnd_()}else this.state="READY"}},{key:"parseVTTCues_",value:function(i){var n=void 0,e=!1;"function"==typeof t.TextDecoder?n=new t.TextDecoder("utf8"):(n=t.WebVTT.StringDecoder(),e=!0);var r=new t.WebVTT.Parser(t,t.vttjs,n);if(i.cues=[],i.timestampmap={MPEGTS:0,LOCAL:0},r.oncue=i.cues.push.bind(i.cues),r.ontimestampmap=function(t){return i.timestampmap=t},r.onparsingerror=function(t){fo.log.warn("Error encountered when parsing cues: "+t.message)},i.segment.map){var s=i.segment.map.bytes;e&&(s=Lf(s)),r.parse(s)}var o=i.bytes;e&&(o=Lf(o)),r.parse(o),r.flush()}},{key:"updateTimeMapping_",value:function(t,i,n){var e=t.segment;if(i)if(t.cues.length){var r=t.timestampmap,s=r.MPEGTS/9e4-r.LOCAL+i.mapping;t.cues.forEach(function(t){t.startTime+=s,t.endTime+=s}),n.syncInfo||(n.syncInfo={mediaSequence:n.mediaSequence+t.mediaIndex,time:Math.min(t.cues[0].startTime,t.cues[t.cues.length-1].startTime-e.duration)})}else e.empty=!0}}]),Wf);function Wf(t){var i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};zc(this,Wf);var n=Qc(this,(Wf.__proto__||Object.getPrototypeOf(Wf)).call(this,t,i));return n.mediaSource_=null,n.subtitlesTrack_=null,n}function Xf(t,i){for(var n=t.cues,e=0;e<n.length;e++){var r=n[e];if(i>=r.adStartTime&&i<=r.adEndTime)return r}return null}var $f=[{name:"VOD",run:function(t,i,n){return n===1/0?null:{time:0,segmentIndex:0}}},{name:"ProgramDateTime",run:function(t,i,n,e,r){if(!t.datetimeToDisplayTime)return null;var s=i.segments||[],o=null,a=null;r=r||0;for(var u=0;u<s.length;u++){var c=s[u];if(c.dateTimeObject){var h=c.dateTimeObject.getTime()/1e3+t.datetimeToDisplayTime,f=Math.abs(r-h);if(null!==a&&(0===f||a<f))break;a=f,o={time:h,segmentIndex:u}}}return o}},{name:"Segment",run:function(t,i,n,e,r){var s=i.segments||[],o=null,a=null;r=r||0;for(var u=0;u<s.length;u++){var c=s[u];if(c.timeline===e&&void 0!==c.start){var h=Math.abs(r-c.start);if(null!==a&&a<h)break;(!o||null===a||h<=a)&&(a=h,o={time:c.start,segmentIndex:u})}}return o}},{name:"Discontinuity",run:function(t,i,n,e,r){var s=null;if(r=r||0,i.discontinuityStarts&&i.discontinuityStarts.length)for(var o=null,a=0;a<i.discontinuityStarts.length;a++){var u=i.discontinuityStarts[a],c=t.discontinuities[i.discontinuitySequence+a+1];if(c){var h=Math.abs(r-c.time);if(null!==o&&o<h)break;(!s||null===o||h<=o)&&(o=h,s={time:c.time,segmentIndex:u})}}return s}},{name:"Playlist",run:function(t,i){return i.syncInfo?{time:i.syncInfo.time,segmentIndex:i.syncInfo.mediaSequence-i.mediaSequence}:null}}],zf=(Yc(Kf,fo.EventTarget),Kc(Kf,[{key:"getSyncPoint",value:function(t,i,n,e){var r=this.runStrategies_(t,i,n,e);return r.length?this.selectSyncPoint_(r,{key:"time",value:e}):null}},{key:"getExpiredTime",value:function(t,i){if(!t||!t.segments)return null;var n=this.runStrategies_(t,i,t.discontinuitySequence,0);if(!n.length)return null;var e=this.selectSyncPoint_(n,{key:"segmentIndex",value:0});return 0<e.segmentIndex&&(e.time*=-1),Math.abs(e.time+hh(t,e.segmentIndex,0))}},{key:"runStrategies_",value:function(t,i,n,e){for(var r=[],s=0;s<$f.length;s++){var o=$f[s],a=o.run(this,t,i,n,e);a&&(a.strategy=o.name,r.push({strategy:o.name,syncPoint:a}))}return r}},{key:"selectSyncPoint_",value:function(t,i){for(var n=t[0].syncPoint,e=Math.abs(t[0].syncPoint[i.key]-i.value),r=t[0].strategy,s=1;s<t.length;s++){var o=Math.abs(t[s].syncPoint[i.key]-i.value);o<e&&(e=o,n=t[s].syncPoint,r=t[s].strategy)}return this.logger_("syncPoint for ["+i.key+": "+i.value+"] chosen with strategy ["+r+"]: [time:"+n.time+", segmentIndex:"+n.segmentIndex+"]"),n}},{key:"saveExpiredSegmentInfo",value:function(t,i){for(var n=i.mediaSequence-t.mediaSequence-1;0<=n;n--){var e=t.segments[n];if(e&&void 0!==e.start){i.syncInfo={mediaSequence:t.mediaSequence+n,time:e.start},this.logger_("playlist refresh sync: [time:"+i.syncInfo.time+", mediaSequence: "+i.syncInfo.mediaSequence+"]"),this.trigger("syncinfoupdate");break}}}},{key:"setDateTimeMapping",value:function(t){if(!this.datetimeToDisplayTime&&t.segments&&t.segments.length&&t.segments[0].dateTimeObject){var i=t.segments[0].dateTimeObject.getTime()/1e3;this.datetimeToDisplayTime=-i}}},{key:"reset",value:function(){this.inspectCache_=void 0}},{key:"probeSegmentInfo",value:function(t){var i,n=t.segment,e=t.playlist;return(i=n.map?this.probeMp4Segment_(t):this.probeTsSegment_(t))&&this.calculateSegmentTimeMapping_(t,i)&&(this.saveDiscontinuitySyncInfo_(t),e.syncInfo||(e.syncInfo={mediaSequence:e.mediaSequence+t.mediaIndex,time:n.start})),i}},{key:"probeMp4Segment_",value:function(t){var i=t.segment,n=nu.timescale(i.map.bytes),e=nu.startTime(n,t.bytes);return null!==t.timestampOffset&&(t.timestampOffset-=e),{start:e,end:e+i.duration}}},{key:"probeTsSegment_",value:function(t){var i=function(t,i){var n;return(n=Ic.aac.isLikelyAacData(t)?function(t){for(var i,n=!1,e=0,r=null,s=null,o=0,a=0;3<=t.length-a;){switch(Ic.aac.parseType(t,a)){case"timed-metadata":if(t.length-a<10){n=!0;break}if((o=Ic.aac.parseId3TagSize(t,a))>t.length){n=!0;break}null===s&&(i=t.subarray(a,a+o),s=Ic.aac.parseAacTimestamp(i)),a+=o;break;case"audio":if(t.length-a<7){n=!0;break}if((o=Ic.aac.parseAdtsSize(t,a))>t.length){n=!0;break}null===r&&(i=t.subarray(a,a+o),r=Ic.aac.parseSampleRate(i)),e++,a+=o;break;default:a++}if(n)return null}if(null===r||null===s)return null;var u=9e4/r;return{audio:[{type:"audio",dts:s,pts:s},{type:"audio",dts:s+1024*e*u,pts:s+1024*e*u}]}}(t):function(t){var i={pid:null,table:null},n={};for(var e in function(t,i){for(var n,e=0,r=Cc;r<t.byteLength;)if(71!==t[e]||71!==t[r])e++,r++;else{switch(n=t.subarray(e,r),Ic.ts.parseType(n,i.pid)){case"pat":i.pid||(i.pid=Ic.ts.parsePat(n));break;case"pmt":i.table||(i.table=Ic.ts.parsePmt(n))}if(i.pid&&i.table)return;e+=Cc,r+=Cc}}(t,i),i.table)if(i.table.hasOwnProperty(e))switch(i.table[e]){case Bu.H264_STREAM_TYPE:n.video=[],Dc(t,i,n),0===n.video.length&&delete n.video;break;case Bu.ADTS_STREAM_TYPE:n.audio=[],kc(t,i,n),0===n.audio.length&&delete n.audio}return n}(t))&&(n.audio||n.video)?(function(t,i){if(t.audio&&t.audio.length){var n=i;void 0===n&&(n=t.audio[0].dts),t.audio.forEach(function(t){t.dts=Ec(t.dts,n),t.pts=Ec(t.pts,n),t.dtsTime=t.dts/9e4,t.ptsTime=t.pts/9e4})}if(t.video&&t.video.length){var e=i;if(void 0===e&&(e=t.video[0].dts),t.video.forEach(function(t){t.dts=Ec(t.dts,e),t.pts=Ec(t.pts,e),t.dtsTime=t.dts/9e4,t.ptsTime=t.pts/9e4}),t.firstKeyFrame){var r=t.firstKeyFrame;r.dts=Ec(r.dts,e),r.pts=Ec(r.pts,e),r.dtsTime=r.dts/9e4,r.ptsTime=r.dts/9e4}}}(n,i),n):null}(t.bytes,this.inspectCache_),n=void 0,e=void 0;return i?(i.video&&2===i.video.length?(this.inspectCache_=i.video[1].dts,n=i.video[0].dtsTime,e=i.video[1].dtsTime):i.audio&&2===i.audio.length&&(this.inspectCache_=i.audio[1].dts,n=i.audio[0].dtsTime,e=i.audio[1].dtsTime),{start:n,end:e,containsVideo:i.video&&2===i.video.length,containsAudio:i.audio&&2===i.audio.length}):null}},{key:"timestampOffsetForTimeline",value:function(t){return void 0===this.timelines[t]?null:this.timelines[t].time}},{key:"mappingForTimeline",value:function(t){return void 0===this.timelines[t]?null:this.timelines[t].mapping}},{key:"calculateSegmentTimeMapping_",value:function(t,i){var n=t.segment,e=this.timelines[t.timeline];if(null!==t.timestampOffset)this.timelines[t.timeline]=e={time:t.startOfSegment,mapping:t.startOfSegment-i.start},this.trigger("timestampoffset"),this.logger_("time mapping for timeline "+t.timeline+": [time: "+e.time+"] [mapping: "+e.mapping+"]"),n.start=t.startOfSegment,n.end=i.end+e.mapping;else{if(!e)return!1;n.start=i.start+e.mapping,n.end=i.end+e.mapping}return!0}},{key:"saveDiscontinuitySyncInfo_",value:function(t){var i=t.playlist,n=t.segment;if(n.discontinuity)this.discontinuities[n.timeline]={time:n.start,accuracy:0};else if(i.discontinuityStarts&&i.discontinuityStarts.length)for(var e=0;e<i.discontinuityStarts.length;e++){var r,s=i.discontinuityStarts[e],o=i.discontinuitySequence+e+1,a=s-t.mediaIndex,u=Math.abs(a);(!this.discontinuities[o]||this.discontinuities[o].accuracy>u)&&(r=a<0?n.start-hh(i,t.mediaIndex,s):n.end+hh(i,t.mediaIndex+1,s),this.discontinuities[o]={time:r,accuracy:u})}}}]),Kf);function Kf(){zc(this,Kf);var t=Qc(this,(Kf.__proto__||Object.getPrototypeOf(Kf)).call(this));return t.inspectCache_=void 0,t.timelines=[],t.discontinuities=[],t.datetimeToDisplayTime=null,t.logger_=Mf("SyncController"),t}function qf(t,i){t.abort(),t.pause(),i&&i.activePlaylistLoader&&(i.activePlaylistLoader.pause(),i.activePlaylistLoader=null)}function Yf(t,i){(i.activePlaylistLoader=t).load()}var Qf=new Yh("./decrypter-worker.worker.js",function(){var t,i,n,e,r,s,o;function a(t,i){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}function u(t,i){for(var n=0;n<i.length;n++){var e=i[n];e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(t,e.key,e)}}function c(t){a(this,c),i=i||function(){var t=[[[],[],[],[],[]],[[],[],[],[],[]]],i=t[0],n=t[1],e=i[4],r=n[4],s=void 0,o=void 0,a=void 0,u=[],c=[],h=void 0,f=void 0,l=void 0,d=void 0,v=void 0;for(s=0;s<256;s++)c[(u[s]=s<<1^283*(s>>7))^s]=s;for(o=a=0;!e[o];o^=h||1,a=c[a]||1)for(l=(l=a^a<<1^a<<2^a<<3^a<<4)>>8^255&l^99,v=16843009*u[f=u[h=u[r[e[o]=l]=o]]]^65537*f^257*h^16843008*o,d=257*u[l]^16843008*l,s=0;s<4;s++)i[s][o]=d=d<<24^d>>>8,n[s][l]=v=v<<24^v>>>8;for(s=0;s<5;s++)i[s]=i[s].slice(0),n[s]=n[s].slice(0);return t}(),this._tables=[[i[0][0].slice(),i[0][1].slice(),i[0][2].slice(),i[0][3].slice(),i[0][4].slice()],[i[1][0].slice(),i[1][1].slice(),i[1][2].slice(),i[1][3].slice(),i[1][4].slice()]];var n=void 0,e=void 0,r=void 0,s=void 0,o=void 0,u=this._tables[0][4],h=this._tables[1],f=t.length,l=1;if(4!==f&&6!==f&&8!==f)throw new Error("Invalid aes key size");for(s=t.slice(0),this._key=[s,o=[]],n=f;n<4*f+28;n++)r=s[n-1],(n%f==0||8===f&&n%f==4)&&(r=u[r>>>24]<<24^u[r>>16&255]<<16^u[r>>8&255]<<8^u[255&r],n%f==0&&(r=r<<8^r>>>24^l<<24,l=l<<1^283*(l>>7))),s[n]=s[n-f]^r;for(e=0;n;e++,n--)r=s[3&e?n:n-4],o[e]=n<=4||e<4?r:h[0][u[r>>>24]]^h[1][u[r>>16&255]]^h[2][u[r>>8&255]]^h[3][u[255&r]]}function h(){a(this,h),this.listeners={}}function f(){a(this,f);var t=function(t,i){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!i||"object"!=typeof i&&"function"!=typeof i?t:i}(this,r.call(this,e));return t.jobs=[],t.delay=1,t.timeout_=null,t}function l(t){return t<<24|(65280&t)<<8|(16711680&t)>>8|t>>>24}function d(t,i,n,e){a(this,d);var r=d.STEP,o=new Int32Array(t.buffer),u=new Uint8Array(t.byteLength),c=0;for(this.asyncStream_=new s,this.asyncStream_.push(this.decryptChunk_(o.subarray(c,c+r),i,n,u)),c=r;c<o.length;c+=r)n=new Uint32Array([l(o[c-4]),l(o[c-3]),l(o[c-2]),l(o[c-1])]),this.asyncStream_.push(this.decryptChunk_(o.subarray(c,c+r),i,n,u));this.asyncStream_.push(function(){e(null,u.subarray(0,u.byteLength-u[u.byteLength-1]))})}t=function(t,i,n){return i&&u(t.prototype,i),n&&u(t,n),t},i=null,c.prototype.decrypt=function(t,i,n,e,r,s){var o=this._key[1],a=t^o[0],u=e^o[1],c=n^o[2],h=i^o[3],f=void 0,l=void 0,d=void 0,v=o.length/4-2,p=void 0,m=4,b=this._tables[1],T=b[0],y=b[1],g=b[2],S=b[3],w=b[4];for(p=0;p<v;p++)f=T[a>>>24]^y[u>>16&255]^g[c>>8&255]^S[255&h]^o[m],l=T[u>>>24]^y[c>>16&255]^g[h>>8&255]^S[255&a]^o[m+1],d=T[c>>>24]^y[h>>16&255]^g[a>>8&255]^S[255&u]^o[m+2],h=T[h>>>24]^y[a>>16&255]^g[u>>8&255]^S[255&c]^o[m+3],m+=4,a=f,u=l,c=d;for(p=0;p<4;p++)r[(3&-p)+s]=w[a>>>24]<<24^w[u>>16&255]<<16^w[c>>8&255]<<8^w[255&h]^o[m++],f=a,a=u,u=c,c=h,h=f},n=c,h.prototype.on=function(t,i){this.listeners[t]||(this.listeners[t]=[]),this.listeners[t].push(i)},h.prototype.off=function(t,i){if(!this.listeners[t])return!1;var n=this.listeners[t].indexOf(i);return this.listeners[t].splice(n,1),-1<n},h.prototype.trigger=function(t,i){var n=this.listeners[t];if(n)if(2===arguments.length)for(var e=n.length,r=0;r<e;++r)n[r].call(this,i);else for(var s=Array.prototype.slice.call(arguments,1),o=n.length,a=0;a<o;++a)n[a].apply(this,s)},h.prototype.dispose=function(){this.listeners={}},h.prototype.pipe=function(t){this.on("data",function(i){t.push(i)})},function(t,i){if("function"!=typeof i&&null!==i)throw new TypeError("Super expression must either be null or a function, not "+typeof i);t.prototype=Object.create(i&&i.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),i&&(Object.setPrototypeOf?Object.setPrototypeOf(t,i):t.__proto__=i)}(f,r=e=h),f.prototype.processJob_=function(){this.jobs.shift()(),this.timeout_=this.jobs.length?setTimeout(this.processJob_.bind(this),this.delay):null},f.prototype.push=function(t){this.jobs.push(t),this.timeout_||(this.timeout_=setTimeout(this.processJob_.bind(this),this.delay))},s=f,d.prototype.decryptChunk_=function(t,i,e,r){return function(){var s=function(t,i,e){var r=new Int32Array(t.buffer,t.byteOffset,t.byteLength>>2),s=new n(Array.prototype.slice.call(i)),o=new Uint8Array(t.byteLength),a=new Int32Array(o.buffer),u=void 0,c=void 0,h=void 0,f=void 0,d=void 0,v=void 0,p=void 0,m=void 0,b=void 0;for(u=e[0],c=e[1],h=e[2],f=e[3],b=0;b<r.length;b+=4)d=l(r[b]),v=l(r[b+1]),p=l(r[b+2]),m=l(r[b+3]),s.decrypt(d,v,p,m,a,b),a[b]=l(a[b]^u),a[b+1]=l(a[b+1]^c),a[b+2]=l(a[b+2]^h),a[b+3]=l(a[b+3]^f),u=d,c=v,h=p,f=m;return o}(t,i,e);r.set(s,t.byteOffset)}},t(d,null,[{key:"STEP",get:function(){return 32e3}}]),o=d,new function(t){t.onmessage=function(i){var n=i.data,e=new Uint8Array(n.encrypted.bytes,n.encrypted.byteOffset,n.encrypted.byteLength),r=new Uint32Array(n.key.bytes,n.key.byteOffset,n.key.byteLength/4),s=new Uint32Array(n.iv.bytes,n.iv.byteOffset,n.iv.byteLength/4);new o(e,r,s,function(i,e){t.postMessage(function(t){var i={};return Object.keys(t).forEach(function(n){var e=t[n];i[n]=ArrayBuffer.isView(e)?{bytes:e.buffer,byteOffset:e.byteOffset,byteLength:e.byteLength}:e}),i}({source:n.source,decrypted:e}),[e.buffer])})}}(this)}),Jf={AUDIO:function(t,i){return function(){var n=i.mediaTypes[t],e=i.blacklistCurrentPlaylist;qf(i.segmentLoaders[t],n);var r=n.activeTrack(),s=n.activeGroup(),o=(s.filter(function(t){return t.default})[0]||s[0]).id,a=n.tracks[o];if(r!==a){for(var u in fo.log.warn("Problem encountered loading the alternate audio track.Switching back to default."),n.tracks)n.tracks[u].enabled=n.tracks[u]===a;n.onTrackChanged()}else e({message:"Problem encountered loading the default audio track."})}},SUBTITLES:function(t,i){return function(){var n=i.segmentLoaders[t],e=i.mediaTypes[t];fo.log.warn("Problem encountered loading the subtitle track.Disabling subtitle track."),qf(n,e);var r=e.activeTrack();r&&(r.mode="disabled"),e.onTrackChanged()}}},Zf={AUDIO:function(t,i,n){if(i){var e=n.tech,r=n.requestOptions,s=n.segmentLoaders[t];i.on("loadedmetadata",function(){var t=i.media();s.playlist(t,r),(!e.paused()||t.endList&&"none"!==e.preload())&&s.load()}),i.on("loadedplaylist",function(){s.playlist(i.media(),r),e.paused()||s.load()}),i.on("error",Jf[t](t,n))}},SUBTITLES:function(t,i,n){var e=n.tech,r=n.requestOptions,s=n.segmentLoaders[t],o=n.mediaTypes[t];i.on("loadedmetadata",function(){var t=i.media();s.playlist(t,r),s.track(o.activeTrack()),(!e.paused()||t.endList&&"none"!==e.preload())&&s.load()}),i.on("loadedplaylist",function(){s.playlist(i.media(),r),e.paused()||s.load()}),i.on("error",Jf[t](t,n))}},tl={AUDIO:function(t,i){var n,e,r=i.hls,s=i.sourceType,o=i.segmentLoaders[t],a=i.requestOptions,u=i.master.mediaGroups,c=i.mediaTypes[t],h=c.groups,f=c.tracks,l=i.masterPlaylistLoader;for(var d in u[t]&&0!==Object.keys(u[t]).length||(u[t]={main:{default:{default:!0}}}),u[t])for(var v in h[d]||(h[d]=[]),u[t][d]){var p,m=u[t][d][v];if(p=m.resolvedUri?new oh(m.resolvedUri,r,a):m.playlists&&"dash"===s?new Af(m.playlists[0],r,a,l):null,m=fo.mergeOptions({id:v,playlistLoader:p},m),Zf[t](t,m.playlistLoader,i),h[d].push(m),void 0===f[v]){var b=new fo.AudioTrack({id:v,kind:(n=m,e=void 0,e=n.default?"main":"alternative",n.characteristics&&0<=n.characteristics.indexOf("public.accessibility.describes-video")&&(e="main-desc"),e),enabled:!1,language:m.language,default:m.default,label:v});f[v]=b}}o.on("error",Jf[t](t,i))},SUBTITLES:function(t,i){var n=i.tech,e=i.hls,r=i.sourceType,s=i.segmentLoaders[t],o=i.requestOptions,a=i.master.mediaGroups,u=i.mediaTypes[t],c=u.groups,h=u.tracks,f=i.masterPlaylistLoader;for(var l in a[t])for(var d in c[l]||(c[l]=[]),a[t][l])if(!a[t][l][d].forced){var v=a[t][l][d],p=void 0;if("hls"===r?p=new oh(v.resolvedUri,e,o):"dash"===r&&(p=new Af(v.playlists[0],e,o,f)),v=fo.mergeOptions({id:d,playlistLoader:p},v),Zf[t](t,v.playlistLoader,i),c[l].push(v),void 0===h[d]){var m=n.addRemoteTextTrack({id:d,kind:"subtitles",default:v.default&&v.autoselect,language:v.language,label:d},!1).track;h[d]=m}}s.on("error",Jf[t](t,i))},"CLOSED-CAPTIONS":function(t,i){var n=i.tech,e=i.master.mediaGroups,r=i.mediaTypes[t],s=r.groups,o=r.tracks;for(var a in e[t])for(var u in s[a]||(s[a]=[]),e[t][a]){var c=e[t][a][u];if(c.instreamId.match(/CC\d/)&&(s[a].push(fo.mergeOptions({id:u},c)),void 0===o[u])){var h=n.addRemoteTextTrack({id:c.instreamId,kind:"captions",default:c.default&&c.autoselect,language:c.language,label:u},!1).track;o[u]=h}}}},il={AUDIO:function(t,i){return function(){var n=i.mediaTypes[t].tracks;for(var e in n)if(n[e].enabled)return n[e];return null}},SUBTITLES:function(t,i){return function(){var n=i.mediaTypes[t].tracks;for(var e in n)if("showing"===n[e].mode)return n[e];return null}}},nl=void 0,el=["mediaRequests","mediaRequestsAborted","mediaRequestsTimedout","mediaRequestsErrored","mediaTransferDuration","mediaBytesTransferred"],rl=(Yc(sl,fo.EventTarget),Kc(sl,[{key:"setupMasterPlaylistLoaderListeners_",value:function(){var t=this;this.masterPlaylistLoader_.on("loadedmetadata",function(){var i=t.masterPlaylistLoader_.media(),n=1.5*i.targetDuration*1e3;t.requestOptions_.timeout=yh(t.masterPlaylistLoader_.master,t.masterPlaylistLoader_.media())?0:n,i.endList&&"none"!==t.tech_.preload()&&(t.mainSegmentLoader_.playlist(i,t.requestOptions_),t.mainSegmentLoader_.load()),function(t){["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach(function(i){tl[i](i,t)});var i=t.mediaTypes,n=t.masterPlaylistLoader,e=t.tech,r=t.hls;["AUDIO","SUBTITLES"].forEach(function(n){i[n].activeGroup=function(t,i){return function(n){var e=i.mediaTypes[t].groups,r=i.masterPlaylistLoader.media();if(!r)return null;var s=null;return r.attributes[t]&&(s=e[r.attributes[t]]),s=s||e.main,void 0===n?s:null===n?null:s.filter(function(t){return t.id===n.id})[0]||null}}(n,t),i[n].activeTrack=il[n](n,t),i[n].onGroupChanged=function(t,i){return function(){var n=i.segmentLoaders,e=n[t],r=n.main,s=i.mediaTypes[t],o=s.activeTrack(),a=s.activeGroup(o),u=s.activePlaylistLoader;qf(e,s),a&&(a.playlistLoader?(e.resyncLoader(),Yf(a.playlistLoader,s)):u&&r.resetEverything())}}(n,t),i[n].onTrackChanged=function(t,i){return function(){var n=i.segmentLoaders,e=n[t],r=n.main,s=i.mediaTypes[t],o=s.activeTrack(),a=s.activeGroup(o),u=s.activePlaylistLoader;qf(e,s),a&&(a.playlistLoader?(u!==a.playlistLoader&&(e.track&&e.track(o),e.resetEverything()),Yf(a.playlistLoader,s)):r.resetEverything())}}(n,t)});var s=i.AUDIO.activeGroup(),o=(s.filter(function(t){return t.default})[0]||s[0]).id;function a(){i.AUDIO.onTrackChanged(),e.trigger({type:"usage",name:"hls-audio-change"})}for(var u in i.AUDIO.tracks[o].enabled=!0,i.AUDIO.onTrackChanged(),n.on("mediachange",function(){["AUDIO","SUBTITLES"].forEach(function(t){return i[t].onGroupChanged()})}),e.audioTracks().addEventListener("change",a),e.remoteTextTracks().addEventListener("change",i.SUBTITLES.onTrackChanged),r.on("dispose",function(){e.audioTracks().removeEventListener("change",a),e.remoteTextTracks().removeEventListener("change",i.SUBTITLES.onTrackChanged)}),e.clearTracks("audio"),i.AUDIO.tracks)e.audioTracks().addTrack(i.AUDIO.tracks[u])}({sourceType:t.sourceType_,segmentLoaders:{AUDIO:t.audioSegmentLoader_,SUBTITLES:t.subtitleSegmentLoader_,main:t.mainSegmentLoader_},tech:t.tech_,requestOptions:t.requestOptions_,masterPlaylistLoader:t.masterPlaylistLoader_,hls:t.hls_,master:t.master(),mediaTypes:t.mediaTypes_,blacklistCurrentPlaylist:t.blacklistCurrentPlaylist.bind(t)}),t.triggerPresenceUsage_(t.master(),i);try{t.setupSourceBuffers_()}catch(i){return fo.log.warn("Failed to create SourceBuffers",i),t.mediaSource.endOfStream("decode")}t.setupFirstPlay(),!t.mediaTypes_.AUDIO.activePlaylistLoader||t.mediaTypes_.AUDIO.activePlaylistLoader.media()?t.trigger("selectedinitialmedia"):t.mediaTypes_.AUDIO.activePlaylistLoader.one("loadedmetadata",function(){t.trigger("selectedinitialmedia")})}),this.masterPlaylistLoader_.on("loadedplaylist",function(){var i=t.masterPlaylistLoader_.media();if(!i){t.excludeUnsupportedVariants_();var n=void 0;return t.enableLowInitialPlaylist&&(n=t.selectInitialPlaylist()),n=n||t.selectPlaylist(),t.initialMedia_=n,void t.masterPlaylistLoader_.media(t.initialMedia_)}if(t.useCueTags_&&t.updateAdCues_(i),t.mainSegmentLoader_.playlist(i,t.requestOptions_),t.updateDuration(),t.tech_.paused()||(t.mainSegmentLoader_.load(),t.audioSegmentLoader_&&t.audioSegmentLoader_.load()),!i.endList){function e(){var i=t.seekable();0!==i.length&&t.mediaSource.addSeekableRange_(i.start(0),i.end(0))}t.duration()!==1/0?t.tech_.one("durationchange",function i(){t.duration()===1/0?e():t.tech_.one("durationchange",i)}):e()}}),this.masterPlaylistLoader_.on("error",function(){t.blacklistCurrentPlaylist(t.masterPlaylistLoader_.error)}),this.masterPlaylistLoader_.on("mediachanging",function(){t.mainSegmentLoader_.abort(),t.mainSegmentLoader_.pause()}),this.masterPlaylistLoader_.on("mediachange",function(){var i=t.masterPlaylistLoader_.media(),n=1.5*i.targetDuration*1e3;t.requestOptions_.timeout=yh(t.masterPlaylistLoader_.master,t.masterPlaylistLoader_.media())?0:n,t.mainSegmentLoader_.playlist(i,t.requestOptions_),t.mainSegmentLoader_.load(),t.tech_.trigger({type:"mediachange",bubbles:!0})}),this.masterPlaylistLoader_.on("playlistunchanged",function(){var i=t.masterPlaylistLoader_.media();t.stuckAtPlaylistEnd_(i)&&(t.blacklistCurrentPlaylist({message:"Playlist no longer updating."}),t.tech_.trigger("playliststuck"))}),this.masterPlaylistLoader_.on("renditiondisabled",function(){t.tech_.trigger({type:"usage",name:"hls-rendition-disabled"})}),this.masterPlaylistLoader_.on("renditionenabled",function(){t.tech_.trigger({type:"usage",name:"hls-rendition-enabled"})})}},{key:"triggerPresenceUsage_",value:function(t,i){var n=t.mediaGroups||{},e=!0,r=Object.keys(n.AUDIO);for(var s in n.AUDIO)for(var o in n.AUDIO[s])n.AUDIO[s][o].uri||(e=!1);e&&this.tech_.trigger({type:"usage",name:"hls-demuxed"}),Object.keys(n.SUBTITLES).length&&this.tech_.trigger({type:"usage",name:"hls-webvtt"}),nl.Playlist.isAes(i)&&this.tech_.trigger({type:"usage",name:"hls-aes"}),nl.Playlist.isFmp4(i)&&this.tech_.trigger({type:"usage",name:"hls-fmp4"}),r.length&&1<Object.keys(n.AUDIO[r[0]]).length&&this.tech_.trigger({type:"usage",name:"hls-alternate-audio"}),this.useCueTags_&&this.tech_.trigger({type:"usage",name:"hls-playlist-cue-tags"})}},{key:"setupSegmentLoaderListeners_",value:function(){var t=this;this.mainSegmentLoader_.on("bandwidthupdate",function(){var i=t.selectPlaylist(),n=t.masterPlaylistLoader_.media(),e=t.tech_.buffered(),r=e.length?e.end(e.length-1)-t.tech_.currentTime():0,s=t.bufferLowWaterLine();(!n.endList||t.duration()<Rf.MAX_BUFFER_LOW_WATER_LINE||i.attributes.BANDWIDTH<n.attributes.BANDWIDTH||s<=r)&&t.masterPlaylistLoader_.media(i),t.tech_.trigger("bandwidthupdate")}),this.mainSegmentLoader_.on("progress",function(){t.trigger("progress")}),this.mainSegmentLoader_.on("error",function(){t.blacklistCurrentPlaylist(t.mainSegmentLoader_.error())}),this.mainSegmentLoader_.on("syncinfoupdate",function(){t.onSyncInfoUpdate_()}),this.mainSegmentLoader_.on("timestampoffset",function(){t.tech_.trigger({type:"usage",name:"hls-timestamp-offset"})}),this.audioSegmentLoader_.on("syncinfoupdate",function(){t.onSyncInfoUpdate_()}),this.mainSegmentLoader_.on("ended",function(){t.onEndOfStream()}),this.mainSegmentLoader_.on("earlyabort",function(){t.blacklistCurrentPlaylist({message:"Aborted early because there isn't enough bandwidth to complete the request without rebuffering."},120)}),this.mainSegmentLoader_.on("reseteverything",function(){t.tech_.trigger("hls-reset")}),this.mainSegmentLoader_.on("segmenttimemapping",function(i){t.tech_.trigger({type:"hls-segment-time-mapping",mapping:i.mapping})}),this.audioSegmentLoader_.on("ended",function(){t.onEndOfStream()})}},{key:"mediaSecondsLoaded_",value:function(){return Math.max(this.audioSegmentLoader_.mediaSecondsLoaded+this.mainSegmentLoader_.mediaSecondsLoaded)}},{key:"load",value:function(){this.mainSegmentLoader_.load(),this.mediaTypes_.AUDIO.activePlaylistLoader&&this.audioSegmentLoader_.load(),this.mediaTypes_.SUBTITLES.activePlaylistLoader&&this.subtitleSegmentLoader_.load()}},{key:"smoothQualityChange_",value:function(){var t=this.selectPlaylist();t!==this.masterPlaylistLoader_.media()&&(this.masterPlaylistLoader_.media(t),this.mainSegmentLoader_.resetLoader())}},{key:"fastQualityChange_",value:function(){var t=this,i=this.selectPlaylist();i!==this.masterPlaylistLoader_.media()&&(this.masterPlaylistLoader_.media(i),this.mainSegmentLoader_.resetEverything(function(){t.tech_.setCurrentTime(fo.browser.IE_VERSION||fo.browser.IS_EDGE?t.tech_.currentTime()+.04:t.tech_.currentTime())}))}},{key:"play",value:function(){if(!this.setupFirstPlay()){this.tech_.ended()&&this.seekTo_(0),this.hasPlayed_()&&this.load();var t=this.tech_.seekable();return this.tech_.duration()===1/0&&this.tech_.currentTime()<t.start(0)?this.seekTo_(t.end(t.length-1)):void 0}}},{key:"setupFirstPlay",value:function(){var t=this,i=this.masterPlaylistLoader_.media();if(!i||this.tech_.paused()||this.hasPlayed_())return!1;if(!i.endList){var n=this.seekable();if(!n.length)return!1;if(fo.browser.IE_VERSION&&0===this.tech_.readyState())return this.tech_.one("loadedmetadata",function(){t.trigger("firstplay"),t.seekTo_(n.end(0)),t.hasPlayed_=function(){return!0}}),!1;this.trigger("firstplay"),this.seekTo_(n.end(0))}return this.hasPlayed_=function(){return!0},this.load(),!0}},{key:"handleSourceOpen_",value:function(){try{this.setupSourceBuffers_()}catch(t){return fo.log.warn("Failed to create Source Buffers",t),this.mediaSource.endOfStream("decode")}if(this.tech_.autoplay()){var t=this.tech_.play();void 0!==t&&"function"==typeof t.then&&t.then(null,function(){})}this.trigger("sourceopen")}},{key:"onEndOfStream",value:function(){var t=this.mainSegmentLoader_.ended_;if(this.mediaTypes_.AUDIO.activePlaylistLoader&&(t=!this.mainSegmentLoader_.startingMedia_||this.mainSegmentLoader_.startingMedia_.containsVideo?t&&this.audioSegmentLoader_.ended_:this.audioSegmentLoader_.ended_),t){this.logger_("calling mediaSource.endOfStream()");try{this.mediaSource.endOfStream()}catch(t){fo.log.warn("Failed to call media source endOfStream",t)}}}},{key:"stuckAtPlaylistEnd_",value:function(t){if(!this.seekable().length)return!1;var i=this.syncController_.getExpiredTime(t,this.mediaSource.duration);if(null===i)return!1;var n=nl.Playlist.playlistEnd(t,i),e=this.tech_.currentTime(),r=this.tech_.buffered();if(!r.length)return n-e<=.1;var s=r.end(r.length-1);return s-e<=.1&&n-s<=.1}},{key:"blacklistCurrentPlaylist",value:function(t,i){var n,e=0<arguments.length&&void 0!==t?t:{},r=i,s=void 0;if(s=e.playlist||this.masterPlaylistLoader_.media(),r=r||e.blacklistDuration||this.blacklistDuration,!s){this.error=e;try{return this.mediaSource.endOfStream("network")}catch(t){return this.trigger("error")}}var o=1===this.masterPlaylistLoader_.master.playlists.filter(bh).length,a=this.masterPlaylistLoader_.master.playlists;return 1===a.length?(fo.log.warn("Problem encountered with the current HLS playlist. Trying again since it is the only playlist."),this.tech_.trigger("retryplaylist"),this.masterPlaylistLoader_.load(o)):(o&&(fo.log.warn("Removing all playlists from the blacklist because the last rendition is about to be blacklisted."),a.forEach(function(t){t.excludeUntil!==1/0&&delete t.excludeUntil}),this.tech_.trigger("retryplaylist")),s.excludeUntil=Date.now()+1e3*r,this.tech_.trigger("blacklistplaylist"),this.tech_.trigger({type:"usage",name:"hls-rendition-blacklisted"}),n=this.selectPlaylist(),fo.log.warn("Problem encountered with the current HLS playlist."+(e.message?" "+e.message:"")+" Switching to another playlist."),this.masterPlaylistLoader_.media(n,o))}},{key:"pauseLoading",value:function(){this.mainSegmentLoader_.pause(),this.mediaTypes_.AUDIO.activePlaylistLoader&&this.audioSegmentLoader_.pause(),this.mediaTypes_.SUBTITLES.activePlaylistLoader&&this.subtitleSegmentLoader_.pause()}},{key:"setCurrentTime",value:function(t){var i=Ch(this.tech_.buffered(),t);return this.masterPlaylistLoader_&&this.masterPlaylistLoader_.media()&&this.masterPlaylistLoader_.media().segments?i&&i.length?t:(this.mainSegmentLoader_.resetEverything(),this.mainSegmentLoader_.abort(),this.mediaTypes_.AUDIO.activePlaylistLoader&&(this.audioSegmentLoader_.resetEverything(),this.audioSegmentLoader_.abort()),this.mediaTypes_.SUBTITLES.activePlaylistLoader&&(this.subtitleSegmentLoader_.resetEverything(),this.subtitleSegmentLoader_.abort()),void this.load()):0}},{key:"duration",value:function(){return this.masterPlaylistLoader_?this.mediaSource?this.mediaSource.duration:nl.Playlist.duration(this.masterPlaylistLoader_.media()):0}},{key:"seekable",value:function(){return this.seekable_}},{key:"onSyncInfoUpdate_",value:function(){var t=void 0,i=void 0;if(this.masterPlaylistLoader_){var n=this.masterPlaylistLoader_.media();if(n){var e=this.syncController_.getExpiredTime(n,this.mediaSource.duration);if(null!==e&&0!==(t=nl.Playlist.seekable(n,e)).length){if(this.mediaTypes_.AUDIO.activePlaylistLoader){if(n=this.mediaTypes_.AUDIO.activePlaylistLoader.media(),null===(e=this.syncController_.getExpiredTime(n,this.mediaSource.duration)))return;if(0===(i=nl.Playlist.seekable(n,e)).length)return}var r=void 0,s=void 0;this.seekable_&&this.seekable_.length&&(r=this.seekable_.end(0),s=this.seekable_.start(0)),this.seekable_=i?i.start(0)>t.end(0)||t.start(0)>i.end(0)?t:fo.createTimeRanges([[i.start(0)>t.start(0)?i.start(0):t.start(0),i.end(0)<t.end(0)?i.end(0):t.end(0)]]):t,this.seekable_&&this.seekable_.length&&this.seekable_.end(0)===r&&this.seekable_.start(0)===s||(this.logger_("seekable updated ["+Oh(this.seekable_)+"]"),this.tech_.trigger("seekablechanged"))}}}}},{key:"updateDuration",value:function(){function t(){i.logger_("Setting duration from "+i.mediaSource.duration+" => "+e);try{i.mediaSource.duration=e}catch(t){fo.log.warn("Failed to set media source duration",t)}i.tech_.trigger("durationchange"),i.mediaSource.removeEventListener("sourceopen",t)}var i=this,n=this.mediaSource.duration,e=nl.Playlist.duration(this.masterPlaylistLoader_.media()),r=this.tech_.buffered();0<r.length&&(e=Math.max(e,r.end(r.length-1))),n!==e&&("open"!==this.mediaSource.readyState?this.mediaSource.addEventListener("sourceopen",t):t())}},{key:"dispose",value:function(){var t=this;this.decrypter_.terminate(),this.masterPlaylistLoader_.dispose(),this.mainSegmentLoader_.dispose(),["AUDIO","SUBTITLES"].forEach(function(i){var n=t.mediaTypes_[i].groups;for(var e in n)n[e].forEach(function(t){t.playlistLoader&&t.playlistLoader.dispose()})}),this.audioSegmentLoader_.dispose(),this.subtitleSegmentLoader_.dispose()}},{key:"master",value:function(){return this.masterPlaylistLoader_.master}},{key:"media",value:function(){return this.masterPlaylistLoader_.media()||this.initialMedia_}},{key:"setupSourceBuffers_",value:function(){var t,i=this.masterPlaylistLoader_.media();if(i&&"open"===this.mediaSource.readyState){if((t=function(t,i){var n=i.segments&&i.segments.length&&i.segments[0].map?"mp4":"mp2t",e=function(t){var i=t.attributes||{};return i.CODECS?ef(i.CODECS):uf}(i),r=i.attributes||{},s=!0,o=!1;if(!i)return[];if(t.mediaGroups.AUDIO&&r.AUDIO){var a=t.mediaGroups.AUDIO[r.AUDIO];if(a)for(var u in s=!(o=!0),a)if(!a[u].uri&&!a[u].playlists){s=!0;break}}o&&!e.audioProfile&&(s||(e.audioProfile=function(t,i){if(!t.mediaGroups.AUDIO||!i)return null;var n=t.mediaGroups.AUDIO[i];if(!n)return null;for(var e in n){var r=n[e];if(r.default&&r.playlists)return ef(r.playlists[0].attributes.CODECS).audioProfile}return null}(t,r.AUDIO)),e.audioProfile||(fo.log.warn("Multiple audio tracks present but no audio codec string is specified. Attempting to use the default audio codec (mp4a.40.2)"),e.audioProfile=uf.audioProfile));var c={};e.videoCodec&&(c.video=""+e.videoCodec+e.videoObjectTypeIndicator),e.audioProfile&&(c.audio="mp4a.40."+e.audioProfile);var h=rf("audio",n,[c.audio]),f=rf("video",n,[c.video]),l=rf("video",n,[c.video,c.audio]);return o?!s&&c.video?[f,h]:s||c.video?[l,h]:[h,h]:c.video?[l]:[h]}(this.masterPlaylistLoader_.master,i)).length<1)return this.error="No compatible SourceBuffer configuration for the variant stream:"+i.resolvedUri,this.mediaSource.endOfStream("decode");this.configureLoaderMimeTypes_(t),this.excludeIncompatibleVariants_(i)}}},{key:"configureLoaderMimeTypes_",value:function(t){var i=1<t.length&&-1===t[0].indexOf(",")&&t[0]!==t[1]?new fo.EventTarget:null;this.mainSegmentLoader_.mimeType(t[0],i),t[1]&&this.audioSegmentLoader_.mimeType(t[1],i)}},{key:"excludeUnsupportedVariants_",value:function(){this.master().playlists.forEach(function(i){i.attributes.CODECS&&t.MediaSource&&t.MediaSource.isTypeSupported&&!t.MediaSource.isTypeSupported('video/mp4; codecs="'+function(t){return t.replace(/avc1\.(\d+)\.(\d+)/i,function(t){return nf([t])[0]})}(i.attributes.CODECS)+'"')&&(i.excludeUntil=1/0)})}},{key:"excludeIncompatibleVariants_",value:function(t){var i=2,n=null,e=void 0;t.attributes.CODECS&&(e=ef(t.attributes.CODECS),n=e.videoCodec,i=e.codecCount),this.master().playlists.forEach(function(t){var e={codecCount:2,videoCodec:null};t.attributes.CODECS&&(e=ef(t.attributes.CODECS)),e.codecCount!==i&&(t.excludeUntil=1/0),e.videoCodec!==n&&(t.excludeUntil=1/0)})}},{key:"updateAdCues_",value:function(i){var n=0,e=this.seekable();e.length&&(n=e.start(0)),function(i,n,e){var r=2<arguments.length&&void 0!==e?e:0;if(i.segments)for(var s=r,o=void 0,a=0;a<i.segments.length;a++){var u=i.segments[a];if(o=o||Xf(n,s+u.duration/2)){if("cueIn"in u){o.endTime=s,o.adEndTime=s,s+=u.duration,o=null;continue}if(s<o.endTime){s+=u.duration;continue}o.endTime+=u.duration}else if("cueOut"in u&&((o=new t.VTTCue(s,s+u.duration,u.cueOut)).adStartTime=s,o.adEndTime=s+parseFloat(u.cueOut),n.addCue(o)),"cueOutCont"in u){var c,h,f=u.cueOutCont.split("/").map(parseFloat),l=eh(f,2);c=l[0],h=l[1],(o=new t.VTTCue(s,s+u.duration,"")).adStartTime=s-c,o.adEndTime=o.adStartTime+h,n.addCue(o)}s+=u.duration}}(i,this.cueTagsTrack_,n)}},{key:"goalBufferLength",value:function(){var t=this.tech_.currentTime(),i=Rf.GOAL_BUFFER_LENGTH,n=Rf.GOAL_BUFFER_LENGTH_RATE,e=Math.max(i,Rf.MAX_GOAL_BUFFER_LENGTH);return Math.min(i+t*n,e)}},{key:"bufferLowWaterLine",value:function(){var t=this.tech_.currentTime(),i=Rf.BUFFER_LOW_WATER_LINE,n=Rf.BUFFER_LOW_WATER_LINE_RATE,e=Math.max(i,Rf.MAX_BUFFER_LOW_WATER_LINE);return Math.min(i+t*n,e)}}]),sl);function sl(t){zc(this,sl);var i=Qc(this,(sl.__proto__||Object.getPrototypeOf(sl)).call(this)),n=t.url,e=t.handleManifestRedirects,r=t.withCredentials,s=t.tech,o=t.bandwidth,a=t.externHls,u=t.useCueTags,c=t.blacklistDuration,h=t.enableLowInitialPlaylist,f=t.sourceType,l=t.seekTo,d=t.cacheEncryptionKeys;if(!n)throw new Error("A non-empty playlist URL is required");nl=a,i.withCredentials=r,i.tech_=s,i.hls_=s.hls,i.seekTo_=l,i.sourceType_=f,i.useCueTags_=u,i.blacklistDuration=c,i.enableLowInitialPlaylist=h,i.useCueTags_&&(i.cueTagsTrack_=i.tech_.addTextTrack("metadata","ad-cues"),i.cueTagsTrack_.inBandMetadataTrackDispatchType=""),i.requestOptions_={withCredentials:r,handleManifestRedirects:e,timeout:null},i.mediaTypes_=function(){var t={};return["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach(function(i){t[i]={groups:{},tracks:{},activePlaylistLoader:null,activeGroup:Ef,activeTrack:Ef,onGroupChanged:Ef,onTrackChanged:Ef}}),t}(),i.mediaSource=new fo.MediaSource,i.mediaSource.addEventListener("sourceopen",i.handleSourceOpen_.bind(i)),i.seekable_=fo.createTimeRanges(),i.hasPlayed_=function(){return!1},i.syncController_=new zf(t),i.segmentMetadataTrack_=s.addRemoteTextTrack({kind:"metadata",label:"segment-metadata"},!1).track,i.decrypter_=new Qf,i.inbandTextTracks_={};var v={hls:i.hls_,mediaSource:i.mediaSource,currentTime:i.tech_.currentTime.bind(i.tech_),seekable:function(){return i.seekable()},seeking:function(){return i.tech_.seeking()},duration:function(){return i.mediaSource.duration},hasPlayed:function(){return i.hasPlayed_()},goalBufferLength:function(){return i.goalBufferLength()},bandwidth:o,syncController:i.syncController_,decrypter:i.decrypter_,sourceType:i.sourceType_,inbandTextTracks:i.inbandTextTracks_,cacheEncryptionKeys:d};return i.masterPlaylistLoader_="dash"===i.sourceType_?new Af(n,i.hls_,i.requestOptions_):new oh(n,i.hls_,i.requestOptions_),i.setupMasterPlaylistLoaderListeners_(),i.mainSegmentLoader_=new _f(fo.mergeOptions(v,{segmentMetadataTrack:i.segmentMetadataTrack_,loaderType:"main"}),t),i.audioSegmentLoader_=new _f(fo.mergeOptions(v,{loaderType:"audio"}),t),i.subtitleSegmentLoader_=new Ff(fo.mergeOptions(v,{loaderType:"vtt"}),t),i.setupSegmentLoaderListeners_(),el.forEach(function(t){i[t+"_"]=function(t){return this.audioSegmentLoader_[t]+this.mainSegmentLoader_[t]}.bind(i,t)}),i.logger_=Mf("MPC"),i.masterPlaylistLoader_.load(),i}function ol(t,i,n){zc(this,ol);var e=t.masterPlaylistController_,r=e[(t.options_.smoothQualityChange?"smooth":"fast")+"QualityChange_"].bind(e);if(i.attributes.RESOLUTION){var s=i.attributes.RESOLUTION;this.width=s.width,this.height=s.height}this.bandwidth=i.attributes.BANDWIDTH,this.id=n,this.enabled=function(t,i,n){return function(e){var r=t.master.playlists[i],s=mh(r),o=bh(r);return void 0===e?o:(e?delete r.disabled:r.disabled=!0,e===o||s||(n(),t.trigger(e?"renditionenabled":"renditiondisabled")),e)}}(t.playlists,i.uri,r)}var al=["seeking","seeked","pause","playing","error"],ul=(Kc(cl,[{key:"monitorCurrentTime_",value:function(){this.checkCurrentTime_(),this.checkCurrentTimeTimeout_&&t.clearTimeout(this.checkCurrentTimeTimeout_),this.checkCurrentTimeTimeout_=t.setTimeout(this.monitorCurrentTime_.bind(this),250)}},{key:"checkCurrentTime_",value:function(){if(this.tech_.seeking()&&this.fixesBadSeeks_())return this.consecutiveUpdates=0,void(this.lastRecordedTime=this.tech_.currentTime());if(!this.tech_.paused()&&!this.tech_.seeking()){var t=this.tech_.currentTime(),i=this.tech_.buffered();if(this.lastRecordedTime===t&&(!i.length||t+.1>=i.end(i.length-1)))return this.techWaiting_();5<=this.consecutiveUpdates&&t===this.lastRecordedTime?(this.consecutiveUpdates++,this.waiting_()):t===this.lastRecordedTime?this.consecutiveUpdates++:(this.consecutiveUpdates=0,this.lastRecordedTime=t)}}},{key:"cancelTimer_",value:function(){this.consecutiveUpdates=0,this.timer_&&(this.logger_("cancelTimer_"),clearTimeout(this.timer_)),this.timer_=null}},{key:"fixesBadSeeks_",value:function(){if(!this.tech_.seeking())return!1;var t=this.seekable(),i=this.tech_.currentTime(),n=void 0;return this.afterSeekableWindow_(t,i,this.media(),this.allowSeeksWithinUnsafeLiveWindow)&&(n=t.end(t.length-1)),this.beforeSeekableWindow_(t,i)&&(n=t.start(0)+.1),void 0!==n&&(this.logger_("Trying to seek outside of seekable at time "+i+" with seekable range "+Oh(t)+". Seeking to "+n+"."),this.seekTo(n),!0)}},{key:"waiting_",value:function(){if(!this.techWaiting_()){var t=this.tech_.currentTime(),i=Ch(this.tech_.buffered(),t);return i.length&&t+3<=i.end(0)?(this.cancelTimer_(),this.seekTo(t),this.logger_("Stopped at "+t+" while inside a buffered region ["+i.start(0)+" -> "+i.end(0)+"]. Attempting to resume playback by seeking to the current time."),void this.tech_.trigger({type:"usage",name:"hls-unknown-waiting"})):void 0}}},{key:"techWaiting_",value:function(){var t=this.seekable(),i=this.tech_.currentTime();if(this.tech_.seeking()&&this.fixesBadSeeks_())return!0;if(this.tech_.seeking()||null!==this.timer_)return!0;if(this.beforeSeekableWindow_(t,i)){var n=t.end(t.length-1);return this.logger_("Fell out of live window at time "+i+". Seeking to live point (seekable end) "+n),this.cancelTimer_(),this.seekTo(n),this.tech_.trigger({type:"usage",name:"hls-live-resync"}),!0}var e=this.tech_.buffered(),r=Gh(e,i);if(this.videoUnderflow_(r,e,i))return this.cancelTimer_(),this.seekTo(i),this.tech_.trigger({type:"usage",name:"hls-video-underflow"}),!0;if(0<r.length){var s=r.start(0)-i;return this.logger_("Stopped at "+i+", setting timer for "+s+", seeking to "+r.start(0)),this.timer_=setTimeout(this.skipTheGap_.bind(this),1e3*s,i),!0}return!1}},{key:"afterSeekableWindow_",value:function(t,i,n,e){var r=3<arguments.length&&void 0!==e&&e;if(!t.length)return!1;var s=t.end(t.length-1)+.1;return!n.endList&&r&&(s=t.end(t.length-1)+3*n.targetDuration),s<i}},{key:"beforeSeekableWindow_",value:function(t,i){return!!(t.length&&0<t.start(0)&&i<t.start(0)-.1)}},{key:"videoUnderflow_",value:function(t,i,n){if(0===t.length){var e=this.gapFromVideoUnderflow_(i,n);if(e)return this.logger_("Encountered a gap in video from "+e.start+" to "+e.end+". Seeking to current time "+n),!0}return!1}},{key:"skipTheGap_",value:function(t){var i=this.tech_.buffered(),n=this.tech_.currentTime(),e=Gh(i,n);this.cancelTimer_(),0!==e.length&&n===t&&(this.logger_("skipTheGap_:","currentTime:",n,"scheduled currentTime:",t,"nextRange start:",e.start(0)),this.seekTo(e.start(0)+Fh),this.tech_.trigger({type:"usage",name:"hls-gap-skip"}))}},{key:"gapFromVideoUnderflow_",value:function(t,i){for(var n=function(t){if(t.length<2)return fo.createTimeRanges();for(var i=[],n=1;n<t.length;n++){var e=t.end(n-1),r=t.start(n);i.push([e,r])}return fo.createTimeRanges(i)}(t),e=0;e<n.length;e++){var r=n.start(e),s=n.end(e);if(i-r<4&&2<i-r)return{start:r,end:s}}return null}}]),cl);function cl(i){var n=this;function e(){return n.monitorCurrentTime_()}function r(){return n.techWaiting_()}function s(){return n.cancelTimer_()}function o(){return n.fixesBadSeeks_()}zc(this,cl),this.tech_=i.tech,this.seekable=i.seekable,this.seekTo=i.seekTo,this.allowSeeksWithinUnsafeLiveWindow=i.allowSeeksWithinUnsafeLiveWindow,this.media=i.media,this.consecutiveUpdates=0,this.lastRecordedTime=null,this.timer_=null,this.checkCurrentTimeTimeout_=null,this.logger_=Mf("PlaybackWatcher"),this.logger_("initialize"),this.tech_.on("seekablechanged",o),this.tech_.on("waiting",r),this.tech_.on(al,s),this.tech_.on("canplay",e),this.dispose=function(){n.logger_("dispose"),n.tech_.off("seekablechanged",o),n.tech_.off("waiting",r),n.tech_.off(al,s),n.tech_.off("canplay",e),n.checkCurrentTimeTimeout_&&t.clearTimeout(n.checkCurrentTimeTimeout_),n.cancelTimer_()}}function hl(t){!function t(i,n){var e=0,r=0,s=fo.mergeOptions(fl,n);function o(){r&&i.currentTime(r)}function a(t){null!=t&&(r=i.duration()!==1/0&&i.currentTime()||0,i.one("loadedmetadata",o),i.src(t),i.trigger({type:"usage",name:"hls-error-reload"}),i.play())}function u(){if(Date.now()-e<1e3*s.errorInterval)i.trigger({type:"usage",name:"hls-error-reload-canceled"});else{if(s.getSource&&"function"==typeof s.getSource)return e=Date.now(),s.getSource.call(i,a);fo.log.error("ERROR: reloadSourceOnError - The option getSource must be a function!")}}function c(){i.off("loadedmetadata",o),i.off("error",u),i.off("dispose",c)}i.ready(function(){i.trigger({type:"usage",name:"hls-error-reload-initialized"})}),i.on("error",u),i.on("dispose",c),i.reloadSourceOnError=function(n){c(),t(i,n)}}(this,t)}var fl={errorInterval:30,getSource:function(t){return t(this.tech({IWillNotUseThisInPlugins:!0}).currentSource_)}};fo.use("*",function(t){return{setSource:function(t,i){i(null,t)},setCurrentTime:function(i){return t.vhs&&t.currentSource().src===t.vhs.source_.src&&t.vhs.setCurrentTime(i),i},play:function(){t.vhs&&t.currentSource().src===t.vhs.source_.src&&t.vhs.setCurrentTime(t.tech_.currentTime())}}});var ll={PlaylistLoader:oh,Playlist:_h,Decrypter:Fc,AsyncStream:_c,decrypt:Vc,utils:Vh,STANDARD_PLAYLIST_SELECTOR:function(){return function(i,n,e,r,s){var o=i.playlists.map(function(i){return{bandwidth:i.attributes.BANDWIDTH||t.Number.MAX_VALUE,width:i.attributes.RESOLUTION&&i.attributes.RESOLUTION.width,height:i.attributes.RESOLUTION&&i.attributes.RESOLUTION.height,playlist:i}});Of(o,function(t,i){return t.bandwidth-i.bandwidth});var a=(o=o.filter(function(t){return!_h.isIncompatible(t.playlist)})).filter(function(t){return _h.isEnabled(t.playlist)});a.length||(a=o.filter(function(t){return!_h.isDisabled(t.playlist)}));var u=a.filter(function(t){return t.bandwidth*Rf.BANDWIDTH_VARIANCE<n}),c=u[u.length-1],h=u.filter(function(t){return t.bandwidth===c.bandwidth})[0];if(!1===s){var f=h||a[0]||o[0];return f?f.playlist:null}var l=u.filter(function(t){return t.width&&t.height});Of(l,function(t,i){return t.width-i.width});var d=l.filter(function(t){return t.width===e&&t.height===r});c=d[d.length-1];var v=d.filter(function(t){return t.bandwidth===c.bandwidth})[0],p=void 0,m=void 0,b=void 0;v||(m=(p=l.filter(function(t){return t.width>e||t.height>r})).filter(function(t){return t.width===p[0].width&&t.height===p[0].height}),c=m[m.length-1],b=m.filter(function(t){return t.bandwidth===c.bandwidth})[0]);var T=b||v||h||a[0]||o[0];return T?T.playlist:null}(this.playlists.master,this.systemBandwidth,parseInt(Gf(this.tech_.el(),"width"),10),parseInt(Gf(this.tech_.el(),"height"),10),this.limitRenditionByPlayerDimensions)},INITIAL_PLAYLIST_SELECTOR:function(){var t=this.playlists.master.playlists.filter(_h.isEnabled);return Of(t,function(t,i){return Bf(t,i)}),t.filter(function(t){return ef(t.attributes.CODECS).videoCodec})[0]||null},comparePlaylistBandwidth:Bf,comparePlaylistResolution:function(i,n){var e=void 0,r=void 0;return i.attributes.RESOLUTION&&i.attributes.RESOLUTION.width&&(e=i.attributes.RESOLUTION.width),n.attributes.RESOLUTION&&n.attributes.RESOLUTION.width&&(r=n.attributes.RESOLUTION.width),(e=e||t.Number.MAX_VALUE)===(r=r||t.Number.MAX_VALUE)&&i.attributes.BANDWIDTH&&n.attributes.BANDWIDTH?i.attributes.BANDWIDTH-n.attributes.BANDWIDTH:e-r},xhr:gh()};function dl(t){return/^(audio|video|application)\/(x-|vnd\.apple\.)?mpegurl/i.test(t)?"hls":/^application\/dash\+xml/i.test(t)?"dash":null}function vl(t,i){for(var n=i.media(),e=-1,r=0;r<t.length;r++)if(t[r].id===n.uri){e=r;break}t.selectedIndex_=e,t.trigger({selectedIndex:e,type:"change"})}["GOAL_BUFFER_LENGTH","MAX_GOAL_BUFFER_LENGTH","GOAL_BUFFER_LENGTH_RATE","BUFFER_LOW_WATER_LINE","MAX_BUFFER_LOW_WATER_LINE","BUFFER_LOW_WATER_LINE_RATE","BANDWIDTH_VARIANCE"].forEach(function(t){Object.defineProperty(ll,t,{get:function(){return fo.log.warn("using Hls."+t+" is UNSAFE be sure you know what you are doing"),Rf[t]},set:function(i){fo.log.warn("using Hls."+t+" is UNSAFE be sure you know what you are doing"),"number"!=typeof i||i<0?fo.log.warn("value of Hls."+t+" must be greater than or equal to 0"):Rf[t]=i}})});var pl="videojs-vhs";function ml(){if(!window.localStorage)return null;var t=window.localStorage.getItem(pl);if(!t)return null;try{return JSON.parse(t)}catch(t){return null}}ll.canPlaySource=function(){return fo.log.warn("HLS is no longer a tech. Please remove it from your player's techOrder.")},ll.supportsNativeHls=function(){var t=i.createElement("video");return!!fo.getTech("Html5").isSupported()&&["application/vnd.apple.mpegurl","audio/mpegurl","audio/x-mpegurl","application/x-mpegurl","video/x-mpegurl","video/mpegurl","application/mpegurl"].some(function(i){return/maybe|probably/i.test(t.canPlayType(i))})}(),ll.supportsNativeDash=!!fo.getTech("Html5").isSupported()&&/maybe|probably/i.test(i.createElement("video").canPlayType("application/dash+xml")),ll.supportsTypeNatively=function(t){return"hls"===t?ll.supportsNativeHls:"dash"===t&&ll.supportsNativeDash},ll.isSupported=function(){return fo.log.warn("HLS is no longer a tech. Please remove it from your player's techOrder.")};var bl=(Yc(Tl,fo.getComponent("Component")),Kc(Tl,[{key:"setOptions_",value:function(){var t=this;if(this.options_.withCredentials=this.options_.withCredentials||!1,this.options_.handleManifestRedirects=this.options_.handleManifestRedirects||!1,this.options_.limitRenditionByPlayerDimensions=!1!==this.options_.limitRenditionByPlayerDimensions,this.options_.smoothQualityChange=this.options_.smoothQualityChange||!1,this.options_.useBandwidthFromLocalStorage=void 0!==this.source_.useBandwidthFromLocalStorage?this.source_.useBandwidthFromLocalStorage:this.options_.useBandwidthFromLocalStorage||!1,this.options_.customTagParsers=this.options_.customTagParsers||[],this.options_.customTagMappers=this.options_.customTagMappers||[],this.options_.cacheEncryptionKeys=this.options_.cacheEncryptionKeys||!1,"number"!=typeof this.options_.blacklistDuration&&(this.options_.blacklistDuration=300),"number"!=typeof this.options_.bandwidth&&this.options_.useBandwidthFromLocalStorage){var i=ml();i&&i.bandwidth&&(this.options_.bandwidth=i.bandwidth,this.tech_.trigger({type:"usage",name:"hls-bandwidth-from-local-storage"})),i&&i.throughput&&(this.options_.throughput=i.throughput,this.tech_.trigger({type:"usage",name:"hls-throughput-from-local-storage"}))}"number"!=typeof this.options_.bandwidth&&(this.options_.bandwidth=Rf.INITIAL_BANDWIDTH),this.options_.enableLowInitialPlaylist=this.options_.enableLowInitialPlaylist&&this.options_.bandwidth===Rf.INITIAL_BANDWIDTH,["withCredentials","limitRenditionByPlayerDimensions","bandwidth","smoothQualityChange","customTagParsers","customTagMappers","handleManifestRedirects","cacheEncryptionKeys"].forEach(function(i){void 0!==t.source_[i]&&(t.options_[i]=t.source_[i])}),this.limitRenditionByPlayerDimensions=this.options_.limitRenditionByPlayerDimensions}},{key:"src",value:function(t,i){var n=this;t&&(this.setOptions_(),this.options_.url=this.source_.src,this.options_.tech=this.tech_,this.options_.externHls=ll,this.options_.sourceType=dl(i),this.options_.seekTo=function(t){n.tech_.setCurrentTime(t),n.setCurrentTime(t)},this.masterPlaylistController_=new rl(this.options_),this.playbackWatcher_=new ul(fo.mergeOptions(this.options_,{seekable:function(){return n.seekable()},media:function(){return n.masterPlaylistController_.media()}})),this.masterPlaylistController_.on("error",function(){fo.players[n.tech_.options_.playerId].error(n.masterPlaylistController_.error)}),this.masterPlaylistController_.selectPlaylist=this.selectPlaylist?this.selectPlaylist.bind(this):ll.STANDARD_PLAYLIST_SELECTOR.bind(this),this.masterPlaylistController_.selectInitialPlaylist=ll.INITIAL_PLAYLIST_SELECTOR.bind(this),this.playlists=this.masterPlaylistController_.masterPlaylistLoader_,this.mediaSource=this.masterPlaylistController_.mediaSource,Object.defineProperties(this,{selectPlaylist:{get:function(){return this.masterPlaylistController_.selectPlaylist},set:function(t){this.masterPlaylistController_.selectPlaylist=t.bind(this)}},throughput:{get:function(){return this.masterPlaylistController_.mainSegmentLoader_.throughput.rate},set:function(t){this.masterPlaylistController_.mainSegmentLoader_.throughput.rate=t,this.masterPlaylistController_.mainSegmentLoader_.throughput.count=1}},bandwidth:{get:function(){return this.masterPlaylistController_.mainSegmentLoader_.bandwidth},set:function(t){this.masterPlaylistController_.mainSegmentLoader_.bandwidth=t,this.masterPlaylistController_.mainSegmentLoader_.throughput={rate:0,count:0}}},systemBandwidth:{get:function(){return Math.floor(1/(1/(this.bandwidth||1)+(0<this.throughput?1/this.throughput:0)))},set:function(){fo.log.error('The "systemBandwidth" property is read-only')}}}),this.options_.bandwidth&&(this.bandwidth=this.options_.bandwidth),this.options_.throughput&&(this.throughput=this.options_.throughput),Object.defineProperties(this.stats,{bandwidth:{get:function(){return n.bandwidth||0},enumerable:!0},mediaRequests:{get:function(){return n.masterPlaylistController_.mediaRequests_()||0},enumerable:!0},mediaRequestsAborted:{get:function(){return n.masterPlaylistController_.mediaRequestsAborted_()||0},enumerable:!0},mediaRequestsTimedout:{get:function(){return n.masterPlaylistController_.mediaRequestsTimedout_()||0},enumerable:!0},mediaRequestsErrored:{get:function(){return n.masterPlaylistController_.mediaRequestsErrored_()||0},enumerable:!0},mediaTransferDuration:{get:function(){return n.masterPlaylistController_.mediaTransferDuration_()||0},enumerable:!0},mediaBytesTransferred:{get:function(){return n.masterPlaylistController_.mediaBytesTransferred_()||0},enumerable:!0},mediaSecondsLoaded:{get:function(){return n.masterPlaylistController_.mediaSecondsLoaded_()||0},enumerable:!0},buffered:{get:function(){return Bh(n.tech_.buffered())},enumerable:!0},currentTime:{get:function(){return n.tech_.currentTime()},enumerable:!0},currentSource:{get:function(){return n.tech_.currentSource_},enumerable:!0},currentTech:{get:function(){return n.tech_.name_},enumerable:!0},duration:{get:function(){return n.tech_.duration()},enumerable:!0},master:{get:function(){return n.playlists.master},enumerable:!0},playerDimensions:{get:function(){return n.tech_.currentDimensions()},enumerable:!0},seekable:{get:function(){return Bh(n.tech_.seekable())},enumerable:!0},timestamp:{get:function(){return Date.now()},enumerable:!0},videoPlaybackQuality:{get:function(){return n.tech_.getVideoPlaybackQuality()},enumerable:!0}}),this.tech_.one("canplay",this.masterPlaylistController_.setupFirstPlay.bind(this.masterPlaylistController_)),this.tech_.on("bandwidthupdate",function(){n.options_.useBandwidthFromLocalStorage&&function(t){if(window.localStorage){var i=ml();i=i?fo.mergeOptions(i,t):t;try{window.localStorage.setItem(pl,JSON.stringify(i))}catch(t){return}}}({bandwidth:n.bandwidth,throughput:Math.round(n.throughput)})}),this.masterPlaylistController_.on("selectedinitialmedia",function(){!function(t){var i=t.playlists;t.representations=function(){return i.master.playlists.filter(function(t){return!mh(t)}).map(function(i){return new ol(t,i,i.uri)})}}(n),function(t){if("dash"===t.options_.sourceType){var i=fo.players[t.tech_.options_.playerId];if(i.eme){var n=function(t,i,n){if(!t)return t;var e={};for(var r in t)e[r]={audioContentType:'audio/mp4; codecs="'+n.attributes.CODECS+'"',videoContentType:'video/mp4; codecs="'+i.attributes.CODECS+'"'},i.contentProtection&&i.contentProtection[r]&&i.contentProtection[r].pssh&&(e[r].pssh=i.contentProtection[r].pssh),"string"==typeof t[r]&&(e[r].url=t[r]);return fo.mergeOptions(t,e)}(t.source_.keySystems,t.playlists.media(),t.masterPlaylistController_.mediaTypes_.AUDIO.activePlaylistLoader.media());n&&(i.currentSource().keySystems=n,i.eme.initializeMediaKeys&&i.eme.initializeMediaKeys())}}}(n)}),this.on(this.masterPlaylistController_,"progress",function(){this.tech_.trigger("progress")}),this.tech_.ready(function(){return n.setupQualityLevels_()}),this.tech_.el()&&this.tech_.src(fo.URL.createObjectURL(this.masterPlaylistController_.mediaSource)))}},{key:"setupQualityLevels_",value:function(){var t=this,i=fo.players[this.tech_.options_.playerId];i&&i.qualityLevels&&(this.qualityLevels_=i.qualityLevels(),this.masterPlaylistController_.on("selectedinitialmedia",function(){!function(t,i){i.representations().forEach(function(i){t.addQualityLevel(i)}),vl(t,i.playlists)}(t.qualityLevels_,t)}),this.playlists.on("mediachange",function(){vl(t.qualityLevels_,t.playlists)}))}},{key:"play",value:function(){this.masterPlaylistController_.play()}},{key:"setCurrentTime",value:function(t){this.masterPlaylistController_.setCurrentTime(t)}},{key:"duration",value:function(){return this.masterPlaylistController_.duration()}},{key:"seekable",value:function(){return this.masterPlaylistController_.seekable()}},{key:"dispose",value:function(){this.playbackWatcher_&&this.playbackWatcher_.dispose(),this.masterPlaylistController_&&this.masterPlaylistController_.dispose(),this.qualityLevels_&&this.qualityLevels_.dispose(),this.player_&&(delete this.player_.vhs,delete this.player_.dash,delete this.player_.hls),this.tech_&&this.tech_.hls&&delete this.tech_.hls,function t(i,n,e){null===i&&(i=Function.prototype);var r=Object.getOwnPropertyDescriptor(i,n);if(void 0===r){var s=Object.getPrototypeOf(i);return null===s?void 0:t(s,n,e)}if("value"in r)return r.value;var o=r.get;return void 0!==o?o.call(e):void 0}(Tl.prototype.__proto__||Object.getPrototypeOf(Tl.prototype),"dispose",this).call(this)}},{key:"convertToProgramTime",value:function(t,i){return function(t){var i=t.playlist,n=t.time,e=void 0===n?void 0:n,r=t.callback;if(!r)throw new Error("getProgramTime: callback must be provided");if(!i||void 0===e)return r({message:"getProgramTime: playlist and time must be provided"});var s=function(t,i){if(!i||!i.segments||0===i.segments.length)return null;for(var n=0,e=void 0,r=0;r<i.segments.length&&!(t<=(n=(e=i.segments[r]).videoTimingInfo?e.videoTimingInfo.transmuxedPresentationEnd:n+e.duration));r++);var s=i.segments[i.segments.length-1];if(s.videoTimingInfo&&s.videoTimingInfo.transmuxedPresentationEnd<t)return null;if(n<t){if(t>n+.25*s.duration)return null;e=s}return{segment:e,estimatedStart:e.videoTimingInfo?e.videoTimingInfo.transmuxedPresentationStart:n-e.duration,type:e.videoTimingInfo?"accurate":"estimate"}}(e,i);if(!s)return r({message:"valid programTime was not found"});if("estimate"===s.type)return r({message:"Accurate programTime could not be determined. Please seek to e.seekTime and try again",seekTime:s.estimatedStart});var o={mediaSeconds:e},a=function(t,i){if(!i.dateTimeObject)return null;var n=t-(i.videoTimingInfo.transmuxedPresentationStart+i.videoTimingInfo.transmuxerPrependedSeconds);return new Date(i.dateTimeObject.getTime()+1e3*n)}(e,s.segment);return a&&(o.programDateTime=a.toISOString()),r(null,o)}({playlist:this.masterPlaylistController_.media(),time:t,callback:i})}},{key:"seekToProgramTime",value:function(t,i,n,e){var r=!(2<arguments.length&&void 0!==n)||n,s=3<arguments.length&&void 0!==e?e:2;return kh({programTime:t,playlist:this.masterPlaylistController_.media(),retryCount:s,pauseAfterSeek:r,seekTo:this.options_.seekTo,tech:this.options_.tech,callback:i})}}]),Tl);function Tl(t,n,e){zc(this,Tl);var r=Qc(this,(Tl.__proto__||Object.getPrototypeOf(Tl)).call(this,n,e.hls));if(n.options_&&n.options_.playerId){var s=fo(n.options_.playerId);s.hasOwnProperty("hls")||Object.defineProperty(s,"hls",{get:function(){return fo.log.warn("player.hls is deprecated. Use player.tech().hls instead."),n.trigger({type:"usage",name:"hls-player-access"}),r},configurable:!0}),s.vhs=r,(s.dash=r).player_=s}if(r.tech_=n,r.source_=t,r.stats={},r.setOptions_(),r.options_.overrideNative&&n.overrideNativeAudioTracks&&n.overrideNativeVideoTracks)n.overrideNativeAudioTracks(!0),n.overrideNativeVideoTracks(!0);else if(r.options_.overrideNative&&(n.featuresNativeVideoTracks||n.featuresNativeAudioTracks))throw new Error("Overriding native HLS requires emulated tracks. See https://git.io/vMpjB");return r.on(i,["fullscreenchange","webkitfullscreenchange","mozfullscreenchange","MSFullscreenChange"],function(){var t=i.fullscreenElement||i.webkitFullscreenElement||i.mozFullScreenElement||i.msFullscreenElement;t&&t.contains(r.tech_.el())&&r.masterPlaylistController_.smoothQualityChange_()}),r.on(r.tech_,"seeking",function(){0===this.tech_.currentTime()&&this.tech_.player_.loop()&&this.setCurrentTime(0)}),r.on(r.tech_,"error",function(){this.masterPlaylistController_&&this.masterPlaylistController_.pauseLoading()}),r.on(r.tech_,"play",r.play),r}var yl={name:"videojs-http-streaming",VERSION:"1.10.3",canHandleSource:function(t,i){var n=fo.mergeOptions(fo.options,1<arguments.length&&void 0!==i?i:{});return yl.canPlayType(t.type,n)},handleSource:function(t,i,n){var e=fo.mergeOptions(fo.options,2<arguments.length&&void 0!==n?n:{});return i.hls=new bl(t,i,e),i.hls.xhr=gh(),i.hls.src(t.src,t.type),i.hls},canPlayType:function(t,i){var n=fo.mergeOptions(fo.options,1<arguments.length&&void 0!==i?i:{}).hls.overrideNative,e=dl(t);return!e||ll.supportsTypeNatively(e)&&!n?"":"maybe"}};return void 0!==fo.MediaSource&&void 0!==fo.URL||(fo.MediaSource=mf,fo.URL=bf),mf.supportsNativeMediaSources()&&fo.getTech("Html5").registerSourceHandler(yl,0),fo.HlsHandler=bl,fo.HlsSourceHandler=yl,fo.Hls=ll,fo.use||fo.registerComponent("Hls",ll),fo.options.hls=fo.options.hls||{},fo.registerPlugin?fo.registerPlugin("reloadSourceOnError",hl):fo.plugin("reloadSourceOnError",hl),fo}(Bs,Hs)});function _s(t){let i=t.url||t.value||"";return t&&"youtube"===t.mode||Ls(i)?"youtube":Us(i)?"dailymotion":Vs(i)?"vimeo":"videojs"}function Us(t){return t&&t.includes("dailymotion.com")}function Ls(t){return t&&t.includes("youtube.com")}function Vs(t){return t&&t.includes("vimeo.com")}function Fs(t){return/^\d+$/.test(t)}function Ws(t){let i=t.url||t.value||"",n=i.split("/"),e=n[n.length-1],r=i;return e?(Us(r)&&(r="https://www.dailymotion.com/embed/video/"+e),Vs(r)&&(Fs(e)||(e=n[n.length-2]),r="https://player.vimeo.com/video/"+e),r):r}function Xs(t,i,n){let e=document.createElement("yoo-videoplayer-core"),r={type:t,videoPlayerCoreParameters:Object.assign({fullscreen:!1,controls:!0},i),modalOptions:Object.assign({modalMode:!0},n)};return f()&&Os.hide(),yt(e,r)}function $s(t){if(t){let i=t.split("=");return i&&i[1]?i[1]:t}return t}function zs(){return window.Vimeo?Promise.resolve(window.Vimeo):gt("https://player.vimeo.com/api/player.js").then(()=>Promise.resolve(window.Vimeo)).catch(()=>Promise.resolve(null))}function Ks(){return window.YT?Promise.resolve(window.YT):gt("https://www.youtube.com/iframe_api").then(()=>new Promise(t=>{setTimeout(()=>{t(window.YT)},300)})).catch(()=>Promise.resolve(null))}function qs(t){return window.DM?Promise.resolve(window.DM):gt("https://api.dmcdn.net/all.js").then(()=>new Promise(i=>{window.DM._$||(window.DM._$=t=>document.getElementById(t),window.DM.$=i=>{let n=St(t,t=>void 0!==wt(t,"#"+i));return n?wt(n,"#"+i):null}),i(window.DM)})).catch(()=>Promise.resolve(null))}function Ys(t){if(t&&t.split){let i=t.split("/");return i[i.length-1]}return t}function Qs(t,i,n){if(!At(t))return t;let e=new h(t);return i&&e.width(i),n&&e.height(n),e.getUrl()}function Js(t){return js(t,{suppressNotSupportedError:!0})}function Zs(){return js.getComponent("Button")}function to(t,i){return i[t.name]||{}}function io(t,i,n,e,r){let s=!0;const o=no(i,e,r);return(i[t].items||[]).forEach(t=>{"videoplayer"===t.type||"document"===t.type||"information"===t.type||"image"===t.type?s=o:to(t,n).validity||(s=!1)}),s}function no(t,i,n){if(t&&t.length>i){let e=t[i].items[0];return[K.information.toString(),K.image.toString()].indexOf(e.type)>=0||n[e.name]&&n[e.name].value}return!1}function eo(t){switch(t.type){case K.text:case K.number:case K.tel:case K.password:case K.email:return t.type}return K.text}function ro(t,i,n,e,r){let s=[];return t&&s.push({type:"goback",text:p("GOBACK"),cssClass:f()?"":" swiper-no-swiping ",handler:()=>r()}),s.push({text:p(i),cssClass:(t?"":"large ")+V()+(f()?"":" swiper-no-swiping "),disabled:n,handler:()=>e()}),s}function so(t){return[{type:"next",text:p("NEXT"),cssClass:"large "+V()+(f()?"":" swiper-no-swiping "),handler:()=>t()}]}function oo(t,i,n,e,r){let s=[];return i?s.push({type:"goback",text:p("GOBACK"),cssClass:f()?"":" swiper-no-swiping",handler:()=>e()}):n&&s.push({type:"preview",text:p("PREVIEW"),cssClass:"light outline "+(f()?"":" swiper-no-swiping"),handler:()=>r()}),s.push({text:t.text,cssClass:t.cssClass,disabled:t.disabled,performHandlerWhenDisabled:t.performHandlerWhenDisabled,handler:i=>t.handler(i)}),s}function ao(t,i,n,e,r){let s=[];return t?(i&&s.push({type:"preview",text:p("PREVIEW"),cssClass:"light outline "+(f()?"":" swiper-no-swiping"),handler:()=>n()}),s.push({text:p("SUBMIT"),cssClass:V()+" large",handler:t=>e(t)})):s.push({text:p(`${b()?"NEXT":"START"}`),cssClass:V()+" large",handler:()=>r()}),s}class uo{constructor(t){let i=[];for(const n in t)i.push([n,t[n]]);this.m=new Map(i)}get(t,i){const n=this.m.get(t);return void 0!==n?n:i}getBoolean(t,i=!1){const n=this.m.get(t);return void 0===n?i:"string"==typeof n?"true"===n:!!n}getNumber(t,i){const n=parseFloat(this.m.get(t));return isNaN(n)?void 0!==i?i:NaN:n}set(t,i){this.m.set(t,i)}}async function co(t,i,n,e,r){if(t)return t.attachViewToDom(i,n,r,e).then(t=>t);if("string"!=typeof n&&!(n instanceof HTMLElement))throw new Error("framework delegate is missing");const s="string"==typeof n?i.ownerDocument.createElement(n):n;return e&&e.forEach(t=>s.classList.add(t)),r&&Object.assign(s,r),i.appendChild(s),s.componentOnReady&&await s.componentOnReady(),s}function ho(t,i){if(i){if(t)return t.removeViewFromDom(i.parentElement,i);i.remove()}return Promise.resolve()}function fo(t){"requestIdleCallback"in window?window.requestIdleCallback(t):setTimeout(t,32)}function lo(t){return t?{[t]:!0}:{}}function vo(t,i){return i?{[`${t}-${i=i.toLocaleLowerCase()}`]:!0}:{}}function po(t,i,n){let e=t;n&&(e+=`-${n.toLowerCase()}`);const r={[e]:!0};return i&&(r[`ion-color-${i}`]=!0),r}function mo(t,i){if(!t)throw new Error("ASSERT: "+i)}function bo(t){return t.timeStamp||Date.now()}function To(t,i){const n="rtl"===t.document.dir;switch(i){case"start":return n;case"end":return!n;default:throw new Error(`"${i}" is not a valid value for [side]. Use "start" or "end" instead.`)}}function yo(t,i){return{[i]:!0,[`${i}-${t}`]:!!t}}function go(t){return t?(Array.isArray(t)?t:t.split(" ")).filter(t=>null!==t&&t.trim).map(t=>t.trim()).filter(t=>""!==t):[]}function So(t){const i={};return go(t).forEach(t=>i[t]=!0),i}function wo(t){return t?{"ion-color":!0,[`ion-color-${t}`]:!0}:null}function Ao(t,i){return!!Pt(i,t)}function Po(t){const i=t.parentNode;return i&&11===i.NODE_TYPE?i.host:i}function Mo(t,i,n=1){let e=[...i];for(;t>n;)t--,e.push(e[e.length-1]+1),e.shift();return e}function Eo(t,i,n=1){let e=[...i];for(;t<n;)t++,e.unshift(e[0]-1),e.pop();return e}export{sn as $,Ci as A,Gi as B,Oi as C,xi as D,Ri as E,Ni as F,Hi as G,ji as H,_i as I,Ui as J,Li as K,Vi as L,Fi as M,Wi as N,Xi as O,$i as P,zi as Q,Ki as R,qi as S,Yi as T,Qi as U,Ji as V,Zi as W,tn as X,nn as Y,en as Z,rn as _,ai as a,je as a$,Zt as a0,Dt as a1,Ct as a2,Gt as a3,Ot as a4,Bt as a5,xt as a6,Rt as a7,Nt as a8,Ht as a9,te as aA,ie as aB,ne as aC,ee as aD,re as aE,se as aF,oe as aG,ae as aH,ue as aI,ce as aJ,he as aK,fe as aL,le as aM,de as aN,ve as aO,pe as aP,ge as aQ,Se as aR,we as aS,Ae as aT,Pe as aU,Me as aV,Ee as aW,Ie as aX,ke as aY,Ne as aZ,He as a_,jt as aa,_t as ab,on as ac,an as ad,un as ae,cn as af,hn as ag,fn as ah,ln as ai,dn as aj,vn as ak,pn as al,mn as am,Pn as an,kn as ao,Dn as ap,Cn as aq,Gn as ar,On as as,Bn as at,xn as au,Rn as av,Nn as aw,Hn as ax,jn as ay,_n as az,ui as b,is as b$,_e as b0,Ue as b1,Le as b2,Ve as b3,Fe as b4,We as b5,Xe as b6,$e as b7,ze as b8,Ke as b9,Pr as bA,Mr as bB,kr as bC,Dr as bD,Cr as bE,Gr as bF,Or as bG,Br as bH,xr as bI,Rr as bJ,Nr as bK,Hr as bL,jr as bM,_r as bN,Ur as bO,Lr as bP,Vr as bQ,Fr as bR,Wr as bS,Xr as bT,$r as bU,zr as bV,Yr as bW,Qr as bX,Jr as bY,Zr as bZ,ts as b_,Ye as ba,Qe as bb,Je as bc,Ze as bd,tr as be,ir as bf,nr as bg,er as bh,rr as bi,sr as bj,or as bk,ar as bl,ur as bm,cr as bn,hr as bo,fr as bp,lr as bq,pr as br,mr as bs,br as bt,Tr as bu,yr as bv,gr as bw,Sr as bx,wr as by,Ar as bz,ci as c,So as c$,ns as c0,es as c1,rs as c2,ss as c3,os as c4,as as c5,us as c6,cs as c7,hs as c8,fs as c9,zs as cA,Ks as cB,qs as cC,Ys as cD,Qs as cE,Js as cF,Zs as cG,to as cH,io as cI,no as cJ,eo as cK,ro as cL,so as cM,oo as cN,ao as cO,uo as cP,co as cQ,ho as cR,fo as cS,lo as cT,vo as cU,po as cV,mo as cW,bo as cX,To as cY,yo as cZ,go as c_,ls as ca,ds as cb,vs as cc,ps as cd,ms as ce,bs as cf,Ts as cg,ys as ch,gs as ci,Ss as cj,ws as ck,As as cl,Ps as cm,Ms as cn,Is as co,ks as cp,Ds as cq,Cs as cr,_s as cs,Us as ct,Ls as cu,Vs as cv,Fs as cw,Ws as cx,Xs as cy,$s as cz,hi as d,wo as d0,Ao as d1,Po as d2,Mo as d3,Eo as d4,Ln as d5,Vn as d6,Fn as d7,Wn as d8,Xn as d9,$n as da,zn as db,Kn as dc,Zn as dd,qn as de,Yn as df,Qn as dg,Jn as dh,Os as di,yn as dj,gn as dk,In as dl,li as e,vi as f,si as g,pi as h,oi as i,mi as j,bi as k,Ti as l,yi as m,gi as n,Si as o,wi as p,Ai as q,fi as r,Pi as s,di as t,Bi as u,Mi as v,Ei as w,Ii as x,ki as y,Di as z};
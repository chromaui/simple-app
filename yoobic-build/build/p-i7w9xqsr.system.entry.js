var __awaiter=this&&this.__awaiter||function(t,i,e,o){return new(e||(e=Promise))(function(n,s){function r(t){try{c(o.next(t))}catch(t){s(t)}}function u(t){try{c(o["throw"](t))}catch(t){s(t)}}function c(t){t.done?n(t.value):new e(function(i){i(t.value)}).then(r,u)}c((o=o.apply(t,i||[])).next())})};var __generator=this&&this.__generator||function(t,i){var e={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},o,n,s,r;return r={next:u(0),throw:u(1),return:u(2)},typeof Symbol==="function"&&(r[Symbol.iterator]=function(){return this}),r;function u(t){return function(i){return c([t,i])}}function c(r){if(o)throw new TypeError("Generator is already executing.");while(e)try{if(o=1,n&&(s=r[0]&2?n["return"]:r[0]?n["throw"]||((s=n["return"])&&s.call(n),0):n.next)&&!(s=s.call(n,r[1])).done)return s;if(n=0,s)r=[r[0]&2,s.value];switch(r[0]){case 0:case 1:s=r;break;case 4:e.label++;return{value:r[1],done:false};case 5:e.label++;n=r[1];r=[0];continue;case 7:r=e.ops.pop();e.trys.pop();continue;default:if(!(s=e.trys,s=s.length>0&&s[s.length-1])&&(r[0]===6||r[0]===2)){e=0;continue}if(r[0]===3&&(!s||r[1]>s[0]&&r[1]<s[3])){e.label=r[1];break}if(r[0]===6&&e.label<s[1]){e.label=s[1];s=r;break}if(s&&e.label<s[2]){e.label=s[2];e.ops.push(r);break}if(s[2])e.ops.pop();e.trys.pop();continue}r=i.call(t,e)}catch(t){r=[6,t];n=0}finally{o=s=0}if(r[0]&5)throw r[1];return{value:r[0]?r[1]:void 0,done:true}}};System.register(["./p-d99b9c19.system.js","./p-76deb591.system.js","./p-40fcf55a.system.js","./p-fd4afab3.system.js","./p-e3fa184f.system.js","./p-90888482.system.js","./p-350cb6c0.system.js"],function(t){"use strict";var i,e,o,n,s,r,u,c,p,l,h,a;return{setters:[function(t){i=t.r;e=t.c;o=t.h;n=t.H;s=t.g},function(t){r=t.t;u=t.S;c=t.p;p=t.q;l=t.c_;h=t.N;a=t.ak},function(){},function(){},function(){},function(){},function(){}],execute:function(){var f=t("yoo_kpi_container",function(){function t(t){i(this,t);this.showTooltip=false;this.showDetail=e(this,"showDetail",7);this.kpiClick=e(this,"kpiClick",7);this.kpiDoubleClick=e(this,"kpiDoubleClick",7);this.kpiLegendItemClick=e(this,"kpiLegendItemClick",7);this.kpiResize=e(this,"kpiResize",7);this.kpiEdit=e(this,"kpiEdit",7);this.kpiEdited=e(this,"kpiEdited",7);this.kpiUpdateColors=e(this,"kpiUpdateColors",7);this.kpiDelete=e(this,"kpiDelete",7);this.kpiDuplicate=e(this,"kpiDuplicate",7);this.kpiCopyToAnotherTab=e(this,"kpiCopyToAnotherTab",7)}t.prototype.getSVG=function(t,i,e,o,n){if(n===void 0){n=0}return __awaiter(this,void 0,void 0,function(){return __generator(this,function(s){if(this.kpi){return[2,this.kpi.getSVG(t,i,e,o,n)]}return[2,Promise.resolve("")]})})};t.prototype.toogleToolsPanel=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){if(this.kpi){this.kpi.toogleToolsPanel()}return[2]})})};t.prototype.componentWillLoad=function(){this.initButtons()};t.prototype.onChangeEditMode=function(){this.initButtons()};t.prototype.initButtons=function(){var t=this;this.buttons=[];this.buttonsResize=[];if(this.isEditMode){this.buttons.push({text:r("EDIT"),icon:"yo-pen",handler:function(){return t.onEdit()}});this.buttonsResize.push({icon:"yo-1x",handler:function(){return t.onResize(1)},cssClass:this.size===1?u():"stable-alt"});this.buttonsResize.push({icon:"yo-2x",handler:function(){return t.onResize(2)},cssClass:this.size===2?u():"stable-alt"});this.buttonsResize.push({icon:"yo-3x",handler:function(){return t.onResize(3)},cssClass:this.size===3?u():"stable-alt"});this.buttonsResize.push({icon:"yo-4x",handler:function(){return t.onResize(4)},cssClass:this.size===4?u():"stable-alt"});this.buttons.push({text:r("DUPLICATE"),icon:"yo-duplicate",handler:function(){return t.onDuplicate()}});this.buttons.push({text:r("COPYTOANOTHERTAB"),icon:"yo-duplicate",handler:function(){return t.onCopyToAnotherTab()}});if(this.type==="chart"){this.buttons.push({text:r("COLOR"),icon:"yo-theme",handler:function(){return t.onUpdateColors()}})}}if(this.type==="chart"&&c()){this.buttons.push({text:r("EXPORTPNG"),icon:"yo-image",handler:function(){return t.onExport()}})}if((this.type==="chart"||this.type==="grid")&&c()){this.buttons.push({text:r("EXPORTCSV"),icon:"yo-file-csv",handler:function(){return t.onExportCSV()}})}if(this.type==="grid"&&c()){this.buttons.push({text:r("EXPORTEXCEL"),icon:"yo-file-excel",handler:function(){return t.onExportXLSX()}})}if(this.isEditMode){this.buttons.push({text:r("DELETE"),icon:"yo-delete",type:"delete",handler:function(){return t.onDelete()}})}};t.prototype.onShowDialog=function(t){this.showDetail.emit(t)};t.prototype.onShowMore=function(){p(this.buttons)};t.prototype.onEdit=function(){this.kpiEdit.emit(true)};t.prototype.onDelete=function(){this.kpiDelete.emit(true)};t.prototype.onUpdateColors=function(){this.kpiUpdateColors.emit(this.config)};t.prototype.onDuplicate=function(){this.kpiDuplicate.emit(true)};t.prototype.onResize=function(t){this.size=t;this.initButtons();this.kpiResize.emit(t)};t.prototype.onCopyToAnotherTab=function(){this.kpiCopyToAnotherTab.emit(true)};t.prototype.onExport=function(){if(this.kpi){this.kpi.export()}};t.prototype.onExportCSV=function(){if(this.kpi){this.kpi.exportCSV()}};t.prototype.onExportXLSX=function(){if(this.kpi){this.kpi.exportXLSX()}};t.prototype.onKpiEdited=function(t){t.stopPropagation();this.kpiEdited.emit(t.detail)};t.prototype.onKpiClick=function(t){t.stopPropagation();this.kpiClick.emit(t.detail)};t.prototype.onKpiDoubleClick=function(t){t.stopPropagation();this.kpiDoubleClick.emit(t.detail)};t.prototype.onKpiLegendItemClick=function(t){if(t&&t.stopPropagation){t.stopPropagation()}if(t&&t.detail){this.kpiLegendItemClick.emit(t.detail)}};t.prototype.renderKpiContent=function(){var t=this;if(!this.config&&!this.forceEmptyState){return o("yoo-loader",{class:"absolute lg"})}else if(!this.config&&this.forceEmptyState){return o("yoo-empty-state",{class:{"absolute small":true,"header-padding":this.host.classList.contains("header-padding")},type:"nodata"})}return[o("div",{class:"kpi-container "+this.type,onClick:function(i){return t.onShowDialog()}},this.renderKpi())]};t.prototype.renderKpi=function(){var t=this;var i;if(this.config.photos&&this.config.photos.length>0){i=this.config.photos[0].value}return o("yoo-kpi",{class:{"header-padding":this.host.classList.contains("header-padding")},ref:function(i){return t.kpi=i},config:this.config,photoSrc:i,type:this.type,isFullScreen:this.isFullScreen,isFullHeight:this.isFullHeight,definition:this.definition,onKpiEdited:function(i){return t.onKpiEdited(i)},onKpiClick:function(i){return t.onKpiClick(i)},onKpiDoubleClick:function(i){return t.onKpiDoubleClick(i)},onKpiLegendItemClick:function(i){return t.onKpiLegendItemClick(i)}})};t.prototype.renderHelpButton=function(t){var i=this;var e=r(t);return o("yoo-tooltip",{content:e,placement:"right",coeffMaxWidth:.85,distance:0,options:{trigger:"click",onShow:function(t){return l(t)},onHide:function(){if(i.showTooltip){i.showTooltip=false}}}},o("yoo-icon",{class:"yo-help stable-alt"}))};t.prototype.render=function(){var t;var i=this;return o(n,{class:Object.assign((t={web:c()},t[this.type||"default"]=true,t),a())},o("div",{class:{container:true,fullscreen:this.isFullScreen,"full-height":this.isFullHeight}},this.isFullScreen||this.hideHeader?null:o("div",{class:"heading"},o("div",{class:"title"},h(this.heading)),this.definition&&this.definition.help&&this.renderHelpButton(this.definition.help),this.isEditMode&&o("yoo-icon",{slot:"icon-only",class:"yo-move text-color"}),this.buttonsResize&&this.buttonsResize.length>0&&this.isEditMode&&c()?o("yoo-context-menu",{contentButtons:this.buttonsResize,class:"inline"},o("div",{class:"icon-container"},o("yoo-icon",{class:"yo-expand-chart text-color"}))):null,this.buttons&&this.buttons.length>0&&(c()?o("yoo-context-menu",{contentButtons:this.buttons},o("div",{class:"icon-container"},o("yoo-icon",{class:"yo-more text-color"}))):o("yoo-icon",{slot:"icon-only",class:"yo-more text-color",onClick:function(t){return i.onShowMore()}}))),o("slot",{name:"start"}),o("div",{class:"content"},this.renderKpiContent()),o("slot",null)))};Object.defineProperty(t.prototype,"host",{get:function(){return s(this)},enumerable:true,configurable:true});Object.defineProperty(t,"watchers",{get:function(){return{isEditMode:["onChangeEditMode"]}},enumerable:true,configurable:true});Object.defineProperty(t,"style",{get:function(){return".iframe-root{top:0;right:0;bottom:0;left:0;position:absolute;color:var(--black);overflow-y:auto;scrollbar-width:none}.iframe-root yoo-app .wrapper{display:-ms-flexbox;display:flex;-ms-flex-direction:row;flex-direction:row;-ms-flex-wrap:wrap;flex-wrap:wrap;height:100%;width:100%}.iframe-root yoo-app .wrapper.center-center{-ms-flex-align:center;align-items:center;-ms-flex-pack:center;justify-content:center;height:100%}.iframe-root::-webkit-scrollbar{display:none}:host,:host .container{display:-ms-flexbox;display:flex;-ms-flex:1;flex:1;-ms-flex-direction:column;flex-direction:column;min-height:0}:host .container{width:100%;border-bottom:10px solid var(--stable-ultralight,#fafafa);background:var(--light,#fff)}:host .container.fullscreen{border-bottom:none}:host .container:not(.fullscreen) .content yoo-kpi{pointer-events:none}:host .container .content{position:relative;width:100%}:host .container .content,:host .container .kpi-container{display:-ms-flexbox;display:flex;-ms-flex:1;flex:1;-ms-flex-direction:column;flex-direction:column;min-height:0}:host .container .kpi-container.carousel,:host .container .kpi-container.map{overflow:hidden}:host .container .kpi-container.carousel{border-bottom:1px solid var(--stable-40,hsla(0,0%,67.8%,.4))}:host .heading{display:-ms-flexbox;display:flex;-ms-flex-direction:row;flex-direction:row;padding:.5rem;font-size:var(--font-size-04,1.125rem);text-align:center}:host .heading .title{overflow:hidden;text-overflow:ellipsis;-ms-flex:1;flex:1;white-space:nowrap}:host .heading yoo-icon{margin-top:.2rem;margin-left:1rem}:host(.no-border) .container{border-top:none;border-bottom:none}"},enumerable:true,configurable:true});return t}())}}});
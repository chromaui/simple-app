import{r as s,c as t,h as i,H as e,g as n}from"./p-0d847530.js";import{cW as o,i as a,b as l,bl as c,A as h,cB as r,cC as u,t as m,cO as d,N as v,z as y,p}from"./p-384bfcf6.js";import"./p-0f3d65ca.js";import"./p-8cff990b.js";import"./p-0d62bf9d.js";import{dd as f}from"./p-d70b188c.js";import"./p-815d6c40.js";const S=class{constructor(i){s(this,i),this.isTabbarHidden=!1,this.book=t(this,"book",7),this.showScoreChart=t(this,"showScoreChart",7),this.showUser=t(this,"showUser",7),this.shouldClose=t(this,"shouldClose",7)}onHideTabbar(s){if(this.isTabbarHidden=o(s,this.footer,this.isTabbarHidden),a()&&l()||c()){const s=100;let t=this.isTabbarHidden?"none":"block";setTimeout(()=>{this.footer&&(this.footer.style.display=t)},this.isTabbarHidden?s:0)}}componentWillLoad(){this.isMobile=h()}getSizeContainer(){let s=window.innerHeight;return s=this.tagContainer?r(this.host,s,this.tagContainer):r(this.host,s),{height:(s=u(s,".mission-footer",this.host))+"px"}}onBook(s,t){t.stopPropagation(),this.book.emit(s)}onScoreSelect(s){this.showScoreChart.emit(s)}onCloseIconClicked(){this.shouldClose.emit(!0)}renderPriority(){return this.mission.priority&&i("li",{class:"menu-item"},i("div",{class:"menu-left"},i("span",{class:"menu-icon"},i("yoo-icon",{class:"yo-priority"})),i("div",{class:"border"})),i("div",{class:"menu-right"},i("div",{class:"menu-title"},m("PRIORITY")),this.isMobile?i("div",{class:"menu-content"},"P",this.mission.priority):i("yoo-form-star-rating",{value:this.mission.priority,readonly:!0})))}renderButtonFooter(){if(this.isBookable&&this.isBookable(this.mission)){let s;return s=this.mission.status?[...d()?[]:[{text:m("UNBOOK"),cssClass:"light unbook outline",handler:s=>this.onBook("unbook",s)}],{type:"continue",text:m("CONTINUE"),cssClass:"continue success",handler:s=>this.onBook("continue",s)}]:[{type:"start",text:m("START"),cssClass:"success large",handler:s=>this.onBook("start",s)}],i("yoo-form-footer",{ref:s=>this.footer=s,buttons:s})}return null}renderSimpleSection(s,t,e,n=!1,o=!1){return i("li",{class:"menu-item"},i("div",{class:"menu-left"},i("span",{class:"menu-icon"},i("yoo-icon",{class:e})),o?null:i("div",{class:"border"})),i("div",{class:"menu-right"},i("div",{class:"menu-title"},v(t)),n?i("div",{class:"menu-content",innerHTML:v(s)}):i("div",{class:"menu-content"},v(s))))}renderServiceData(){let s={title:"GENRAL",items:[]};return this.serviceSlides&&this.serviceSlides.length>0&&this.serviceSlides.forEach(t=>{t.items&&t.items.length>0&&(s.items=s.items.concat(t.items))}),i("li",{class:"menu-item"},i("div",{class:"menu-left"},i("span",{class:"menu-icon"},i("yoo-icon",{class:"yo-mission"}))),i("div",{class:"menu-right"},i("div",{class:"menu-title"},m("MYREQUEST")),i("div",{class:"menu-content"},i("yoo-form-dynamic",{class:"inline",slides:[s],data:this.mission.serviceData,forceReadonly:!0,suffix:".value",animated:!1,showRecap:!1}))))}renderUserSection(s,t,e,n){return s&&(s.email||s.firstName||s.lastName)&&i("li",{class:"menu-item",onClick:()=>this.showUser.emit(s)},i("div",{class:"menu-left"},i("span",{class:"menu-icon"},i("yoo-icon",{class:e})),i("div",{class:"border"})),i("div",{class:"menu-right"},i("div",{class:"menu-title"},m(t)),i("div",{class:"menu-content menu-requestor"},i("yoo-avatar",{class:"s",avatarIconSize:"s",user:s}),i("span",{class:"text"},s.firstName+" "+s.lastName),n&&i("div",{class:"mission-date"},f.dateFormat.transform(n,"L")))))}renderMission(){const s=y().user&&y().user.locationRef&&y().user.locationRef===this.mission.locationRef;let t={},e={},n={},o={};return this.mission&&(t=this.mission.description,e=this.mission.location,n=this.mission.creator,o=this.mission.owner),this.mission&&[i("div",{class:{"mission-detail":!0,web:!this.isMobile}},i("yoo-ion-content",{class:"bg-light no-scrollbar",scrollEvents:!0},i("div",null,i("div",{class:"mission-content"},i("yoo-mission-heading",{mission:this.mission,progress:this.progress&&this.progress.value?this.progress.value:null}),i("ul",{class:"menu"},this.mission.description&&this.mission.description.distanceMin&&this.renderSimpleSection(this.mission.description.distanceMin.toLocaleString(),"GEOFENCINGDISTANCEMIN","yo-pin-selected",!1),this.renderPriority(),t&&t.text&&this.renderSimpleSection(t.text,"MISSIONDESCRIPTION","yo-lesson",!0),this.mission.address&&!s&&this.renderSimpleSection(this.mission.address,"ADDRESS","yo-map",!0),i("yoo-mission-contents",{slidesNumber:this.slidesNumber,photosNumber:this.photosNumber,questionsNumber:this.questionsNumber}),e&&(e.contactname||e.contactphone||e.contactemail)&&i("li",{class:"menu-item"},i("div",{class:"menu-left"},i("span",{class:"menu-icon"},i("yoo-icon",{class:"yo-contact"})),i("div",{class:"border"})),i("div",{class:"menu-right"},i("div",{class:"menu-title"},m("CONTACT")),i("div",{class:"menu-content"},e.contactname&&i("div",{class:"menu-content-contact",innerHTML:e.contactname}),e.contactemail&&i("div",{class:"menu-content-contact",innerHTML:e.contactemail}),e.contactphone&&i("div",{class:"menu-content-contact",innerHTML:e.contactphone})))),this.mission.comments&&this.renderSimpleSection(this.mission.comments,"NOTES","yo-note",!0),e&&e.info&&this.renderSimpleSection(e.info,"INFO","yo-info",!0,!0),this.mission.originalUnvalidatedReason&&this.renderSimpleSection(this.mission.originalUnvalidatedReason,"COMMENTS","yo-comment",!0),this.renderUserSection(n,"REQUESTOR","yo-plus",this.mission._ect),o&&o._id&&o._id!==y().userId&&this.renderUserSection(o,this.mission.isAssigned?"ASSIGNEE":"STARTEDBY","yo-user"),this.mission.duration&&this.renderSimpleSection(this.mission.duration+" min","MISSIONDURATION","yo-plus"),this.mission.validFrom||this.mission.validUntil&&this.renderSimpleSection((f.dateFormat.transform(this.mission.validFrom,"L LT")||"?")+" - "+(f.dateFormat.transform(this.mission.validUntil,"L LT")||"?"),"VALIDITY","yo-plus"),this.serviceSlides&&this.serviceSlides.length>0&&this.renderServiceData()),i("yoo-mission-score",{charts:this.charts,header:"PREVIOUSSCORE",networkScore:this.networkScore}),i("slot",null)),i("slot",{name:"end"}),i("div",{class:"scroll-spacer"}))),this.renderButtonFooter())]}renderMenuItem(s,t=!0){return i("li",{class:"menu-item"},this.renderMenuLeft("yo-link"),this.renderMenuRight(s,t))}renderMenuRight(s,t){return i("div",{class:"menu-right"},i("div",{class:"menu-title"},m(s.toUpperCase())),i("div",{class:"menu-content"},t?i("yoo-form-dynamic",{class:"inline",slides:[{title:"GENERAL",items:[this.mission.todo.field]}],data:{[this.mission.todo.field.name]:Object.assign({value:this.mission.todo.fieldValue},this.mission.todo.fieldExtra)},forceReadonly:!0,suffix:".value",animated:!1,showRecap:!1}):i("yoo-form-star-rating",{value:this.mission.todo.priority,readonly:!0})))}renderMenuLeft(s){return i("div",{class:"menu-left"},i("span",{class:"menu-icon"},i("yoo-icon",{class:s})),i("div",{class:"border"}))}renderTodo(){const s=y().user&&y().user.locationRef&&y().user.locationRef===this.mission.locationRef;return this.mission&&i("div",{class:"mission-detail mission-todo "+(this.isMobile?"":"web")},i("div",{class:"mission-content"},i("yoo-mission-heading",{mission:this.mission,progress:this.progress&&this.progress.value&&this.progress.value}),i("ul",{class:"menu"},this.mission.todo&&this.mission.todo.field&&this.mission.todo.fieldValue&&this.renderMenuItem("LINKEDTO",!0),this.mission.todo&&this.mission.todo.priority&&this.renderMenuItem("PRIORITY",!1),this.renderUserSection(this.mission.creator,"CREATEDBY","yo-user",this.mission._ect),this.renderUserSection(this.mission.owner,"ASSIGNTO","yo-user"),this.mission.address&&!s&&this.renderSimpleSection(this.mission.address,"ADDRESS","yo-map",!0),this.mission.originalUnvalidatedReason&&this.renderSimpleSection(this.mission.originalUnvalidatedReason,"COMMENTS","yo-comment",!0)),i("slot",null)))}renderBasedOnType(){if(this.mission&&this.mission.type)switch(this.mission.type){case"todo":return this.renderTodo();case"mission":case"poll":case"service":default:return this.renderMission()}return[]}render(){return i(e,{class:{web:p()}},this.renderBasedOnType())}get host(){return n(this)}static get style(){return".iframe-root{top:0;right:0;bottom:0;left:0;position:absolute;color:var(--black);overflow-y:auto;scrollbar-width:none}.iframe-root yoo-app .wrapper{display:-ms-flexbox;display:flex;-ms-flex-direction:row;flex-direction:row;-ms-flex-wrap:wrap;flex-wrap:wrap;height:100%;width:100%}.iframe-root yoo-app .wrapper.center-center{-ms-flex-align:center;align-items:center;-ms-flex-pack:center;justify-content:center;height:100%}.iframe-root::-webkit-scrollbar{display:none}:host{height:100%;font-size:var(--font-size-03,1rem);font-weight:var(--font-weight-02,400)}:host .mission-detail{display:-ms-flexbox;display:flex;-ms-flex-direction:column;flex-direction:column;height:100%}:host .mission-detail .scroll-spacer{height:5.75rem}:host .mission-detail .mission-content{padding:var(--padding,1rem)}:host .mission-detail .mission-content .menu{list-style:none outside none;background:none repeat scroll 0 0 transparent;border:0 none;font-size:100%;margin:0;outline:0 none;vertical-align:baseline;-webkit-tap-highlight-color:transparent;margin-top:1rem;padding:0;list-style:none}:host .mission-detail .mission-content .menu .menu-item{display:-ms-flexbox;display:flex;-ms-flex-direction:row;flex-direction:row}:host .mission-detail .mission-content .menu .menu-item .menu-left{display:-ms-flexbox;display:flex;-ms-flex-direction:column;flex-direction:column;-ms-flex-align:center;align-items:center}:host .mission-detail .mission-content .menu .menu-item .menu-left .menu-icon{height:1.875rem;width:1.875rem}:host .mission-detail .mission-content .menu .menu-item .menu-left .menu-icon yoo-icon{height:1.875rem;width:1.875rem;font-size:var(--font-size-04,1.125rem);display:-ms-flexbox;display:flex;-ms-flex-pack:center;justify-content:center;background-color:var(--success,#04cc99);color:var(--always-light,#fff);border-radius:50%;line-height:1.875rem;padding:0}:host .mission-detail .mission-content .menu .menu-item .menu-left .border{width:1px;height:100%;background-color:var(--stable-alt,#d0d0d0)}:host .mission-detail .mission-content .menu .menu-item .menu-right{margin-left:.625rem;width:100%;overflow:hidden}:host .mission-detail .mission-content .menu .menu-item .menu-right .menu-title{font-weight:var(--font-weight-03,700);line-height:1.125rem;margin-top:.375rem}:host .mission-detail .mission-content .menu .menu-item .menu-right .menu-content{margin-top:.25rem;margin-bottom:1.25rem;color:var(--text-color,#807f83)}:host .mission-detail .mission-content .menu .menu-item .menu-right .menu-content a,:host .mission-detail .mission-content .menu .menu-item .menu-right .menu-content abbr,:host .mission-detail .mission-content .menu .menu-item .menu-right .menu-content acronym,:host .mission-detail .mission-content .menu .menu-item .menu-right .menu-content address,:host .mission-detail .mission-content .menu .menu-item .menu-right .menu-content applet,:host .mission-detail .mission-content .menu .menu-item .menu-right .menu-content big,:host .mission-detail .mission-content .menu .menu-item .menu-right .menu-content blockquote,:host .mission-detail .mission-content .menu .menu-item .menu-right .menu-content body,:host .mission-detail .mission-content .menu .menu-item .menu-right .menu-content caption,:host .mission-detail .mission-content .menu .menu-item .menu-right .menu-content cite,:host .mission-detail .mission-content .menu .menu-item .menu-right .menu-content code,:host .mission-detail .mission-content .menu .menu-item .menu-right .menu-content dd,:host .mission-detail .mission-content .menu .menu-item .menu-right .menu-content del,:host .mission-detail .mission-content .menu .menu-item .menu-right .menu-content dfn,:host .mission-detail .mission-content .menu .menu-item .menu-right .menu-content div,:host .mission-detail .mission-content .menu .menu-item .menu-right .menu-content dl,:host .mission-detail .mission-content .menu .menu-item .menu-right .menu-content dt,:host .mission-detail .mission-content .menu .menu-item .menu-right .menu-content em,:host .mission-detail .mission-content .menu .menu-item .menu-right .menu-content fieldset,:host .mission-detail .mission-content .menu .menu-item .menu-right .menu-content font,:host .mission-detail .mission-content .menu .menu-item .menu-right .menu-content form,:host .mission-detail .mission-content .menu .menu-item .menu-right .menu-content h1,:host .mission-detail .mission-content .menu .menu-item .menu-right .menu-content h2,:host .mission-detail .mission-content .menu .menu-item .menu-right .menu-content h3,:host .mission-detail .mission-content .menu .menu-item .menu-right .menu-content h4,:host .mission-detail .mission-content .menu .menu-item .menu-right .menu-content h5,:host .mission-detail .mission-content .menu .menu-item .menu-right .menu-content h6,:host .mission-detail .mission-content .menu .menu-item .menu-right .menu-content html,:host .mission-detail .mission-content .menu .menu-item .menu-right .menu-content iframe,:host .mission-detail .mission-content .menu .menu-item .menu-right .menu-content img,:host .mission-detail .mission-content .menu .menu-item .menu-right .menu-content ins,:host .mission-detail .mission-content .menu .menu-item .menu-right .menu-content kbd,:host .mission-detail .mission-content .menu .menu-item .menu-right .menu-content label,:host .mission-detail .mission-content .menu .menu-item .menu-right .menu-content legend,:host .mission-detail .mission-content .menu .menu-item .menu-right .menu-content li,:host .mission-detail .mission-content .menu .menu-item .menu-right .menu-content object,:host .mission-detail .mission-content .menu .menu-item .menu-right .menu-content ol,:host .mission-detail .mission-content .menu .menu-item .menu-right .menu-content p,:host .mission-detail .mission-content .menu .menu-item .menu-right .menu-content pre,:host .mission-detail .mission-content .menu .menu-item .menu-right .menu-content q,:host .mission-detail .mission-content .menu .menu-item .menu-right .menu-content s,:host .mission-detail .mission-content .menu .menu-item .menu-right .menu-content samp,:host .mission-detail .mission-content .menu .menu-item .menu-right .menu-content small,:host .mission-detail .mission-content .menu .menu-item .menu-right .menu-content span,:host .mission-detail .mission-content .menu .menu-item .menu-right .menu-content strike,:host .mission-detail .mission-content .menu .menu-item .menu-right .menu-content strong,:host .mission-detail .mission-content .menu .menu-item .menu-right .menu-content sub,:host .mission-detail .mission-content .menu .menu-item .menu-right .menu-content sup,:host .mission-detail .mission-content .menu .menu-item .menu-right .menu-content table,:host .mission-detail .mission-content .menu .menu-item .menu-right .menu-content tbody,:host .mission-detail .mission-content .menu .menu-item .menu-right .menu-content td,:host .mission-detail .mission-content .menu .menu-item .menu-right .menu-content tfoot,:host .mission-detail .mission-content .menu .menu-item .menu-right .menu-content th,:host .mission-detail .mission-content .menu .menu-item .menu-right .menu-content thead,:host .mission-detail .mission-content .menu .menu-item .menu-right .menu-content tr,:host .mission-detail .mission-content .menu .menu-item .menu-right .menu-content tt,:host .mission-detail .mission-content .menu .menu-item .menu-right .menu-content ul,:host .mission-detail .mission-content .menu .menu-item .menu-right .menu-content var{margin:0;padding:0;border:0;outline:0;font-weight:inherit;font-style:inherit;font-size:100%;font-family:inherit;vertical-align:baseline;-webkit-margin-before:0;-webkit-margin-after:0;-webkit-margin-start:0;-webkit-margin-end:0}:host .mission-detail .mission-content .menu .menu-item .menu-right .menu-title{margin-bottom:.625rem}:host .mission-detail .mission-content .menu .menu-item .menu-right .menu-content span{margin-right:1.25rem}:host .mission-detail .mission-content .menu .menu-item .menu-right .menu-content yoo-avatar{margin-right:.3125rem}:host .mission-detail .mission-content .menu .menu-item .menu-right .menu-content .menu-content-contact{margin-bottom:var(--padding-10,.625rem)}:host .mission-detail .mission-content .menu .menu-item .menu-right .menu-content .text{-ms-flex:1;flex:1;white-space:nowrap}:host .mission-detail .mission-content .menu .menu-item .menu-right .menu-content .mission-date{color:var(--text-color,#807f83);font-weight:var(--font-weight-02,400)}:host .mission-detail .mission-content .menu .menu-item .menu-right .menu-requestor{display:-ms-flexbox;display:flex}:host .mission-detail .mission-content .menu .menu-item:last-child .menu-left .border{display:none}:host .mission-detail .mission-content .menu yoo-mission-contents:last-child{--display-border:none}:host .mission-todo .mission-content .menu .menu-item .menu-right .menu-title{font-weight:var(--font-weight-02,400)}:host(.web){border-radius:8px;background:var(--light,#fff);-webkit-box-shadow:var(--tile-shadow,0 5px 15px 3px rgba(40,47,54,.08));box-shadow:var(--tile-shadow,0 5px 15px 3px rgba(40,47,54,.08))}:host(.web) yoo-header yoo-ion-toolbar{height:3.75rem}:host(.web) .mission-footer{-ms-flex-pack:start;justify-content:flex-start;padding-right:1.875rem;padding-left:1.875rem;border-radius:8px;-webkit-box-shadow:var(--tile-shadow,0 5px 15px 3px rgba(40,47,54,.08));box-shadow:var(--tile-shadow,0 5px 15px 3px rgba(40,47,54,.08))}:host(.web) .mission-footer yoo-button{margin-right:var(--padding-10,.625rem)}:host(.web) .mission-footer .unbook{-ms-flex-order:2;order:2}:host(.web) .mission-footer .continue{-ms-flex-order:1;order:1}:host(.border) .mission-detail.web yoo-ion-content{border-radius:.375rem}:host(.border) .mission-detail.web yoo-form-footer{--border-radius:0 0 0.375rem 0.375rem}:host .score-item .mission-title{margin-top:1rem;margin-bottom:var(--padding-15,.9375rem);font-size:var(--font-size-07,1.75rem);line-height:2.0625rem}:host .score-item .menu-content .score-active-container{display:-ms-flexbox;display:flex;-ms-flex-direction:row;flex-direction:row;margin-bottom:2rem}:host .score-item .menu-content .menu-content-scoring{padding-bottom:.5rem}:host .score-item .menu-content .menu-content-scoring .centered{text-align:center;padding:.5rem}:host .score-item .menu-content .menu-content-scoring .network{color:var(--text-color,#807f83);margin-top:1rem}:host .score-item .menu-content .menu-content-scoring.extra-score .score-container{display:-ms-flexbox;display:flex;-ms-flex-pack:justify;justify-content:space-between}:host .score-item .menu-content .menu-content-scoring.extra-score .score-container.points-container{-ms-flex-align:center;align-items:center;padding:1em .5rem}:host .score-item .menu-content .menu-content-scoring.extra-score .score-container.contrasted{background-color:var(--stable-light-40,hsla(0,0%,94.5%,.4))}:host .score-item .menu-content .menu-content-scoring.points{padding:0!important}:host .score-item .menu-content .menu-content-scoring.mixed{padding-top:.75rem}:host .score-item .menu-content .menu-content-scoring.no-divider{padding-top:0}:host .score-item .menu-content .menu-content-scoring.divider{border-bottom:1px solid var(--stable-light,#f1f1f1);padding-bottom:.75rem;padding-top:0}"}};export{S as yoo_mission_detail};
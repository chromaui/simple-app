import{r as t,c as s,h as i,g as e}from"./p-0d847530.js";import{d5 as r,W as h,t as n}from"./p-384bfcf6.js";import"./p-0f3d65ca.js";import"./p-8cff990b.js";import"./p-0d62bf9d.js";import"./p-d70b188c.js";import"./p-815d6c40.js";const o=class{constructor(i){t(this,i),this.value=[[]],this.reverseValueDimensions=!1,this.columns=[],this.validityChanged=s(this,"validityChanged",7),this.inputBlurred=s(this,"inputBlurred",7),this.inputFocused=s(this,"inputFocused",7),this.inputChanged=s(this,"inputChanged",7)}componentWillLoad(){this.inputValues=this.getInputValue(),r(this)}validate(){let t=!0;return this.required&&!this.value&&(t=!1),this.validity&&this.validity===t||(this.validityChanged.emit(t),this.validity=t),this.validity}getInputValue(){return this.reverseValueDimensions?this.reverseValues(this.value):this.value}getOutputValue(){return this.reverseValueDimensions?this.reverseValues(this.inputValues):this.inputValues}reverseValues(t){const s=t.reduce((t,s)=>Math.max(s.length,t),0);return[...Array(s)].map((s,i)=>t.map(t=>t[i]))}onAddButtonClicked(t){t.rows=(t.rows||1)+1,this.host.forceUpdate()}onInputChanged(t,s,i,e){t.stopPropagation(),this.inputValues[s][i]=h(this.inputValues[s][i])||e.file?e:e.text,this.inputChanged.emit(this.getOutputValue())}renderColumn(t,s,e,r,o){let u,a=n(t.label);t.orderInLabel&&(a+=" "+(s+1).toString()),0===s&&t.title&&(u=i("div",{class:"title"},n(t.title)));let l,d=h(o)?o.text:o,p=h(o)?o.file&&o.file._downloadURL||"":o||"";return t.hasImage&&(l=i("div",{class:"image-container"},i("yoo-form-capture",{value:p,onInputChanged:t=>this.onInputChanged(t,s,e,{file:t.detail}),multiple:!1,type:"photo"}))),i("div",{class:"column"},u,i("yoo-form-input-container",{field:{title:a},required:t.required},l,i("yoo-form-input",{value:d,class:{},maxCharacters:t.maxCharacters,type:"text",onInputChanged:t=>this.onInputChanged(t,s,e,{text:t.detail}),onInputFocused:t=>this.inputFocused.emit(t),onInputBlurred:t=>this.inputBlurred.emit(t)})),r&&i("yoo-button",{class:"danger-light small margin-10",icon:"yo-circle-plus",onClick:()=>this.onAddButtonClicked(t),text:n("ADD")}))}renderEmptyColumn(){return i("div",{class:"empty-column"},"empty")}renderRow(t,s){const e=this.columns.map((i,e)=>{let r=i.rows||s;i.rows=r;let h=i.maxRows||1/0,n=(t+1===s||r===t+1)&&t+1<h&&!i.hideButton,o=r>=t+1&&t+1<=h||i.linkedRow;return this.inputValues[t]&&this.inputValues[t][e]?this.renderColumn(i,t,e,n,this.inputValues[t][e]):o?this.renderColumn(i,t,e,n):this.renderEmptyColumn()});return i("div",{class:"row"},e)}renderReadonly(){return i("div",{class:"readonly"},this.inputValues)}renderEditable(){const t=this.columns.reduce((t,s)=>Math.max(s.rows||1,t),this.inputValues.length);return[...Array(t)].map((s,i)=>this.renderRow(i,t))}render(){if(this.inputValues&&this.inputValues.length)return this.readonly?this.renderReadonly():this.renderEditable()}get host(){return e(this)}static get style(){return".iframe-root{top:0;right:0;bottom:0;left:0;position:absolute;color:var(--black);overflow-y:auto;scrollbar-width:none}.iframe-root yoo-app .wrapper{display:-ms-flexbox;display:flex;-ms-flex-direction:row;flex-direction:row;-ms-flex-wrap:wrap;flex-wrap:wrap;height:100%;width:100%}.iframe-root yoo-app .wrapper.center-center{-ms-flex-align:center;align-items:center;-ms-flex-pack:center;justify-content:center;height:100%}.iframe-root::-webkit-scrollbar{display:none}:host .row{display:-ms-flexbox;display:flex}:host .row .column,:host .row .empty-column{-ms-flex:1;flex:1}:host .row .column yoo-form-input-container{padding:var(--padding-10,.625rem)}"}};export{o as yoo_form_multi_input};
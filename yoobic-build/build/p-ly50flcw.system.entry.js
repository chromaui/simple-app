var __awaiter=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function s(e){try{l(r.next(e))}catch(e){o(e)}}function a(e){try{l(r["throw"](e))}catch(e){o(e)}}function l(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(s,a)}l((r=r.apply(e,t||[])).next())})};var __generator=this&&this.__generator||function(e,t){var n={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},r,i,o,s;return s={next:a(0),throw:a(1),return:a(2)},typeof Symbol==="function"&&(s[Symbol.iterator]=function(){return this}),s;function a(e){return function(t){return l([e,t])}}function l(s){if(r)throw new TypeError("Generator is already executing.");while(n)try{if(r=1,i&&(o=s[0]&2?i["return"]:s[0]?i["throw"]||((o=i["return"])&&o.call(i),0):i.next)&&!(o=o.call(i,s[1])).done)return o;if(i=0,o)s=[s[0]&2,o.value];switch(s[0]){case 0:case 1:o=s;break;case 4:n.label++;return{value:s[1],done:false};case 5:n.label++;i=s[1];s=[0];continue;case 7:s=n.ops.pop();n.trys.pop();continue;default:if(!(o=n.trys,o=o.length>0&&o[o.length-1])&&(s[0]===6||s[0]===2)){n=0;continue}if(s[0]===3&&(!o||s[1]>o[0]&&s[1]<o[3])){n.label=s[1];break}if(s[0]===6&&n.label<o[1]){n.label=o[1];o=s;break}if(o&&n.label<o[2]){n.label=o[2];n.ops.push(s);break}if(o[2])n.ops.pop();n.trys.pop();continue}s=t.call(e,n)}catch(e){s=[6,e];i=0}finally{r=o=0}if(s[0]&5)throw s[1];return{value:s[0]?s[1]:void 0,done:true}}};System.register(["./p-d99b9c19.system.js","./p-76deb591.system.js","./p-40fcf55a.system.js","./p-fd4afab3.system.js","./p-e3fa184f.system.js","./p-90888482.system.js","./p-350cb6c0.system.js"],function(e){"use strict";var t,n,r,i,o,s,a,l,c,u,h;return{setters:[function(e){t=e.r;n=e.c;r=e.h;i=e.H;o=e.g},function(e){s=e.aq;a=e.b8;l=e.b9;c=e.dj;u=e.t;h=e.ak},function(){},function(){},function(){},function(){},function(){}],execute:function(){var f=e("yoo_form_connect",function(){function e(e){t(this,e);this.value=null;this.overlapThreshold="50%";this.hoverColor="stable-light";this.colorArray=["warning","accent","royal","info","energized"];this.validityChanged=n(this,"validityChanged",7);this.inputChanged=n(this,"inputChanged",7);this.dragEnded=n(this,"dragEnded",7)}e.prototype.requiredWatch=function(){this.validate()};e.prototype.isValid=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){this.validityChanged.emit(this.validity);return[2,this.validity]})})};e.prototype.componentWillLoad=function(){this.dragEnded.emit(true);this.initUserAnswersArray()};e.prototype.componentDidLoad=function(){this.getElementsList();this.getScrollableArea();this.initItems();this.initGSAPDraggable();this.preserveColors()};e.prototype.validate=function(){return this.checkAnswersValidity()};e.prototype.getBackgroundColorPanel=function(){return this.colorArray.map(function(e){return"bg-"+e})};e.prototype.getElementsList=function(){if(this.outerContainerElement){this.leftButtonsElements=Array.from(this.innerContainerElement.querySelectorAll("div.draggable"));this.rightButtonsElements=Array.from(this.innerContainerElement.querySelectorAll("div.connectable"))}};e.prototype.getScrollableArea=function(){var e=this;if(!this.readonly&&this.values&&this.values.length){var t=function(t){return t.length===e.values[0].length};if(t(this.leftButtonsElements)&&t(this.rightButtonsElements)){var n=this.leftButtonsElements[0].parentElement.clientHeight;var r=n*this.values[0].length;var i=s(this.host,"yoo-ion-slide");if(i){var o=i.clientHeight;var a=90;var l=95;var c=o-(a+l);if(c<r){var u=c*.75;var h=Math.floor(u/n)+.4;var f=Math.round(n*h/10)*10;this.innerContainerElement.style.height=f+"px"}}}}};e.prototype.preserveColors=function(){var e=this;if(this.value&&this.value.length){this.value.forEach(function(t){var n=t[0],r=t[1];var i;var o;var s=function(t,n){return t&&t.find(function(t){return t.textContent===e.truncateValue(n)})};i=s(e.leftButtonsElements,n);if(!i){i=s(e.leftButtonsElements,r);o=s(e.rightButtonsElements,n)}else{o=s(e.rightButtonsElements,r)}if(i){var a=e.sourceItems.find(function(e){return e.element===i});if(a&&o){e.attachConnectable(a,o);e.applyColorChanges()}}})}};e.prototype.applyCorrections=function(e,t){if(this.answer&&this.answer.length&&Array.isArray(this.answer)){var n=this.targetItems.find(function(e){return e.element===t});var r=[e.value,n.value].sort();var i=this.answer.find(function(e){return e[0]===r[0]&&e[1]===r[1]});var o=i&&i.length&&Array.isArray(i);if(o){this.sourceItems[e.id].isCorrect=o}}};e.prototype.initUserAnswersArray=function(){var e=this;this.userAnswers=[];if(this.values&&this.values.length&&Array.isArray(this.values[0])){this.values[0].forEach(function(t){if(t){e.userAnswers.push([t,""])}})}};e.prototype.initItems=function(){var e=this;if(this.leftButtonsElements){this.sourceItems=this.leftButtonsElements.map(function(t,n){var r={};r.id=n;r.element=t;r.value=e.values[0][n];r.color=e.getBackgroundColorPanel()[n];r.isCorrect=false;r.connectedItem=null;r.tempConnectable=null;return r})}if(this.rightButtonsElements){this.targetItems=this.rightButtonsElements.map(function(t,n){var r={};r.element=t;r.value=e.values[1][n];return r})}};e.prototype.initGSAPDraggable=function(){var e=this;if(this.innerContainerElement){var t=function(t){if(t&&t.target){var n=t.target;var r=n.getBoundingClientRect();var i=e.connectableContainerElement.getBoundingClientRect().x;e.rightButtonsElements.forEach(function(o){var s=e.sourceItems.find(function(e){return e.element===n});var a=r.x+r.width>=i;if(s){if(a){var l=o.parentElement;if(t.hitTest(o,e.overlapThreshold)){s.tempConnectable=o;if(!e.getElementColor(o)){l.classList.add("bg-"+e.hoverColor)}}else{l.classList.remove("bg-"+e.hoverColor)}}else{s.tempConnectable=null}}})}};var n=function(t){if(t&&t.target){var n=t.target;var r=e.sourceItems.find(function(e){return e.element===n});if(r&&r.tempConnectable){var i=r.tempConnectable;var o=e.targetItems.find(function(e){return e.element===i});var s=i.parentElement;s.classList.remove("bg-"+e.hoverColor);e.attachConnectable(r,i);e.removeOldConnectable();e.applyColorChanges();e.autoCompleteLastConnection();var a=[r.value,o.value];e.userAnswers[r.id]=a;e.maxClasses=i.classList.length;e.value=e.userAnswers;r.tempConnectable=null;c(e.value,e)}e.releaseElement(n)}};if(!this.readonly){try{a.create(this.leftButtonsElements,{edgeResistance:.5,autoScroll:1,throwProps:true,onDrag:function(){t(this)},onDragEnd:function(){n(this)}})}catch(e){}}}};e.prototype.applyColorChanges=function(){var e=this;this.sourceItems.forEach(function(t){if(t){var n=t.color;var r=t.element;if(t.connectedItem&&t.connectedItem.element){var i=t.connectedItem.element;if(e.readonly){e.applyCorrections(t,i);var o=t.isCorrect?"border-success":"border-danger";r.classList.add(o);i.classList.add(o)}if(e.getElementColor(i)){var s=e.getElementColor(i);if(s!==n){e.changeColor(i,n)}}else{e.changeColor(r,n);e.changeColor(i,n)}}else{if(e.getElementColor(r)){r.classList.remove(n)}}}})};e.prototype.removeOldConnectable=function(){var e=this;this.rightButtonsElements.forEach(function(t){var n=e.sourceItems.find(function(e){return e.connectedItem&&e.connectedItem.element===t});if(!n&&e.getElementColor(t)){var r=e.getElementColor(t);t.classList.remove(r)}})};e.prototype.attachConnectable=function(e,t){var n=this;var r=this.sourceItems.find(function(e){return e.connectedItem&&e.connectedItem.element===t});if(r&&r.element!==e.element){var i=r.element;var o=r.connectedItem.element;var s=function(e){if(n.getElementColor(e)){var t=n.getElementColor(e);e.classList.remove(t)}};s(i);s(o);r.connectedItem=null}this.sourceItems.forEach(function(n){if(n&&n===e){n.element.classList.add(n.color);var r={};r.element=t;n.connectedItem=r}})};e.prototype.checkAnswersValidity=function(){if(this.userAnswers.length===this.answer.length){this.validity=!Boolean(this.userAnswers.find(function(e){return e[1]===""}));this.validityChanged.emit(this.validity)}else{this.validity=false;this.validityChanged.emit(this.validity)}return this.validity};e.prototype.releaseElement=function(e){if(e){l.to(e,.2,{x:0,y:0})}};e.prototype.changeColor=function(e,t){if(e&&this.getElementColor(e)){var n=this.getElementColor(e);e.classList.remove(n);e.classList.add(t)}else{e.classList.add(t)}};e.prototype.getElementColor=function(e){var t="";if(e.classList.contains("bg-"+this.hoverColor)){t="bg-"+this.hoverColor}else{this.getBackgroundColorPanel().forEach(function(n){if(e.classList.contains(n)){t=n}})}return t};e.prototype.autoCompleteLastConnection=function(){var e=this;var t=this.sourceItems.filter(function(e){return!e.connectedItem});var n=this.rightButtonsElements.filter(function(t){return t.classList.length!==e.maxClasses});if(t.length===1&&n.length===1){var r=t[0];var i=r.color;var o=n[0];var s=this.targetItems.find(function(e){return e.element===o});this.changeColor(r.element,i);this.changeColor(o,i);this.sourceItems[r.id].connectedItem=s;var a=[r.value,s.value];this.userAnswers[r.id]=a;this.value=this.userAnswers;c(this.value,this)}};e.prototype.cancelConnection=function(e){if(e&&e.target){var t=e.target&&e.target.parentElement;var n=this.sourceItems.find(function(e){return e.element===t});if(n&&n.connectedItem){var r=n.color;var i=n.connectedItem.element;var o=n.element;i.classList.remove(r);n.connectedItem=null;o.classList.remove(r);var s=[n.value,""];this.userAnswers[n.id]=s;this.value=this.userAnswers;c(this.value,this)}}};e.prototype.truncateValue=function(e){if(e){var t=50;var n=e.length;if(n>t){return e.substr(0,t).concat("...")}else{return e}}};e.prototype.renderDraggablesContainer=function(){var e=this;return r("div",{class:"draggable-container"},this.values[0].map(function(t){return r("div",{class:"item-container"},r("div",{onClick:function(t){return e.cancelConnection(t)},class:{draggable:true,"border-stable-light":!e.readonly}},r("div",{class:"value"},e.truncateValue(t))))}))};e.prototype.renderConnectablesContainer=function(){var e=this;return r("div",{class:"connectable-container",ref:function(t){return e.connectableContainerElement=t}},this.values[1].map(function(t){return r("div",{class:"item-container"},r("div",{class:{connectable:true,"border-stable-light":!e.readonly}},r("div",{class:"value"},e.truncateValue(t))))}))};e.prototype.render=function(){var e=this;return r(i,{class:Object.assign({},h(),{readonly:this.readonly})},r("div",{class:"outer-container",ref:function(t){return e.outerContainerElement=t}},r("div",{class:"description"},u("MATCHWORDS")),r("div",{class:"connect-container",ref:function(t){return e.innerContainerElement=t}},this.values&&this.renderDraggablesContainer(),this.values&&this.renderConnectablesContainer())))};Object.defineProperty(e.prototype,"host",{get:function(){return o(this)},enumerable:true,configurable:true});Object.defineProperty(e,"watchers",{get:function(){return{required:["requiredWatch"]}},enumerable:true,configurable:true});Object.defineProperty(e,"style",{get:function(){return".iframe-root{top:0;right:0;bottom:0;left:0;position:absolute;color:var(--black);overflow-y:auto;scrollbar-width:none}.iframe-root yoo-app .wrapper{display:-ms-flexbox;display:flex;-ms-flex-direction:row;flex-direction:row;-ms-flex-wrap:wrap;flex-wrap:wrap;height:100%;width:100%}.iframe-root yoo-app .wrapper.center-center{-ms-flex-align:center;align-items:center;-ms-flex-pack:center;justify-content:center;height:100%}.iframe-root::-webkit-scrollbar{display:none}.bg-success{background-color:var(--success,#04cc99)!important}.text-success{color:var(--success,#04cc99)!important}.border-success{border:2px solid var(--success,#04cc99)!important}.bg-danger{background-color:var(--danger,#ff625f)!important}.text-danger{color:var(--danger,#ff625f)!important}.border-danger{border:2px solid var(--danger,#ff625f)!important}.bg-danger-light{background-color:var(--danger-light,#f46885)!important}.text-danger-light{color:var(--danger-light,#f46885)!important}.border-danger-light{border:2px solid var(--danger-light,#f46885)!important}.bg-energized{background-color:var(--energized,#fed05b)!important}.text-energized{color:var(--energized,#fed05b)!important}.border-energized{border:2px solid var(--energized,#fed05b)!important}.bg-royal{background-color:var(--royal,#845cff)!important}.text-royal{color:var(--royal,#845cff)!important}.border-royal{border:2px solid var(--royal,#845cff)!important}.bg-info{background-color:var(--info,#fc459e)!important}.text-info{color:var(--info,#fc459e)!important}.border-info{border:2px solid var(--info,#fc459e)!important}.bg-dark{background-color:var(--dark,#2b3648)!important}.text-dark{color:var(--dark,#2b3648)!important}.border-dark{border:2px solid var(--dark,#2b3648)!important}.bg-text-color{background-color:var(--text-color,#807f83)!important}.text-text-color{color:var(--text-color,#807f83)!important}.border-text-color{border:2px solid var(--text-color,#807f83)!important}.bg-light{background-color:var(--light,#fff)!important}.text-light{color:var(--light,#fff)!important}.border-light{border:2px solid var(--light,#fff)!important}.bg-always-light{background-color:var(--always-light,#fff)!important}.text-always-light{color:var(--always-light,#fff)!important}.border-always-light{border:2px solid var(--always-light,#fff)!important}.bg-light-orange{background-color:var(--light-orange,#fcae49)!important}.text-light-orange{color:var(--light-orange,#fcae49)!important}.border-light-orange{border:2px solid var(--light-orange,#fcae49)!important}.bg-stable-light{background-color:var(--stable-light,#f1f1f1)!important}.text-stable-light{color:var(--stable-light,#f1f1f1)!important}.border-stable-light{border:2px solid var(--stable-light,#f1f1f1)!important}.bg-stable{background-color:var(--stable,#adadad)!important}.text-stable{color:var(--stable,#adadad)!important}.border-stable{border:2px solid var(--stable,#adadad)!important}.bg-warning{background-color:var(--warning,#ff6402)!important}.text-warning{color:var(--warning,#ff6402)!important}.border-warning{border:2px solid var(--warning,#ff6402)!important}.bg-accent{background-color:var(--accent,#1fb6ff)!important}.text-accent{color:var(--accent,#1fb6ff)!important}.border-accent{border:2px solid var(--accent,#1fb6ff)!important}:host{display:block}:host .outer-container .description{padding-right:.5rem;color:var(--stable,#adadad);font-size:var(--font-size-04,1.125rem)}:host .outer-container .connect-container{display:-ms-flexbox;display:flex;-ms-flex-pack:space-evenly;justify-content:space-evenly;height:-webkit-fit-content;height:-moz-fit-content;height:fit-content;overflow-y:auto;margin:2rem 0;padding:.5rem;background-color:var(--stable-light-40,hsla(0,0%,94.5%,.4))}:host .outer-container .connect-container [class*=-container]{-ms-flex-preferred-size:100%;flex-basis:100%}:host .outer-container .item-container{display:-ms-flexbox;display:flex;-ms-flex-direction:column;flex-direction:column;-ms-flex-align:center;align-items:center;-ms-flex-pack:center;justify-content:center;height:5.75rem}:host .outer-container .item-container .connectable,:host .outer-container .item-container .draggable{display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center;-ms-flex-pack:center;justify-content:center;width:70%;height:4rem;margin:.5rem;padding:1rem;border-radius:8px;background:var(--light,#fff);font-size:var(--font-size-01,.75rem);text-align:center}:host .outer-container .item-container .connectable[class*=bg-],:host .outer-container .item-container .draggable[class*=bg-]{color:var(--light,#fff)}:host .outer-container .item-container .connectable .value,:host .outer-container .item-container .draggable .value{max-height:3.375rem;overflow:hidden}"},enumerable:true,configurable:true});return e}())}}});
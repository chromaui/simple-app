var __awaiter=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(o,i){function s(e){try{l(r.next(e))}catch(e){i(e)}}function a(e){try{l(r["throw"](e))}catch(e){i(e)}}function l(e){e.done?o(e.value):new n(function(t){t(e.value)}).then(s,a)}l((r=r.apply(e,t||[])).next())})};var __generator=this&&this.__generator||function(e,t){var n={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},r,o,i,s;return s={next:a(0),throw:a(1),return:a(2)},typeof Symbol==="function"&&(s[Symbol.iterator]=function(){return this}),s;function a(e){return function(t){return l([e,t])}}function l(s){if(r)throw new TypeError("Generator is already executing.");while(n)try{if(r=1,o&&(i=s[0]&2?o["return"]:s[0]?o["throw"]||((i=o["return"])&&i.call(o),0):o.next)&&!(i=i.call(o,s[1])).done)return i;if(o=0,i)s=[s[0]&2,i.value];switch(s[0]){case 0:case 1:i=s;break;case 4:n.label++;return{value:s[1],done:false};case 5:n.label++;o=s[1];s=[0];continue;case 7:s=n.ops.pop();n.trys.pop();continue;default:if(!(i=n.trys,i=i.length>0&&i[i.length-1])&&(s[0]===6||s[0]===2)){n=0;continue}if(s[0]===3&&(!i||s[1]>i[0]&&s[1]<i[3])){n.label=s[1];break}if(s[0]===6&&n.label<i[1]){n.label=i[1];i=s;break}if(i&&n.label<i[2]){n.label=i[2];n.ops.push(s);break}if(i[2])n.ops.pop();n.trys.pop();continue}s=t.call(e,n)}catch(e){s=[6,e];o=0}finally{r=i=0}if(s[0]&5)throw s[1];return{value:s[0]?s[1]:void 0,done:true}}};System.register(["./p-d99b9c19.system.js","./p-76deb591.system.js","./p-40fcf55a.system.js","./p-fd4afab3.system.js","./p-e3fa184f.system.js","./p-90888482.system.js","./p-350cb6c0.system.js"],function(e){"use strict";var t,n,r,o,i,s,a,l,u,c,f,h;return{setters:[function(e){t=e.r;n=e.c;r=e.h;o=e.H;i=e.g},function(e){s=e.a1;a=e.aV;l=e.b9;u=e.b8;c=e.t;f=e.ak;h=e.dj},function(){},function(){},function(){},function(){},function(){}],execute:function(){var p=e("yoo_form_categorize_words",function(){function e(e){t(this,e);this.value=null;this.readonly=false;this.isVisible=true;this.colorsZone=["light-orange","transparent","danger-light"];this.zones=[];this.zoneData=[];this.validityChanged=n(this,"validityChanged",7);this.inputBlurred=n(this,"inputBlurred",7);this.inputFocused=n(this,"inputFocused",7);this.inputChanged=n(this,"inputChanged",7);this.dragStarted=n(this,"dragStarted",7);this.dragEnded=n(this,"dragEnded",7)}e.prototype.isValid=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){this.validate();return[2]})})};e.prototype.componentWillLoad=function(){this.zoneData=this.setConfigZones();this.setEasingAnimation()};e.prototype.componentDidLoad=function(){if(this.outerContainer){this.zoneElements=Array.from(this.outerContainer.querySelectorAll(".drop-zone"));if(this.zoneElements){this.setDropZones();this.setTags();this.setWordsCounter()}}};e.prototype.validate=function(){if(this.checkArray(this.value)){this.validity=s(this.value.map(function(e){return e.length}),this.answer.map(function(e){return e.length}))}this.validityChanged.emit(this.validity);return this.validity};e.prototype.setEasingAnimation=function(){try{this.ease=a.easeOut.config(.5)}catch(e){}};e.prototype.setDropZones=function(){var e=this;this.zones=this.zoneData.map(function(t){return e.setDropZone(t)})};e.prototype.setDropZone=function(e){e.element=this.zoneElements.find(function(t){return t.id===e.id});e.parent=e&&e.element&&e.element.parentNode;return e};e.prototype.setConfigZones=function(){var e=this;return[1,2,3].map(function(t){var n={};n.id="zone-"+t;n.grid=true;n.colorClass=e.colorsZone[t-1];n.threshold="60%";n.sortProp="value";n.parent=null;n.element=null;n.tags=[];if(e.checkArray(e.answer)){if(t===1){n.answers=e.answer[0]}else if(t===3){n.answers=e.answer[1]}}return n})};e.prototype.addTagButton=function(e,t){if(e&&t){var n=document.createElement("yoo-button");n.classList.add("tag");n.text=t;if(e.id!=="zone-2"){n.textColor=e.colorClass}return e.element&&e.element.appendChild(n)}};e.prototype.setTags=function(){var e=this;if(!this.readonly&&this.checkArray(this.values)){if(this.checkArray(this.value)){this.values.filter(function(t){return!e.value[0].includes(t)&&!e.value[1].includes(t)}).sort().forEach(function(t){return e.setTag(t,1)});this.value.forEach(function(t,n){t.forEach(function(t){var r=n===1?2:0;return e.setTag(t,r)})})}else{this.values.sort().forEach(function(t){return e.setTag(t,1)})}}};e.prototype.setConfigTag=function(e,t){var n={};n.x=0;n.y=0;n.left=0;n.top=0;n.value=e;n.zone=this.zoneData[t];n.element=this.addTagButton(n.zone,e);n.zone.element=n.element.parentElement;n.zone.element.appendChild(n.element);n.clone=n.element.cloneNode(true);n.clone.text=n.value;n.clone.classList.add("clone");n.lastZone=n.zone;return n};e.prototype.setTweenLiteEffect=function(e,t){try{l.set(e,t)}catch(e){}};e.prototype.setTag=function(e,t){var n=this;var r=this.setConfigTag(e,t);this.setTweenLiteEffect([r.element,r.clone],{x:"+=0"});var o=function(){n.dragStarted.emit(true);if(r.zone&&!n.hitTest(r.zone,r.clone,0)){r.lastZone=r.zone;n.removeTag(r);r.zone=null}};var i=function(){r.draggable.disable();n.setTweenLiteEffect(r.element,{left:0,top:0});if(!r.zone){r.zone=r.lastZone;n.zones.forEach(function(e){if(n.hitTest(e,r.clone)&&!n.isDropZoneFull(e)){r.zone=e}})}n.addTag(r);var e=n.getOffset(r);var t={onComplete:function(){n.outerContainer.removeChild(r.clone);r.element.textColor=r.zone.colorClass;n.setTweenLiteEffect(r.element,{autoAlpha:1})}};n.setTweenLiteEffect(r.element,{left:0,top:0});t["x"]="-="+e.x;t["y"]="-="+e.y;l.to(r.clone,.3,t);n.setWordsCounter();n.value=n.getUserAnswers();h(n.value,n);n.dragEnded.emit(true)};if(!this.readonly){try{r.draggable=new u(r.clone,{onDrag:o,onRelease:i,callbackScope:this}).disable()}catch(e){}}this.addTag(r);var s=function(e){e.preventDefault();var t=n.getPosition(r.element);var o=n.outerContainer.getBoundingClientRect();n.outerContainer.appendChild(r.clone);r.clone.style.top=t.y-o.top+"px";r.clone.style.left=t.x-o.left+"px";n.setTweenLiteEffect(r.element,{autoAlpha:0,zIndex:u.zIndex+1});n.setTweenLiteEffect(r.clone,{transform:"unset"});r.draggable.enable();r.draggable.update();r.draggable.startDrag(e)};if(!this.readonly){r.element.onmousedown=s;r.element.ontouchstart=s}return r};e.prototype.addTag=function(e){var t=e.zone.tags.indexOf(e);if(t<=-1){e.zone.tags.push(e);e.zone.element.appendChild(e.element);this.updateTags(e.zone);this.updatePosition(e);this.layoutTags(e.zone)}};e.prototype.removeTag=function(e){var t=e.zone.tags.indexOf(e);if(t>=0){e.zone.tags.splice(t,1);e.zone.element.removeChild(e.element);this.updateTags(e.zone);this.layoutTags(e.zone)}};e.prototype.updateTags=function(e){if(e.sortProp){this.sortTags(e);e.tags.forEach(function(t){return e.element.appendChild(t.element)})}};e.prototype.layoutTags=function(e){var t=this;e.tags.forEach(function(e){return t.layout(e)})};e.prototype.setWordsCounter=function(){var e=this;this.zones.forEach(function(t,n){if(t.id!=="zone-2"){var r=e.getMaxWords(n)||0;var o=!e.readonly?t.tags.length:r;var i=t.parent.firstElementChild;var s=i.querySelector(".words-counter");var a=" "+o+"/"+r;s.textContent=a}})};e.prototype.getUserAnswers=function(){return this.zones.filter(function(e,t){return t!==1}).map(function(e){return e.tags}).map(function(e){return e.map(function(e){return e.value})})};e.prototype.isDropZoneFull=function(e){if(e.id==="zone-2"){return false}return s(e.tags.length,e.answers.length)};e.prototype.getMaxWords=function(e){if(this.checkArray(this.answer)){return e===2?this.answer[1].length:this.answer[0].length}};e.prototype.sortTags=function(e){e.tags.sort(function(t,n){var r=t[e.sortProp];var o=n[e.sortProp];if(r!==o){if(r>o||r===void 0){return 1}if(r<o||o===void 0){return-1}}return t["index"]-n["index"]})};e.prototype.getOffset=function(e){var t=this.getPosition(e.clone);var n=this.getPosition(e.zone.element);return{x:t.x-n.x-e.element.offsetLeft,y:t.y-n.y-e.element.offsetTop}};e.prototype.hitTest=function(e,t,n){var r=n||e.threshold;return u.hitTest(t,e.parent,r)};e.prototype.layout=function(e){if(e&&e.isGrid){try{var t=e.element._gsTransform;var n=e.x;var r=e.y;e.x=e.element.offsetLeft;e.y=e.element.offsetTop;var o=t.x+n-e.x;var i=t.y+r-e.y;l.fromTo(e.element,.5,{x:o,y:i},{x:0,y:0,ease:this.ease})}catch(e){}}};e.prototype.getPosition=function(e){var t=e.getBoundingClientRect();var n=window.scrollX||this.outerContainer.scrollLeft||0;var r=window.scrollY||this.outerContainer.scrollTop||0;var o=this.outerContainer.clientLeft||0;var i=this.outerContainer.clientTop||0;return{x:t.left+n-o,y:t.top+r-i}};e.prototype.updatePosition=function(e){e.x=e.element.offsetLeft;e.y=e.element.offsetTop;e.isGrid=e.zone.grid};e.prototype.getCategory=function(e){if(this.checkArray(this.categories)){return this.categories[e]}};e.prototype.checkArray=function(e){return e&&e.length&&Array.isArray(e)};e.prototype.renderTagsContainer=function(){if(this.readonly){return}return r("div",{class:"tags-container"},r("div",{class:"description-container"},r("span",null,this.description),r("span",null,c("DRAGRIGHTWORDS"))),r("div",{class:"scroll-container"},r("div",{id:"zone-2",class:"drop-zone"})))};e.prototype.renderDropContainers=function(e){var t;var n=this;var o=e===1?0:1;var i=e===1?"top":"bottom";return r("div",{class:(t={"drop-container":true},t[i]=true,t)},r("div",{class:"drop-title"},r("span",{class:"title"},this.getCategory(o)),r("span",{class:"words-counter"})),r("div",{id:"zone-"+e,class:"drop-zone"},this.readonly&&this.checkArray(this.value)&&this.checkArray(this.answer)&&this.value[o].map(function(e){return r("yoo-button",{class:{tag:true,success:n.answer[o].includes(e),danger:!n.answer[o].includes(e)},text:e})})))};e.prototype.renderBase=function(){var e=this;return[1,2,3].map(function(t){if(t!==2){return e.renderDropContainers(t)}else{return e.renderTagsContainer()}})};e.prototype.render=function(){var e=this;return r(o,{class:Object.assign({},f(),{readonly:this.readonly})},r("div",{class:"outer-container",ref:function(t){return e.outerContainer=t}},this.renderBase()))};Object.defineProperty(e.prototype,"host",{get:function(){return i(this)},enumerable:true,configurable:true});Object.defineProperty(e,"style",{get:function(){return".iframe-root{top:0;right:0;bottom:0;left:0;position:absolute;color:var(--black);overflow-y:auto;scrollbar-width:none}.iframe-root yoo-app .wrapper{display:-ms-flexbox;display:flex;-ms-flex-direction:row;flex-direction:row;-ms-flex-wrap:wrap;flex-wrap:wrap;height:100%;width:100%}.iframe-root yoo-app .wrapper.center-center{-ms-flex-align:center;align-items:center;-ms-flex-pack:center;justify-content:center;height:100%}.iframe-root::-webkit-scrollbar{display:none}:host .outer-container{display:-ms-flexbox;display:flex;position:relative;-ms-flex-direction:column;flex-direction:column;margin:1rem 0}:host .outer-container .tags-container{margin:.5rem 0}:host .outer-container .tags-container .description-container{display:-ms-flexbox;display:flex;-ms-flex-direction:column;flex-direction:column;margin:.5rem;line-height:1.75}:host .outer-container .tags-container .description-container span:first-child{font-weight:var(--font-weight-03,700)}:host .outer-container .tags-container .description-container span:last-child{color:var(--stable,#adadad)}:host .outer-container .drop-container{height:7.75rem;max-height:9rem;border-radius:var(--video-border,8px);-webkit-box-shadow:var(--card-shadow,0 2px 4px 0 rgba(40,47,54,.08));box-shadow:var(--card-shadow,0 2px 4px 0 rgba(40,47,54,.08))}:host .outer-container .drop-container.top{background-color:var(--light-orange,#fcae49)}:host .outer-container .drop-container.bottom{background-color:var(--danger-light,#f46885)}:host .outer-container .drop-container .drop-title{padding:.5rem 1rem;color:var(--light,#fff)}:host .outer-container .drop-container .drop-title .words-counter{padding-left:.25rem;opacity:.5}:host .outer-container .scroll-container{height:7rem;margin:.5rem 0;white-space:nowrap;overflow-x:auto}:host .outer-container .drop-zone{display:-ms-inline-flexbox;display:inline-flex;position:relative;-ms-flex-flow:row wrap;flex-flow:row wrap;height:100%;overflow:auto}:host .outer-container .drop-zone#zone-1,:host .outer-container .drop-zone#zone-3{max-height:5rem;padding:0 .5rem}:host .outer-container yoo-button{--transition:unset;display:block;position:relative;height:-webkit-fit-content;height:-moz-fit-content;height:fit-content;margin:.25rem}:host .outer-container yoo-button.clone{position:absolute;top:0;left:0}:host(.readonly) .outer-container .drop-container{background-color:var(--light,#fff)}:host(.readonly) .outer-container .drop-container .words-counter{opacity:1}:host(.readonly) .outer-container .drop-container.top .drop-title{color:var(--light-orange,#fcae49)}:host(.readonly) .outer-container .drop-container.bottom .drop-title{color:var(--danger-light,#f46885)}"},enumerable:true,configurable:true});return e}())}}});
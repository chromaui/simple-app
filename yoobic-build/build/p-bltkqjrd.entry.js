import{r as t,c as e,h as s,H as i}from"./p-0d847530.js";import{t as a,bS as n,dj as h,p as r,ak as o}from"./p-384bfcf6.js";import"./p-0f3d65ca.js";import"./p-8cff990b.js";import"./p-0d62bf9d.js";import"./p-d70b188c.js";import"./p-815d6c40.js";const d=class{constructor(s){t(this,s),this.validators=[],this.isSelectingTimescale=!1,this.selectedTimescale="month",this.selectedTimespan=1,this.modes=[{title:a("LAST"),value:"dynamic"},{title:a("BETWEEN"),value:"calendar"}],this.timeScales=[{text:a("DAY(S)"),handler:()=>this.selectTimescaleWeb("day")},{text:a("WEEK(S)"),handler:()=>this.selectTimescaleWeb("week")},{text:a("MONTH(S)"),handler:()=>this.selectTimescaleWeb("month")},{text:a("YEAR(S)"),handler:()=>this.selectTimescaleWeb("year")}],this.selectedDateRange={mode:this.dateRangeMode,amount:this.selectedTimespan,timescale:this.selectedTimescale,startDate:n(new Date,this.selectedTimescale,this.selectedTimespan),endDate:new Date},this.validityChanged=e(this,"validityChanged",7),this.inputBlurred=e(this,"inputBlurred",7),this.inputFocused=e(this,"inputFocused",7),this.inputChanged=e(this,"inputChanged",7)}componentWillLoad(){this.value&&(this.selectedDateRange=this.value,this.selectedTimescale=this.selectedDateRange.timescale,this.selectedTimespan=this.selectedDateRange.amount,this.dateRangeMode=this.selectedDateRange.mode||"dynamic",this.selectedDateRange.endDate||this.selectedDateRange.startDate||"dynamic"!==this.selectedDateRange.mode||(this.selectedDateRange.endDate=new Date,this.selectedDateRange.startDate=n(new Date,this.selectedDateRange.timescale,this.selectedDateRange.amount)))}isCalendarMode(){return"calendar"===this.dateRangeMode}selectTimescaleWeb(t){this.selectedTimescale=t,this.selectedDateRange.timescale=this.selectedTimescale,this.isSelectingTimescale=!this.isSelectingTimescale,this.onUpdateValue()}onTimescaleChanged(t){t.stopPropagation(),this.selectedTimescale=t.detail,this.selectedDateRange.timescale=this.selectedTimescale,this.onUpdateValue()}onTimespanChanged(t){t.stopPropagation(),this.selectedTimespan=t.detail,this.selectedDateRange.amount=this.selectedTimespan,this.onUpdateValue()}onCalendarDateChange(t){t.stopPropagation();const e=t.detail;e&&e.length>1&&(this.selectedDateRange.startDate=e[0],this.selectedDateRange.endDate=e[1],this.onUpdateValue())}onTabSelected(t){t.stopPropagation(),this.dateRangeMode=t.detail.value,this.selectedDateRange.mode=this.dateRangeMode,this.onUpdateValue()}onUpdateValue(){h(Object.assign({},this.selectedDateRange),this)}getRangeFromSelectedDateRange(){let t,e;return this.isCalendarMode()?[t=this.selectedDateRange.startDate,e=this.selectedDateRange.endDate]:(e=new Date,[t=n(e,this.selectedTimescale,this.selectedTimespan),e])}renderCalendarMode(){return s("div",{class:"bottom-container"},s("yoo-form-date-time",{onInputChanged:t=>this.onCalendarDateChange(t),isRange:!0,clearable:!0,value:this.getRangeFromSelectedDateRange(),inputTabIndex:this.inputTabIndex+1}))}renderNumberInput(){return s("yoo-form-input",{inputTabIndex:this.inputTabIndex,type:"number",min:"1",max:"99",value:this.selectedTimespan,onInputChanged:t=>this.onTimespanChanged(t)})}renderNumberPicker(){return s("yoo-form-number-picker",{min:1,max:99,value:this.selectedTimespan,onInputChanged:t=>this.onTimespanChanged(t)})}renderTimespan(){return s("div",{class:"timespan-container"},s("div",{class:"timespan-text"},s("span",null,a("TIMESPAN"))),r()?this.renderNumberInput():this.renderNumberPicker())}renderTimescaleDropdown(){return s("yoo-context-menu",{contentButtons:this.timeScales},s("div",{class:"timescale-selected",onClick:()=>this.isSelectingTimescale=!this.isSelectingTimescale},s("span",{class:"timescale-selected-text"},a(`${this.selectedTimescale.toUpperCase()}(S)`)),s("div",{class:"dropdown-icon"},s("yoo-icon",{class:this.isSelectingTimescale?"yo-up":"yo-down"}))))}renderTimeScaleAutocomplete(){return s("yoo-form-autocomplete",{values:["day","week","month","year"],value:this.selectedTimescale,useTranslate:!0,iconPrefix:"calendar",displayType:"card-list",isLocal:!0,hideHeader:!0,inputTabIndex:this.inputTabIndex+2,onInputChanged:t=>this.onTimescaleChanged(t)})}renderTimeScale(){return s("div",{class:"timescale-container"},s("div",{class:"timescale-text"},s("span",null,a("TIMESCALE"))),r()?this.renderTimescaleDropdown():this.renderTimeScaleAutocomplete())}renderDynamicTimescaleMode(){return s("div",{class:"dynamic-timescale-container bottom-container"},this.renderTimespan(),this.renderTimeScale())}renderModeChoice(){return s("yoo-navbar",{class:"items-space-around",withLine:!0,tabs:this.modes,selectedTab:this.value&&"calendar"===this.value.mode?this.modes[1]:this.modes[0],onTabSelected:t=>this.onTabSelected(t)})}renderReadonly(){return s("div",{class:"readonly"},this.value)}renderEditable(){return s("div",{class:"outer-container"},this.renderModeChoice(),this.isCalendarMode()?this.renderCalendarMode():this.renderDynamicTimescaleMode())}render(){return s(i,{class:o()},this.readonly?this.renderReadonly():this.renderEditable())}static get style(){return".iframe-root{top:0;right:0;bottom:0;left:0;position:absolute;color:var(--black);overflow-y:auto;scrollbar-width:none}.iframe-root yoo-app .wrapper{display:-ms-flexbox;display:flex;-ms-flex-direction:row;flex-direction:row;-ms-flex-wrap:wrap;flex-wrap:wrap;height:100%;width:100%}.iframe-root yoo-app .wrapper.center-center{-ms-flex-align:center;align-items:center;-ms-flex-pack:center;justify-content:center;height:100%}.iframe-root::-webkit-scrollbar{display:none}:host .outer-container{display:-ms-flexbox;display:flex;-ms-flex-direction:column;flex-direction:column;border:1px solid var(--stable-40,hsla(0,0%,67.8%,.4));border-radius:var(--border-radius-input,5px)}:host .outer-container yoo-navbar{--border-radius:5px!important}:host .outer-container .dropdown-container{display:-ms-flexbox;display:flex;-ms-flex:33%;flex:33%}:host .outer-container .dropdown-container .mode-text{-ms-flex:1;flex:1}:host .outer-container .bottom-container{padding:1rem}:host .outer-container .dynamic-timescale-container{display:-ms-flexbox;display:flex}:host .outer-container .dynamic-timescale-container .timespan-container{display:-ms-flexbox;display:flex;-ms-flex:1;flex:1;-ms-flex-direction:column;flex-direction:column;margin-right:var(--padding-20,1.25rem)}:host .outer-container .dynamic-timescale-container .timespan-container .timespan-text{margin-bottom:var(--padding-5,.3125rem)}:host .outer-container .dynamic-timescale-container .timescale-container{display:-ms-flexbox;display:flex;-ms-flex:1;flex:1;-ms-flex-direction:column;flex-direction:column}:host .outer-container .dynamic-timescale-container .timescale-container .timescale-text{-ms-flex:0.75;flex:0.75;margin-bottom:var(--padding-5,.3125rem)}:host .outer-container .dynamic-timescale-container .timescale-container .timescale-selected{display:-ms-flexbox;display:flex}:host .outer-container .dynamic-timescale-container .timescale-container .timescale-selected .timescale-selected-text{margin-right:var(--padding-10,.625rem)}"}};export{d as yoo_form_daterange};
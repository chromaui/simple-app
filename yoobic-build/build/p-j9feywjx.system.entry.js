var __awaiter=this&&this.__awaiter||function(t,e,n,i){return new(n||(n=Promise))(function(r,s){function o(t){try{d(i.next(t))}catch(t){s(t)}}function a(t){try{d(i["throw"](t))}catch(t){s(t)}}function d(t){t.done?r(t.value):new n(function(e){e(t.value)}).then(o,a)}d((i=i.apply(t,e||[])).next())})};var __generator=this&&this.__generator||function(t,e){var n={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},i,r,s,o;return o={next:a(0),throw:a(1),return:a(2)},typeof Symbol==="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(t){return function(e){return d([t,e])}}function d(o){if(i)throw new TypeError("Generator is already executing.");while(n)try{if(i=1,r&&(s=o[0]&2?r["return"]:o[0]?r["throw"]||((s=r["return"])&&s.call(r),0):r.next)&&!(s=s.call(r,o[1])).done)return s;if(r=0,s)o=[o[0]&2,s.value];switch(o[0]){case 0:case 1:s=o;break;case 4:n.label++;return{value:o[1],done:false};case 5:n.label++;r=o[1];o=[0];continue;case 7:o=n.ops.pop();n.trys.pop();continue;default:if(!(s=n.trys,s=s.length>0&&s[s.length-1])&&(o[0]===6||o[0]===2)){n=0;continue}if(o[0]===3&&(!s||o[1]>s[0]&&o[1]<s[3])){n.label=o[1];break}if(o[0]===6&&n.label<s[1]){n.label=s[1];s=o;break}if(s&&n.label<s[2]){n.label=s[2];n.ops.push(o);break}if(s[2])n.ops.pop();n.trys.pop();continue}o=e.call(t,n)}catch(t){o=[6,t];r=0}finally{i=s=0}if(o[0]&5)throw o[1];return{value:o[0]?o[1]:void 0,done:true}}};System.register(["./p-d99b9c19.system.js","./p-76deb591.system.js","./p-40fcf55a.system.js","./p-fd4afab3.system.js","./p-e3fa184f.system.js","./p-90888482.system.js","./p-350cb6c0.system.js"],function(t){"use strict";var e,n,i,r,s,o,a,d,l,u,c;return{setters:[function(t){e=t.r;n=t.c;i=t.h;r=t.g},function(t){s=t.d5;o=t.f_;a=t.aq;d=t.b8;l=t.dj;u=t.t;c=t.b9},function(){},function(){},function(){},function(){},function(){}],execute:function(){var h=8;var p=20;var f=20;var g=4;var y=t("yoo_form_missing_word",function(){function t(t){e(this,t);this.value=null;this.validators=[];this.placeholder="SELECTRIGHTWORDS";this.validityChanged=n(this,"validityChanged",7);this.inputBlurred=n(this,"inputBlurred",7);this.inputFocused=n(this,"inputFocused",7);this.inputChanged=n(this,"inputChanged",7)}t.prototype.isValid=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){return[2,this.validity]})})};t.prototype.componentWillLoad=function(){var t=this;s(this);if(this.sentence){this.values=this.values?o(this.values):[];this.answer=this.answer||[];this.words=this.getFormatedSentence().map(function(t){return{value:t,dynamic:t.includes("[[")}});this.valueAsSentence=!this.value||!this.answer?[]:this.getFormatedSentence().map(function(e){return{value:e.includes("[[")?t.value[t.getAnswerIndex(e)]:e,valid:t.value[t.getAnswerIndex(e)]===t.answer[t.getAnswerIndex(e)],dynamic:e.includes("[[")}})}this.isRendered=false};t.prototype.componentDidLoad=function(){this.isRendered=true;this.setDropZones();this.initGSAPDraggable();this.setMissingWordsWidth()};t.prototype.componentDidUpdate=function(){this.setDropZones();this.initGSAPDraggable()};t.prototype.validate=function(){var t=true;var e=true;if(this.answer&&this.answer.length){e=this.value.length===this.answer.length}if(this.required&&!e){t=false}if(!this.validity||this.validity!==t){this.validityChanged.emit(t);this.validity=t}return this.validity};t.prototype.getFormatedSentence=function(){var t=this.sentence;if(!t.includes("[[0]]")){t=this.answer.reduce(function(t,e,n){return t.replace(e," [["+n+"]] ")},this.sentence)}return t.split(" ")};t.prototype.getAnswerIndex=function(t){var e=["[[","]]"];return Number(e.reduce(function(t,e){return t.replace(e,"")},t))};t.prototype.setMissingWordsWidth=function(){var t=this.values?this.values.reduce(function(t,e){return t.length>e.length?t:e}):null;if(t){this.missingWordWidth=this.getMissingOrDroppedWordWidth(t)}};t.prototype.getMissingOrDroppedWordWidth=function(t,e){if(e===void 0){e=false}var n=t.length*h+p;if(this.sentenceEl){if(n>=this.sentenceEl.offsetWidth){return this.sentenceEl.offsetWidth-g}else{return n+(e?f:0)}}};t.prototype.setDropZones=function(){this.sentenceDropZoneElements=Array.from(this.host.querySelectorAll(".word.droppable"));this.suggestionsDropZoneEl=this.host.querySelector(".suggestions");this.yooIonSlideEl=a(this.host,"yoo-ion-slides")};t.prototype.initGSAPDraggable=function(){var t=this;if((!this.sentenceDropZoneElements||!this.sentenceDropZoneElements.length)&&!this.suggestionsDropZoneEl){return}var e=this.host.querySelectorAll("yoo-badge.item-"+this.slideIndex);var n=this.sentenceDropZoneElements;var i=this.suggestionsDropZoneEl;var r="";var s=function(e){if(e.target&&e.target.classList){e.target.classList.add("drag-target")}t.yooIonSlideEl.classList.add("prevent-scroll-side-on-drag")};var o=function(t){r="";for(var e=0;e<n.length;e++){if(t.hitTest(n[e],"80%")){n[e].classList.add("drop-target");r=n[e].title}else{n[e].classList.remove("drop-target")}}if(t.hitTest(i,"80%")){i.classList.add("drop-target")}else{i.classList.remove("drop-target")}};var a=function(e){if(e.target&&e.target.classList){e.target.classList.remove("drag-target");if(e.hitTest(i,"80%")){t.onClickOrDropWord(e.target.text)}else{t.onDropWord(e,r)}n.forEach(function(t){t.classList.remove("drop-target")})}try{c.to(e.target,0,{x:0,y:0})}catch(t){}t.yooIonSlideEl.classList.remove("prevent-scroll-side-on-drag")};var l=function(e){if(e.target&&e.target.classList&&e.target.text){if(e.target.classList.contains("suggested")){t.onClickSuggestionsWord(e.target.text)}else if(e.target.classList.contains("dropped")){t.onClickOrDropWord(e.target.text)}}};d.create(e,{edgeResistance:1,autoScroll:1,type:"x,y",throwProps:true,onDragStart:function(){s(this)},onDrag:function(){o(this)},onDragEnd:function(){a(this)},onClick:function(){l(this)}})};t.prototype.findDroppedWord=function(t){return this.words.find(function(e){return e.displayedValue===t})};t.prototype.isDropped=function(t){return this.findDroppedWord(t)!==undefined};t.prototype.updateAnswer=function(){var t=[];this.words.forEach(function(e){if(e.dynamic&&e.displayedValue!==undefined){t.push(e.displayedValue)}});this.value=t;l(this.value,this)};t.prototype.onDropWord=function(t,e){if(t.target&&e){var n=e;var i=t.target.text;this.onClickOrDropWord(i);var r=this.words.find(function(t){return t.value===n});if(r){r.displayedValue=i}this.updateAnswer();t.target.classList.remove("drop-target")}};t.prototype.onClickOrDropWord=function(t){var e=this.findDroppedWord(t);if(e){e.displayedValue=undefined;this.updateAnswer()}};t.prototype.onClickSuggestionsWord=function(t){if(!this.isDropped(t)){var e=this.words.find(function(t){return t.dynamic===true&&!t.displayedValue});if(e){e.displayedValue=t;this.updateAnswer()}}};t.prototype.renderReadonly=function(){return i("div",{class:"readonly"},i("div",{class:"sentence-answers"},this.valueAsSentence.map(function(t){return i("span",{class:"word "+(t.dynamic?t.valid?"success":"danger":"")}," ",t.value," ")})))};t.prototype.renderEditable=function(){var t=this;return i("div",{class:"outer-container"},i("div",{class:"sentence",ref:function(e){return t.sentenceEl=e}},this.isRendered&&this.words?this.words.map(function(e){return[!e.dynamic?i("span",{title:e.value,class:"word"},e.value):!e.displayedValue?i("span",{style:{width:t.missingWordWidth+"px"},class:"word droppable hidden",title:e.value},"*"):i("yoo-badge",{style:{width:t.getMissingOrDroppedWordWidth(e.displayedValue,true)+"px"},class:"larget tag missing-word round danger-light dropped item-"+t.slideIndex,text:e.displayedValue})]}):null),i("div",{class:"placeholder"},u(this.placeholder)),i("div",{class:"suggestions"},this.values&&this.values.map(function(e){if(!t.isDropped(e)){return i("yoo-badge",{class:"large tag missing-word round danger-light suggested item-"+t.slideIndex,text:e})}})))};t.prototype.render=function(){return this.readonly?this.renderReadonly():this.renderEditable()};Object.defineProperty(t.prototype,"host",{get:function(){return r(this)},enumerable:true,configurable:true});Object.defineProperty(t,"style",{get:function(){return".iframe-root.sc-yoo-form-missing-word{top:0;right:0;bottom:0;left:0;position:absolute;color:var(--black);overflow-y:auto;scrollbar-width:none}.iframe-root.sc-yoo-form-missing-word yoo-app.sc-yoo-form-missing-word .wrapper.sc-yoo-form-missing-word{display:-ms-flexbox;display:flex;-ms-flex-direction:row;flex-direction:row;-ms-flex-wrap:wrap;flex-wrap:wrap;height:100%;width:100%}.iframe-root.sc-yoo-form-missing-word yoo-app.sc-yoo-form-missing-word .wrapper.center-center.sc-yoo-form-missing-word{-ms-flex-align:center;align-items:center;-ms-flex-pack:center;justify-content:center;height:100%}.iframe-root.sc-yoo-form-missing-word::-webkit-scrollbar{display:none}.sc-yoo-form-missing-word-h .outer-container.sc-yoo-form-missing-word .sentence.sc-yoo-form-missing-word{font-size:var(--font-size-03,1rem);line-height:var(--font-size-09,2.25rem);-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.sc-yoo-form-missing-word-h .outer-container.sc-yoo-form-missing-word .sentence.sc-yoo-form-missing-word yoo-badge.sc-yoo-form-missing-word{--font-size-inner-container:var(--font-size-03,1rem);--inner-container-default-padding:0.375rem 0.625rem;margin:.3125rem .125rem 1px .125rem;text-align:center}.sc-yoo-form-missing-word-h .outer-container.sc-yoo-form-missing-word .sentence.sc-yoo-form-missing-word yoo-badge.drag-target.sc-yoo-form-missing-word{position:relative;z-index:1}.sc-yoo-form-missing-word-h .outer-container.sc-yoo-form-missing-word .sentence.sc-yoo-form-missing-word .word.sc-yoo-form-missing-word{display:inline-block;margin:0 2px;padding-top:var(--padding-5,.3125rem);-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.sc-yoo-form-missing-word-h .outer-container.sc-yoo-form-missing-word .sentence.sc-yoo-form-missing-word .word.hidden.sc-yoo-form-missing-word{border-bottom:1px solid var(--danger-light,#f46885);color:transparent}.sc-yoo-form-missing-word-h .outer-container.sc-yoo-form-missing-word .sentence.sc-yoo-form-missing-word .word.droppable.sc-yoo-form-missing-word{min-width:85px;text-align:center}.sc-yoo-form-missing-word-h .outer-container.sc-yoo-form-missing-word .sentence.sc-yoo-form-missing-word .word.dynamic.sc-yoo-form-missing-word{color:var(--danger,#ff625f)}.sc-yoo-form-missing-word-h .outer-container.sc-yoo-form-missing-word .sentence.sc-yoo-form-missing-word .word.dynamic.drop-target.sc-yoo-form-missing-word{background:var(--danger,#ff625f);color:var(--light,#fff)}.sc-yoo-form-missing-word-h .outer-container.sc-yoo-form-missing-word .sentence.sc-yoo-form-missing-word .word.drop-target.sc-yoo-form-missing-word{background:var(--stable-alt-to-dark,#d0d0d0);color:var(--light,#fff)}.sc-yoo-form-missing-word-h .outer-container.sc-yoo-form-missing-word .placeholder.sc-yoo-form-missing-word{margin:1.25rem auto;color:var(--stable,#adadad);font-size:var(--font-size-03,1rem);letter-spacing:normal}.sc-yoo-form-missing-word-h .outer-container.sc-yoo-form-missing-word .suggestions.sc-yoo-form-missing-word{padding:.3125rem;background:var(--light,#fff);font-size:var(--font-size-04,1.125rem)}.sc-yoo-form-missing-word-h .outer-container.sc-yoo-form-missing-word .suggestions.sc-yoo-form-missing-word yoo-badge.sc-yoo-form-missing-word{--font-size-inner-container:var(--font-size-03,1rem);--inner-container-default-padding:0.375rem 0.625rem;margin:0 .3125rem .3125rem .3125rem;cursor:pointer;-ms-touch-action:none;touch-action:none}.sc-yoo-form-missing-word-h .outer-container.sc-yoo-form-missing-word .suggestions.sc-yoo-form-missing-word yoo-badge.transparent.sc-yoo-form-missing-word{--color-inner-text:var(--stable-alt,#d0d0d0)}.sc-yoo-form-missing-word-h .outer-container.sc-yoo-form-missing-word .suggestions.sc-yoo-form-missing-word yoo-badge.drag-target.sc-yoo-form-missing-word{position:relative;z-index:1}.sc-yoo-form-missing-word-h .outer-container.sc-yoo-form-missing-word .suggestions.drop-target.sc-yoo-form-missing-word{padding:.25rem;border:1px dashed var(--stable-alt-to-dark,#d0d0d0)}.sc-yoo-form-missing-word-h .readonly.sc-yoo-form-missing-word{padding:.5rem;padding-left:0;padding-bottom:0}.sc-yoo-form-missing-word-h .readonly.sc-yoo-form-missing-word .sentence-answers.sc-yoo-form-missing-word .word.success.sc-yoo-form-missing-word{color:var(--success,#04cc99)}.sc-yoo-form-missing-word-h .readonly.sc-yoo-form-missing-word .sentence-answers.sc-yoo-form-missing-word .word.danger.sc-yoo-form-missing-word{color:var(--danger,#ff625f)}"},enumerable:true,configurable:true});return t}())}}});
import{r as t,c as s,h as i,H as e,g as h}from"./p-0d847530.js";import{d5 as l,ak as n,f_ as a,o,N as c,t as r,dj as u,cI as d,f$ as m,cZ as g,bB as p,a1 as v}from"./p-384bfcf6.js";import"./p-0f3d65ca.js";import"./p-8cff990b.js";import"./p-0d62bf9d.js";import"./p-d70b188c.js";import"./p-815d6c40.js";const y=class{constructor(i){t(this,i),this.multiple=!1,this.values=[],this.validators=[],this.images=[],this.selection=[],this.validityChanged=s(this,"validityChanged",7),this.inputBlurred=s(this,"inputBlurred",7),this.inputFocused=s(this,"inputFocused",7),this.inputChanged=s(this,"inputChanged",7)}componentWillLoad(){if(l(this),n().boost&&this.images&&this.images.length>0&&this.values){let t=this.images,s=this.values;if(this.readonly){let t;this.value=this.multiple?[...this.value]:[this.value];let s=this.value.map(s=>(t=this.values.indexOf(s),{valueItem:s,_downloadURL:this.images[t]._downloadURL}));this.values=s}else{let i=s.map((s,i)=>({valueItem:s,_downloadURL:t[i]._downloadURL}));this.values=this.values?a(i):[]}}}componentDidLoad(){o(this.value)||(this.selection=[].concat(this.value)),this.updateShowOther()}validate(){let t=!0;return this.required&&!this.value&&(t=!1),this.validity&&this.validity===t||(this.validity=t),this.validityChanged.emit(this.validity),this.validity}calculateColumn(t){this.sizeColumn="",this.sizeColumn=1===t||this.fullWidth?"singleColumn":"doubleColumn"}calculateButton(t){this.sizeButton="",this.widthButton={},1===t||this.fullWidth?(this.sizeButton="large",this.widthButton={width:"100%"}):this.widthButton={width:"49%"}}convertToEntities(t){let s=[];return t.map&&t.forEach(t=>{let i={_id:t,title:c(t)};s=[...s,i]}),s}convertToChoiceFormat(t){let s=[];return t.map&&t.forEach(t=>{let i=t._id;s=[...s,i]}),s}getValuesWithOther(){let t=[...this.values];return this.allowOther&&!this.multiple&&t.push(r("OTHER")),t}setShowOther(t){this.showOther=t,setTimeout(()=>{this.showOther&&this.textareaRef&&this.textareaRef.focus()},50)}updateShowOther(){this.allowOther&&this.value&&this.values&&this.values.indexOf(this.value)<0&&this.setShowOther(!0)}onInput(t){t.stopPropagation(),this.textareaValue=t.target.value,this.selection=[this.textareaValue],u(this.multiple?this.selection:this.selection.length>0?this.selection[0]:null,this),this.updateShowOther()}onOpenImage(t,s){let i=this.images.map((t,s)=>(t.imageTitle=this.values[s],t));d(i,s)}onItemSelect(t){if(t===r("OTHER"))this.value=null,this.selection=[],this.setShowOther(!0);else{let s=this.selection.indexOf(t);this.multiple?s>=0?(this.selection.splice(s,1),this.selection=[...this.selection]):this.selection=[...this.selection,t]:this.selection=s>=0?[]:[t],u(this.multiple?this.selection:this.selection.length>0?this.selection[0]:null,this),this.setShowOther(!1)}}onItemSelectRadio(t){null===t?this.onItemSelect(t):this.multiple?(this.selection=this.convertToChoiceFormat(t),u(this.selection,this)):this.onItemSelect(t._id)}isSelected(t){let s=[].concat(this.selection);return m(s,s=>v(t,s))>=0}onTextAreaFocused(){this.inputFocused.emit({host:this.textareaRef})}renderButton(){let t=this.values.length;return this.calculateColumn(t),this.calculateButton(t),i("div",{class:"grid-container "+this.sizeColumn},this.values.map(t=>this.renderItem(t)))}renderRadio(){let t=this.getValuesWithOther(),s=this.convertToEntities(t),e=null;return this.showOther?e=s.find(t=>t._id===r("OTHER")):this.value&&(e=this.convertToEntities(Array.isArray(this.value)?this.value:[this.value])),[this.values?i("yoo-grid",{class:"radio-button-choice form-choice no-animation",items:s,initialSelection:e,keepSelection:!0,multiple:this.multiple,displayType:"card-list",onSelected:t=>this.onItemSelectRadio(t.detail),hideHeader:!0,hideFooter:!0,isLocal:!0,useTranslate:this.useTranslate,animated:!1,valuesColor:this.valuesColor}):null,this.showOther?i("div",{class:"input-zone"},i("textarea",{ref:t=>this.textareaRef=t,value:this.textareaValue,onInput:t=>this.onInput(t),onFocus:()=>this.onTextAreaFocused()})):null]}getColor(t){if(this.valuesColor&&t){if(!this.isSelected(t))return"";let s=this.valuesColor.find(s=>s.key===t);return s&&s.value?s.value:""}}getBackgroundClass(t){if(this.valuesColor&&t){let s=this.valuesColor.find(s=>s.key===t);if(s&&s.value)return""}return n().boost?"danger-light":"success"}renderItem(t){return i("yoo-button",{style:this.widthButton,onClick:()=>this.onItemSelect(t),text:this.useTranslate?r(t.toUpperCase()):c(t),class:"btn-form-choice "+this.sizeButton+" "+(this.isSelected(t)?this.getBackgroundClass(t):"outline"),bgColor:this.getColor(t)})}renderChat(){let t={content:c(this.sentence),isAlternate:!1};return i("div",{class:"messages-container"},!this.description&&i("div",{class:"chat-title"},r("THECLIENTASKS")),i("div",{class:"chat-item"},i("yoo-chat-message",{hideEmptyCheckbox:!0,message:t})),i("div",{class:"chat-title alternate"},r("WHATSTHECORRECTRESPONSE")),this.values?this.values.map(t=>{let s={content:t,isAlternate:!0};return i("yoo-chat-message",{class:this.isSelected(t)?"choice selected":"choice",message:s,onMessageClick:t=>this.onItemSelect(t.detail)})}):null)}renderCard(){return i("div",{class:"card-container"},this.values.map(t=>i("div",{class:{"card-select":!0,selected:this.isSelected(t.value)},onClick:()=>this.onItemSelect(t.value)},t.icon&&i("div",{class:"card-icon"},i("yoo-icon",{class:t.icon})),i("div",{class:"card-heading"},r(t.title)),i("div",{class:"card-description"},r(t.description)),i("div",{class:"check-container"},i("yoo-icon",{class:"yo-check"})))))}renderImage(){let t=this.values.some(t=>t&&t.valueItem&&t.valueItem.length>16);return n().boost?i("div",{class:"images-container"},this.values?this.values.map((s,e)=>i("div",{onClick:this.isHistory?()=>{this.onOpenImage(s.valueItem,e)}:null,class:{"image-container":!0,"twoline-description":t&&!p(),"twoline-description-tablet":t&&p()}},i("div",{class:"image-content",onClick:this.readonly?null:()=>this.onItemSelect(s.valueItem)},!this.isHistory&&i("div",{onClick:()=>d(this.values,e),class:"maximize-container"},i("yoo-icon",{class:"yo-maximize"})),s._downloadURL&&i("yoo-img",{type:"back",class:"image boost-image",src:g(s._downloadURL,98,98,null,null,null,null,!0)}),this.readonly?null:i("yoo-form-checkbox",{class:"btn-form-choice",value:this.isSelected(s.valueItem)})),i("div",{class:"text boost-text"},s.valueItem))):null):i("div",{class:"images-container"},this.values?this.values.map((t,s)=>i("div",{onClick:this.isHistory?()=>{this.onOpenImage(t,s)}:null,class:"image-container"},i("div",{class:"image-content",onClick:this.readonly?null:()=>this.onItemSelect(t)},this.images[s]&&this.images[s]._downloadURL?i("yoo-img",{type:"back",class:"image",src:g(this.images[s]._downloadURL,98,98,null,null,null,null,!0)}):null,this.readonly?null:i("yoo-form-checkbox",{class:"btn-form-choice",value:this.isSelected(t)}),i("div",{class:"text"},t)),this.isHistory?null:[i("div",{onClick:()=>{this.onOpenImage(t,s)},class:"maximize-container"},i("yoo-icon",{class:"yo-maximize"}))])):null)}renderReadonlyChat(){if(this.value)return this.multiple?[this.value?this.value.map(t=>i("span",null,c(t))):null]:[i("span",null,c(this.value))]}renderReadOnlyImage(t){let s=this.images.find(s=>s._filename===t);return i("div",{class:"image-container"},i("div",{class:"image-content"},s&&s._downloadURL?i("yoo-img",{type:"back",class:"image",src:g(s._downloadURL,98,98,null,null,null,null,!0)}):null))}renderReadonly(){return"chat"===this.type?this.renderReadonlyChat():"image"===this.type?this.renderImage():this.value?[].concat(this.value).map(t=>{let s=this.getColor(t),e={};return s&&(e={color:s}),i("div",{class:"text",innerHTML:c(t),style:e})}):null}renderEditable(){switch(this.type){case"radio":return this.renderRadio();case"chat":return this.sentence?this.renderChat():null;case"image":return this.renderImage();case"button":return this.renderButton();case"card":return this.renderCard()}}renderTextHistory(){return this.value?[].concat(this.value).map((t,s)=>{let e=this.getColor(t),h={};return e&&(h={color:e}),i("span",{class:"text",innerHTML:(0!==s?", ":"")+t,style:h})}):null}render(){return i(e,{class:Object.assign({"swiper-no-swiping":"image"===this.type},n())},this.readonly?i("div",{class:"readonly "+this.type},this.renderReadonly()):i("div",{class:"outer-container"},this.values&&this.renderEditable()))}get host(){return h(this)}static get style(){return".iframe-root{top:0;right:0;bottom:0;left:0;position:absolute;color:var(--black);overflow-y:auto;scrollbar-width:none}.iframe-root yoo-app .wrapper{display:-ms-flexbox;display:flex;-ms-flex-direction:row;flex-direction:row;-ms-flex-wrap:wrap;flex-wrap:wrap;height:100%;width:100%}.iframe-root yoo-app .wrapper.center-center{-ms-flex-align:center;align-items:center;-ms-flex-pack:center;justify-content:center;height:100%}.iframe-root::-webkit-scrollbar{display:none}:host .readonly .item{display:block!important;height:100%;padding:.3rem;padding-left:0;font-size:var(--font-size-03,1rem);cursor:pointer}:host .readonly .item .badge-inner{width:1.25rem;height:1.25rem;margin-top:1px;margin-right:var(--padding-10,.625rem);float:left;border-radius:50%;color:var(--light,#fff);font-size:var(--font-size-01,.75rem);line-height:1.25rem;text-align:center}:host .readonly.chat{display:grid}:host .outer-container.droppable{-ms-touch-action:none;touch-action:none}:host .outer-container .radio-button-choice{margin-top:-.5rem}:host .outer-container .grid-container{display:-ms-flexbox;display:flex;-ms-flex-wrap:wrap;flex-wrap:wrap;-ms-flex-pack:distribute;justify-content:space-around}:host .outer-container .grid-container.singleColumn{grid-template-columns:90%}:host .outer-container .grid-container.doubleColumn{-ms-flex-pack:justify;justify-content:space-between}:host .outer-container .grid-container yoo-button.btn-form-choice{margin-bottom:.4rem}:host .outer-container .input-zone{position:relative;height:2.375rem;margin-top:.5rem;margin-right:1rem;margin-left:1rem;padding:var(--padding-5,.3125rem);border:1px solid var(--stable,#adadad);border-radius:.3125rem;background-color:var(--light,#fff)}:host .outer-container .input-zone textarea{font-size:var(--font-size-02,.875rem);font-family:Lato;width:100%;height:100%;background-color:var(--light,#fff);color:var(--black,#000);line-height:1rem;border:none;resize:none;display:block;-webkit-box-sizing:border-box;box-sizing:border-box;-webkit-appearance:none;outline:none!important;overflow:hidden;overflow-y:scroll!important}:host .outer-container .item{display:block!important;height:100%;padding:.75rem;border-bottom:1px solid var(--stable-40,hsla(0,0%,67.8%,.4));color:var(--dark,#2b3648);font-size:var(--font-size-03,1rem);cursor:pointer}:host .outer-container .item:last-child{border-bottom:none}:host .outer-container .item .badge-inner{width:1.25rem;height:1.25rem;margin-top:3px;margin-right:var(--padding-10,.625rem);float:left;border-radius:50%;color:var(--always-light,#fff);font-size:var(--font-size-01,.75rem);line-height:1.25rem;text-align:center}:host .outer-container .item.drag-target{position:relative;background:var(--light,#fff);-webkit-box-shadow:var(--button-shadow,0 2px 6px rgba(0,0,0,.1));box-shadow:var(--button-shadow,0 2px 6px rgba(0,0,0,.1));z-index:50}:host .outer-container .item.drop-target{background:var(--stable-40,hsla(0,0%,67.8%,.4))}:host .outer-container .messages-container{display:-ms-flexbox;display:flex;-ms-flex-direction:column;flex-direction:column;padding:0 1rem 1rem 1rem}:host .outer-container .messages-container .chat-title.alternate{text-align:end}:host .outer-container .messages-container .chat-item,:host .outer-container .messages-container .chat-title,:host .outer-container .messages-container yoo-chat-message{margin-bottom:.5rem}:host .outer-container .messages-container yoo-chat-message{display:block}:host .outer-container .card-container{display:-ms-flexbox;display:flex;-ms-flex-wrap:wrap;flex-wrap:wrap}:host .outer-container .card-container .card-select{position:relative;width:calc(50% - 1.5625rem);margin:0 var(--padding-20,1.25rem) var(--padding-10,.625rem) 0;border:solid 1px var(--stable-light,#f1f1f1);border-radius:.5rem}:host .outer-container .card-container .card-select .card-description,:host .outer-container .card-container .card-select .card-heading{font-size:var(--font-size-02,.875rem);white-space:normal;word-break:break-word}:host .outer-container .card-container .card-select .card-icon{margin-top:3rem;font-size:var(--font-size-10,2.625rem);text-align:center}:host .outer-container .card-container .card-select .card-heading{padding:var(--padding-20,1.25rem) var(--padding-40,2.5rem) var(--padding-10,.625rem) var(--padding-20,1.25rem)}:host .outer-container .card-container .card-select .card-description{padding:0 var(--padding-20,1.25rem) var(--padding-20,1.25rem);color:var(--text-color,#807f83)}:host .outer-container .card-container .card-select .check-container{top:var(--padding-20,1.25rem);right:var(--padding-20,1.25rem);bottom:auto;left:auto;position:absolute;color:var(--stable,#adadad);font-size:var(--font-size-04,1.125rem)}:host .outer-container .card-container .card-select.selected{border:solid 1px var(--success,#04cc99)}:host .outer-container .card-container .card-select.selected .card-icon,:host .outer-container .card-container .card-select.selected .check-container{color:var(--success,#04cc99)}:host .outer-container .images-container,:host .readonly .images-container{display:-ms-flexbox;display:flex;-ms-flex-direction:row;flex-direction:row;-ms-flex-wrap:wrap;flex-wrap:wrap;-ms-flex-line-pack:center;align-content:center;-ms-flex-align:center;align-items:center;-ms-flex-pack:center;justify-content:center}:host .outer-container .images-container .image-container,:host .readonly .images-container .image-container{display:-ms-flexbox;display:flex;position:relative;-ms-flex-direction:column;flex-direction:column;margin:var(--padding-10,.625rem);margin-top:0}:host .outer-container .images-container .image-container .image-content,:host .readonly .images-container .image-container .image-content{display:-ms-flexbox;display:flex;position:relative;-ms-flex-direction:column;flex-direction:column;-ms-flex-line-pack:center;align-content:center;-ms-flex-align:center;align-items:center;-ms-flex-pack:center;justify-content:center;cursor:pointer}:host .outer-container .images-container .image-container .image-content .image,:host .readonly .images-container .image-container .image-content .image{width:6.5625rem;height:6.5625rem;border:solid 1px var(--stable-alt,#d0d0d0);border-radius:var(--video-border,8px)}:host .outer-container .images-container .image-container .image-content .boost-image,:host .readonly .images-container .image-container .image-content .boost-image{width:7.1255rem;height:7.1255rem}:host .outer-container .images-container .image-container .image-content yoo-form-checkbox,:host .readonly .images-container .image-container .image-content yoo-form-checkbox{top:0;right:0;bottom:auto;left:auto;position:absolute}:host .outer-container .images-container .image-container .maximize-container,:host .readonly .images-container .image-container .maximize-container{display:-ms-flexbox;display:flex;position:absolute;right:.5rem;bottom:2rem;-ms-flex-align:center;align-items:center;-ms-flex-pack:center;justify-content:center;width:1.875rem;height:1.875rem;border-radius:50%;background:var(--backdrop-black-transparent,rgba(0,0,0,.6));cursor:pointer;z-index:1}:host .outer-container .images-container .image-container .maximize-container .yo-maximize,:host .readonly .images-container .image-container .maximize-container .yo-maximize{display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center;-ms-flex-pack:center;justify-content:center;width:1.125rem;height:1.125rem;color:var(--light,#fff);-o-object-fit:contain;object-fit:contain}:host .outer-container .images-container .image-container .text,:host .readonly .images-container .image-container .text{overflow:hidden;text-overflow:ellipsis;white-space:nowrap;max-width:6.5625rem;margin-top:var(--padding-10,.625rem);color:var(--black,#000);font-size:var(--font-size-02,.875rem);line-height:1.0625rem;text-align:center;cursor:pointer}:host .outer-container .images-container .image-container .boost-text,:host .readonly .images-container .image-container .boost-text{display:-webkit-box;height:2.5rem;font-size:var(--font-size-04,1.125rem);line-height:1.2rem;text-align:left;white-space:normal;overflow:hidden;-webkit-line-clamp:2;-webkit-box-orient:vertical}:host .outer-container .images-container .image-container .boost-text:after,:host .readonly .images-container .image-container .boost-text:after{position:absolute;right:0;width:1rem;height:1rem;margin-top:.2rem;background:var(--light,#fff);content:\"\"}:host .readonly{padding:.5rem;padding-left:0;padding-bottom:0}:host .readonly .images-container{-ms-flex-pack:left;justify-content:left}:host(.boost) .outer-container .card-container .card-select.selected{border:solid 1px var(--danger-light,#f46885)}:host(.boost) .outer-container .card-container .card-select.selected .card-icon,:host(.boost) .outer-container .card-container .card-select.selected .check-container{color:var(--danger-light,#f46885)}:host(.boost) .item span{font-size:var(--font-size-04,1.125rem)}:host(.boost) .outer-container .images-container .image-container{margin-bottom:1.5rem}:host(.boost) .outer-container .images-container .image-container .maximize-container,:host(.boost) .readonly .images-container .image-container .maximize-container{top:4.9rem;right:5px;bottom:5px}:host(.boost) .readonly .images-container .image-container.twoline-description-tablet .image-content,:host(.boost) .readonly .images-container .image-container.twoline-description .image-content{display:inline-block;min-height:8.5rem}:host(.boost) .readonly .images-container .image-container.twoline-description{margin-bottom:3rem}:host(.round) .outer-container .grid-container .choice-container{border-radius:.3125rem}:host(.history) .readonly{padding:0!important}:host(.history) .readonly .text{max-width:80px}:host(.history) .readonly .item{width:auto}:host(.history) .readonly .images-container{display:-ms-flexbox;display:flex;-ms-flex-wrap:wrap;flex-wrap:wrap}:host(.history) .readonly .images-container .image-container{margin:0}:host(.history) .readonly .images-container .image-container .image-content .image{width:30px;height:30px;margin-right:10px;border-radius:2px}:host(.operations) .outer-container .item .badge-inner,:host(.operations) .readonly .item .badge-inner{background:var(--success,#04cc99)}:host(.operations) .outer-container .messages-container yoo-chat-message{--background-message-content:var(--success,#04cc99)}:host(.operations) .outer-container .images-container .image-container .text.link,:host(.operations) .readonly .images-container .image-container .text.link{color:var(--success,#04cc99)}:host(.boost) .outer-container .item .badge-inner,:host(.boost) .readonly .item .badge-inner{background:var(--danger-light,#f46885)}:host(.boost) .outer-container .messages-container yoo-chat-message{--background-message-content:var(--danger-light,#f46885)}:host(.boost) .outer-container .images-container .image-container .text.link,:host(.boost) .readonly .images-container .image-container .text.link{color:var(--danger-light,#f46885)}"}};export{y as yoo_form_choice};
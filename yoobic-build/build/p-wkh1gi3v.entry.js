import{r as t,h as o,g as s,c as e}from"./p-0d847530.js";import{t as i,cF as n,cE as a,z as l,q as r,bN as c}from"./p-384bfcf6.js";import"./p-0f3d65ca.js";import"./p-8cff990b.js";import"./p-0d62bf9d.js";import{dd as h}from"./p-d70b188c.js";import"./p-815d6c40.js";const d=class{constructor(o){t(this,o),this.disabled=!1,this.expandable=!1}onClick(t){t.target.closest("yoo-ion-item-option")&&t.preventDefault()}render(){return o(void 0===this.href?"button":"a",{type:"button",class:"button-native",disabled:this.disabled,href:this.href},o("span",{class:"button-inner"},o("slot",{name:"top"}),o("div",{class:"horizontal-wrapper"},o("slot",{name:"start"}),o("slot",{name:"icon-only"}),o("slot",null),o("slot",{name:"end"})),o("slot",{name:"bottom"})))}get el(){return s(this)}static get style(){return".iframe-root{top:0;right:0;bottom:0;left:0;position:absolute;color:var(--black);overflow-y:auto;scrollbar-width:none}.iframe-root yoo-app .wrapper{display:-ms-flexbox;display:flex;-ms-flex-direction:row;flex-direction:row;-ms-flex-wrap:wrap;flex-wrap:wrap;height:100%;width:100%}.iframe-root yoo-app .wrapper.center-center{-ms-flex-align:center;align-items:center;-ms-flex-pack:center;justify-content:center;height:100%}.iframe-root::-webkit-scrollbar{display:none}:host{font-family:Lato}:host(.in-list.item-options-end:last-child){padding-right:calc(.7em + constant(safe-area-inset-right));padding-left:0}:host(.in-list.item-options-start:first-child){padding-right:0;padding-left:calc(.7em + constant(safe-area-inset-left))}:host(.ion-color){background:var(--ion-color-base);color:var(--ion-color-contrast)}.button-native{display:inline-block;position:relative;width:100%;height:100%;padding:0 .7em;border:0;outline:none;background:transparent;cursor:pointer;-webkit-appearance:none;-moz-appearance:none;appearance:none;-webkit-box-sizing:border-box;box-sizing:border-box}.button-inner{-ms-flex-flow:column nowrap;flex-flow:column nowrap;height:100%}.button-inner,.horizontal-wrapper{display:-ms-flexbox;display:flex;-ms-flex-negative:0;flex-shrink:0;-ms-flex-align:center;align-items:center;-ms-flex-pack:center;justify-content:center;width:100%}.horizontal-wrapper{-ms-flex-flow:row nowrap;flex-flow:row nowrap}::slotted(*){-ms-flex-negative:0;flex-shrink:0}::slotted([slot=start]){margin-right:5px}::slotted([slot=end]){margin-left:5px}::slotted([slot=icon-only]){margin:0 10px;min-width:.9em;padding:0;font-size:var(--font-size-07,1.75rem)}:host(.item-option-expandable){-ms-flex-negative:0;flex-shrink:0;-webkit-transition-duration:0;transition-duration:0;-webkit-transition-property:none;transition-property:none;-webkit-transition-timing-function:cubic-bezier(.65,.05,.36,1);transition-timing-function:cubic-bezier(.65,.05,.36,1)}:host(.item-option-disabled){pointer-events:none}:host(.item-option-disabled) .button-native{cursor:default;opacity:.5;pointer-events:none}"}},m=class{constructor(o){t(this,o),this.memoEdit=e(this,"memoEdit",7),this.usersView=e(this,"usersView",7)}showDeleteAlert(t){let o=i("DELETE"),s=i("DELETETODOTASKCONFIRM");n(o,[i("CANCEL"),i("OK")],s,i("DELETETODOTASKCONFIRM")).then(o=>{!0===o&&a({memo:t,action:"delete"})})}onClose(){a(this.changed?{memo:this.memo,action:"update"}:null)}onCloseActionSheet(t,o){this.actionSheetDismiss={memo:t,action:o}}isEditable(){return this.memo.creatorRef===l().userId}onViewUsers(t){a({memo:t,action:"view_users"})}onShowActionSheet(t){let o=[{type:"edit",text:i("EDIT"),handler:()=>this.onCloseActionSheet(t,"edit")},{type:"delete",text:i("DELETE"),handler:()=>this.onCloseActionSheet(t,"delete")}];r(o,"black").then(()=>{if(this.actionSheetDismiss){let t=this.actionSheetDismiss.action;setTimeout(()=>{"edit"===t?a(this.actionSheetDismiss):this.showDeleteAlert(this.actionSheetDismiss.memo)},300)}})}onMemoToggle(t,o){this.setSelectedStyles(this.memoElement,t.detail?"completed":"active"),o.done=t.detail,this.changed=!0}onExtraDataChanged(t){this.changed=!0,this.memo.imageEdit=t.detail}setSelectedStyles(t,o){t&&("completed"===o?(t.classList.add("completed"),t.classList.remove("active")):(t.classList.add("active"),t.classList.remove("completed")))}renderHeader(){return o("yoo-header",{class:"shadow"},o("yoo-ion-toolbar",{color:"light"},o("yoo-ion-buttons",{slot:"start"},o("yoo-ion-button",{color:"text-color",class:"close button-clear",onClick:()=>this.onClose()},o("yoo-icon",{slot:"icon-only",class:"yo-left"}))),o("yoo-title",null,i("TASKDETAIL")),this.isEditable()?o("yoo-ion-buttons",{slot:"end"},o("yoo-ion-button",{color:"text-color",onClick:()=>this.onShowActionSheet(this.memo)},o("yoo-icon",{slot:"icon-only",class:"yo-more"}))):null))}renderContent(){const t=this.memo.usersRef.indexOf(l().userId)<0,s=this.memo.usersRef.indexOf(l().userId)>=0||this.memo.creatorRef===l().userId;return o("yoo-ion-content",{scrollEnabled:!1,class:"bg-light"},o("div",{class:"inner-container"},o("div",{class:"left-container"},o("yoo-form-checkbox",{value:this.memo.done,readonly:t,onInputChanged:o=>t?null:this.onMemoToggle(o,this.memo)})),o("div",{class:"right-container"},o("div",{class:"title"+(this.memo.done?" completed":" active"),ref:t=>this.memoElement=t},this.memo.title),this.memo.description?o("div",{class:"description"},this.memo.description):null,this.memo.duedate?o("div",{class:{date:!0,danger:"closed"!==this.type&&c(this.memo.duedate,new Date)}},o("yoo-icon",{class:"yo-alarm"})," ",h.dateFormat.transform(this.memo.duedate,"L")," "):null,o("div",{class:"avatar-box"},o("div",{class:"avatar-container"},o("ul",null,this.memo.users.map(t=>o("li",{onClick:()=>this.onViewUsers(this.memo)},o("yoo-avatar",{class:"s"+(t.imageData?" avatar-image":""),avatarIconSize:"s",user:t})))))))),this.memo.imageData?o("div",{class:"photo"},o("yoo-form-capture",{readonly:!0,value:this.memo.imageData,allowAnnotate:s,onExtraDataChanged:t=>this.onExtraDataChanged(t),extraData:this.memo.imageEdit})):null)}render(){return[this.renderHeader(),this.renderContent()]}get host(){return s(this)}static get style(){return".iframe-root{top:0;right:0;bottom:0;left:0;position:absolute;color:var(--black);overflow-y:auto;scrollbar-width:none}.iframe-root yoo-app .wrapper{display:-ms-flexbox;display:flex;-ms-flex-direction:row;flex-direction:row;-ms-flex-wrap:wrap;flex-wrap:wrap;height:100%;width:100%}.iframe-root yoo-app .wrapper.center-center{-ms-flex-align:center;align-items:center;-ms-flex-pack:center;justify-content:center;height:100%}.iframe-root::-webkit-scrollbar{display:none}:host .inner-container{display:-ms-flexbox;display:flex;-ms-flex-direction:row;flex-direction:row;padding:1rem .5rem;padding-bottom:0}:host .inner-container .left-container{padding:.25rem .5rem}:host .inner-container .right-container{display:-ms-flexbox;display:flex;-ms-flex-direction:column;flex-direction:column}:host .inner-container .right-container .title{padding-top:.1rem;font-size:var(--font-size-04,1.125rem)}:host .inner-container .right-container .completed{-webkit-transition:.3s;transition:.3s;color:var(--success,#04cc99);text-decoration:line-through}:host .inner-container .right-container .active{-webkit-transition:.3s;transition:.3s;color:var(--black,#000);text-decoration:none}:host .inner-container .right-container .description{padding-top:.5rem;padding-bottom:.5rem;color:var(--text-color,#807f83);font-size:var(--font-size-02,.875rem)}:host .inner-container .right-container .date.danger{color:var(--danger,#ff625f)}:host .inner-container .right-container .avatar-box{padding-top:.5rem;padding-right:.4rem}:host .inner-container .right-container .avatar-box .avatar-container yoo-avatar{height:24px}:host .inner-container .right-container .avatar-box .avatar-container ul{margin:auto;padding:0;line-height:2rem;list-style:none}:host .inner-container .right-container .avatar-box .avatar-container ul li{display:inline-table;margin-right:.25rem}:host .photo{margin:1rem;margin-top:0}"}};export{d as yoo_ion_item_option,m as yoo_memo_list_dialog};
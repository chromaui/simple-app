import{r as s,c as t,h as i,g as e}from"./p-0d847530.js";import{cw as o,cF as n,t as l,ao as a,i as c,b as r,o as h,fY as d}from"./p-384bfcf6.js";import"./p-0f3d65ca.js";import"./p-8cff990b.js";import"./p-0d62bf9d.js";import{dd as u}from"./p-d70b188c.js";import"./p-815d6c40.js";const m=class{constructor(i){s(this,i),this.type="mission",this.onCommentsChange=o((s,t)=>{this.valuesState[t].userComments=s.detail,this.valuesState=[...this.valuesState],this.update.emit(this.valuesState)}),this.update=t(this,"update",7)}componentWillLoad(){if(this.valuesState=this.values,this.valuesState&&this.valuesState.forEach(s=>{s.finished=s.finished||{value:null}}),this.showComments=new Array,this.values)for(let s=0;s<this.values.length;s++)this.showComments.push(!1)}onIconClick(s,t,i){let e;s.isphotorequired&&(e=s.isphotorequired.value&&!s.imageData);let o=this.valuesState[t].finished;e?(n(l("TASK"),[l("CANCEL"),l("CONFIRM")],"",l("MANDATORYPHOTO")),o.value=null,o.date=null):o.value===i?(o.value=null,o.date=null):(o.value=i,o.date=new Date),this.valuesState=[...this.valuesState],this.update.emit(this.valuesState)}onImageChanged(s,t){s.stopPropagation(),this.valuesState[t].imageData=s.detail,this.valuesState=[...this.valuesState],this.update.emit(this.valuesState)}onToggleComments(s,t){s.userComments||(this.showComments[t]=!this.showComments[t],this.showComments=[...this.showComments],this.showComments[t]&&setTimeout(()=>{this.onFocusComments(t)},200))}onFocusComments(s){let t=a(this.host,"yoo-form-text-area.index"+s);t&&t.setFocus()}onCommentFocused(s){c()&&r()&&s&&this.parentScroll&&this.textareaContainer?(this.textareaContainer.setAttribute("style","margin-bottom: 400px;"),this.parentScroll.scrollToBottom(100)):c()&&r()&&this.textareaContainer&&!s&&this.textareaContainer.setAttribute("style","margin-bottom: 0px;")}renderComments(s){let t=this.valuesState[s].userComments;return this.showComments[s]||t||this.readonly?i("yoo-form-text-area",{onInputChanged:t=>this.onCommentsChange(t,s),onInputFocused:()=>this.onCommentFocused(!0),onInputBlurred:()=>this.onCommentFocused(!1),readonly:this.readonly,value:t,class:"animated fadeIn  index"+s}):null}renderIconCheck(s,t){return"mission"===this.type?[i("yoo-icon",{class:"yo-check "+(s.finished&&!0===s.finished.value?"success":"stable-alt"),onClick:()=>this.onIconClick(s,t,!0)}),i("yoo-icon",{class:"yo-cross "+(s.finished&&!1===s.finished.value?"danger":"stable-alt"),onClick:()=>this.onIconClick(s,t,!1)})]:"form"===this.type?i("yoo-form-checkbox",{value:s.finished.value,onClick:()=>this.onIconClick(s,t,s.finished.value)}):void 0}renderContentLeft(s,t){return this.readonly?[i("yoo-icon",{class:" "+(s.finished&&!0===s.finished.value?"yo-check success":s.finished&&!1===s.finished.value?"yo-cross danger":"yo-circle stable-alt")}),s.text&&s.text.value?s.finished&&!h(s.finished.value)?i("span",{class:"text break-line "+(!0===s.finished.value?"success":"danger")},s.text.value):i("span",{class:"text"},s.text.value):null]:[this.renderIconCheck(s,t),s.text&&s.text.value?i("span",{class:"text"},s.text.value):null]}renderLinkedField(s){if(s&&s.field&&s.field.name){let t=d(s.field);return delete t.condition,i("div",{class:"menu"},i("li",{class:"menu-item"},i("div",{class:"menu-left"},i("span",{class:"menu-icon"},i("yoo-icon",{class:"yo-link"})),i("div",{class:"border"})),i("div",{class:"menu-right"},i("div",{class:"menu-title"},l("LINKEDTO")),i("div",{class:"menu-content menu-requestor"},i("yoo-form-dynamic",{class:"inline",slides:[{title:"GENERAL",items:[t]}],data:{[t.name]:Object.assign({value:s.fieldValue},s.fieldExtra)},forceReadonly:!0,onFormValidityChanged:s=>s.stopPropagation(),suffix:".value",animated:!1,showRecap:!1})))))}}render(){return i("div",{class:"outer-container"},i("div",{class:"title"},l("ACTIONPLAN")),this.valuesState?this.valuesState.map((s,t)=>i("div",{class:"todo-container"},i("div",{class:"previous"},this.renderLinkedField(s)),i("div",{class:"content"},i("div",{class:"content-left"},this.renderContentLeft(s,t)),i("div",{class:"content-right"},s.duedate&&s.duedate.value?i("div",{class:"date"},u.dateFormat.transform(s.duedate.value,"L")):null)),s.comments&&s.comments.value?i("div",{class:"comments",innerHTML:s.comments.value}):null,s.hasphoto&&s.hasphoto.value&&(!this.readonly||s.imageData)?i("div",{class:"photo-container"},i("yoo-form-capture",{value:s.imageData,type:"photo",required:s.isphotorequired&&s.isphotorequired.value,allowLibrary:s.allowLibrary&&s.allowLibrary.value,readonly:this.readonly,onInputChanged:s=>this.onImageChanged(s,t)})):null,!this.readonly||this.valuesState[t].userComments?i("div",{class:"border"}):null,this.readonly?null:i("div",{class:"comment-container"},i("span",{onClick:()=>this.onToggleComments(s,t)},i("yoo-icon",{class:"yo-comment stable-alt"}))),!this.readonly||this.valuesState[t].userComments?i("div",{ref:s=>this.textareaContainer=s,class:"textarea-container"},this.renderComments(t)):null)):null)}get host(){return e(this)}static get style(){return".iframe-root{top:0;right:0;bottom:0;left:0;position:absolute;color:var(--black);overflow-y:auto;scrollbar-width:none}.iframe-root yoo-app .wrapper{display:-ms-flexbox;display:flex;-ms-flex-direction:row;flex-direction:row;-ms-flex-wrap:wrap;flex-wrap:wrap;height:100%;width:100%}.iframe-root yoo-app .wrapper.center-center{-ms-flex-align:center;align-items:center;-ms-flex-pack:center;justify-content:center;height:100%}.iframe-root::-webkit-scrollbar{display:none}:host .outer-container .todo-container{margin-bottom:1.5625rem}:host .outer-container .todo-container .content{display:-ms-flexbox;display:flex;-ms-flex-direction:row;flex-direction:row;-ms-flex-pack:justify;justify-content:space-between;margin:.6875rem 0 .5rem 0}:host .outer-container .todo-container .content .content-left{display:-ms-flexbox;display:flex;-ms-flex-direction:row;flex-direction:row;-ms-flex-align:center;align-items:center}:host .outer-container .todo-container .content .content-left yoo-icon{margin-top:.2rem;margin-right:var(--padding-10,.625rem);font-size:var(--font-size-04,1.125rem)}:host .outer-container .todo-container .content .content-left yoo-icon.stable-alt{color:var(--text-color,#807f83)}:host .outer-container .todo-container .content .content-left yoo-form-checkbox{margin-right:var(--padding-10,.625rem)}:host .outer-container .todo-container .content .content-left .break-line{text-decoration:line-through}:host .outer-container .todo-container .content .content-right{display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center}:host .outer-container .todo-container .comments,:host .outer-container .todo-container .content .content-right .date{color:var(--text-color,#807f83);font-size:var(--font-size-02,.875rem);font-weight:var(--font-weight-01,300)}:host .outer-container .todo-container .comments{margin-bottom:var(--padding-15,.9375rem)}:host .outer-container .todo-container .photo-container{margin-bottom:.875rem}:host .outer-container .todo-container .comment-container{margin-top:.875rem}:host .outer-container .todo-container .comment-container .yo-comment{font-size:var(--font-size-05,1.25rem)}:host .outer-container .todo-container .textarea-container{margin-top:var(--padding-10,.625rem)}:host .outer-container .todo-container .border{width:100%;height:0;border-top:1px solid var(--stable-40,hsla(0,0%,67.8%,.4));margin-bottom:var(--padding-10,.625rem)}:host .outer-container .todo-container .menu{list-style:none outside none;background:none repeat scroll 0 0 transparent;border:0 none;font-size:100%;margin:0;outline:0 none;vertical-align:baseline;-webkit-tap-highlight-color:transparent;margin:.5rem;padding:0;list-style:none}:host .outer-container .todo-container .menu .menu-item{display:-ms-flexbox;display:flex;-ms-flex-direction:row;flex-direction:row}:host .outer-container .todo-container .menu .menu-item .menu-left{display:-ms-flexbox;display:flex;-ms-flex-direction:column;flex-direction:column;-ms-flex-align:center;align-items:center}:host .outer-container .todo-container .menu .menu-item .menu-left .menu-icon{height:1.875rem;width:1.875rem}:host .outer-container .todo-container .menu .menu-item .menu-left .menu-icon yoo-icon{height:1.875rem;width:1.875rem;font-size:var(--font-size-04,1.125rem);display:-ms-flexbox;display:flex;-ms-flex-pack:center;justify-content:center;background-color:var(--success,#04cc99);color:var(--always-light,#fff);border-radius:50%;line-height:1.875rem;padding:0}:host .outer-container .todo-container .menu .menu-item .menu-left .border{width:1px;height:100%;background-color:var(--stable-alt,#d0d0d0)}:host .outer-container .todo-container .menu .menu-item .menu-right{margin-left:.625rem;width:100%;overflow:hidden}:host .outer-container .todo-container .menu .menu-item .menu-right .menu-title{font-weight:var(--font-weight-03,700);line-height:1.125rem;margin-top:.375rem}:host .outer-container .todo-container .menu .menu-item .menu-right .menu-content{margin-top:.25rem;margin-bottom:1.25rem;color:var(--text-color,#807f83)}:host .outer-container .todo-container .menu .menu-item .menu-right .menu-content a,:host .outer-container .todo-container .menu .menu-item .menu-right .menu-content abbr,:host .outer-container .todo-container .menu .menu-item .menu-right .menu-content acronym,:host .outer-container .todo-container .menu .menu-item .menu-right .menu-content address,:host .outer-container .todo-container .menu .menu-item .menu-right .menu-content applet,:host .outer-container .todo-container .menu .menu-item .menu-right .menu-content big,:host .outer-container .todo-container .menu .menu-item .menu-right .menu-content blockquote,:host .outer-container .todo-container .menu .menu-item .menu-right .menu-content body,:host .outer-container .todo-container .menu .menu-item .menu-right .menu-content caption,:host .outer-container .todo-container .menu .menu-item .menu-right .menu-content cite,:host .outer-container .todo-container .menu .menu-item .menu-right .menu-content code,:host .outer-container .todo-container .menu .menu-item .menu-right .menu-content dd,:host .outer-container .todo-container .menu .menu-item .menu-right .menu-content del,:host .outer-container .todo-container .menu .menu-item .menu-right .menu-content dfn,:host .outer-container .todo-container .menu .menu-item .menu-right .menu-content div,:host .outer-container .todo-container .menu .menu-item .menu-right .menu-content dl,:host .outer-container .todo-container .menu .menu-item .menu-right .menu-content dt,:host .outer-container .todo-container .menu .menu-item .menu-right .menu-content em,:host .outer-container .todo-container .menu .menu-item .menu-right .menu-content fieldset,:host .outer-container .todo-container .menu .menu-item .menu-right .menu-content font,:host .outer-container .todo-container .menu .menu-item .menu-right .menu-content form,:host .outer-container .todo-container .menu .menu-item .menu-right .menu-content h1,:host .outer-container .todo-container .menu .menu-item .menu-right .menu-content h2,:host .outer-container .todo-container .menu .menu-item .menu-right .menu-content h3,:host .outer-container .todo-container .menu .menu-item .menu-right .menu-content h4,:host .outer-container .todo-container .menu .menu-item .menu-right .menu-content h5,:host .outer-container .todo-container .menu .menu-item .menu-right .menu-content h6,:host .outer-container .todo-container .menu .menu-item .menu-right .menu-content html,:host .outer-container .todo-container .menu .menu-item .menu-right .menu-content iframe,:host .outer-container .todo-container .menu .menu-item .menu-right .menu-content img,:host .outer-container .todo-container .menu .menu-item .menu-right .menu-content ins,:host .outer-container .todo-container .menu .menu-item .menu-right .menu-content kbd,:host .outer-container .todo-container .menu .menu-item .menu-right .menu-content label,:host .outer-container .todo-container .menu .menu-item .menu-right .menu-content legend,:host .outer-container .todo-container .menu .menu-item .menu-right .menu-content li,:host .outer-container .todo-container .menu .menu-item .menu-right .menu-content object,:host .outer-container .todo-container .menu .menu-item .menu-right .menu-content ol,:host .outer-container .todo-container .menu .menu-item .menu-right .menu-content p,:host .outer-container .todo-container .menu .menu-item .menu-right .menu-content pre,:host .outer-container .todo-container .menu .menu-item .menu-right .menu-content q,:host .outer-container .todo-container .menu .menu-item .menu-right .menu-content s,:host .outer-container .todo-container .menu .menu-item .menu-right .menu-content samp,:host .outer-container .todo-container .menu .menu-item .menu-right .menu-content small,:host .outer-container .todo-container .menu .menu-item .menu-right .menu-content span,:host .outer-container .todo-container .menu .menu-item .menu-right .menu-content strike,:host .outer-container .todo-container .menu .menu-item .menu-right .menu-content strong,:host .outer-container .todo-container .menu .menu-item .menu-right .menu-content sub,:host .outer-container .todo-container .menu .menu-item .menu-right .menu-content sup,:host .outer-container .todo-container .menu .menu-item .menu-right .menu-content table,:host .outer-container .todo-container .menu .menu-item .menu-right .menu-content tbody,:host .outer-container .todo-container .menu .menu-item .menu-right .menu-content td,:host .outer-container .todo-container .menu .menu-item .menu-right .menu-content tfoot,:host .outer-container .todo-container .menu .menu-item .menu-right .menu-content th,:host .outer-container .todo-container .menu .menu-item .menu-right .menu-content thead,:host .outer-container .todo-container .menu .menu-item .menu-right .menu-content tr,:host .outer-container .todo-container .menu .menu-item .menu-right .menu-content tt,:host .outer-container .todo-container .menu .menu-item .menu-right .menu-content ul,:host .outer-container .todo-container .menu .menu-item .menu-right .menu-content var{margin:0;padding:0;border:0;outline:0;font-weight:inherit;font-style:inherit;font-size:100%;font-family:inherit;vertical-align:baseline;-webkit-margin-before:0;-webkit-margin-after:0;-webkit-margin-start:0;-webkit-margin-end:0}:host .outer-container .todo-container .menu .menu-item .menu-right .menu-title{margin-bottom:.625rem}:host .outer-container .todo-container .menu .menu-item .menu-right .menu-content span{margin-right:1.25rem}:host .outer-container .todo-container .menu .menu-item .menu-right .menu-content yoo-avatar{margin-right:.3125rem}:host(.readonly) .outer-container .title{margin-top:.5rem}:host(.readonly) .outer-container .todo-container{margin-bottom:0}"}};export{m as yoo_form_todo_single};
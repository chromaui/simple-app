import{r as t,h as e,H as i,g as s}from"./p-0d847530.js";import{t as o,cP as r,cE as a,p as l,u as n,c_ as h,ak as c}from"./p-384bfcf6.js";import"./p-0f3d65ca.js";import"./p-8cff990b.js";import"./p-0d62bf9d.js";import"./p-d70b188c.js";import"./p-815d6c40.js";const d=class{constructor(e){t(this,e),this.hideToolbar=!1,this.selectedMode=0,this.timeTabs=[],this.showTooltip=!1}componentWillLoad(){this.timeTabs=this.getTimesTabObject(),this.setChartStyles(),this.evolutions&&(this.reverseEvolutionOrder(),this.initCharts(),this.generateNumbersDisplayData())}componentWillUpdate(){this.evolutions&&this.initCharts()}getTimesTabObject(){return[{title:o("WEEK"),value:"week"},{title:o("MONTH"),value:"month"},{title:o("3MONTHS"),value:"quarter"}]}getTimeInterval(){const t=864e5,e=6048e5,i=2592e6;switch(this.selectedMode){case 0:return{interval:t,format:"{value:%e. %b}"};case 2:return{interval:i,format:"{value:%b}"};case 1:default:return{interval:e,format:"{value:%e. %b}"}}}getChartTooltipOptions(t){return{style:{color:r()?"#212936":"#ffffff"},backgroundColor:r()?"#ffffff":"#000000",borderRadius:5,borderWidth:0,formatter:t,crosshairs:[!1,!1],shadow:!1}}generateNumbersDisplayData(){this.numbersDisplayData=[{title:"lowest",value:this.evolution.lowest,colorClass:"danger"},{title:"current",value:this.evolution.current,colorClass:"black"},{title:"highest",value:this.evolution.highest,colorClass:"success"}]}onCancel(){this.reverseEvolutionOrder(),a(null)}setChartStyles(){const t={fontSize:"9px",textOverflow:"none",color:r()?"#fff":"rgb(208, 208, 208)"};this.xAxis={labels:{style:t},tickLength:0},this.yAxis={labels:{style:t},tickColor:"rgb(208, 208, 208)"}}reverseEvolutionOrder(){if(this.evolutions&&this.evolutions.length)for(let t=0;t<this.evolutions.length;t++)this.evolutions[t].evolution.reverse()}initEvolutionChart(){if(this.chartEvolutionConfig={tooltip:this.getChartTooltipOptions(function(){let t=new Date(this.x),e=t.getMonth()+1<10?`0${t.getMonth()+1}`:t.getMonth()+1,i=this.y;return`${t.getDate()}/${e} : ${i}`}),chart:{height:l()?"180px":"151px",backgroundColor:r()?"#212936":"#fff"},title:{text:null},xAxis:{type:"datetime",tickmarkPlacement:"on",categories:[],labels:{format:this.getTimeInterval().format,style:this.xAxis.labels.style},tickInterval:this.getTimeInterval().interval},yAxis:Object.assign({min:0,max:100,tickInterval:25,title:{text:o("HEALTHSCORE")}},this.yAxis),legend:{enabled:!1},series:[{type:"areaspline",data:[],color:"rgba(4, 204, 153, 0.15)"}],navigation:{buttonOptions:{enabled:!1}},plotOptions:{areaspline:{pointPlacement:"on",fillColor:"rgba(4, 204, 153, 0.15)",marker:{enabled:!1},lineWidth:.75,lineColor:"rgb(4, 204, 153)"}}},this.evolution&&this.evolution.evolution){let t=this.chartEvolutionConfig.series;this.evolution.evolution.forEach(e=>{t[0].data.push([new Date(e.date).getTime(),e.value])})}}initComparisonChart(){let t=0,e=0,i=0;if(this.evolution&&(t=Math.max.apply(Math,this.evolution.comparison.numberOfStoresInGroup.map(t=>{if(n(t.value))return t.value})),e=(i=this.evolution.comparison.chartSettings.groupRange)*this.evolution.comparison.chartSettings.numberOfGroups),this.chartComparisonConfig={tooltip:this.getChartTooltipOptions(function(){return`${o("NUMBERSTORES")}: ${this.y}`}),chart:{type:"column",height:l()?"180px":"157px",backgroundColor:r()?"#212936":"#fff"},title:{text:o("COMPARISON")},xAxis:Object.assign({},this.xAxis,{categories:[],min:this.evolution.comparison.chartSettings.startPoint,max:e,tickInterval:i,title:{text:o("HEALTHSCORE")},labels:{formatter(){return 1===this.value?0:10*Math.round(this.value/10)},style:this.xAxis.labels.style}}),yAxis:Object.assign({min:0,max:t,tickInterval:1,title:{text:o("NUMBERSTORES")}},this.yAxis),legend:{enabled:!1},plotOptions:{series:{groupPadding:0,dataLabels:{enabled:!0}},column:{grouping:!1,shadow:!1,borderWidth:0,pointPadding:0}},navigation:{buttonOptions:{enabled:!1}},series:[{data:[],dataLabels:{enabled:!1},color:"rgb(208, 208, 208)",pointWidth:25,xAxis:0},{data:[],dataLabels:{enabled:!1},color:"rgb(208, 208, 208)",pointWidth:25,xAxis:0},{data:[],dataLabels:{enabled:!1},color:"rgb(208, 208, 208)",xAxis:0},{data:[],inside:!1,dataLabels:{format:"{point.store}",color:"rgb(4, 204, 153)",crop:!1,overflow:"allow"},color:"rgb(4, 204, 153)",pointWidth:2,xAxis:0,enableMouseTracking:!1},{data:[],inside:!1,dataLabels:{format:"{point.average}",color:"rgb(252, 69, 158)",crop:!1,overflow:"allow"},color:"rgb(252, 69, 158)",pointWidth:2,xAxis:0,enableMouseTracking:!1}]},this.evolution&&this.evolution.comparison&&this.evolution.comparison.numberOfStoresInGroup){let e=this.evolution.comparison.myStore.groupNumber,i=this.evolution.comparison.average.groupNumber,s=this.evolution.comparison.myStore&&this.evolution.comparison.myStore.value,o=this.evolution.comparison.average&&this.evolution.comparison.average.value,r=this.chartComparisonConfig.series;s&&r[3].data.push({x:s-1,y:.9*t,store:Math.round(s)}),o&&r[4].data.push({x:o-1,y:.9*t,average:Math.round(o)});let a=this.chartComparisonConfig.xAxis.categories;this.evolution.comparison.numberOfStoresInGroup.forEach(t=>{const s=t.groupNumber===e,o=t.groupNumber===i;n(t.value)&&(s&&o?s?r[1].data.push({x:10*(t.groupNumber-.5),y:t.value}):o&&r[2].data.push({x:10*(t.groupNumber-.5),y:t.value}):r[0].data.push({x:10*(t.groupNumber-.5),y:t.value})),t.groupNumber&&a.push(t.groupNumber)})}}initCharts(){this.evolution=this.evolutions[this.selectedMode],this.initEvolutionChart(),this.initComparisonChart()}renderNumbersDisplay(){return e("yoo-numbers-display",{entry:this.numbersDisplayData})}onTimeTabSelected(t){let e=this.timeTabs.indexOf(t.detail);this.selectedMode=e,this.evolution=this.evolutions[this.selectedMode],this.initEvolutionChart()}renderHealthscoreNavbar(){return e("yoo-navbar",{class:"items-space-around swiper-no-swiping",withLine:!0,tabs:this.timeTabs,onTabSelected:t=>this.onTimeTabSelected(t)})}renderHealthscoreChart(t){return e("div",{class:"healthscore-chart"},e("yoo-chart",{config:t}))}renderHealthscoreEvolution(){return e("div",{class:"healthscore-evolution"},this.renderHealthscoreChart(this.chartEvolutionConfig))}renderHealthscoreComparisonLegend(){return e("div",{class:"legends"},e("div",{class:"legend"},e("div",{class:"legend-row"},e("div",{class:"round bg-success"}),e("div",null,o("MYSTORE2"))),e("div",{class:"legend-row"},e("div",{class:"round bg-info"}),e("div",null,o("AVG").toUpperCase()))))}renderHealthscoreComparison(){return e("div",{class:"healthscore-comparison"},this.renderHealthscoreComparisonLegend(),this.renderHealthscoreChart(this.chartComparisonConfig))}renderHealthscoreTitle(t,i){return e("div",{class:"healthscore-title swiper-no-swiping"},e("div",null,o(t.toUpperCase())),e("div",null,this.renderHelpButton(i)))}renderHelpButton(t){let i=o(t);return e("yoo-tooltip",{content:i,coeffMaxWidth:.85,placement:"right",options:{trigger:"click",onShow:t=>h(t),onHide:()=>{this.showTooltip&&(this.showTooltip=!1)}}},e("yoo-icon",{class:"yo-help stable-alt"}))}renderHealthscoreCharts(){return this.evolution&&e("div",{class:"outer-container"},!l()&&this.renderHealthscoreNavbar(),this.renderHealthscoreTitle("evolution","HSDESCRIPTIONEVOLUTION1"),this.renderNumbersDisplay(),this.renderHealthscoreEvolution(),this.renderHealthscoreTitle("comparison","HSDESCRIPTIONCOMPARISON"),this.renderHealthscoreComparison())}renderWeb(){return this.evolution&&e("div",{class:{"outer-container":!0,toolbar:!this.hideToolbar}},this.renderWebSlides())}renderWebSlides(){return e("yoo-ion-slides",{class:"centre-pagination",pager:!0},["evolution","comparison"].map(t=>e("yoo-ion-slide",{class:"navigation-padding"},e("div",{class:"slide-content"},this.renderHealthscoreTitle(t,""),this.renderHealthscoreNavbar(),"evolution"===t&&[this.renderNumbersDisplay(),this.renderHealthscoreEvolution()],"comparison"===t&&this.renderHealthscoreComparison()))))}renderMobileContent(){return e("yoo-ion-content",{class:"bg-light",scrollEnabled:!0},this.renderHealthscoreCharts())}render(){return e(i,{class:c()},!this.hideToolbar&&e("yoo-header",null,e("yoo-ion-toolbar",{color:"light"},e("yoo-ion-buttons",{slot:"start"},e("yoo-ion-button",{color:"text-color",class:"close button-clear",onClick:()=>this.onCancel()},e("yoo-icon",{slot:"icon-only",class:"yo-close"}))),e("yoo-title",null,o("OVERVIEW2")))),l()?this.renderWeb():this.renderMobileContent())}get host(){return s(this)}static get style(){return".iframe-root.sc-yoo-healthscore-dialog{top:0;right:0;bottom:0;left:0;position:absolute;color:var(--black);overflow-y:auto;scrollbar-width:none}.iframe-root.sc-yoo-healthscore-dialog yoo-app.sc-yoo-healthscore-dialog .wrapper.sc-yoo-healthscore-dialog{display:-ms-flexbox;display:flex;-ms-flex-direction:row;flex-direction:row;-ms-flex-wrap:wrap;flex-wrap:wrap;height:100%;width:100%}.iframe-root.sc-yoo-healthscore-dialog yoo-app.sc-yoo-healthscore-dialog .wrapper.center-center.sc-yoo-healthscore-dialog{-ms-flex-align:center;align-items:center;-ms-flex-pack:center;justify-content:center;height:100%}.iframe-root.sc-yoo-healthscore-dialog::-webkit-scrollbar{display:none}.sc-yoo-healthscore-dialog-h{display:block}.sc-yoo-healthscore-dialog-h .outer-container.sc-yoo-healthscore-dialog{display:-ms-flexbox;display:flex;-ms-flex-direction:column;flex-direction:column}.sc-yoo-healthscore-dialog-h .outer-container.sc-yoo-healthscore-dialog yoo-chart.sc-yoo-healthscore-dialog{--height:fit-content}.sc-yoo-healthscore-dialog-h .outer-container.sc-yoo-healthscore-dialog .healthscore-title.sc-yoo-healthscore-dialog{display:-ms-flexbox;display:flex;-ms-flex-direction:row;flex-direction:row;padding:1.5rem 1rem;text-align:center;text-transform:uppercase}.sc-yoo-healthscore-dialog-h .outer-container.sc-yoo-healthscore-dialog .healthscore-title.sc-yoo-healthscore-dialog div.sc-yoo-healthscore-dialog:first-child{width:100%}.sc-yoo-healthscore-dialog-h .outer-container.sc-yoo-healthscore-dialog yoo-numbers-display.sc-yoo-healthscore-dialog{width:85%;margin:0 auto}.sc-yoo-healthscore-dialog-h .outer-container.sc-yoo-healthscore-dialog .healthscore-evolution.sc-yoo-healthscore-dialog{margin-top:1.25rem;border-bottom:1px solid var(--stable-light,#f1f1f1)}.sc-yoo-healthscore-dialog-h .outer-container.sc-yoo-healthscore-dialog .healthscore-evolution.sc-yoo-healthscore-dialog .healthscore-chart.sc-yoo-healthscore-dialog{height:10.3125rem;margin-top:.875rem}.sc-yoo-healthscore-dialog-h .outer-container.sc-yoo-healthscore-dialog .healthscore-comparison.sc-yoo-healthscore-dialog{margin-top:-1.25rem}.sc-yoo-healthscore-dialog-h .outer-container.sc-yoo-healthscore-dialog .healthscore-comparison.sc-yoo-healthscore-dialog .healthscore-chart.sc-yoo-healthscore-dialog{height:12.1875rem}.sc-yoo-healthscore-dialog-h .outer-container.sc-yoo-healthscore-dialog .healthscore-comparison.sc-yoo-healthscore-dialog .legends.sc-yoo-healthscore-dialog{display:-ms-flexbox;display:flex;-ms-flex-direction:row;flex-direction:row;-ms-flex-pack:justify;justify-content:space-between;padding:.5rem 0}.sc-yoo-healthscore-dialog-h .outer-container.sc-yoo-healthscore-dialog .healthscore-comparison.sc-yoo-healthscore-dialog .legends.sc-yoo-healthscore-dialog .legend.sc-yoo-healthscore-dialog{display:-ms-flexbox;display:flex;-ms-flex-direction:column;flex-direction:column;padding-left:1rem;font-size:var(--font-size-02,.875rem)}.sc-yoo-healthscore-dialog-h .outer-container.sc-yoo-healthscore-dialog .healthscore-comparison.sc-yoo-healthscore-dialog .legends.sc-yoo-healthscore-dialog .legend.sc-yoo-healthscore-dialog .legend-row.sc-yoo-healthscore-dialog{display:-ms-flexbox;display:flex;-ms-flex-direction:row;flex-direction:row;-ms-flex-align:center;align-items:center}.sc-yoo-healthscore-dialog-h .outer-container.sc-yoo-healthscore-dialog .healthscore-comparison.sc-yoo-healthscore-dialog .legends.sc-yoo-healthscore-dialog .legend.sc-yoo-healthscore-dialog .legend-row.sc-yoo-healthscore-dialog .round.sc-yoo-healthscore-dialog{width:.5rem;height:.5rem;margin-right:.25rem;border-radius:50%}.sc-yoo-healthscore-dialog-h .outer-container.sc-yoo-healthscore-dialog .healthscore-comparison.sc-yoo-healthscore-dialog .legends.sc-yoo-healthscore-dialog .legend.sc-yoo-healthscore-dialog .bg-success.sc-yoo-healthscore-dialog{background-color:var(--success,#04cc99)}.sc-yoo-healthscore-dialog-h .outer-container.sc-yoo-healthscore-dialog .healthscore-comparison.sc-yoo-healthscore-dialog .legends.sc-yoo-healthscore-dialog .legend.sc-yoo-healthscore-dialog .bg-info.sc-yoo-healthscore-dialog{background-color:var(--info,#fc459e)}.sc-yoo-healthscore-dialog-h .outer-container.sc-yoo-healthscore-dialog .healthscore-comparison.sc-yoo-healthscore-dialog .legends.sc-yoo-healthscore-dialog .legend.sc-yoo-healthscore-dialog .stable-alt.sc-yoo-healthscore-dialog{color:var(--text-color,#807f83)}.sc-yoo-healthscore-dialog-h .border.sc-yoo-healthscore-dialog{width:100%;height:0;border-top:1px solid var(--stable-40,hsla(0,0%,67.8%,.4))}.sc-yoo-healthscore-dialog-h .border.selected.sc-yoo-healthscore-dialog{border-top:1px solid var(--success,#04cc99)}.web.sc-yoo-healthscore-dialog-h{background:var(--light,#fff)}.web.sc-yoo-healthscore-dialog-h .outer-container.sc-yoo-healthscore-dialog{display:block;width:100%;height:100%}.web.sc-yoo-healthscore-dialog-h .outer-container.toolbar.sc-yoo-healthscore-dialog{height:calc(100% - 3rem)}.web.sc-yoo-healthscore-dialog-h .outer-container.sc-yoo-healthscore-dialog yoo-ion-slides.sc-yoo-healthscore-dialog yoo-ion-slide.sc-yoo-healthscore-dialog .slide-content.sc-yoo-healthscore-dialog{display:-ms-flexbox;display:flex;-ms-flex-direction:column;flex-direction:column;width:100%;height:100%;padding-left:var(--padding-5,.3125rem)}.web.sc-yoo-healthscore-dialog-h .outer-container.sc-yoo-healthscore-dialog yoo-ion-slides.sc-yoo-healthscore-dialog yoo-ion-slide.sc-yoo-healthscore-dialog .slide-content.sc-yoo-healthscore-dialog .healthscore-title.sc-yoo-healthscore-dialog{margin-bottom:var(--padding-20,1.25rem);text-transform:unset}.web.sc-yoo-healthscore-dialog-h .outer-container.sc-yoo-healthscore-dialog yoo-ion-slides.sc-yoo-healthscore-dialog yoo-ion-slide.sc-yoo-healthscore-dialog .slide-content.sc-yoo-healthscore-dialog yoo-navbar.sc-yoo-healthscore-dialog{margin:0 var(--padding-20,1.25rem)}.web.sc-yoo-healthscore-dialog-h .outer-container.sc-yoo-healthscore-dialog yoo-ion-slides.sc-yoo-healthscore-dialog yoo-ion-slide.sc-yoo-healthscore-dialog .slide-content.sc-yoo-healthscore-dialog .healthscore-numbers.sc-yoo-healthscore-dialog{-ms-flex-pack:start;justify-content:flex-start;margin:var(--padding-15,.9375rem) 0 0 var(--padding-10,.625rem)}.web.sc-yoo-healthscore-dialog-h .outer-container.sc-yoo-healthscore-dialog yoo-ion-slides.sc-yoo-healthscore-dialog yoo-ion-slide.sc-yoo-healthscore-dialog .slide-content.sc-yoo-healthscore-dialog .healthscore-numbers.sc-yoo-healthscore-dialog .healthscore-number.sc-yoo-healthscore-dialog .value.sc-yoo-healthscore-dialog{font-size:var(--font-size-07,1.75rem)}.web.sc-yoo-healthscore-dialog-h .outer-container.sc-yoo-healthscore-dialog yoo-ion-slides.sc-yoo-healthscore-dialog yoo-ion-slide.sc-yoo-healthscore-dialog .slide-content.sc-yoo-healthscore-dialog .healthscore-numbers.sc-yoo-healthscore-dialog .healthscore-number.sc-yoo-healthscore-dialog .text.sc-yoo-healthscore-dialog{margin:0}.web.sc-yoo-healthscore-dialog-h .outer-container.sc-yoo-healthscore-dialog yoo-ion-slides.sc-yoo-healthscore-dialog yoo-ion-slide.sc-yoo-healthscore-dialog .slide-content.sc-yoo-healthscore-dialog .healthscore-evolution.sc-yoo-healthscore-dialog{margin-top:0}.web.sc-yoo-healthscore-dialog-h .outer-container.sc-yoo-healthscore-dialog yoo-ion-slides.sc-yoo-healthscore-dialog yoo-ion-slide.sc-yoo-healthscore-dialog .slide-content.sc-yoo-healthscore-dialog .healthscore-evolution.sc-yoo-healthscore-dialog .healthscore-chart.sc-yoo-healthscore-dialog{margin-top:var(--padding-10,.625rem)}.web.sc-yoo-healthscore-dialog-h .outer-container.sc-yoo-healthscore-dialog yoo-ion-slides.sc-yoo-healthscore-dialog .swiper-pagination.sc-yoo-healthscore-dialog .swiper-pagination-bullet.sc-yoo-healthscore-dialog{--bullet-background-active:var(--black,#000)}"}};export{d as yoo_healthscore_dialog};
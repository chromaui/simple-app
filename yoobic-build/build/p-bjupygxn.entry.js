import{r as i,c as s,h as t,g as e}from"./p-0d847530.js";import{cR as h,fV as n,cS as a,t as l,N as r,R as o,z as d,cE as c,bq as u}from"./p-384bfcf6.js";import"./p-0f3d65ca.js";import"./p-8cff990b.js";import"./p-0d62bf9d.js";import{dd as p,aA as f,bq as v,ab as y}from"./p-d70b188c.js";import"./p-815d6c40.js";const C=class{constructor(t){i(this,t),this.imageEnlarged=!1,this.hasGradient=!0,this.imageWidth=335,this.imageHeight=260,this.showMoreButton=!0,this.expandText=!1,this.textExpanded=!1,this.groupClicked=s(this,"groupClicked",7),this.commentClicked=s(this,"commentClicked",7),this.likeClicked=s(this,"likeClicked",7),this.likeCountClicked=s(this,"likeCountClicked",7),this.viewCountClicked=s(this,"viewCountClicked",7),this.imageClicked=s(this,"imageClicked",7),this.userClicked=s(this,"userClicked",7),this.slideChanges=s(this,"slideChanges",7),this.socialShareClicked=s(this,"socialShareClicked",7)}handlePinchZoom(i){h(this.ionSlides,i.detail)}onPlayerStateChange(i){if(i){let s=i.detail;s===n.PAUSED?this.handleImageClick(null,!0):s===n.PLAYING&&this.handleImageClick(null,!1)}}componentDidLoad(){this.ionScrollDiv&&this.ionScrollDiv.firstElementChild&&(this.ionScrollDiv.firstElementChild.clientHeight>a(.1)?(this.showMoreButton=!0,this.expandText=!1):this.showMoreButton=!1),this.ionSlides&&this.feed&&this.feed.currentSlideIndex>0&&this.ionSlides.slideTo(this.feed.currentSlideIndex),this.focusMediaOnOpen&&this.handleGradientClick()}onIonSlideDidChange(i){this.ionSlides&&this.ionSlides.getActiveIndex().then(i=>{this.slideChanges.emit(i)})}updateIonScroll(){this.ionScrollDiv&&this.ionScrollDiv.refresh()}onOverlayClick(){this.hideOverlay()}onToggleMore(i){this.expandText=!this.expandText,this.hasGradient=!0,i&&i.stopPropagation()}hideOverlay(){this.feedDetailContainer.classList.remove("show-overlay")}hasMediaSrc(){return this.feed&&this.feed.mediaSrc&&this.feed.mediaSrc.length>0}showOverlay(){this.feedDetailContainer.classList.add("show-overlay")}handleImageClick(i,s){i&&i.stopPropagation(),this.hasGradient=!this.hasGradient,this.hasGradient||(this.expandText=!1),this.imageEnlarged=!this.imageEnlarged,!0===s?(this.hasGradient=s,this.imageEnlarged=!1):!1===s&&(this.hasGradient=s,this.imageEnlarged=!0,this.expandText=!1),this.imageClicked.emit(this.imageEnlarged),this.photoEditorDiv&&this.updatePhotoEditorImageScale()}updatePhotoEditorImageScale(){let i=this.photoEditorDiv.querySelector(".image");this.photoEditorDiv&&i&&this.photoEditorDiv.classList.contains("initialscale")?(this.photoEditorDiv.classList.remove("initialscale"),i.classList.add("fullscale")):(this.photoEditorDiv.classList.add("initialscale"),i.classList.remove("fullscale"))}handleGradientClick(i){i&&i.stopPropagation(),this.feedDetailContainer.classList.contains("show-overlay")?this.hideOverlay():this.handleImageClick()}onInteractionClicked(i,s){i&&i.stopPropagation(),s()}renderInteraction(i,s,e,h=""){return t("div",{class:"interaction "+(h||""),onClick:i=>this.onInteractionClicked(i,e)},i?t("yoo-icon",{class:i}):null,t("span",{class:"interaction-counter"},s))}onGroupClicked(i){if(this.feed.group.length>1)return i&&i.stopPropagation(),this.groupClicked.emit(!0)}renderSharedIn(){let i=this.feed.group.length>1;return[t("span",{class:"feed-group"},`${i?this.feed.group.length:this.feed.group[0]} `),i&&l("GROUPS")]}renderHeader(){return t("div",{class:"feed-header"},t("yoo-avatar",{class:"m",user:this.feed?this.feed.user:null,avatarIconSize:"m",isOnline:this.feed.isOnline,onClick:()=>this.userClicked.emit()}),t("div",{class:"feed-heading"},this.feed&&this.feed.user?t("span",null,f(this.feed.user)):null,t("div",null,this.feed&&this.feed.date?t("span",{class:"feed-date"},p.timeAgo.transform(this.feed._ect),"."):null,this.feed&&this.feed.group&&this.feed.group.length?[t("span",{onClick:i=>this.onGroupClicked(i)},t("span",{class:"feed-shared-in"}," ",` â€¢ ${l("SHAREDIN")} `),t("span",{class:"feed-subheading"},"string"==typeof this.feed.group?[t("span",null," "),t("span",{class:"feed-group"},this.feed.group)]:this.renderSharedIn()))]:null)))}renderShowMoreButton(){return t("div",{class:"more-button",onClick:i=>{this.onToggleMore(i)}},l(this.expandText?"VIEWLESS":"MORE2"))}renderText(){let i=this.feed.mentions&&this.feed.mentions.length>0;return t("div",{class:"feed-text"},this.feed&&this.feed.description&&t("div",{class:"feed-description"},t("div",{class:{"description-content":!0,expanded:this.expandText}},t("div",{class:"scroll-wrapper"},t("yoo-ion-scroll",{class:"relative no-contain",showScrollbar:!1,ref:i=>this.ionScrollDiv=i},t("div",{class:"scroll-inner-container"},this.feed&&!i&&t("div",{innerHTML:this.feed.descriptionTranslated||r(this.feed.description)}),i&&t("yoo-mention-tag",{class:"light force-tag",allowTruncate:!1,mentionedList:this.feed.mentions,description:this.feed.description}),this.feed&&this.feed.tags?t("div",{class:"feed-hashtags"},this.feed&&this.feed.tags.map(i=>t("span",{class:"hashtag",innerHTML:`#${i.toLowerCase()} `}))):null))),this.showMoreButton&&this.renderShowMoreButton())))}renderImage(i){return t("div",{class:"feed-image"},t("yoo-photo-editor",{class:"feed-image initialscale",onClick:i=>this.handleImageClick(i),ref:i=>this.photoEditorDiv=i,src:i,readonly:!0}))}renderSlides(i){return t("yoo-ion-slide",null,this.renderImage(i))}renderVideo(i){return t("yoo-videoplayer-core",Object.assign({},{videoPlayerCoreParameters:{source:i,controls:!0,fullscreen:!0,showDuration:!0}}))}renderOverlay(){return t("div",{onClick:()=>{this.onOverlayClick()},class:"overlay"})}renderInteractionContainer(){return t("div",{class:"feed-interactions"},this.isOffline?null:[this.feed.disableLikes?null:this.renderInteraction(this.feed.isLikedByMe?"yo-heart liked":"yo-heart stable-alt","",()=>this.likeClicked.emit(!0)),this.feed.disableComments?null:this.renderInteraction("yo-comment  stable-alt","",()=>this.commentClicked.emit(!0)),o().canSocialShare&&!this.feed.disableSharing&&this.renderInteraction("yo-share  stable-alt","",()=>this.socialShareClicked.emit(!0)),this.feed.disableLikes?null:this.renderInteraction(null,v(this.feed.likesCount),()=>this.likeCountClicked.emit(!0)),this.feed.disableComments?null:this.renderInteraction(null,this.feed.comments&&this.feed.comments.length?l("VIEWALLCOMMENTS",{count:this.feed.comments.length||0}):l("FIRSTCOMMENT"),()=>this.commentClicked.emit(!0),"stable comment"),this.feed.user&&this.feed.user._id===d().userId?this.renderInteraction("yo-eye stable-alt",(this.feed.viewsCount?this.feed.viewsCount:0).toString(),()=>this.viewCountClicked.emit(!0),"counter"):null])}getMediaType(){return this.feed&&this.feed.mediaType?this.feed.mediaType:"photo"}isSingleMedia(i){return i&&1===i.length}isMultiMedia(i){return i&&i.length>1}renderMediaByType(i){let s=this.getMediaType();return"photo"===s?this.renderImage(i):"video"===s?this.renderVideo(i):"audio"===s?t("yoo-audio-player",{blockEventOnPlay:!0,_downloadURL:i}):void 0}renderSlide(i){return t("yoo-ion-slide",null,this.renderMediaByType(i))}renderMediaInner(){return this.isMultiMedia(this.feed.mediaSrc)?this.renderMultipleContent():this.isSingleMedia(this.feed.mediaSrc)?this.renderMediaByType(this.feed.mediaSrc[0]):void 0}renderMultipleContent(){return t("yoo-ion-slides",{ref:i=>this.ionSlides=i,onIonSlideDidChange:i=>this.onIonSlideDidChange(i),options:{autoplay:!1,spaceBetween:15},navigation:!1},this.feed.mediaSrc.map(i=>this.renderSlide(i)))}onSwipeDown(i){i&&i.stopPropagation(),this.hasGradient||c(null)}renderMedia(){let i=this.feed.mediaSrc,s=this.getMediaType();return this.isSingleMedia(i)&&(i=[i[0]]),t("div",{class:`media-outer-container ${s}`,onClick:i=>this.handleImageClick(i)},t("yoo-swipe-container",{class:"black",onSwipedDown:i=>{this.onSwipeDown(i)}},t("div",{onClick:i=>this.handleGradientClick(i),class:{gradient:!0,hide:!this.hasGradient}}),this.renderMediaInner()))}addExtraClass(i,s){return i+" "+s}_class(i){let s=i;switch(i){case"feed-details-container":return u()&&(s=this.addExtraClass(s,"iphone-x")),this.feed&&this.feed.document&&(s=this.addExtraClass(s,y(this.feed.document))),this.imageEnlarged&&(s=this.addExtraClass(s,"image-focus")),this.feed&&this.hasMediaSrc()&&(s=this.addExtraClass(s,this.getMediaType())),this.expandText&&(s=this.addExtraClass(s,"text-expanded")),this.showMoreButton&&(s=this.addExtraClass(s,"has-overflow")),s;default:return i}}render(){return t("div",{class:this._class("feed-details-container"),onClick:i=>this.handleGradientClick(i),ref:i=>this.feedDetailContainer=i},this.hasMediaSrc()&&this.renderMedia(),t("div",{class:"bottom-container"},this.renderHeader(),this.renderText(),this.renderInteractionContainer()))}get host(){return e(this)}static get style(){return".iframe-root{top:0;right:0;bottom:0;left:0;position:absolute;color:var(--black);overflow-y:auto;scrollbar-width:none}.iframe-root yoo-app .wrapper{display:-ms-flexbox;display:flex;-ms-flex-direction:row;flex-direction:row;-ms-flex-wrap:wrap;flex-wrap:wrap;height:100%;width:100%}.iframe-root yoo-app .wrapper.center-center{-ms-flex-align:center;align-items:center;-ms-flex-pack:center;justify-content:center;height:100%}.iframe-root::-webkit-scrollbar{display:none}:host{--card-feed-media-height:260px;--gradient-background-image:linear-gradient(transparent 60%,var(--black-80,rgba(0,0,0,0.8))),linear-gradient(var(--black-80,rgba(0,0,0,0.8)),transparent 10%)}\@-webkit-keyframes fadeIn{0%{opacity:0}to{opacity:1}}\@keyframes fadeIn{0%{opacity:0}to{opacity:1}}:host .feed-details-container{position:fixed;top:0;left:0;right:0;bottom:0;display:-ms-flexbox;display:flex;-ms-flex-direction:column;flex-direction:column;-ms-flex-pack:center;justify-content:center;margin-top:3rem;background-color:var(--black,#000);font-size:var(--font-size-02,.875rem);font-style:normal;font-weight:var(--font-weight-01,300);letter-spacing:normal;line-height:normal;font-stretch:normal}:host .feed-details-container.photo,:host .feed-details-container.video{margin-top:0}:host .feed-details-container .gradient{position:absolute;right:0;bottom:0;left:0;width:100%;height:100%;-webkit-transform:opacity 1s ease;transform:opacity 1s ease;background-image:var(--gradient-background-image);opacity:1;z-index:6}:host .feed-details-container .gradient.hide{-webkit-transform:opacity 1s ease;transform:opacity 1s ease;opacity:0;z-index:-1;pointer-events:none}:host .feed-details-container.text-expanded{--gradient-background-image:linear-gradient(transparent 60%,var(--black-80,rgba(0,0,0,0.8))100%),linear-gradient(var(--black-80,rgba(0,0,0,0.8)),transparent 500%)}:host .feed-details-container.text-expanded .media-outer-container{z-index:5}:host .feed-details-container.text-expanded .gradient{z-index:7}:host .feed-details-container.has-overflow .bottom-container .feed-text .feed-description .description-content{display:-ms-flexbox;display:flex;-ms-flex-direction:column;flex-direction:column;height:12vh}:host .feed-details-container.has-overflow .bottom-container .feed-text .feed-description .description-content.expanded{height:40vh;max-height:40vh}:host .feed-details-container.has-overflow .bottom-container .feed-text .feed-description .description-content.expanded .scroll-wrapper{height:auto}:host .feed-details-container.iphone-x .bottom-container .feed-interactions{padding-bottom:var(--padding-15,.9375rem)}:host .feed-details-container.image-focus .bottom-container{-webkit-transition:opacity .5s ease;transition:opacity .5s ease;opacity:0}:host .feed-details-container.hide-overlay .overlay{display:none}:host .feed-details-container .media-outer-container{position:relative;width:100%;height:100%;height:var(--card-feed-media-height);border-radius:var(--card-feed-radius)}:host .feed-details-container .media-outer-container.audio{--card-feed-media-height:80px}:host .feed-details-container .media-outer-container.photo{--card-feed-media-height:100%}:host .feed-details-container .media-outer-container yoo-ion-slides{position:absolute;width:100%;height:100%;z-index:6}:host .feed-details-container .feed-image{position:absolute;top:0;right:0;bottom:0;left:0;width:100%;height:100%;padding:0}:host .feed-details-container .feed-image .gradient{position:absolute;right:0;bottom:0;left:0;width:100%;height:100%;background-image:var(--gradient-background-image);z-index:6}:host .feed-details-container .bottom-container{display:-ms-flexbox;display:flex;position:absolute;right:0;bottom:0;left:0;-ms-flex-direction:column;flex-direction:column;-ms-flex-pack:end;justify-content:flex-end;margin-top:auto;padding:16px;-webkit-transition:all .5s ease;transition:all .5s ease;opacity:1;z-index:6}:host .feed-details-container .bottom-container .feed-header{display:-ms-flexbox;display:flex;-ms-flex-direction:row;flex-direction:row;-ms-flex-align:center;align-items:center;padding-bottom:var(--padding-15,.9375rem)}:host .feed-details-container .bottom-container .feed-header yoo-avatar{margin-right:.8rem;-webkit-transform:translateY(3px);transform:translateY(3px)}:host .feed-details-container .bottom-container .feed-header .feed-heading{display:-ms-flexbox;display:flex;-ms-flex-direction:column;flex-direction:column;color:var(--always-light,#fff)}:host .feed-details-container .bottom-container .feed-header .feed-heading .feed-date,:host .feed-details-container .bottom-container .feed-header .feed-heading .feed-shared-in{color:var(--stable-alt,#d0d0d0);font-size:var(--font-size-02,.875rem);font-weight:var(--font-weight-02,400)}:host .feed-details-container .bottom-container .feed-header .feed-heading .feed-subheading{color:var(--always-light,#fff)}:host .feed-details-container .bottom-container .feed-header .feed-heading .feed-subheading .feed-group{padding-left:.125rem;color:var(--always-light,#fff);font-weight:var(--font-weight-02,400)}:host .feed-details-container .bottom-container .feed-text{display:-ms-flexbox;display:flex;-ms-flex:1;flex:1;-ms-flex-direction:column;flex-direction:column;color:var(--always-light,#fff)}:host .feed-details-container .bottom-container .feed-text .feed-hashtags{display:block;color:var(--success,#04cc99);line-height:1.2rem}:host .feed-details-container .bottom-container .feed-text .feed-description{font-size:var(--font-size-02,.875rem)}:host .feed-details-container .bottom-container .feed-text .feed-description .description-content,:host .feed-details-container .bottom-container .feed-text .feed-description .description-content.expanded{-webkit-transition:all .3s ease;transition:all .3s ease}:host .feed-details-container .bottom-container .feed-text .feed-description .description-content.expanded .scroll-wrapper yoo-ion-scroll{max-height:40vh}:host .feed-details-container .bottom-container .feed-text .feed-description .description-content .scroll-wrapper{height:inherit;overflow:hidden}:host .feed-details-container .bottom-container .feed-text .feed-description .description-content .more-button{color:var(--text-color,#807f83)}:host .feed-details-container .bottom-container .feed-interactions{display:-ms-flexbox;display:flex;-ms-flex-direction:row;flex-direction:row;padding-top:var(--padding-15,.9375rem);white-space:nowrap}:host .feed-details-container .bottom-container .feed-interactions .interaction{display:inline-block;display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center;margin:0 1rem 0 0;color:var(--always-light,#fff);cursor:pointer}:host .feed-details-container .bottom-container .feed-interactions .interaction yoo-icon{padding-right:2px}:host .feed-details-container .bottom-container .feed-interactions .interaction yoo-icon.liked{color:var(--danger,#ff625f)}:host .feed-details-container .bottom-container .feed-interactions .interaction.counter{margin-right:0;margin-left:auto}:host .feed-details-container .bottom-container .feed-interactions .interaction.stable{color:var(--stable,#adadad)}:host .feed-details-container .bottom-container .feed-interactions .interaction.comment,:host .feed-details-container .bottom-container .feed-interactions .interaction.comment span{overflow:hidden;text-overflow:ellipsis;white-space:nowrap}:host .feed-details-container .image-container{position:fixed;top:0;left:0;right:0;bottom:0;width:100%;height:100%}:host .feed-details-container.show-overlay .bottom-container{-ms-flex-align:start;align-items:flex-start;height:100%;max-height:100vh;-webkit-transition:all .5s ease;transition:all .5s ease}:host .feed-details-container.show-overlay .bottom-container .feed-text .feed-description,:host .feed-details-container.show-overlay .overlay{display:-ms-flexbox;display:flex}:host .feed-details-container.image-focus .image-container{z-index:3}:host .feed-details-container.image-focus .bottom-container{-webkit-transition:all .5s ease;transition:all .5s ease;opacity:0!important;z-index:-1;pointer-events:none}"}};export{C as yoo_feed_detail};
import{r as t,c as s,h as e}from"./p-0d847530.js";import{cF as i,t as a}from"./p-384bfcf6.js";import"./p-0f3d65ca.js";import"./p-8cff990b.js";import"./p-0d62bf9d.js";import"./p-d70b188c.js";import"./p-815d6c40.js";const r=class{constructor(e){t(this,e),this.changeStatus=s(this,"changeStatus",7),this.startPlay=s(this,"startPlay",7)}battleAlert(t,s,e){i(null,[a("NO"),a("YES")],null,t,"battle-alert",s.imageData).then(t=>{!0===t&&e()})}getUserName(t){if(t){if(t.firstName||t.lastName)return[t.firstName,t.lastName].join(" ").trim();if(t.username)return t.username}}getCurrentUserResult(){let t=this.entry.questions>0&&this.entry.questions-this.entry.score;return e("div",{class:"score"},e("yoo-icon",{class:"yo-check success"}),e("div",{class:"user-result"},this.entry.score+" "+a("CORRECT")),this.entry.questions>0&&e("yoo-icon",{class:"yo-cross danger"}),this.entry.questions>0&&e("div",{class:"user-result"},t+" "+a("INCORRECT")))}getButtons(){switch(this.entry.battleStatus){case"pending":return[{text:"ACCEPT",class:"battle-danger-light accept",handler:()=>this.onAcceptClick()},{text:"REJECT",class:"battle",handler:()=>this.onDeclineClick()}];case"accepted":return[{text:"DELETEREQUEST",class:"battle",handler:()=>this.onDeleteClick()}];case"toplay":return[{text:"PLAY",class:"battle-danger-light",handler:()=>this.onPlayClick()}]}}onAcceptClick(){let t=a("ACCEPTBATTLE",{name:this.getUserName(this.entry.opponent),points:this.entry.points});this.battleAlert(t,this.entry.opponent,()=>this.changeStatus.emit({item:this.entry,status:"toplay"}))}onDeclineClick(){let t=a("DECLINEBATTLE",{name:this.getUserName(this.entry.opponent)});this.battleAlert(t,this.entry.opponent,()=>this.changeStatus.emit({item:this.entry,status:"declined"}))}onDeleteClick(){let t=a("DELETEBATTLE",{name:this.getUserName(this.entry.opponent)});this.battleAlert(t,this.entry.opponent,()=>this.changeStatus.emit({item:this.entry,status:"deleted"}))}onPlayClick(){this.startPlay.emit(this.entry)}renderTopContainer(){return e("div",{class:"top-container"},e("yoo-avatar",{class:"m",avatarIconSize:"m",user:this.entry.opponent}),e("div",{class:"content-container"},e("div",{class:"opponent-name ellipsis"},this.getUserName(this.entry.opponent)),e("div",{class:"course-name ellipsis"},e("yoo-icon",{class:"yo-lesson"}),a(this.entry.courseName))),e("div",{class:"points-row"},this.entry.points&&e("yoo-badge",{"icon-left":"yo-star",class:"energized round",text:this.entry.points.toString()})))}renderBottomContainer(){return"waiting"===this.entry.battleStatus?this.getCurrentUserResult():e("div",{class:"buttons-container"},this.getButtons().map(t=>e("yoo-button",{class:"medium "+t.class,text:a(t.text),onClick:t.handler})))}render(){return e("div",{class:"outer-container "+this.entry.battleStatus},this.renderTopContainer(),this.renderBottomContainer())}static get style(){return".iframe-root{top:0;right:0;bottom:0;left:0;position:absolute;color:var(--black);overflow-y:auto;scrollbar-width:none}.iframe-root yoo-app .wrapper{display:-ms-flexbox;display:flex;-ms-flex-direction:row;flex-direction:row;-ms-flex-wrap:wrap;flex-wrap:wrap;height:100%;width:100%}.iframe-root yoo-app .wrapper.center-center{-ms-flex-align:center;align-items:center;-ms-flex-pack:center;justify-content:center;height:100%}.iframe-root::-webkit-scrollbar{display:none}:host .outer-container .top-container{display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center;width:100%}:host .outer-container .top-container .content-container{-ms-flex:1;flex:1;padding:0 1rem;overflow:hidden}:host .outer-container .top-container .content-container .opponent-name{color:var(--black,#000);font-size:var(--font-size-03,1rem)}:host .outer-container .top-container .content-container .course-name{color:var(--stable,#adadad);font-size:var(--font-size-02,.875rem)}:host .outer-container .top-container .content-container .course-name yoo-icon{padding-right:.5rem;color:var(--black,#000)}:host .outer-container .buttons-container{display:-ms-flexbox;display:flex}:host .outer-container .buttons-container yoo-button{-ms-flex:1;flex:1;padding-top:var(--padding-15,.9375rem)}:host .outer-container .buttons-container yoo-button.accept{padding-right:var(--padding-10,.625rem)}:host .outer-container .score{display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center;padding-left:3.25rem;font-size:var(--font-size-02,.875rem)}:host .outer-container .score .user-result{padding:0 var(--padding-5,.3125rem)}.accepted,.pending{padding:var(--padding-10,.625rem) 0}.toplay,.waiting{margin-top:var(--padding-15,.9375rem);padding:var(--padding-15,.9375rem);border-radius:.375rem;background-color:var(--light,#fff);-webkit-box-shadow:var(--card-shadow-2,0 5px 15px 0 rgba(40,47,54,.08));box-shadow:var(--card-shadow-2,0 5px 15px 0 rgba(40,47,54,.08))}.waiting .top-container{padding:0}.ellipsis{text-overflow:ellipsis;white-space:nowrap;overflow:hidden}"}};export{r as yoo_card_battle};
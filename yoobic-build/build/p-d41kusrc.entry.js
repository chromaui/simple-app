import{r as t,h as i,g as s}from"./p-0d847530.js";import{t as r}from"./p-384bfcf6.js";import"./p-0f3d65ca.js";import"./p-8cff990b.js";import"./p-0d62bf9d.js";import"./p-d70b188c.js";import"./p-815d6c40.js";const e=class{constructor(i){t(this,i),this.videoWidth="100%",this.videoHeight="100%"}componentDidLoad(){this.onUpdateVideoCard()}onParticipantUpdates(){this.onUpdateVideoCard()}hasVideoStream(){return this.participant&&this.participant.stream&&this.participant.stream.getVideoTracks().length>0}hasAudioStream(){return this.participant&&this.participant.stream&&this.participant.stream.getAudioTracks().length>0}isLocalParticipant(){return this.host&&this.host.classList&&this.host.classList.contains("local")}isMobile(){return this.host&&this.host.classList&&this.host.classList.contains("mobile")}isConnecting(){return!(!this.participant||!this.participant.waitingToConnect)}onUpdateVideoCard(){this.videoRef||(this.videoRef=document.createElement("video")),this.videoRef.setAttribute("width",this.videoWidth),this.videoRef.setAttribute("height",this.videoHeight),this.trackDiv.appendChild(this.videoRef),navigator.attachMediaStream(this.videoRef,this.getStream()),this.videoRef.autoplay="autoplay",this.videoRef.muted=!0}getStream(){return this.hasVideoStream()?(this.showEmptyPlaceholder=!1,this.participant.stream):this.hasAudioStream()?(this.showEmptyPlaceholder=!0,this.participant.stream):(this.showEmptyPlaceholder=!0,null)}onActionClicked(t){t&&t.handler&&t.handler()}getParticipantName(){return this.participant&&this.participant.userInfo&&this.participant.userInfo.name?this.participant.userInfo.name:""}getUser(){return this.participant&&this.participant.user?this.participant.user:null}renderConnectingPlaceholder(){return i("yoo-loader",{class:{"backdrop large absolute":!this.isMobile(),medium:this.isMobile()},text:this.isMobile()?"":r("WAITINGTOCONNECT")})}renderAvatarPlaceholder(){let t=this.getUser();return i("div",{class:"placeholder-container"},t&&i("div",{class:"avatar-container"},i("yoo-avatar",{class:"xl",avatarIconSize:"xl",user:t})))}renderPlaceholder(){return this.isConnecting()&&!this.isLocalParticipant()?this.renderConnectingPlaceholder():this.renderAvatarPlaceholder()}renderBottomStatus(){return this.bottomActions&&this.bottomActions.length>0&&i("div",{class:"status-bar"},i("div",{class:"items-wrapper"},this.bottomActions.map(t=>this.renderAction(t))))}renderAction(t){return t&&t.icon&&i("div",{class:`item ${t.cssClass()}`,onClick:()=>{this.onActionClicked(t)}},i("yoo-icon",{class:t.icon()}))}renderRedial(){return[i("div",{class:"redial-container"},i("div",{class:"button-container"},i("yoo-button",{text:r("REDIAL")})))]}renderBody(){return[i("div",{ref:t=>this.trackDiv=t,class:"remote-media"},this.showRedialButton&&this.renderRedial())]}render(){return i("div",{class:"outer-container"},this.renderBody(),this.renderBottomStatus(),this.showEmptyPlaceholder&&this.renderPlaceholder())}get host(){return s(this)}static get watchers(){return{participant:["onParticipantUpdates"]}}static get style(){return".iframe-root{top:0;right:0;bottom:0;left:0;position:absolute;color:var(--black);overflow-y:auto;scrollbar-width:none}.iframe-root yoo-app .wrapper{display:-ms-flexbox;display:flex;-ms-flex-direction:row;flex-direction:row;-ms-flex-wrap:wrap;flex-wrap:wrap;height:100%;width:100%}.iframe-root yoo-app .wrapper.center-center{-ms-flex-align:center;align-items:center;-ms-flex-pack:center;justify-content:center;height:100%}.iframe-root::-webkit-scrollbar{display:none}:host{--status-bar-height:75px;--status-item-size:50px;--status-bar-gap:5px;display:-ms-flexbox;display:flex;width:100%;height:100%}:host .outer-container{position:relative;height:auto;background:var(--black,#000)}:host .outer-container,:host .outer-container .placeholder-container{display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center;-ms-flex-pack:center;justify-content:center;-ms-flex-direction:column;flex-direction:column;width:100%}:host .outer-container .placeholder-container{position:absolute;text-align:center}:host .outer-container .placeholder-container .avatar-container{width:75px;height:75px;margin-bottom:var(--status-bar-height)}:host .outer-container .remote-media{position:relative;width:100%;height:auto;max-height:100%;background:var(--black,#000)}:host .outer-container .remote-media video{-webkit-transform:scaleX(-1);transform:scaleX(-1);-webkit-transform-origin:50% 50%;transform-origin:50% 50%}:host .outer-container .remote-media yoo-loader{position:absolute;width:100%;height:100%}:host .outer-container .status-bar{position:absolute;bottom:0;width:100%;height:var(--status-bar-height);background:var(--dark-two,#212936);z-index:11}:host .outer-container .status-bar .items-wrapper{width:100%;height:100%}:host .outer-container .status-bar .items-wrapper,:host .outer-container .status-bar .items-wrapper .item{display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center;-ms-flex-pack:center;justify-content:center}:host .outer-container .status-bar .items-wrapper .item{width:var(--status-item-size);height:var(--status-item-size);margin-right:var(--status-bar-gap);border-radius:50%}:host .outer-container .status-bar .items-wrapper .item.danger{background:var(--danger,#ff625f);color:var(--light,#fff)}:host .outer-container .status-bar .items-wrapper .item.success{background:var(--success,#04cc99);color:var(--light,#fff)}:host .outer-container .status-bar .items-wrapper .item.dark{background:var(--dark,#2b3648);color:var(--light,#fff)}:host(.mobile) .outer-container{height:100%}:host(.transparent) .outer-container .status-bar{background:transparent}:host(.fit) .outer-container .remote-media{width:100%!important;height:100%!important}"}};export{e as yoo_card_media};
import{r as t,c as s,h as i,H as e,g as a}from"./p-0d847530.js";import{g2 as o,i as h,fV as r}from"./p-384bfcf6.js";import"./p-0f3d65ca.js";import"./p-8cff990b.js";import"./p-0d62bf9d.js";import{cy as n,cC as l,cD as d}from"./p-d70b188c.js";import"./p-815d6c40.js";const p=class{constructor(i){t(this,i),this.controls=!0,this.fullscreen=!1,p.componentCounter+=1,this.playerStateChanges=s(this,"playerStateChanges",7)}async pauseVideo(){this.player&&this.player.pause&&this.player.pause()}async playVideo(){this.player&&this.player.play&&this.player.play()}async getCurrentTime(){let t=Promise.resolve(0);return this.player&&this.player.currentTime&&(t=Promise.resolve(this.player.currentTime)),t}async updateCurrentTime(t,s=!0){t&&(this.player&&this.player.seek&&this.player.seek(t),s?this.playVideo():this.pauseVideo())}async onTriggerFullscreen(){let t=await this.getCurrentTime(),s={source:this.source,startTime:t};return this.pauseVideo(),n("dailymotion",s).then(t=>{t&&t.data&&this.updateCurrentTime(t.data)})}componentWillLoad(){this.hostedPlayerId="video-player-"+p.componentCounter}componentDidLoad(){this.onInitDailymotionPlayer()}componentDidUnload(){o(p.hosts,t=>t===this.host)}onInitDailymotionPlayer(){p.hosts.push(this.host),l(p.hosts).then(t=>{this.player=new t.player(this.hostedPlayerId,{width:"100%",height:this.dailymotionContainer.clientHeight?this.dailymotionContainer.clientHeight:"100%",video:d(this.source),params:{api:h()?"location":"1","queue-autoplay-next":!1,"queue-enable":!1,controls:this.controls,allowfullscreen:this.fullscreen}}),this.player.addEventListener("play",()=>{this.playerStateChanges.emit(r.PLAYING)}),this.player.addEventListener("pause",()=>{this.playerStateChanges.emit(r.PAUSED)}),this.player.addEventListener("apiready",()=>{this.updateCurrentTime(this.startTime)}),this.player.addEventListener("loadedmetadata",()=>{this.updateCurrentTime(this.startTime)})})}render(){return i(e,null,i("div",{class:"dm-container",ref:t=>this.dailymotionContainer=t},i("div",{id:this.hostedPlayerId,class:"dm-player"})))}get host(){return a(this)}static get style(){return".iframe-root{top:0;right:0;bottom:0;left:0;position:absolute;color:var(--black);overflow-y:auto;scrollbar-width:none}.iframe-root yoo-app .wrapper{display:-ms-flexbox;display:flex;-ms-flex-direction:row;flex-direction:row;-ms-flex-wrap:wrap;flex-wrap:wrap;height:100%;width:100%}.iframe-root yoo-app .wrapper.center-center{-ms-flex-align:center;align-items:center;-ms-flex-pack:center;justify-content:center;height:100%}.iframe-root::-webkit-scrollbar{display:none}:host .dm-container,:host .dm-player{width:100%;height:100%;background:var(--black,#000)}"}};p.componentCounter=0,p.hosts=[];export{p as yoo_videoplayer_dailymotion};
import{r as s,c as t,h as i,g as e}from"./p-0d847530.js";import{z as o,al as n,p as a,t as l,cF as c,bN as r}from"./p-384bfcf6.js";import"./p-0f3d65ca.js";import"./p-8cff990b.js";import"./p-0d62bf9d.js";import{dd as h}from"./p-d70b188c.js";import"./p-815d6c40.js";const d=class{constructor(i){s(this,i),this.collapsed=!1,this.showEllipsis=!1,this.forceRefresh=!0,this.MAX_LINE_HEIGHT=30,this.memoUpdate=t(this,"memoUpdate",7),this.memoEdit=t(this,"memoEdit",7),this.memoSelect=t(this,"memoSelect",7),this.memoDelete=t(this,"memoDelete",7),this.usersView=t(this,"usersView",7)}isEditable(s){return s.creatorRef===o().userId}onIconClicked(){this.collapsed=!this.collapsed}onMemoUpdate(s,t,i){t.done=s.detail,this.setSelectedStyles(i,s.detail?"selected":"unselected",t)}setSelectedStyles(s,t,i){s&&s.classList.add(t),setTimeout(()=>{this.memoUpdate.emit(i),s&&s.classList.remove(t)},1e3)}onOpenMemoListDialog(s){this.dialog=document.createElement("yoo-memo-list-dialog"),this.dialog.memo=s,this.dialog.type=this.type,this.memoSelect.emit(s),n(this.dialog,{half:!1},a()?"fullscreen":"","slideXEnterAnimation","slideXLeaveAnimation",!0,!1,this.modalHost).then(t=>{if(t&&t.data)switch(t.data.action){case"edit":this.memoEdit.emit(s);break;case"delete":this.memoDelete.emit(s);break;case"update":this.memoUpdate.emit(s);break;default:this.usersView.emit(s.users.map(s=>s._id))}this.dialog=null})}onMemoDelete(s,t){let i=l("DELETE"),e=l("DELETETODOTASKCONFIRM");c(i,[l("CANCEL"),l("OK")],null,e,l("DELETETODOTASKCONFIRM")).then(i=>{!0===i?this.memoDelete.emit(s):t.style.transform="translate3d(0px, 0px, 0px)"})}renderLi(s){let t;return[i("yoo-ion-item-sliding",null,i("yoo-ion-item",{ref:s=>t=s,class:"border",lines:"none"},this.renderInnerContainer(s)),this.isEditable(s)&&i("yoo-ion-item-options",{side:"end"},i("yoo-ion-item-option",{class:"bg-stable",onClick:()=>this.memoEdit.emit(s)},i("div",{class:"option-container"},i("yoo-icon",{class:"yo-pen"}),i("span",{class:"text-action"},l("EDIT")))),i("yoo-ion-item-option",{class:"bg-danger",onClick:()=>this.onMemoDelete(s,t)},i("div",{class:"option-container"},i("yoo-icon",{class:"yo-delete"}),i("span",{class:"text-action"},l("DELETE"))))))]}renderInnerContainer(s){const t=s.usersRef.indexOf(o().userId)<0;let e;return[i("div",{class:"inner-container"},i("div",{class:"item-container"},i("div",{class:{"checkbox-container":!0,disabled:t}},i("yoo-form-checkbox",{value:"closed"===this.type||null,readonly:t,onInputChanged:i=>t?null:this.onMemoUpdate(i,s,e)})),i("div",{class:"center-container",onClick:()=>this.onOpenMemoListDialog(s)},i("span",{ref:s=>e=s,class:"menu-item-title "+this.type+(t?" readonly":"")},s.title)),i("div",{class:"right-container",onClick:()=>this.onOpenMemoListDialog(s)},this.renderAvatarContainer(s),i("div",{class:"date-box"},s.duedate&&i("span",{class:{"menu-item-date":!0,danger:"closed"!==this.type&&r(s.duedate,new Date)}},h.dateFormat.transform(s.duedate,"L"))))),s.imageData&&i("yoo-img",{type:"back",class:"photo",onClick:()=>this.onOpenMemoListDialog(s),src:s.imageData}),s.description&&i("div",{class:"description-container",onClick:()=>this.onOpenMemoListDialog(s)},i("yoo-text-truncate",{maxLine:2,content:s.description})))]}renderAvatarContainer(s){return i("yoo-avatars",{users:s.users,maxDisplay:3})}render(){return i("div",{class:"outer-container"},i("span",null,this.memos&&this.memos.length?i("div",{class:"title-container",onClick:()=>this.onIconClicked()},i("div",{class:"title"},"open"===this.type?l("TASKS"):"closed"===this.type?l("COMPLETED"):null),i("yoo-badge",{text:h.number.transform(this.memos.length),class:"round medium "+("open"===this.type?"danger":"success")}),i("span",{class:"flex"}),i("yoo-icon",{class:this.collapsed?"yo-down":"yo-up"})):null,!this.collapsed&&this.memos?i("yoo-ion-list",null,this.memos.map(s=>this.renderLi(s))):null))}get host(){return e(this)}static get style(){return".iframe-root{top:0;right:0;bottom:0;left:0;position:absolute;color:var(--black);overflow-y:auto;scrollbar-width:none}.iframe-root yoo-app .wrapper{display:-ms-flexbox;display:flex;-ms-flex-direction:row;flex-direction:row;-ms-flex-wrap:wrap;flex-wrap:wrap;height:100%;width:100%}.iframe-root yoo-app .wrapper.center-center{-ms-flex-align:center;align-items:center;-ms-flex-pack:center;justify-content:center;height:100%}.iframe-root::-webkit-scrollbar{display:none}:host .outer-container{padding:0 1rem}:host .outer-container .title-container{display:-ms-flexbox;display:flex;-ms-flex-direction:row;flex-direction:row;-ms-flex-align:center;align-items:center;padding-top:1rem}:host .outer-container .title-container .title{color:var(--black,#000);font-size:var(--font-size-04,1.125rem);font-weight:var(--font-weight-03,700)}:host .outer-container .title-container .flex{-ms-flex:1;flex:1}:host .outer-container .title-container yoo-badge{margin-left:.5rem}:host .outer-container .title-container yoo-icon{padding-left:var(--padding-10,.625rem);font-size:var(--font-size-02,.875rem);cursor:pointer}:host .outer-container .title-container yoo-icon.yo-down,:host .outer-container .title-container yoo-icon.yo-up{color:var(--black,#000);font-weight:var(--font-weight-03,700)}:host .outer-container yoo-ion-list yoo-ion-item-sliding yoo-ion-item-options .option-container{display:-ms-flexbox;display:flex;-ms-flex-direction:column;flex-direction:column;-ms-flex-align:center;align-items:center;-ms-flex-pack:center;justify-content:center;margin:0;padding:0;border:none;color:var(--light,#fff)}:host .outer-container yoo-ion-list yoo-ion-item-sliding yoo-ion-item-options .option-container .text-action{padding-top:.25rem;font-family:Lato;font-size:var(--font-size-01,.75rem)}:host .outer-container yoo-ion-list yoo-ion-item-sliding yoo-ion-item-options .option-container yoo-icon{width:60px;font-size:var(--font-size-04,1.125rem)}:host .outer-container .border{border-bottom:1px solid var(--stable-40,hsla(0,0%,67.8%,.4))}:host .outer-container .checkbox-container{display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center;height:100%;padding-right:.5rem}:host .outer-container .disabled{padding-top:.25rem}:host .outer-container .inner-container{display:-ms-flexbox;display:flex;-ms-flex-direction:column;flex-direction:column;width:100%;padding-top:.75rem;padding-bottom:.4rem}:host .outer-container .inner-container .photo{width:40px;height:40px;margin-top:.2rem;margin-bottom:.5rem;margin-left:1.9rem;border-radius:5px}:host .outer-container .inner-container .description-container{margin-bottom:.3rem;padding-left:1.75rem}:host .outer-container .inner-container .description-container yoo-text-truncate{--text-color:var(--text-color,#807f83);font-size:var(--font-size-02,.875rem)}:host .outer-container .inner-container .item-container{display:-ms-flexbox;display:flex;-ms-flex-pack:justify;justify-content:space-between;width:100%}:host .outer-container .inner-container .item-container .center-container{-ms-flex-positive:1;flex-grow:1;color:var(--black,#000);font-size:var(--font-size-03,1rem)}:host .outer-container .inner-container .item-container .center-container .menu-item-title.closed{color:var(--success,#04cc99);text-decoration:line-through}:host .outer-container .inner-container .item-container .center-container .menu-item-title.open{line-height:1.2rem}:host .outer-container .inner-container .item-container .center-container .menu-item-title.readonly{opacity:.7}:host .outer-container .inner-container .item-container .center-container .menu-item-title.selected{-webkit-transition:.3s;transition:.3s;color:var(--success,#04cc99);text-decoration:line-through}:host .outer-container .inner-container .item-container .center-container .menu-item-title.unselected{-webkit-transition:.3s;transition:.3s;color:var(--black,#000);text-decoration:none}:host .outer-container .inner-container .item-container .right-container{display:-ms-flexbox;display:flex;padding:0 .5rem;font-size:var(--font-size-02,.875rem)}:host .outer-container .inner-container .item-container .right-container .date-box{margin-top:.25rem}:host .outer-container .inner-container .item-container .right-container .date-box .menu-item-date{-ms-flex-item-align:center;align-self:center;margin-left:var(--padding-10,.625rem);color:var(--text-color,#807f83);font-size:var(--font-size-02,.875rem)}:host .outer-container .inner-container .item-container .right-container .date-box .menu-item-date.danger{color:var(--danger,#ff625f)}:host .outer-container .inner-container .item-container .right-container .avatar-box{padding-right:.4rem}:host .outer-container .inner-container .item-container .right-container .avatar-box .avatar-container yoo-avatar{height:24px}:host .outer-container .inner-container .item-container .right-container .avatar-box .avatar-container ul{display:-ms-flexbox;display:flex;margin:auto;padding:0;list-style:none}:host .outer-container .inner-container .item-container .right-container .avatar-box .avatar-container ul li{display:inline-table;margin-right:-.5rem}:host([type=closed]) .outer-container{padding-bottom:2rem}"}};export{d as yoo_memo_list};
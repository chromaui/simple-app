import{r as s,c as t,h as i,g as o}from"./p-0d847530.js";import{d5 as l,dj as a,cF as h,t as n,aq as e,al as r,dk as d}from"./p-384bfcf6.js";import"./p-0f3d65ca.js";import"./p-8cff990b.js";import"./p-0d62bf9d.js";import{dd as c}from"./p-d70b188c.js";import"./p-815d6c40.js";const u=class{constructor(i){s(this,i),this.validators=[],this.validityChanged=t(this,"validityChanged",7),this.inputBlurred=t(this,"inputBlurred",7),this.inputFocused=t(this,"inputFocused",7),this.inputChanged=t(this,"inputChanged",7),this.fetchCustomData=t(this,"fetchCustomData",7),this.fieldFetchData=t(this,"fieldFetchData",7)}async setSlides(s){this.slidesTodo=s.todo,this.slidesTodoTask=s.todotask}componentWillLoad(){l(this),this.fetchCustomData.emit()}onUpdateTodo(s){s.stopPropagation(),this.value.values=s.detail,this.value=Object.assign({},this.value),a(this.value,this)}onClearTodo(s){s.stopPropagation(),h(n("DELETEAPCONFIRM"),[n("CANCEL"),n("OK")]).then(s=>{s&&(this.value=null,a(this.value,this))})}async onOpenModal(){if(this.slidesTodo&&this.slidesTodo.length>0){if(this.linked){this.value=this.value||{};let s=e(this.host,"yoo-form-dynamic"),t=await s.findPreviousValue(this.name);this.value.field=t.field,this.value.fieldValue=t.value,this.value.fieldExtra=t.extra}let s=document.createElement("yoo-form-todo-dialog");s.todo=this.value,s.slidesTodo=this.slidesTodo,s.slidesTodoTask=this.slidesTodoTask,s.allPhotosRequired=this.allPhotosRequired,s.allowLibrary=this.allowLibrary,s.values=this.values,s.linked=this.linked,s.onFieldFetchData=s=>{this.fieldFetchData.emit(s)},r(s).then(t=>{t&&t.data&&a(t.data,this),s=null})}}convertToNumber(s){return s&&s.slice?Number(s.slice(-1)):null}renderTasks(){return this.value.values.map(s=>{let t=d(s.finished);return[i("div",{class:"task"},i("div",{class:"task-part"},s.text.value?i("div",{class:t.style},i("yoo-icon",{class:t.icon}),i("span",{class:"text "+t.breakText},s.text.value)):null,s.duedate&&s.duedate.value?i("div",{class:"subtitle"},i("span",{class:"date-label"},n("DUEDATE"),":"),i("span",null," ",c.dateFormat.transform(s.duedate.value,"L"))):null),i("div",{class:"task-part"},s.comments&&s.comments.value?i("div",{class:"subtitle"}," ",s.comments.value):null,s.finished&&s.finished.date?i("div",{class:"subtitle"},i("span",{class:"date-label"},n("FINISHEDDATE"),":"),i("span",null," ",c.dateFormat.transform(s.finished.date,"L LT"))):null,s.hasphoto?i("div",{class:"subtitle photo cursor"}):null,s.userComments?i("div",{class:"subtitle"}," ",s.userComments):null)),i("div",{class:"border"})]})}renderReadonly(){return i("div",{class:"readonly"},this.value&&this.value.values&&this.value.values.length>0?i("yoo-form-todo-single",{class:"readonly",type:"form",readonly:this.readonly,values:this.value.values,onUpdate:s=>this.onUpdateTodo(s)}):null)}renderEditable(){return this.value&&this.value.title?i("div",{class:"newtodo nomargin",onClick:()=>this.onOpenModal()},i("div",{class:"success margin-right"},n("EDIT")),i("div",{class:"flex"}," "," "+this.value.title),i("div",{class:"icon"},i("yoo-icon",{class:"yo-cross",onClick:s=>this.onClearTodo(s)}))):i("div",{class:"success newtodo nomargin",onClick:()=>this.onOpenModal()},i("div",{class:"icon"},i("yoo-icon",{class:"yo-plus"})),n("ADDTODO"))}render(){return this.readonly?this.renderReadonly():this.renderEditable()}get host(){return o(this)}static get style(){return".iframe-root{top:0;right:0;bottom:0;left:0;position:absolute;color:var(--black);overflow-y:auto;scrollbar-width:none}.iframe-root yoo-app .wrapper{display:-ms-flexbox;display:flex;-ms-flex-direction:row;flex-direction:row;-ms-flex-wrap:wrap;flex-wrap:wrap;height:100%;width:100%}.iframe-root yoo-app .wrapper.center-center{-ms-flex-align:center;align-items:center;-ms-flex-pack:center;justify-content:center;height:100%}.iframe-root::-webkit-scrollbar{display:none}:host .outer-container yoo-button{--margin-container:auto}:host yoo-icon{font-size:var(--font-size-03,1rem)}:host .border{width:100%;height:0;border-top:1px solid var(--stable-40,hsla(0,0%,67.8%,.4))}:host .newtodo{display:-ms-flexbox;display:flex;-ms-flex-direction:row;flex-direction:row;margin-top:.875rem;font-size:var(--font-size-03,1rem)}:host .newtodo.nomargin{margin-top:0}:host .newtodo .margin-right{margin-right:.5rem}:host .newtodo .success{color:var(--success,#04cc99)}:host .newtodo .icon{display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center;margin-right:.125rem}:host .newtodo .icon .yo-cross,:host .newtodo .icon .yo-plus{font-size:var(--icon-size-01,1rem)}:host .newtodo .flex{-ms-flex:1;flex:1}:host .readonly .todo-container{margin-bottom:1.5625rem}:host .readonly .todo-container .content{display:-ms-flexbox;display:flex;-ms-flex-direction:row;flex-direction:row;-ms-flex-pack:justify;justify-content:space-between;margin:.6875rem 0 .5rem 0}:host .readonly .todo-container .content .content-left yoo-icon{margin-right:var(--padding-10,.625rem)}:host .readonly .todo-container .content .content-left yoo-icon.stable-alt{color:var(--stable-alt,#d0d0d0)}:host .readonly .todo-container .content .content-left .break-line{text-decoration:line-through}:host .readonly .todo-container .content .content-right{display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center}:host .readonly .todo-container .content .content-right .date{color:var(--stable-alt,#d0d0d0);font-size:var(--font-size-02,.875rem);font-weight:var(--font-weight-01,300)}:host .readonly .todo-container .comments{margin-bottom:var(--padding-15,.9375rem);color:var(--stable,#adadad);font-size:var(--font-size-02,.875rem);font-weight:var(--font-weight-01,300)}:host .readonly .todo-container .photo-container{margin-bottom:.875rem}:host .readonly .todo-container .comment-container{margin-top:.875rem}:host .readonly .todo-container .comment-container .yo-comment{font-size:var(--font-size-05,1.25rem)}:host .readonly .todo-container .textarea-container{margin-top:var(--padding-10,.625rem)}:host .readonly .todo-container .border{width:100%;height:0;border-top:1px solid var(--stable-40,hsla(0,0%,67.8%,.4));margin-bottom:var(--padding-10,.625rem)}"}};export{u as yoo_form_todo};
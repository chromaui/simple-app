import{r as t,c as s,h as i,g as e}from"./p-0d847530.js";import{z as o,V as a,O as r,g0 as h,d5 as n,dj as l}from"./p-384bfcf6.js";import"./p-0f3d65ca.js";import"./p-8cff990b.js";import"./p-0d62bf9d.js";import"./p-d70b188c.js";import"./p-815d6c40.js";const d=class{constructor(i){t(this,i),this.validators=[],this.validityChanged=s(this,"validityChanged",7),this.inputBlurred=s(this,"inputBlurred",7),this.inputFocused=s(this,"inputFocused",7),this.inputChanged=s(this,"inputChanged",7),this.fetchData=s(this,"fetchData",7)}async updateValues(t,s){if(this.formAutocomplete)if(s&&s.search&&0===s.search.currentPage){let i=[];if(this.fieldValues&&this.fieldValues.length>0&&(i=i.concat(this.fieldValues)),o().selectedLocation&&a(o().selectedLocation.notificationemail)&&o().selectedLocation.notificationemail.length>0&&(i=i.concat(o().selectedLocation.notificationemail)),o().selectedLocation&&o().selectedLocation.contactemail&&i.push(o().selectedLocation.contactemail),o().user&&t.unshift(o().user),t&&t.length>0){let e=t.map(t=>t.email||t.username||t._id);i=[...i,...e].filter(t=>t.includes(s.search.search))}i=r(h(i)),this.formAutocomplete.updateValues(i)}else this.formAutocomplete.updateValues(t.map(t=>t.email||t.username||t._id))}componentWillLoad(){n(this)}componentDidLoad(){this.value=this.value||[]}onFetchData(t){t.stopPropagation(),this.fetchData.emit(t.detail)}onInputChanged(t){if(t.stopPropagation(),t.detail&&t.detail.length>0){let s=r(h(t.detail));l(s,this)}else l(null,this)}onInputBlurred(t){t.stopPropagation(),this.inputBlurred.emit(t.detail)}onInputFocused(t){t.stopPropagation(),this.inputFocused.emit(t.detail)}onAutoCompleteValidityChanged(t){t.stopPropagation()}renderInput(){return i("yoo-form-autocomplete",{ref:t=>this.formAutocomplete=t,multiple:!0,value:this.value,iconPrefix:"yo-email",entityType:"emails",displayType:"card-list",onFetchData:t=>this.onFetchData(t),onInputChanged:t=>this.onInputChanged(t),onInputBlurred:t=>this.onInputBlurred(t),onInputFocused:t=>this.onInputFocused(t),onValidityChanged:t=>this.onAutoCompleteValidityChanged(t),tags:this.tags,clearable:!0,allowCustomTag:!0,tabindex:this.inputTabIndex})}renderReadonly(){return r([].concat(this.value)).length>0?i("div",{class:"readonly"},[].concat(this.value).map(t=>i("div",{class:"email"},t))):null}renderEditable(){return i("div",{class:"outer-container"},this.renderInput())}render(){return this.readonly?this.renderReadonly():this.renderEditable()}get host(){return e(this)}static get style(){return".iframe-root{top:0;right:0;bottom:0;left:0;position:absolute;color:var(--black);overflow-y:auto;scrollbar-width:none}.iframe-root yoo-app .wrapper{display:-ms-flexbox;display:flex;-ms-flex-direction:row;flex-direction:row;-ms-flex-wrap:wrap;flex-wrap:wrap;height:100%;width:100%}.iframe-root yoo-app .wrapper.center-center{-ms-flex-align:center;align-items:center;-ms-flex-pack:center;justify-content:center;height:100%}.iframe-root::-webkit-scrollbar{display:none}:host .subtitle{color:var(--text-color,#807f83)}:host .readonly{padding:.5rem;padding-left:0;padding-bottom:0}:host(.history) .readonly{padding:0!important}"}};export{d as yoo_form_emailreport};
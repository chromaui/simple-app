import{r as t,c as i,h as s,H as o,g as h}from"./p-0d847530.js";import{t as e,S as n,p as l,q as a,c_ as c,N as r,ak as d}from"./p-384bfcf6.js";import"./p-0f3d65ca.js";import"./p-8cff990b.js";import"./p-0d62bf9d.js";import"./p-d70b188c.js";import"./p-815d6c40.js";const p=class{constructor(s){t(this,s),this.showTooltip=!1,this.showDetail=i(this,"showDetail",7),this.kpiClick=i(this,"kpiClick",7),this.kpiDoubleClick=i(this,"kpiDoubleClick",7),this.kpiLegendItemClick=i(this,"kpiLegendItemClick",7),this.kpiResize=i(this,"kpiResize",7),this.kpiEdit=i(this,"kpiEdit",7),this.kpiEdited=i(this,"kpiEdited",7),this.kpiUpdateColors=i(this,"kpiUpdateColors",7),this.kpiDelete=i(this,"kpiDelete",7),this.kpiDuplicate=i(this,"kpiDuplicate",7),this.kpiCopyToAnotherTab=i(this,"kpiCopyToAnotherTab",7)}async getSVG(t,i,s,o,h=0){return this.kpi?this.kpi.getSVG(t,i,s,o,h):Promise.resolve("")}async toogleToolsPanel(){this.kpi&&this.kpi.toogleToolsPanel()}componentWillLoad(){this.initButtons()}onChangeEditMode(){this.initButtons()}initButtons(){this.buttons=[],this.buttonsResize=[],this.isEditMode&&(this.buttons.push({text:e("EDIT"),icon:"yo-pen",handler:()=>this.onEdit()}),this.buttonsResize.push({icon:"yo-1x",handler:()=>this.onResize(1),cssClass:1===this.size?n():"stable-alt"}),this.buttonsResize.push({icon:"yo-2x",handler:()=>this.onResize(2),cssClass:2===this.size?n():"stable-alt"}),this.buttonsResize.push({icon:"yo-3x",handler:()=>this.onResize(3),cssClass:3===this.size?n():"stable-alt"}),this.buttonsResize.push({icon:"yo-4x",handler:()=>this.onResize(4),cssClass:4===this.size?n():"stable-alt"}),this.buttons.push({text:e("DUPLICATE"),icon:"yo-duplicate",handler:()=>this.onDuplicate()}),this.buttons.push({text:e("COPYTOANOTHERTAB"),icon:"yo-duplicate",handler:()=>this.onCopyToAnotherTab()}),"chart"===this.type&&this.buttons.push({text:e("COLOR"),icon:"yo-theme",handler:()=>this.onUpdateColors()})),"chart"===this.type&&l()&&this.buttons.push({text:e("EXPORTPNG"),icon:"yo-image",handler:()=>this.onExport()}),"chart"!==this.type&&"grid"!==this.type||!l()||this.buttons.push({text:e("EXPORTCSV"),icon:"yo-file-csv",handler:()=>this.onExportCSV()}),"grid"===this.type&&l()&&this.buttons.push({text:e("EXPORTEXCEL"),icon:"yo-file-excel",handler:()=>this.onExportXLSX()}),this.isEditMode&&this.buttons.push({text:e("DELETE"),icon:"yo-delete",type:"delete",handler:()=>this.onDelete()})}onShowDialog(t){this.showDetail.emit(t)}onShowMore(){a(this.buttons)}onEdit(){this.kpiEdit.emit(!0)}onDelete(){this.kpiDelete.emit(!0)}onUpdateColors(){this.kpiUpdateColors.emit(this.config)}onDuplicate(){this.kpiDuplicate.emit(!0)}onResize(t){this.size=t,this.initButtons(),this.kpiResize.emit(t)}onCopyToAnotherTab(){this.kpiCopyToAnotherTab.emit(!0)}onExport(){this.kpi&&this.kpi.export()}onExportCSV(){this.kpi&&this.kpi.exportCSV()}onExportXLSX(){this.kpi&&this.kpi.exportXLSX()}onKpiEdited(t){t.stopPropagation(),this.kpiEdited.emit(t.detail)}onKpiClick(t){t.stopPropagation(),this.kpiClick.emit(t.detail)}onKpiDoubleClick(t){t.stopPropagation(),this.kpiDoubleClick.emit(t.detail)}onKpiLegendItemClick(t){t&&t.stopPropagation&&t.stopPropagation(),t&&t.detail&&this.kpiLegendItemClick.emit(t.detail)}renderKpiContent(){return this.config||this.forceEmptyState?!this.config&&this.forceEmptyState?s("yoo-empty-state",{class:{"absolute small":!0,"header-padding":this.host.classList.contains("header-padding")},type:"nodata"}):[s("div",{class:"kpi-container "+this.type,onClick:()=>this.onShowDialog()},this.renderKpi())]:s("yoo-loader",{class:"absolute lg"})}renderKpi(){let t;return this.config.photos&&this.config.photos.length>0&&(t=this.config.photos[0].value),s("yoo-kpi",{class:{"header-padding":this.host.classList.contains("header-padding")},ref:t=>this.kpi=t,config:this.config,photoSrc:t,type:this.type,isFullScreen:this.isFullScreen,isFullHeight:this.isFullHeight,definition:this.definition,onKpiEdited:t=>this.onKpiEdited(t),onKpiClick:t=>this.onKpiClick(t),onKpiDoubleClick:t=>this.onKpiDoubleClick(t),onKpiLegendItemClick:t=>this.onKpiLegendItemClick(t)})}renderHelpButton(t){let i=e(t);return s("yoo-tooltip",{content:i,placement:"right",coeffMaxWidth:.85,distance:0,options:{trigger:"click",onShow:t=>c(t),onHide:()=>{this.showTooltip&&(this.showTooltip=!1)}}},s("yoo-icon",{class:"yo-help stable-alt"}))}render(){return s(o,{class:Object.assign({web:l(),[this.type||"default"]:!0},d())},s("div",{class:{container:!0,fullscreen:this.isFullScreen,"full-height":this.isFullHeight}},this.isFullScreen||this.hideHeader?null:s("div",{class:"heading"},s("div",{class:"title"},r(this.heading)),this.definition&&this.definition.help&&this.renderHelpButton(this.definition.help),this.isEditMode&&s("yoo-icon",{slot:"icon-only",class:"yo-move text-color"}),this.buttonsResize&&this.buttonsResize.length>0&&this.isEditMode&&l()?s("yoo-context-menu",{contentButtons:this.buttonsResize,class:"inline"},s("div",{class:"icon-container"},s("yoo-icon",{class:"yo-expand-chart text-color"}))):null,this.buttons&&this.buttons.length>0&&(l()?s("yoo-context-menu",{contentButtons:this.buttons},s("div",{class:"icon-container"},s("yoo-icon",{class:"yo-more text-color"}))):s("yoo-icon",{slot:"icon-only",class:"yo-more text-color",onClick:()=>this.onShowMore()}))),s("slot",{name:"start"}),s("div",{class:"content"},this.renderKpiContent()),s("slot",null)))}get host(){return h(this)}static get watchers(){return{isEditMode:["onChangeEditMode"]}}static get style(){return".iframe-root{top:0;right:0;bottom:0;left:0;position:absolute;color:var(--black);overflow-y:auto;scrollbar-width:none}.iframe-root yoo-app .wrapper{display:-ms-flexbox;display:flex;-ms-flex-direction:row;flex-direction:row;-ms-flex-wrap:wrap;flex-wrap:wrap;height:100%;width:100%}.iframe-root yoo-app .wrapper.center-center{-ms-flex-align:center;align-items:center;-ms-flex-pack:center;justify-content:center;height:100%}.iframe-root::-webkit-scrollbar{display:none}:host,:host .container{display:-ms-flexbox;display:flex;-ms-flex:1;flex:1;-ms-flex-direction:column;flex-direction:column;min-height:0}:host .container{width:100%;border-bottom:10px solid var(--stable-ultralight,#fafafa);background:var(--light,#fff)}:host .container.fullscreen{border-bottom:none}:host .container:not(.fullscreen) .content yoo-kpi{pointer-events:none}:host .container .content{position:relative;width:100%}:host .container .content,:host .container .kpi-container{display:-ms-flexbox;display:flex;-ms-flex:1;flex:1;-ms-flex-direction:column;flex-direction:column;min-height:0}:host .container .kpi-container.carousel,:host .container .kpi-container.map{overflow:hidden}:host .container .kpi-container.carousel{border-bottom:1px solid var(--stable-40,hsla(0,0%,67.8%,.4))}:host .heading{display:-ms-flexbox;display:flex;-ms-flex-direction:row;flex-direction:row;padding:.5rem;font-size:var(--font-size-04,1.125rem);text-align:center}:host .heading .title{overflow:hidden;text-overflow:ellipsis;-ms-flex:1;flex:1;white-space:nowrap}:host .heading yoo-icon{margin-top:.2rem;margin-left:1rem}:host(.no-border) .container{border-top:none;border-bottom:none}"}};export{p as yoo_kpi_container};
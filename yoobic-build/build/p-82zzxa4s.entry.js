import{r as t,c as s,h as i,g as e}from"./p-0d847530.js";import{d5 as h,dj as r,t as n}from"./p-384bfcf6.js";import"./p-0f3d65ca.js";import"./p-8cff990b.js";import"./p-0d62bf9d.js";import"./p-d70b188c.js";import"./p-815d6c40.js";const o=class{constructor(i){t(this,i),this.validators=[],this.validityChanged=s(this,"validityChanged",7),this.inputBlurred=s(this,"inputBlurred",7),this.inputFocused=s(this,"inputFocused",7),this.inputChanged=s(this,"inputChanged",7),this.fetchData=s(this,"fetchData",7)}async updateValues(t,s){"users"===s.type&&this.formAutocompleteUsers&&this.formAutocompleteUsers.updateValues(t),"plans"===s.type&&this.formAutocompletePlans&&this.formAutocompletePlans.updateValues(t)}requiredWatch(){this.validate()}componentWillLoad(){h(this)}onUsersSelect(t){t.stopPropagation();let s=this.value||{};t.detail&&t.detail.length>0?s.users=[].concat(t.detail):delete s.users,r(s,this)}onPlansSelect(t){t.stopPropagation();let s=this.value||{};t.detail&&t.detail.length>0?s.plans=[].concat(t.detail):delete s.plans,r(s,this)}onFetchData(t,s){t.detail.type=s,t.stopPropagation(),this.fetchData.emit(t.detail)}onInputBlurred(t){t.stopPropagation(),this.inputBlurred.emit(t.detail)}onInputFocused(t){t.stopPropagation(),this.inputFocused.emit(t.detail)}onAutoCompleteValidityChanged(t){t.stopPropagation()}validate(){let t=!0;return this.required&&(!this.value||!this.value.plans||this.value.plans.length<1||!this.value.users||this.value.users.length<1)&&(t=!1),this.validity&&this.validity===t||(this.validityChanged.emit(t),this.validity=t),this.validity}renderUsers(){return i("yoo-form-autocomplete",{ref:t=>this.formAutocompleteUsers=t,multiple:!0,value:this.value?this.value.users:null,entityType:"users",displayType:"card-list",iconPrefix:"yo-user",onFetchData:t=>this.onFetchData(t,"users"),onInputChanged:t=>this.onUsersSelect(t),onInputBlurred:t=>this.onInputBlurred(t),onInputFocused:t=>this.onInputFocused(t),onValidityChanged:t=>this.onAutoCompleteValidityChanged(t),placeholder:n("ADDUSERS"),isLocal:!1,inputTabIndex:this.inputTabIndex,readonly:this.readonly})}renderReadonly(){return i("div",{class:"readonly"},i("yoo-grid",{direction:"horizontal",entityType:"plans",items:this.value?this.value.plans:null,hideHeader:!0,displayType:"card-sticky"}),this.renderUsers())}renderEditable(){return i("div",{class:"outer-container"},i("yoo-form-autocomplete",{ref:t=>this.formAutocompletePlans=t,class:"margin-bottom",hideSelected:!0,multiple:!0,value:this.value?this.value.plans:null,entityType:"courseselection",displayType:"card-list",previewEntityType:"courseselection",iconPrefix:"yo-courses",values:this.plans,isLocal:!0,onFetchData:t=>this.onFetchData(t,"plans"),onInputChanged:t=>this.onPlansSelect(t),onInputBlurred:t=>this.onInputBlurred(t),onInputFocused:t=>this.onInputFocused(t),onValidityChanged:t=>this.onAutoCompleteValidityChanged(t),placeholder:n("ADDCOURSES"),inputTabIndex:this.inputTabIndex}),this.renderUsers())}render(){return this.readonly?this.renderReadonly():this.renderEditable()}get host(){return e(this)}static get watchers(){return{required:["requiredWatch"]}}static get style(){return".iframe-root{top:0;right:0;bottom:0;left:0;position:absolute;color:var(--black);overflow-y:auto;scrollbar-width:none}.iframe-root yoo-app .wrapper{display:-ms-flexbox;display:flex;-ms-flex-direction:row;flex-direction:row;-ms-flex-wrap:wrap;flex-wrap:wrap;height:100%;width:100%}.iframe-root yoo-app .wrapper.center-center{-ms-flex-align:center;align-items:center;-ms-flex-pack:center;justify-content:center;height:100%}.iframe-root::-webkit-scrollbar{display:none}:host .margin-bottom{display:block;margin-bottom:1rem}"}};export{o as yoo_form_plan_assign};
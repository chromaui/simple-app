import{r as t,c as i,h as s,H as e,g as o}from"./p-0d847530.js";import{b9 as n,t as h}from"./p-384bfcf6.js";import"./p-0f3d65ca.js";import"./p-8cff990b.js";import"./p-0d62bf9d.js";import"./p-d70b188c.js";import"./p-815d6c40.js";import{S as c}from"./p-3fa7ff8b.js";const r=class{constructor(s){t(this,s),this.itemActions=[],this.isSelectionMode=!1,this.selectedItems=[],this.sectionOrderChanged=i(this,"sectionOrderChanged",7),this.itemOrderChanged=i(this,"itemOrderChanged",7),this.selectedItemsChanged=i(this,"selectedItemsChanged",7),this.sectionDeleted=i(this,"sectionDeleted",7)}onDocumentClicked(t){t.composedPath().reduce((t,i)=>i.classList&&i.classList.contains("section-dialog")||t,!1)||this.hideSectionDialog()}async searchFilter(t){t=t||"";const i=new RegExp(t.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),"i"),s=t=>i.test(t);let e=this.sectionEls.map(t=>({sectionEl:t,itemEls:Array.from(t.querySelectorAll(".item"))}));this.sections.forEach((t,i)=>{let o=!1;t.items.forEach((t,n)=>{let h=t.columns&&t.columns.length&&t.columns.reduce((t,i)=>t||s(i.value),!1)||t.title&&s(t.title)||t.text&&s(t.text);o=h||o,e[i].itemEls[n].classList[h?"remove":"add"]("hidden")}),e[i].sectionEl.classList[o?"remove":"add"]("hidden")})}async toggleSelectionMode(){this.isSelectionMode=!this.isSelectionMode,!this.isSelectionMode&&this.selectedItems.length&&(this.selectedItems=[],this.selectedItemsChanged.emit({items:this.selectedItems,isToggling:!1})),this.itemEls.forEach(t=>{t.classList.toggle("selectable"),t.querySelector("yoo-form-radio").state="unchecked";let i=t.querySelector(".radio");if(t.classList.contains("selectable"))try{n.fromTo(i,.2,{width:0,paddingRight:0,paddingLeft:0},{width:"auto",paddingRight:"20px",paddingLeft:"10px"})}catch(t){}else try{n.fromTo(i,.2,{width:"auto",paddingRight:"20px",paddingLeft:"10px",display:"flex"},{width:0,paddingRight:0,paddingLeft:0,display:"flex"})}catch(t){}})}componentDidLoad(){this.initSortable()}componentDidUpdate(){this.sectionSortable&&this.sectionSortable.destroy&&this.sectionSortable.destroy(),this.itemSortables&&this.itemSortables.length&&this.itemSortables.forEach(t=>t.destroy&&t.destroy()),this.initSortable()}get itemsParentEls(){return Array.from(this.host.shadowRoot.querySelectorAll(".items"))}get itemEls(){return Array.from(this.host.shadowRoot.querySelectorAll(".item"))}get sectionsParentEl(){return this.host.shadowRoot.querySelector(".sections")}get sectionEls(){return Array.from(this.host.shadowRoot.querySelectorAll(".section"))}initSortable(){try{this.sectionSortable=new c(this.sectionsParentEl,{handle:".section",group:"sections",animation:150,onEnd:this.getSectionSortableEndEvent()}),this.itemSortables=this.itemsParentEls.map(t=>new c(t,{handle:".item",group:"items",animation:150,fallbackOnBody:!0,swapThreshold:.65,onStart:this.getItemSortableStartEvent(),onEnd:this.getItemSortableEndEvent()}))}catch(t){}}getItemSortableStartEvent(){return()=>{this.onMouseHoverToggle(this.itemsParentEls)}}getSectionSortableEndEvent(){return t=>{const i={indexFrom:t.oldIndex,indexTo:t.newIndex};this.reflectSectionMovement(i),this.sectionOrderChanged.emit(i)}}getItemSortableEndEvent(){return t=>{const i=this.itemsParentEls,s={sectionIndexFrom:i.findIndex(i=>i===t.from),sectionIndexTo:i.findIndex(i=>i===t.to),itemIndexFrom:t.oldIndex,itemIndexTo:t.newIndex};this.onMouseHoverToggle(i),this.reflectItemMovement(s),this.itemOrderChanged.emit(s)}}onMouseHoverToggle(t){t.forEach(t=>{t.querySelectorAll(".item").forEach(t=>t.classList.toggle("no-mousehover"))})}reflectSectionMovement(t){const i=this.sections[t.indexFrom];this.sections.splice(t.indexFrom,1),this.sections.splice(t.indexTo,0,i)}reflectItemMovement(t){let i=this.sections[t.sectionIndexFrom].items[t.itemIndexFrom];this.sections[t.sectionIndexFrom].items.splice(t.itemIndexFrom,1),this.sections[t.sectionIndexTo].items.splice(t.itemIndexTo,0,i),this.updateItemCountBadges()}updateItemCountBadges(){this.sectionEls.forEach((t,i)=>{const s=t.querySelector("yoo-badge.item-count");s&&(s.text=this.sections[i].items.length.toString())})}toggleExpandSectionItems(t){const i=this.sections.findIndex(i=>i===t),s=this.sectionEls;if(-1===i||!s||!s[i])return;const e=s[i];if(!e)return;const o=e.querySelector(".expand"),h=e.querySelector(".items");if(h){if(e.classList.contains("closed")){try{n.set(h,{height:"auto",paddingBottom:"15px"}),n.from(h,.2,{height:0})}catch(t){h.style.display="block"}o.classList.replace("yo-down","yo-up")}else{try{n.to(h,.2,{height:0,paddingBottom:0})}catch(t){h.style.display="none"}o.classList.replace("yo-up","yo-down")}e.classList.toggle("closed")}}onRadioClicked(t,i){"checked"===t.detail&&this.onItemSelected(i),"unchecked"===t.detail&&this.onItemUnselected(i)}showSectionDialog(t,i){if(this.selectedDialogSection!==i){this.selectedDialogSection=i;const s=t.target;this.selectedDialogItemEls=Array.from(s.parentElement.parentElement.querySelectorAll(".item")),this.dialogEl.style.top=`${s.offsetTop+s.clientHeight}px`,this.dialogEl.classList.remove("hidden");try{n.set(this.dialogEl,{height:"auto"}),n.from(this.dialogEl,.2,{height:0})}catch(t){}t.stopPropagation()}else this.hideSectionDialog()}hideSectionDialog(){this.selectedDialogSection=null,this.selectedDialogItemEls=null,this.dialogEl&&this.dialogEl.classList.add("hidden")}onSectionSelectAllItems(){this.selectedDialogSection&&this.selectedDialogItemEls&&(this.selectedDialogSection.items&&this.selectedDialogSection.items.length&&(this.selectedDialogSection.items.forEach(t=>{this.selectedItems.includes(t)||this.selectedItems.push(t)}),this.selectedItemsChanged.emit({items:this.selectedItems,isToggling:!0})),this.isSelectionMode||this.toggleSelectionMode(),this.selectedDialogItemEls.length&&this.selectedDialogItemEls.forEach(t=>{t.querySelector("yoo-form-radio").state="checked"}),this.hideSectionDialog())}onItemSelected(t){this.selectedItems.push(t),this.selectedItemsChanged.emit({items:this.selectedItems,isToggling:!1})}onItemUnselected(t){let i=this.selectedItems.indexOf(t);-1!==i&&(this.selectedItems.splice(i,1),this.selectedItemsChanged.emit({items:this.selectedItems,isToggling:!1}))}onSectionDelete(){this.selectedDialogSection&&(this.sectionDeleted.emit(this.selectedDialogSection),this.hideSectionDialog())}renderHeaders(){return s("div",{class:"headers"},this.headers.map(t=>s("div",null,h(t))))}renderSection(t){return s("div",{class:"section"},s("div",{class:"section-title"},s("yoo-badge",{class:"item-count large text-color round",text:t.items.length.toString()}),s("div",{class:"title"},t.title),s("yoo-icon",{class:"section-dialog yo-more-circle",onClick:i=>this.showSectionDialog(i,t)}),s("yoo-icon",{class:"expand yo-up",onClick:()=>this.toggleExpandSectionItems(t)})),s("div",{class:"items"},t.items.map(t=>this.renderSectionItem(t))))}getItemMouseEnterAction(){return function(){this.classList.add("mousehover")}}getItemMouseLeaveAction(){return function(){this.classList.remove("mousehover")}}renderSectionItem(t){return s("div",{class:"item",onMouseEnter:this.getItemMouseEnterAction(),onMouseLeave:this.getItemMouseLeaveAction()},s("div",{class:"radio"},s("yoo-form-radio",{class:"large stable-to-danger-light",onRadioClicked:i=>this.onRadioClicked(i,t)})),s("div",{class:"lesson-container"},s("div",{class:"title-container"},s("div",{class:"title ellipsis-2"},t.title),s("div",{class:"description ellipsis-2"},t.text)),s("div",{class:"info-container"},t.columns&&t.columns.map(t=>this.renderSectionItemColumn(t)))),this.renderItemActions(t))}renderSectionItemColumn(t){return s("div",{class:"column"},t.icon&&s("yoo-icon",{class:t.icon}),s("div",{class:"value"},t.value))}renderItemActions(t){if(t&&this.itemActions&&this.itemActions.length)return s("div",{class:"item-actions"},this.itemActions.map(i=>this.renderItemActionButton(i,t)))}renderItemActionButton(t,i){return s("yoo-tooltip",{content:h(t.text),cssOnly:!0,placement:"top"},s("div",{class:"icon-container danger-hover",onClick:()=>t.handler(i)},s("yoo-icon",{class:t.icon})))}render(){if(this.sections&&this.sections.length)return s(e,null,this.headers&&this.headers.length&&this.renderHeaders(),s("div",{class:"sections"},this.sections.map(t=>this.renderSection(t))),s("div",{class:"dialog section-dialog hidden",ref:t=>this.dialogEl=t},s("ul",{class:"menu"},s("li",{onClick:()=>this.onSectionSelectAllItems()},s("yoo-icon",{class:"yo-select-all"}),h("SELECTALLLESSONS")),s("li",{onClick:()=>this.onSectionDelete()},s("yoo-icon",{class:"yo-delete"}),h("DELETE")))))}get host(){return o(this)}static get style(){return".iframe-root{top:0;right:0;bottom:0;left:0;position:absolute;color:var(--black);overflow-y:auto;scrollbar-width:none}.iframe-root yoo-app .wrapper{display:-ms-flexbox;display:flex;-ms-flex-direction:row;flex-direction:row;-ms-flex-wrap:wrap;flex-wrap:wrap;height:100%;width:100%}.iframe-root yoo-app .wrapper.center-center{-ms-flex-align:center;align-items:center;-ms-flex-pack:center;justify-content:center;height:100%}.iframe-root::-webkit-scrollbar{display:none}:host .headers{display:-ms-flexbox;display:flex;padding:0 var(--padding-40,2.5rem)}:host .headers div:first-child{-ms-flex:3;flex:3;padding-right:var(--padding-25,1.5625rem)}:host .headers div{-ms-flex:2.333;flex:2.333;padding-left:var(--padding-10,.625rem);font-size:var(--font-size-03,1rem);font-weight:var(--font-weight-03,700)}:host .sections .section{margin:var(--padding-20,1.25rem);border-radius:var(--border-radius-input,5px);background-color:var(--stable-light-40,hsla(0,0%,94.5%,.4))}:host .sections .section.hidden{display:none}:host .sections .section.sortable-drag .section-title,:host .sections .section.sortable-ghost .section-title{border-radius:var(--border-radius-input,5px)}:host .sections .section.sortable-drag .section-title yoo-icon,:host .sections .section.sortable-ghost .section-title yoo-icon{opacity:0}:host .sections .section.sortable-drag .items,:host .sections .section.sortable-ghost .items{display:none}:host .sections .section.sortable-drag .section-title{border:solid 2px var(--danger-light,#f46885);background-color:var(--light,#fff)}:host .sections .section.sortable-ghost .section-title{border:solid 2px var(--stable-alt,#d0d0d0);border-style:dashed;background-color:var(--stable-light-40,hsla(0,0%,94.5%,.4))}:host .sections .section.sortable-ghost .section-title .title,:host .sections .section.sortable-ghost .section-title yoo-badge{opacity:0}:host .sections .section .section-title{display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center;padding:var(--padding-10,.625rem)}:host .sections .section .section-title .title{padding-left:.5rem;color:var(--text-color,#807f83);font-size:var(--font-size-03,1rem)}:host .sections .section .section-title yoo-icon{padding:0 var(--padding-10,.625rem);color:var(--text-color,#807f83)}:host .sections .section .section-title yoo-icon.yo-more-circle{margin-left:auto}:host .sections .section .items{padding-bottom:var(--padding-15,.9375rem);overflow:hidden}:host .sections .section .items .item{display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center;padding:var(--padding-10,.625rem);overflow:hidden}:host .sections .section .items .item.hidden{display:none}:host .sections .section .items .item.selectable .radio{display:-ms-flexbox;display:flex;padding:0 var(--padding-20,1.25rem) 0 var(--padding-10,.625rem)}:host .sections .section .items .item.sortable-drag .radio,:host .sections .section .items .item.sortable-ghost .radio{opacity:0}:host .sections .section .items .item.sortable-drag .lesson-container{border:solid 2px var(--danger-light,#f46885)}:host .sections .section .items .item.sortable-ghost .lesson-container{border:solid 2px var(--stable-alt,#d0d0d0);border-style:dashed;background-color:var(--stable-light-40,hsla(0,0%,94.5%,.4))}:host .sections .section .items .item.sortable-ghost .lesson-container .info-container,:host .sections .section .items .item.sortable-ghost .lesson-container .title-container{opacity:0}:host .sections .section .items .item .radio{display:none;overflow:hidden}:host .sections .section .items .item .lesson-container{display:-ms-flexbox;display:flex;-ms-flex:1;flex:1;-ms-flex-align:center;align-items:center;border:solid 1px var(--stable-light,#f1f1f1);border-radius:var(--video-border,8px);background-color:var(--light,#fff)}:host .sections .section .items .item .lesson-container .title-container{-ms-flex:3;flex:3;padding:var(--padding-20,1.25rem)}:host .sections .section .items .item .lesson-container .title-container .title{font-size:var(--font-size-04,1.125rem)}:host .sections .section .items .item .lesson-container .title-container .description{color:var(--text-color,#807f83);font-size:var(--font-size-03,1rem)}:host .sections .section .items .item .lesson-container .info-container{display:-ms-flexbox;display:flex;-ms-flex:7;flex:7}:host .sections .section .items .item .lesson-container .info-container .column{display:-ms-flexbox;display:flex;-ms-flex:1;flex:1;-ms-flex-align:baseline;align-items:baseline}:host .sections .section .items .item .lesson-container .info-container .column .value{padding-left:var(--padding-10,.625rem);font-size:var(--font-size-04,1.125rem)}:host .sections .section .items .item .item-actions{display:none}:host .sections .section .items .item.mousehover:not(.selectable):not(.sortable-drag):not(.sortable-ghost):not(.no-mousehover) .lesson-container{background-color:var(--danger-light-20,rgba(244,104,133,.2))}:host .sections .section .items .item.mousehover:not(.selectable):not(.sortable-drag):not(.sortable-ghost):not(.no-mousehover) .item-actions{display:-ms-flexbox;display:flex;position:absolute;-ms-flex-align:center;align-items:center;-ms-flex-pack:end;justify-content:flex-end;width:calc(100% - 3.75rem);padding:var(--padding-20,1.25rem) 0}:host .sections .section .items .item.mousehover:not(.selectable):not(.sortable-drag):not(.sortable-ghost):not(.no-mousehover) .item-actions yoo-tooltip{margin-right:var(--padding-5,.3125rem)}:host .sections .section .items .item.mousehover:not(.selectable):not(.sortable-drag):not(.sortable-ghost):not(.no-mousehover) .item-actions yoo-tooltip .icon-container{display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center;-ms-flex-pack:center;justify-content:center;width:var(--padding-30,1.875rem);height:var(--padding-30,1.875rem);border-radius:50%;-webkit-box-shadow:0 5px 13px 0 rgba(40,47,54,.08);box-shadow:0 5px 13px 0 rgba(40,47,54,.08)}:host .sections .section .items .item.mousehover:not(.selectable):not(.sortable-drag):not(.sortable-ghost):not(.no-mousehover) .item-actions yoo-tooltip .icon-container:hover{background-color:var(--danger-light,#f46885)}:host .sections .section .items .item.mousehover:not(.selectable):not(.sortable-drag):not(.sortable-ghost):not(.no-mousehover) .item-actions yoo-tooltip .icon-container:hover yoo-icon{color:var(--light,#fff)}:host .sections .section .items .item.mousehover:not(.selectable):not(.sortable-drag):not(.sortable-ghost):not(.no-mousehover) .item-actions yoo-tooltip:last-child{margin-right:var(--padding-20,1.25rem)}:host .dialog{position:absolute;right:0;margin:.375rem var(--padding-10,.625rem) 0 0;border-radius:.25rem;background-color:var(--light,#fff);-webkit-box-shadow:0 5px 13px 0 rgba(40,47,54,.08);box-shadow:0 5px 13px 0 rgba(40,47,54,.08);overflow:hidden}:host .dialog.hidden{display:none}:host .dialog.not.hidden{display:block}:host .dialog .menu{list-style-type:none;margin:var(--padding-10,.625rem) 0;padding-right:var(--padding-25,1.5625rem);padding-left:var(--padding-10,.625rem);font-size:var(--font-size-02,.875rem)}:host .dialog .menu .yo-delete{padding-right:var(--padding-10,.625rem)}.ellipsis-2{display:-webkit-box;text-overflow:ellipsis;overflow:hidden;-webkit-line-clamp:2;-webkit-box-orient:vertical}"}};export{r as yoo_section_list};